<!DOCTYPE html>
<html data-html-server-rendered="true" lang="en" data-vue-tag="%7B%22lang%22:%7B%22ssr%22:%22en%22%7D%7D">

<head>
  <title>Unreal C++ Creating a Zombie AI - Robert Corponoi</title><meta name="gridsome:hash" content="47d7bfa9cc677b08964215c6823fc4fdd52ee50c"><meta data-vue-tag="ssr" charset="utf-8"><meta data-vue-tag="ssr" name="generator" content="Gridsome v0.7.23"><meta data-vue-tag="ssr" data-key="viewport" name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover"><meta data-vue-tag="ssr" data-key="format-detection" name="format-detection" content="telephone=no"><meta data-vue-tag="ssr" data-key="description" name="description" content="My Blog"><meta data-vue-tag="ssr" name="description" content="Learn how to create an Zombie that roams, chases, and attacks the player"><link data-vue-tag="ssr" rel="icon" href="data:,"><link data-vue-tag="ssr" rel="icon" type="image/png" sizes="16x16" href="/assets/static/favicon.ce0531f.bd9c2d4c76737c8e645df615f326643d.png"><link data-vue-tag="ssr" rel="icon" type="image/png" sizes="32x32" href="/assets/static/favicon.ac8d93a.bd9c2d4c76737c8e645df615f326643d.png"><link data-vue-tag="ssr" rel="icon" type="image/png" sizes="96x96" href="/assets/static/favicon.b9532cc.bd9c2d4c76737c8e645df615f326643d.png"><link data-vue-tag="ssr" rel="apple-touch-icon" type="image/png" sizes="76x76" href="/assets/static/favicon.f22e9f3.bd9c2d4c76737c8e645df615f326643d.png"><link data-vue-tag="ssr" rel="apple-touch-icon" type="image/png" sizes="152x152" href="/assets/static/favicon.62d22cb.bd9c2d4c76737c8e645df615f326643d.png"><link data-vue-tag="ssr" rel="apple-touch-icon" type="image/png" sizes="120x120" href="/assets/static/favicon.1539b60.bd9c2d4c76737c8e645df615f326643d.png"><link data-vue-tag="ssr" rel="apple-touch-icon" type="image/png" sizes="167x167" href="/assets/static/favicon.dc0cdc5.bd9c2d4c76737c8e645df615f326643d.png"><link data-vue-tag="ssr" rel="apple-touch-icon" type="image/png" sizes="180x180" href="/assets/static/favicon.7b22250.bd9c2d4c76737c8e645df615f326643d.png"><link rel="preload" href="/assets/css/0.styles.5f7ee5ed.css" as="style"><link rel="preload" href="/assets/js/app.1b9cc82c.js" as="script"><link rel="preload" href="/assets/js/page--src-templates-post-vue.ed68cdd5.js" as="script"><link rel="prefetch" href="/assets/js/page--node-modules-gridsome-app-pages-404-vue.908abdee.js"><link rel="prefetch" href="/assets/js/page--src-pages-contact-vue.c872c1ab.js"><link rel="prefetch" href="/assets/js/page--src-pages-index-vue.f7a8b6be.js"><link rel="prefetch" href="/assets/js/page--src-templates-tag-vue.23efd461.js"><link rel="stylesheet" href="/assets/css/0.styles.5f7ee5ed.css"><noscript data-vue-tag="ssr"><style>.g-image--loading{display:none;}</style></noscript>
</head>

<body >
  <script>
    /**
     * Add dark/light mode detection that runs before Vue.js loads. Borrowed
     * from overreacted.io
     */
    (() => {
      window.__onThemeChange = () => { };

      /**
       * Changes the theme by changing a data-attribute on the body.
       * 
       * @param {string} newTheme The new theme to change to.
       */
      const setTheme = (newTheme) => {
        window.__theme = newTheme;
        preferredTheme = newTheme;

        document.body.setAttribute('data-theme', newTheme);
        window.__onThemeChange(newTheme);
      };

      // Get the existing theme from the local storage, if there is one.
      const preferredTheme = localStorage.getItem('theme');
      if (!preferredTheme) return;

      /**
       * Calls `setTheme` to change the data attribute on the body to adjust
       * for the new theme and then it sets it to the local storage so that
       * next time the user visits the page the theme is remembered.
       * 
       * @param {string} newTheme The new theme to change to.
       */
      window.__setPreferredTheme = (newTheme) => {
        setTheme(newTheme);
        localStorage.setItem('theme', newTheme);
      };

      // Check to see if we should be in dark mode automatically by the user's
      // preferred color theme.
      const darkQuery = window.matchMedia('(prefers-color-scheme: dark)');
      darkQuery.addListener(e => {
        // Change the theme if the user prefers one or the other automatically.
        window.__setPreferredTheme(e.matches ? 'dark' : 'light')
      });

      setTheme(preferredTheme || (darkQuery.matches ? 'dark' : 'light'));
    })();
  </script>
  <div id="app" data-server-rendered="true"><nav class="navbar"><div class="container"><a href="/" class="navbar__logo">RC</a><span id="navbar-toggle" class="navbar__toggle"><div id="nav-icon" class="nav-icon"><div></div></div></span><ul id="navbar-main" class="navbar__main hide"><li><a href="/tag/game-development" class="navbar__links">Game Development</a></li></ul></div></nav><div class="header"><button role="button" aria-label="Toggle dark/light" class="toggle-theme"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-moon"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path></svg></button></div><main class="main"><div class="post container"><div class="post__header"><h1 class="post__title">Unreal C++ Creating a Zombie AI</h1><div class="post-meta post__meta">
  30. August 2020
  <strong>43 min parse.</strong></div><img alt="Cover image" src="data:image/svg+xml,%3csvg fill='none' viewBox='0 0 860 476' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-ec163d2e2f85e78eac8f5adcef7fdfc7'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='10'/%3e%3c/filter%3e%3c/defs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-ec163d2e2f85e78eac8f5adcef7fdfc7)' width='860' height='476' xlink:href='data:image/png%3bbase64%2ciVBORw0KGgoAAAANSUhEUgAAAEAAAAAjCAYAAAAkCQwqAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAPkUlEQVRo3m2a2XNc1RHG579L8ZCkggvwIskarZY0kmY0Gs2MRjPaN8uyLdsYG0LAUEBYKoQlpAgxW1IEkgISINiWwZZ3eRc7eer0r8/pOyPBw6kr37n3nNNff/1197lOXbl6V65cuytXr20k49o64ysb69fr4/rNb%2bSGji%2b%2bvCwXLl6XW7e/k2dfeEP6h2ZlcHhO9vTXpKt3THoHJ6U3O2XXlraCNKeHJd1VlqHSXhkdPyS16QelWFmWrL5TGT8o83sfkUdPvCS/f/4v8sdX3pXXXn9PXv/r%2b/L39z6Rj/69KmfO6nqXbsnFSzfl0uVbtr8bN76W23e%2bk7sbP8j1Gxt6/6ZcvnJLzqyuyeenzuk%2bv412hOG2YSs2X756R5%2b/Iyn%2bMBCuAsLdLSDUgcDwK/rsmdULCsaGrF24KcsrJ9ToCRkqLuhYlM6eirR2jtjIKADl2kGpTByya%2b/AhHT2VqS7ryp9%2bltuZMGe6dH7XXovMzQjA/k5yRYWpDszLs0KXLqrJO3dozKiYE3MHpO5pUd1zScMsP2HTsixR56Tp555TQH7h7z1zkfy3vufyaefnZOzX1wyoNavf70FhGCj22sA%2bD%2bu/KzxG%2bZ5jF%2b7cN2Mv3P3e/XKWckV5uSBpgFp7RiRPZmaDJeXkoHnuzNqqF4xMluYNwC4BwgAUKweUHAOy9jkYenPTUu6syjte8rSoSOvTCnp78wFUMwHUMYsHW3dZQVoWHa05GSnjt7BaQMOJi4dOGGGAcK6ssTtMdu2gHBZR6pu/N3kocR4nQAAzirlvzx3RTa%2b%2btGQzhf3qufH1WMzZlBGDciNzOv9RdswhgBMS/uwhQTGjE6sGBsCQBMyXJpVQ0oJGwbzszYPBjJXYXSfjIztl6IO1tjdXpDdHQW7wjZYBTMYhF6bsoXnWjtLtkdCAqex/6uJfVsYcPVOIwANKOm4fuMbRfK2nDqzpg/fllt3vrd4B2k2x8bYPBtqacvbYAP58l7zICOrLOkZGFfPzKhGzNrGMbJvsCblclU3XbA5YIGNqSM2N2yw0VVURozaewx0hrl4J5Obsr9hF85oUUYA0AO7%2bmV67iFz4JnVixYG7ly39YqF/Z16CGyOfRU79fz5tXU5feaCCd1FFaCFfb%2bVpnQ%2bieMB9RiU7ugZNY8z2CTAlGoHQtyrp2GBeU4H75X1t5GxZX1u2ZjBMwwMYk6Gi6nPW1AvM1/JwuaQGbxrd9ZAb0oPmfdZGzACQNPy4cerJtSbWbARjQ/xnzDgahw8CHLED7SH8h7v9%2b3o07gbsgXZIFQ2murmhtXrDgQbBxgMIbaJfZ7v1N%2bHSouaBVbUkP1q0IqxJY1oKjgIJyDBGozEWMCESV19YU7mMR0w4RwzdsAU3oVhPMueENPfPfGy3Lz1jTmxEYCfimC8AVVQztOn1xS5G/LVV/%2bTt9/9yFBFdFi8XWOWhUGbxQABo7jfrMDgbbwCECOVfea1sqa5seqy5LLj0trUKzvubZHh4pwaGEKkf0hDIjsZvK5zuwC6bgAwwFiY6fw4ADAAh/V5nv3ALg8ZnJFRFvz31AVlwHpkwdcx021mQcporwidO38tQQvaP/%2bHkzG/zwdDVfigP4bu1o2AOguBfJ%2bp9HgSEhjmHuzqn5a21rx0d%2bSlY2eXLE0qMOV5ZYKyQcMBRowqSFwxljVgEYCg/ISGA8RvbdEJw6OBgc5CntvZMig7NTSaWnOybXuvPPr4i1orfK92rf1EDD39p0ABsVg9e8keJt4PP/SM5XfUGXShM%2biyAB4ABK7QkcWLUa3xOBsxRdaagE139IzJL3%2bzR%2b75VacypSLHH3xM8nlqgjHzsAGgV0SQtQCWtaA2nsdYNMUBZT2yBCwzsPocrHG75yG1S0EgVL48v656di3RAryfpEEYgMojeBtK%2bY//84WmsgW5b2cmKWhYIOTekhpWTGIVr/imgvAdNM%2bzAZ7jef4m9vl9d3dNtj3QL9mWPVLOK2MGgzag6KRTiinYBItYEwCZB8MAyUQwiiteZx8t7fkwNDyadeAodIWwZXRrffLyq%2b9axXjqdJ0FDkKoBDXV3d34Ud44%2bYF6qKxi16vezcmO5gGjEhu0tFbea2JHOLioocZ4nPSUVy2gIHLlhgWAwP2qprfa9BGrEwrdw1LIT1modMTCp8PVXg3jWYwENP4dlH3awAUkL7Ys51t2GbaQdHHmHdcnwnd28WFLfefOXTVHOwtcCFNUeU8%2b/arcvysj9%2b/s0xga1AprwAQHz7jIcIV%2bpBlbOKY3o6wOwiVsfDnZBO9z38OEWMdA7uNdQMTTXBExPO01QUVHVXsGjOZZhLYtDgADGMCFNTjBwkAdwn1ChHXZAyC8/bePVde%2bNRZ4SewgpI4ef1YnHQ3UI/cqC0CV3OwaUIiCg/Ge19MNNOc%2bqQsDuGIADQ%2be2xqr/brZEQNoMckCoViaVnDCewyAGp85GuK9u2QgBdaMJnk/pNS6PuB1wGJ/XHmeinROWeBNXCMLrA4gTrwAAT3Q9AKDiWxxNQAjTdQSigc9QGgwujIZh/5djRVdKJrG4qiaEXh/YvYhM65xEF6APmDV3ZyFC0ZZLPcF59ja3UHottYLzjIcyf53x5SMNjRpFqKzpC44dfp8woDLl29LitKUAQB4Yldr1sKA%2bAcE1BRDvcrz2AwxNmfNDr%2bR971SYzAXHuiK3scIgOAZDHZPM8Znj5pBzhSM9UIHIGAUxRPrhqwUQLI0WAllebEashB2NMeagfKYcN2uTdu%2bA49pI/eDFXmkfCpeQEj1m/EzhhyGu/Ge6hqNd5RRY4wMKS92cTGOicMQNvuMvswNSEb/oeD9ybljNia0Znc22DPKRp7zAQiEH7/DKh%2b1RBtKEeQAMKDDIv7mvrFUQwBASKtUtTdufm0sSJoho6kZnzXl92ICJnhpiuEJ0iZmK3aY4RswIeut2JW5AMcNC9cQ01av63uwB49WNP9jTKjva/Zu4wAA1q7p%2b4k4Ro0BmPYYEm1WN8SSuqMQGblsIogTArvG5PEnX7aMR83jLEgheKS6PjvBqffsTMq/vdKCYqVYuWFA6N3rxluM6t8sGigePGUxPhvinDXwjnk6E4oXNIQNV6zs3ZcUXrCL32meALFRHBk4wsreqEntsU5xe5ir8YyCeccUvNUvrlgm%2bPzU%2bVAHZGIIkE5AK%2bTa0IC4CPI3hQ9IMhkbIwN4zu%2bICg1gTtHEeB3QHY9bM8PBho9YDAHw9MLDSWgwxqPXEcHQ6NR1JhRGB5JiKd0%2bJOl0VlkQ0nJnT9kY4m15PqbxTG5GXnz57YQFX2ptkAp9dRBBRA0A8Cg6EBqQfJLzGWyGTRRiKjMhxFsa%2b2ywkfoW5/EKeKGbqwPQEweG%2brONA%2bbgTRdHv8JS3qdLzQ3WZGhgTLI92pvs7pdtu9QZ/Vq/jMxIsbJoV/YZaoI5mZo/JmsXb5oAwoKUHywAAHkfihL/rqRe7BBbbD40LyuW8sY0b3u%2bxosYA5hDsfih8AkxvmIAubjxtxvP%2bs6SrQDwLszrjuKYlMnoDQ1RYVYqxRk5ePAROao9xvz0Qbnn3qx0jr0iHaWXpGn0TRlafE071qWkXabBe%2bPkPy0jrJ69HEKgfrJSC8bT8DQAwOiINb21uLWDSdFjQKgHzVM9MY3FtOcehy2AAS0B2WOc3wk76D81f/wnIAAAfYhrhokj9UTvqPTkF1STtGxWo2oK8NTUAVlcfFCau%2bZk5%2bDT8uuup%2bUXe/4k6YmTktZCDzYj2i3tBZnS7JN0g1Z8xDRICWxpMALQWO76OVzd%2bJWk6PHa3A4torfQCfc0z0wtHDcj3VC8DnAhtS7bfDznIcNz6ABzOAMMBOoJvXZqez2s1K5MqiBq6OUHq5Lrr8iwNlqFUQ1NvWJsUyvda3Cq1TY6drRk5a13PrTqMLW9KWNCwqTtsbTF85z%2bNEcNgCHhSGp/csgR6vZY9Ogm/SSoDkI4H8DDdS2o1wDEIp63sMtUDSjo7o0PQgw4sMVPmRP66%2bhQwcuqweXKXinRfwwp03Ljmq6X7F2EjzPH5nTQsubYxvP3fdrzzO09bueeKTweFD40EAz%2bhhUh/oIRbMbToFd7eIxnSX%2bh0qtuYgGgAtjk/LFNBVBSCOk9QrAnZoQeOz4LWsFcrg%2bs4wcm6IuV5cqwgeyElAvTUlTjSyNzUlLjQzMWehcAc6MbGcB5Is794F%2bfewjEXkBVMqTCxSSNkO4QQNIdhpnIaabwytBKVoqhBoV2492AxriuM%2bC4hYAfijZmh94IBHva2jPUYlFFTh9WI/eoHmT6q0r5cKYQzgWXIntmYklfH65x27b3yOGjT2kpPDS9KQ3iUZ8Iw0DKDy299W1LjqsXLPUBGl4JVK3FYmrMvBBi%2behPFJ77gIihbnzIDOM2AJv9eN9QnQ4FUKgIg/DibWvMOAnqKiYdajicDZrUGUtiQtn7HLTuAQ19yuOYBTYDgPF4EcQ29f1xAdSU30MYHLbNsUk2BVUxLICzbPfI5%2bb5%2bTiiFsA0A6DBcB9snr00Nk4GwFQdAOoRmId2mX7Fkphq0A9Q/XuEnxswLwBhE783AOAfLxbswa2pMAEgnvQgNEELVpJU6FUgHkYvXNzCl6PAllAbHEniP4SMZ4zNAMCsrY1QOCw5lHxzJOy8DG7rLiZM9ZNktCR8pAk9AQNbg7hObAVgzn6wI6akEtwMAFeMajzN9QYlfN0JhxrM54cgHhb1s/0JW8tELdb%2bnCw3PksI4YwAwOFNzZAfvgAA76TjiVHYY2AAYYsTAQUgWQ8He8jbd0u1PdWXpXqbMhEBJTv91ThJGLClHuB38v7P1QTOAtKkFy1udH2MGzBsyDNBo9J7sYSewDL7rSHEPMwcANji8Z%2bOzVBr8h0hb%2bnczw/sE10Em2MA9pLqz01aZbUnw7e6EW2J%2b1Us6mcCjWHAldTYWBPAAgfAUyMGhKqwDkIYoZjpirT0ao%2bCx1W%2b8bQoADERPrzaB5P6WYSfH7IfP6Jzsa5/RAmq39NfS9jttYY3Y6k33/pAnnvhz7Jy%2bIQM5CZkd1vOiodQPREGCGHIpSH2l8KhCJupHrCuLPw/gJXknB9kt5bFXX2be33eazwVaoxx%2b3v6iG24sdu0Q5dMNfngCkAY5KHpxsMCL3x2KZsJC0AMxs8kBydcU3wO%2b%2bTT1dAenl%2bXp57WRqJrWNo6hhIkW9r4GpSTrp5iOBKLhyP%2bidoPJ0NqCn261wfdmVoEopocd7E4z%2bPtRvG0jKGeJ4QCADPhxEfftbZc303HE6h0PPwMn9MX4ofYvN3zb5iELoxujd8x7HQqnjPwb1Ll/wHPg3E0mZT6IgAAAABJRU5ErkJggg==' /%3e%3c/svg%3e" width="860" data-src="/assets/static/main.07cc2b7.7e8c19927233dfe4043889962a6d211b.png" data-srcset="/assets/static/main.a67b0b2.7e8c19927233dfe4043889962a6d211b.png 480w, /assets/static/main.07cc2b7.7e8c19927233dfe4043889962a6d211b.png 860w" data-sizes="(max-width: 860px) 100vw, 860px" class="post__image g-image g-image--lazy g-image--loading"><noscript><img src="/assets/static/main.07cc2b7.7e8c19927233dfe4043889962a6d211b.png" class="post__image g-image g-image--loaded" width="860" alt="Cover image"></noscript></div><div class="post__content"><h2 id="table-of-contents"><a href="#table-of-contents" aria-hidden="true"><span class="icon icon-link"></span></a><strong>Table of Contents</strong></h2>
<ul>
<li><a href="#overview">Overview</a></li>
<li><a href="#bulletactor">BulletActor</a></li>
<li><a href="#playercharacter">PlayerCharacter</a></li>
<li><a href="#zombiecharacter-setup">ZombieCharacter Setup</a></li>
<li><a href="#adding-a-stimuli-source-to-the-playercharacter">Adding a Stimuli Source to the PlayerCharacter</a></li>
<li><a href="#zombieaicontroller-perception">ZombieAIController Perception</a></li>
<li><a href="#implementing-the-idle-and-roam-states">Implementing the IDLE and ROAM states</a></li>
<li><a href="#implementing-the-chase-and-attack-states">Implementing the CHASE and ATTACK states</a></li>
<li><a href="#implementing-the-dead-state">Implementing the DEAD state</a></li>
<li><a href="#conclusion">Conclusion</a></li>
</ul>
<h2 id="overview"><a href="#overview" aria-hidden="true"><span class="icon icon-link"></span></a><strong>Overview</strong></h2>
<p>In this tutorial we'll be taking a look at how to make a Zombie AI that roams, chases, and attacks the player. Let's take a look at the classes we'll need to make this happen.</p>
<ul>
<li><strong>BulletActor</strong> - The BulletActor is the projectile that gets shot from the PlayerCharacter's gun and is used when we go over killing the zombie.</li>
<li><strong>PlayerCharacter</strong> - The PlayerCharacter is going to be the Character from the Unreal FPS demo that we'll expand on.</li>
<li><strong>ZombieCharacter</strong> - This is going to be the Character of each individual zombie.</li>
<li><strong>ZombieAIController</strong> - This is going to be the AIController used to decide the movements and actions of the zombie.</li>
</ul>
<p>To start off let's get into the PlayerCharacter.</p>
<h3 id="bulletactor"><a href="#bulletactor" aria-hidden="true"><span class="icon icon-link"></span></a><strong>BulletActor</strong></h3>
<p>Before we get into the PlayerCharacter, since this will be a first person shooter character, we'll need to create the class for the bullet that gets shot out of the PlayerCharacter's gun. We need to create this first as the PlayerCharacter will have a reference to the BulletActor.</p>
<p>Let's see what the BulletActor will need:</p>
<ul>
<li>Create a <code>UStaticMeshComponent</code> so we can assign the BulletActor a mesh.</li>
<li>Since the shape of the bullet will be a sphere we need a <code>USphereComponent</code> to act as a sphere collider.</li>
<li>To make bullet physics easier we'll use a <code>UProjectileMovementComponent</code> to manage the bullet's position after being shot.</li>
<li>We have to create the method that gets called when the the bullet has made contact with another component.</li>
</ul>
<p>So now that we know what we need to accomplish let's go ahead and create a new C++ class with a base parent of Actor and name it BulletActor. I also placed mine in a new folder named Player since it's only used by the PlayerCharacter so it helps me keep the workspace cleaner.</p>
<p>Now let's define all of the things we discussed above in the BulletActor's header:</p>
<p><strong>BulletActor.h</strong></p>
<pre class="language-cpp"><code class="language-cpp"><span class="token macro property">#<span class="token directive keyword">pragma</span> once</span>

<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"CoreMinimal.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"GameFramework/Actor.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"BulletActor.generated.h"</span></span>

<span class="token comment">/**
 * The BulletActor is the projectile that's shot out of the PlayerCharacter's gun.
 */</span>
<span class="token function">UCLASS</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">class</span> <span class="token class-name">ZOMBIEHORDEAI_API</span> ABulletActor <span class="token operator">:</span> <span class="token keyword">public</span> AActor
<span class="token punctuation">{</span>
	<span class="token function">GENERATED_BODY</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	
<span class="token keyword">public</span><span class="token operator">:</span>	
	<span class="token comment">// Sets default values for this actor's properties.</span>
	<span class="token function">ABulletActor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">// The static mesh of the BulletActor.</span>
	<span class="token function">UPROPERTY</span><span class="token punctuation">(</span>VisibleAnywhere<span class="token punctuation">,</span> BlueprintReadOnly<span class="token punctuation">,</span> Category <span class="token operator">=</span> Bullet<span class="token punctuation">)</span>
	<span class="token keyword">class</span> <span class="token class-name">UStaticMeshComponent</span><span class="token operator">*</span> BulletStaticMesh<span class="token punctuation">;</span>

	<span class="token comment">// The sphere collider of the BulletActor.</span>
	<span class="token function">UPROPERTY</span><span class="token punctuation">(</span>VisibleAnywhere<span class="token punctuation">,</span> BlueprintReadOnly<span class="token punctuation">,</span> Category <span class="token operator">=</span> Bullet<span class="token punctuation">)</span>
	<span class="token keyword">class</span> <span class="token class-name">USphereComponent</span><span class="token operator">*</span> BulletSphereCollider<span class="token punctuation">;</span>

	<span class="token comment">// The projectile movement component of the BulletActor.</span>
	<span class="token function">UPROPERTY</span><span class="token punctuation">(</span>VisibleAnywhere<span class="token punctuation">,</span> BlueprintReadOnly<span class="token punctuation">,</span> Category <span class="token operator">=</span> Bullet<span class="token punctuation">)</span>
	<span class="token keyword">class</span> <span class="token class-name">UProjectileMovementComponent</span><span class="token operator">*</span> BulletMovement<span class="token punctuation">;</span>

<span class="token keyword">public</span><span class="token operator">:</span>	
	<span class="token comment">/**
	 * Called when the BulletActor hits another component.
	 */</span>
	<span class="token function">UFUNCTION</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token keyword">void</span> <span class="token function">OnBulletHitComponent</span><span class="token punctuation">(</span>UPrimitiveComponent<span class="token operator">*</span> HitComp<span class="token punctuation">,</span> AActor<span class="token operator">*</span> OtherActor<span class="token punctuation">,</span> UPrimitiveComponent<span class="token operator">*</span> OtherComp<span class="token punctuation">,</span> FVector NormalImpulse<span class="token punctuation">,</span> <span class="token keyword">const</span> FHitResult<span class="token operator">&amp;</span> Hit<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre>
<p>And now in the cpp we create the sphere collider and movement components and set their default values. We also set the <code>OnBulletHitComponent</code> method to respond whenever the BulletActor hits another component.</p>
<p><strong>BulletActor.cpp</strong></p>
<pre class="language-cpp"><code class="language-cpp"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"BulletActor.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"Components/SphereComponent.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"Components/StaticMeshComponent.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"GameFramework/ProjectileMovementComponent.h"</span></span>

<span class="token comment">/**
 * Sets the default values of the BulletActor.
 */</span>
ABulletActor<span class="token operator">::</span><span class="token function">ABulletActor</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	<span class="token comment">// Load the BulletActor's mesh.</span>
	<span class="token keyword">static</span> ConstructorHelpers<span class="token operator">::</span>FObjectFinder<span class="token operator">&lt;</span>UStaticMesh<span class="token operator">></span> <span class="token function">BulletStaticMeshAsset</span><span class="token punctuation">(</span><span class="token function">TEXT</span><span class="token punctuation">(</span><span class="token string">"StaticMesh'/Game/FirstPerson/Meshes/FirstPersonProjectileMesh.FirstPersonProjectileMesh'"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">// Create the sphere collider, set its radius, set it to have a collision profile</span>
	<span class="token comment">// of Projectile and lastly add the `OnBulletHitComponent` method to respond to the</span>
	<span class="token comment">// sphere collider making contact with another component.</span>
	BulletSphereCollider <span class="token operator">=</span> CreateDefaultSubobject<span class="token operator">&lt;</span>USphereComponent<span class="token operator">></span><span class="token punctuation">(</span><span class="token function">TEXT</span><span class="token punctuation">(</span><span class="token string">"BulletSphereCollider"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	BulletSphereCollider<span class="token operator">-></span><span class="token function">InitSphereRadius</span><span class="token punctuation">(</span><span class="token number">20.f</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	BulletSphereCollider<span class="token operator">-></span><span class="token function">SetCollisionProfileName</span><span class="token punctuation">(</span><span class="token string">"Projectile"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	BulletSphereCollider<span class="token operator">-></span>OnComponentHit<span class="token punctuation">.</span><span class="token function">AddDynamic</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>ABulletActor<span class="token operator">::</span>OnBulletHitComponent<span class="token punctuation">)</span><span class="token punctuation">;</span>
	RootComponent <span class="token operator">=</span> BulletSphereCollider<span class="token punctuation">;</span>

	<span class="token comment">// Create the bullet mesh, set it to the `BulletStaticMesh` loaded above and attach</span>
	<span class="token comment">// it to the `BulletSphereCollider`.</span>
	BulletStaticMesh <span class="token operator">=</span> CreateDefaultSubobject<span class="token operator">&lt;</span>UStaticMeshComponent<span class="token operator">></span><span class="token punctuation">(</span><span class="token function">TEXT</span><span class="token punctuation">(</span><span class="token string">"BulletStaticMesh"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	BulletStaticMesh<span class="token operator">-></span><span class="token function">SetStaticMesh</span><span class="token punctuation">(</span>BulletStaticMeshAsset<span class="token punctuation">.</span>Object<span class="token punctuation">)</span><span class="token punctuation">;</span>
	BulletStaticMesh<span class="token operator">-></span><span class="token function">SetRelativeScale3D</span><span class="token punctuation">(</span><span class="token function">FVector</span><span class="token punctuation">(</span><span class="token number">0.1f</span><span class="token punctuation">,</span> <span class="token number">0.1f</span><span class="token punctuation">,</span> <span class="token number">0.1f</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	BulletStaticMesh<span class="token operator">-></span><span class="token function">UnWeldFromParent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	BulletSphereCollider<span class="token operator">-></span><span class="token function">SetCollisionProfileName</span><span class="token punctuation">(</span><span class="token string">"NoCollision"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	BulletStaticMesh<span class="token operator">-></span><span class="token function">SetupAttachment</span><span class="token punctuation">(</span>RootComponent<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">// Create the ProjectileMovementComponent and set its speeds and default properties.</span>
	BulletMovement <span class="token operator">=</span> CreateDefaultSubobject<span class="token operator">&lt;</span>UProjectileMovementComponent<span class="token operator">></span><span class="token punctuation">(</span><span class="token function">TEXT</span><span class="token punctuation">(</span><span class="token string">"BulletMovement"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	BulletMovement<span class="token operator">-></span>UpdatedComponent <span class="token operator">=</span> BulletSphereCollider<span class="token punctuation">;</span>
	BulletMovement<span class="token operator">-></span>InitialSpeed <span class="token operator">=</span> <span class="token number">3000.f</span><span class="token punctuation">;</span>
	BulletMovement<span class="token operator">-></span>MaxSpeed <span class="token operator">=</span> <span class="token number">3000.f</span><span class="token punctuation">;</span>
	BulletMovement<span class="token operator">-></span>bRotationFollowsVelocity <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
	BulletMovement<span class="token operator">-></span>bShouldBounce <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>

	<span class="token comment">// Set the BulletActor to die after 3 seconds.</span>
	InitialLifeSpan <span class="token operator">=</span> <span class="token number">3.f</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">/**
 * Called when the BulletActor hits another component.
 */</span>
<span class="token keyword">void</span> ABulletActor<span class="token operator">::</span><span class="token function">OnBulletHitComponent</span><span class="token punctuation">(</span>UPrimitiveComponent<span class="token operator">*</span> HitComp<span class="token punctuation">,</span> AActor<span class="token operator">*</span> OtherActor<span class="token punctuation">,</span> UPrimitiveComponent<span class="token operator">*</span> OtherComp<span class="token punctuation">,</span> FVector NormalImpulse<span class="token punctuation">,</span> <span class="token keyword">const</span> FHitResult<span class="token operator">&amp;</span> Hit<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	<span class="token comment">// We want to return early if anything is null as it could cause a crash otherwise.</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>OtherActor <span class="token operator">==</span> <span class="token keyword">nullptr</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token punctuation">(</span>OtherActor <span class="token operator">==</span> <span class="token keyword">this</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token punctuation">(</span>OtherComp <span class="token operator">==</span> <span class="token keyword">nullptr</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>

	<span class="token keyword">if</span> <span class="token punctuation">(</span>OtherComp<span class="token operator">-></span><span class="token function">IsSimulatingPhysics</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
	<span class="token punctuation">{</span>
		<span class="token comment">// If the component that the BulletActor hit is using physics then we want</span>
		<span class="token comment">// to add an impulse force where the BulletActor hit to move them back.</span>
		OtherComp<span class="token operator">-></span><span class="token function">AddImpulseAtLocation</span><span class="token punctuation">(</span><span class="token function">GetVelocity</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">100.f</span><span class="token punctuation">,</span> <span class="token function">GetActorLocation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token function">Destroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre>
<p>Now that we've got the BulletActor squared away we can move on to the PlayerCharacter.</p>
<h3 id="playercharacter"><a href="#playercharacter" aria-hidden="true"><span class="icon icon-link"></span></a><strong>PlayerCharacter</strong></h3>
<p>The PlayerCharacter is just a standard first person character and uses the model and animations from Unreal's first person demo but we'll go over it quickly so that we're all on the same page when we expand on it later. If you already have a PlayerCharacter you want to use feel free to skip this part, otherwise you can check out the <a href="https://github.com/robertcorponoi/unreal-zombie-ai" target="_blank" rel="nofollow noopener noreferrer">repo</a> for an already made one to use or just follow the PlayerCharacter creation guide below.</p>
<p>So let's see what our PlayerCharacter will need:</p>
<ul>
<li>A <code>USkeletalMeshComponent</code> for the PlayerCharacter's body/arms mesh.</li>
<li>A <code>USkeletalMeshComponent</code> for the PlayerCharacter's gun mesh.</li>
<li>A <code>USceneComponent</code> that keeps track of where the gun's bullets should be shot from.</li>
<li>A <code>UCameraComponent</code> for the first person camera.</li>
<li>A <code>UAnimMontage</code> for the gun fire animation that's populated in the constructor (I got this and the models from the Unreal first person demo project so you can either get the assets from there or from the <a href="https://github.com/robertcorponoi/unreal-zombie-ai" target="_blank" rel="nofollow noopener noreferrer">repo</a>).</li>
<li>We need methods to handle when the "Fire" input action is pressed and for when the movement input axis keys are used.</li>
</ul>
<p>So let's go ahead and create a new C++ class with a base parent of Character, name it PlayerCharacter, and put it in the Player folder if you created that earlier.</p>
<p>Now let's take a look at how we can implement the above in the header:</p>
<p><strong>PlayerCharacter.h</strong></p>
<pre class="language-cpp"><code class="language-cpp"><span class="token macro property">#<span class="token directive keyword">pragma</span> once</span>

<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"CoreMinimal.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"GameFramework/Character.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"PlayerCharacter.generated.h"</span></span>

<span class="token keyword">class</span> <span class="token class-name">USkeletalMeshComponent</span><span class="token punctuation">;</span>

<span class="token comment">/**
 * The PlayerCharacter is the main player of the game.
 */</span>
<span class="token function">UCLASS</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">class</span> <span class="token class-name">ZOMBIEHORDEAI_API</span> APlayerCharacter <span class="token operator">:</span> <span class="token keyword">public</span> ACharacter
<span class="token punctuation">{</span>
	<span class="token function">GENERATED_BODY</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token keyword">public</span><span class="token operator">:</span>
	<span class="token comment">// Sets default values for this character's properties.</span>
	<span class="token function">APlayerCharacter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">// The skeletal mesh of the PlayerCharacter's body.</span>
	<span class="token function">UPROPERTY</span><span class="token punctuation">(</span>VisibleDefaultsOnly<span class="token punctuation">,</span> Category <span class="token operator">=</span> Player<span class="token punctuation">)</span>
	USkeletalMeshComponent<span class="token operator">*</span> PlayerSkeletalMesh<span class="token punctuation">;</span>

	<span class="token comment">// The skeletal mesh of the PlayerCharacter's gun.</span>
	<span class="token function">UPROPERTY</span><span class="token punctuation">(</span>VisibleDefaultsOnly<span class="token punctuation">,</span> Category <span class="token operator">=</span> Player<span class="token punctuation">)</span>
	USkeletalMeshComponent<span class="token operator">*</span> GunSkeletalMesh<span class="token punctuation">;</span>

	<span class="token comment">// The location on the gun where the BulletActors should spawn from.</span>
	<span class="token function">UPROPERTY</span><span class="token punctuation">(</span>VisibleDefaultsOnly<span class="token punctuation">,</span> Category <span class="token operator">=</span> Player<span class="token punctuation">)</span>
	<span class="token keyword">class</span> <span class="token class-name">USceneComponent</span><span class="token operator">*</span> BulletSpawnLocation<span class="token punctuation">;</span>

	<span class="token comment">// The first-person camera of the PlayerCharacter.</span>
	<span class="token function">UPROPERTY</span><span class="token punctuation">(</span>VisibleAnywhere<span class="token punctuation">,</span> BlueprintReadOnly<span class="token punctuation">,</span> Category <span class="token operator">=</span> Player<span class="token punctuation">)</span>
	<span class="token keyword">class</span> <span class="token class-name">UCameraComponent</span><span class="token operator">*</span> PlayerCamera<span class="token punctuation">;</span>

	<span class="token comment">// The gun's offset from the PlayerCharacter's location.</span>
	<span class="token function">UPROPERTY</span><span class="token punctuation">(</span>EditAnywhere<span class="token punctuation">,</span> BlueprintReadWrite<span class="token punctuation">,</span> Category <span class="token operator">=</span> Player<span class="token punctuation">)</span>
	FVector GunOffset<span class="token punctuation">;</span>

	<span class="token comment">// The AnimMontage to play when the gun is fired. This is set automatically</span>
	<span class="token comment">// in the constructor.</span>
	<span class="token function">UPROPERTY</span><span class="token punctuation">(</span>EditAnywhere<span class="token punctuation">,</span> BlueprintReadWrite<span class="token punctuation">,</span> Category <span class="token operator">=</span> Player<span class="token punctuation">)</span>
	<span class="token keyword">class</span> <span class="token class-name">UAnimMontage</span><span class="token operator">*</span> GunFireAnimation<span class="token punctuation">;</span>

<span class="token keyword">protected</span><span class="token operator">:</span>
	<span class="token comment">/**
	 * Called to bind functionality to input.
	 */</span>
	<span class="token keyword">virtual</span> <span class="token keyword">void</span> <span class="token function">SetupPlayerInputComponent</span><span class="token punctuation">(</span><span class="token keyword">class</span> <span class="token class-name">UInputComponent</span><span class="token operator">*</span> PlayerInputComponent<span class="token punctuation">)</span> override<span class="token punctuation">;</span>

	<span class="token comment">/**
	 * Called when the MoveForwardBackward input axis is used.
	 */</span>
	<span class="token keyword">void</span> <span class="token function">MoveForwardBackward</span><span class="token punctuation">(</span><span class="token keyword">float</span> Value<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">/**
	 * Called when the MoveLeftRight input axis is used.
	 */</span>
	<span class="token keyword">void</span> <span class="token function">MoveLeftRight</span><span class="token punctuation">(</span><span class="token keyword">float</span> Value<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">/**
	 * Called when the "Fire" input action button is pressed.
	 */</span>
	<span class="token keyword">void</span> <span class="token function">Fire</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre>
<p>Now in the cpp we're going to:</p>
<ul>
<li>Load our PlayerCharacter body and gun meshes and also the gun animation blueprint and montage. Again these can be found in the Unreal fps demo or the <a href="https://github.com/robertcorponoi/unreal-zombie-ai" target="_blank" rel="nofollow noopener noreferrer">repo</a>.</li>
<li>Create the camera, position it, and attach it to the default capsule collider.</li>
<li>Create the body mesh, set it to be the skeletal mesh we loaded above, set some options such as having it not cast shadows, and attach it to the camera created above.</li>
<li>Create the gun mesh, set it to the skeletal mesh we loaded above, and set it to have some of the same settings as the body mesh. We also attach the gun mesh to the body mesh at the GripPoint.</li>
<li>Set the <code>GunFireAnimation</code> variable to the animation asset loaded during the first step.</li>
<li>In the <code>SetupPlayerInputComponent</code> method we need to register our methods to their corresponding inputs.</li>
<li>We need to create the <code>MoveForwardBackward</code>, <code>MoveLeftRight</code>, and <code>Fire</code> methods to handle what happens when the inputs get pressed.</li>
<li>The movement methods are pretty self explanatory as they just use <code>AddMovementInput</code> and add it to that direction. The <code>Fire</code> method spawns a BulletActor at the end of the gun's muzzle and plays the shooting animation for the gun.</li>
</ul>
<p>There's quite a lot going on in the constructor but really it's not all necessary and its just for a cleaner looking demo:</p>
<p><strong>PlayerCharacter.cpp</strong></p>
<pre class="language-cpp"><code class="language-cpp"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"PlayerCharacter.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"BulletActor.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"Kismet/GameplayStatics.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"Animation/AnimInstance.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"Camera/CameraComponent.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"Components/CapsuleComponent.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"Components/SkeletalMeshComponent.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"Components/InputComponent.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"GameFramework/InputSettings.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"GameFramework/CharacterMovementComponent.h"</span></span>

<span class="token comment">/**
 * Sets the default value from the PlayerCharacter
 */</span>
APlayerCharacter<span class="token operator">::</span><span class="token function">APlayerCharacter</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	<span class="token comment">// Load the player and gun skeletal meshes.</span>
	<span class="token keyword">static</span> ConstructorHelpers<span class="token operator">::</span>FObjectFinder<span class="token operator">&lt;</span>USkeletalMesh<span class="token operator">></span> <span class="token function">PlayerSkeletalMeshAsset</span><span class="token punctuation">(</span><span class="token function">TEXT</span><span class="token punctuation">(</span><span class="token string">"SkeletalMesh'/Game/FirstPerson/Character/Mesh/SK_Mannequin_Arms.SK_Mannequin_Arms'"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">static</span> ConstructorHelpers<span class="token operator">::</span>FObjectFinder<span class="token operator">&lt;</span>USkeletalMesh<span class="token operator">></span> <span class="token function">GunSkeletalMeshAsset</span><span class="token punctuation">(</span><span class="token function">TEXT</span><span class="token punctuation">(</span><span class="token string">"SkeletalMesh'/Game/FirstPerson/FPWeapon/Mesh/SK_FPGun.SK_FPGun'"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">// Load the gun fire animation.</span>
	<span class="token keyword">static</span> ConstructorHelpers<span class="token operator">::</span>FObjectFinder<span class="token operator">&lt;</span>UAnimBlueprint<span class="token operator">></span> <span class="token function">GunAnimBlueprintAsset</span><span class="token punctuation">(</span><span class="token function">TEXT</span><span class="token punctuation">(</span><span class="token string">"AnimBlueprint'/Game/FirstPerson/Animations/FirstPerson_AnimBP.FirstPerson_AnimBP'"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">static</span> ConstructorHelpers<span class="token operator">::</span>FObjectFinder<span class="token operator">&lt;</span>UAnimMontage<span class="token operator">></span> <span class="token function">GunFireAnimationAsset</span><span class="token punctuation">(</span><span class="token function">TEXT</span><span class="token punctuation">(</span><span class="token string">"AnimMontage'/Game/FirstPerson/Animations/FirstPersonFire_Montage.FirstPersonFire_Montage'"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">// Create the first person camera, set its relative location and attach it to the</span>
	<span class="token comment">// capsule component.</span>
	PlayerCamera <span class="token operator">=</span> CreateDefaultSubobject<span class="token operator">&lt;</span>UCameraComponent<span class="token operator">></span><span class="token punctuation">(</span><span class="token function">TEXT</span><span class="token punctuation">(</span><span class="token string">"PlayerCamera"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	PlayerCamera<span class="token operator">-></span><span class="token function">SetRelativeLocation</span><span class="token punctuation">(</span><span class="token function">FVector</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">40.f</span><span class="token punctuation">,</span> <span class="token number">2.f</span><span class="token punctuation">,</span> <span class="token number">70.f</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	PlayerCamera<span class="token operator">-></span>bUsePawnControlRotation <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
	PlayerCamera<span class="token operator">-></span><span class="token function">SetupAttachment</span><span class="token punctuation">(</span><span class="token function">GetCapsuleComponent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">// Create the player mesh component and set up its position and defaults and</span>
	<span class="token comment">// lastly attach it to the PlayerCamera.</span>
	PlayerSkeletalMesh <span class="token operator">=</span> CreateDefaultSubobject<span class="token operator">&lt;</span>USkeletalMeshComponent<span class="token operator">></span><span class="token punctuation">(</span><span class="token function">TEXT</span><span class="token punctuation">(</span><span class="token string">"PlayerSkeletalMesh"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	PlayerSkeletalMesh<span class="token operator">-></span><span class="token function">SetSkeletalMesh</span><span class="token punctuation">(</span>PlayerSkeletalMeshAsset<span class="token punctuation">.</span>Object<span class="token punctuation">)</span><span class="token punctuation">;</span>
	PlayerSkeletalMesh<span class="token operator">-></span><span class="token function">SetRelativeLocationAndRotation</span><span class="token punctuation">(</span><span class="token function">FVector</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">0.5f</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">4.5f</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">155.f</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">FRotator</span><span class="token punctuation">(</span><span class="token number">2.f</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">20.f</span><span class="token punctuation">,</span> <span class="token number">5.f</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	PlayerSkeletalMesh<span class="token operator">-></span><span class="token function">SetOnlyOwnerSee</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	PlayerSkeletalMesh<span class="token operator">-></span><span class="token function">SetAnimInstanceClass</span><span class="token punctuation">(</span>GunAnimBlueprintAsset<span class="token punctuation">.</span>Object<span class="token operator">-></span>GeneratedClass<span class="token punctuation">)</span><span class="token punctuation">;</span>
	PlayerSkeletalMesh<span class="token operator">-></span>CastShadow <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
	PlayerSkeletalMesh<span class="token operator">-></span>bCastDynamicShadow <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
	PlayerSkeletalMesh<span class="token operator">-></span>CanCharacterStepUpOn <span class="token operator">=</span> ECB_Yes<span class="token punctuation">;</span>
	PlayerSkeletalMesh<span class="token operator">-></span><span class="token function">SetupAttachment</span><span class="token punctuation">(</span>PlayerCamera<span class="token punctuation">)</span><span class="token punctuation">;</span>
	PlayerSkeletalMesh<span class="token operator">-></span><span class="token function">SetHiddenInGame</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">// Create the gun mesh component and set up its defaults and lastly attach it to</span>
	<span class="token comment">// the RootComponent and the grip point of the PlayerSkeletalMesh.</span>
	GunSkeletalMesh <span class="token operator">=</span> CreateDefaultSubobject<span class="token operator">&lt;</span>USkeletalMeshComponent<span class="token operator">></span><span class="token punctuation">(</span><span class="token function">TEXT</span><span class="token punctuation">(</span><span class="token string">"GunSkeletalMesh"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	GunSkeletalMesh<span class="token operator">-></span><span class="token function">SetSkeletalMesh</span><span class="token punctuation">(</span>GunSkeletalMeshAsset<span class="token punctuation">.</span>Object<span class="token punctuation">)</span><span class="token punctuation">;</span>
	GunSkeletalMesh<span class="token operator">-></span><span class="token function">SetOnlyOwnerSee</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	GunSkeletalMesh<span class="token operator">-></span>CastShadow <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
	GunSkeletalMesh<span class="token operator">-></span>bCastDynamicShadow <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
	GunSkeletalMesh<span class="token operator">-></span>CanCharacterStepUpOn <span class="token operator">=</span> ECB_Yes<span class="token punctuation">;</span>
	GunSkeletalMesh<span class="token operator">-></span><span class="token function">SetBoundsScale</span><span class="token punctuation">(</span><span class="token number">2.f</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	GunSkeletalMesh<span class="token operator">-></span><span class="token function">SetupAttachment</span><span class="token punctuation">(</span>PlayerSkeletalMesh<span class="token punctuation">,</span> <span class="token function">TEXT</span><span class="token punctuation">(</span><span class="token string">"GripPoint"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	GunSkeletalMesh<span class="token operator">-></span><span class="token function">SetupAttachment</span><span class="token punctuation">(</span>RootComponent<span class="token punctuation">)</span><span class="token punctuation">;</span>
	GunSkeletalMesh<span class="token operator">-></span><span class="token function">AttachToComponent</span><span class="token punctuation">(</span>PlayerSkeletalMesh<span class="token punctuation">,</span> <span class="token function">FAttachmentTransformRules</span><span class="token punctuation">(</span>EAttachmentRule<span class="token operator">::</span>SnapToTarget<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">TEXT</span><span class="token punctuation">(</span><span class="token string">"GripPoint"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">// Set the gun fire animation to the montage loaded above.</span>
	GunFireAnimation <span class="token operator">=</span> GunFireAnimationAsset<span class="token punctuation">.</span>Object<span class="token punctuation">;</span>

	<span class="token comment">// Set the size of the PlayerCharacter's capsule collider.</span>
	<span class="token function">GetCapsuleComponent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-></span><span class="token function">InitCapsuleSize</span><span class="token punctuation">(</span><span class="token number">55.f</span><span class="token punctuation">,</span> <span class="token number">100.f</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">GetCapsuleComponent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-></span>CanCharacterStepUpOn <span class="token operator">=</span> ECB_Yes<span class="token punctuation">;</span>

	<span class="token comment">// Set the default offset for where the BulletActors should spawn.</span>
	GunOffset <span class="token operator">=</span> <span class="token function">FVector</span><span class="token punctuation">(</span><span class="token number">100.f</span><span class="token punctuation">,</span> <span class="token number">0.f</span><span class="token punctuation">,</span> <span class="token number">10.f</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">// Set the PlayerCharacter to be the default player of the game.</span>
	AutoPossessPlayer <span class="token operator">=</span> EAutoReceiveInput<span class="token operator">::</span>Player0<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">/**
 * Called to bind functionality to input.
 */</span>
<span class="token keyword">void</span> APlayerCharacter<span class="token operator">::</span><span class="token function">SetupPlayerInputComponent</span><span class="token punctuation">(</span>UInputComponent<span class="token operator">*</span> PlayerInputComponent<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	<span class="token function">check</span><span class="token punctuation">(</span>PlayerInputComponent<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">// Bind the forward, backward, left, and right movement input axis to the</span>
	<span class="token comment">// `MoveForwardBackward` and `MoveLeftRight` methods.</span>
	PlayerInputComponent<span class="token operator">-></span><span class="token function">BindAxis</span><span class="token punctuation">(</span><span class="token string">"MoveForwardBackward"</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>APlayerCharacter<span class="token operator">::</span>MoveForwardBackward<span class="token punctuation">)</span><span class="token punctuation">;</span>
	PlayerInputComponent<span class="token operator">-></span><span class="token function">BindAxis</span><span class="token punctuation">(</span><span class="token string">"MoveLeftRight"</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>APlayerCharacter<span class="token operator">::</span>MoveLeftRight<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">// Bind the mouse x and y axis to controlling the yaw and pitch.</span>
	PlayerInputComponent<span class="token operator">-></span><span class="token function">BindAxis</span><span class="token punctuation">(</span><span class="token string">"LookUpDown"</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>APawn<span class="token operator">::</span>AddControllerYawInput<span class="token punctuation">)</span><span class="token punctuation">;</span>
	PlayerInputComponent<span class="token operator">-></span><span class="token function">BindAxis</span><span class="token punctuation">(</span><span class="token string">"LookLeftRight"</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>APawn<span class="token operator">::</span>AddControllerPitchInput<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">// Bind the jump input action to the default Character jump logic.</span>
	PlayerInputComponent<span class="token operator">-></span><span class="token function">BindAction</span><span class="token punctuation">(</span><span class="token string">"Jump"</span><span class="token punctuation">,</span> IE_Pressed<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>ACharacter<span class="token operator">::</span>Jump<span class="token punctuation">)</span><span class="token punctuation">;</span>
	PlayerInputComponent<span class="token operator">-></span><span class="token function">BindAction</span><span class="token punctuation">(</span><span class="token string">"Jump"</span><span class="token punctuation">,</span> IE_Released<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>ACharacter<span class="token operator">::</span>StopJumping<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">// Bind the fire input action to the `Fire` method.</span>
	PlayerInputComponent<span class="token operator">-></span><span class="token function">BindAction</span><span class="token punctuation">(</span><span class="token string">"Fire"</span><span class="token punctuation">,</span> IE_Pressed<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>APlayerCharacter<span class="token operator">::</span>Fire<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">/**
 * Called when the MoveForwardBackward input axis is used.
 */</span>
<span class="token keyword">void</span> APlayerCharacter<span class="token operator">::</span><span class="token function">MoveForwardBackward</span><span class="token punctuation">(</span><span class="token keyword">float</span> Value<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>Value <span class="token operator">!=</span> <span class="token number">0.f</span><span class="token punctuation">)</span> <span class="token function">AddMovementInput</span><span class="token punctuation">(</span><span class="token function">GetActorForwardVector</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> Value<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">/**
 * Called when the MoveLeftRight input axis is used.
 */</span>
<span class="token keyword">void</span> APlayerCharacter<span class="token operator">::</span><span class="token function">MoveLeftRight</span><span class="token punctuation">(</span><span class="token keyword">float</span> Value<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>Value <span class="token operator">!=</span> <span class="token number">0.f</span><span class="token punctuation">)</span> <span class="token function">AddMovementInput</span><span class="token punctuation">(</span><span class="token function">GetActorRightVector</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> Value<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">/**
 * Called when the Fire input action is pressed.
 */</span>
<span class="token keyword">void</span> APlayerCharacter<span class="token operator">::</span><span class="token function">Fire</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	<span class="token comment">// Return early if `GetWorld()` returns a nullptr.</span>
	UWorld<span class="token operator">*</span> <span class="token keyword">const</span> World <span class="token operator">=</span> <span class="token function">GetWorld</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>World <span class="token operator">==</span> <span class="token keyword">nullptr</span><span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>

	<span class="token keyword">const</span> FRotator SpawnRotation <span class="token operator">=</span> <span class="token function">GetControlRotation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		
	<span class="token comment">// Since the `BulletSpawnLocation` is in camera space, we have to transform it to</span>
	<span class="token comment">// world space before offsetting it from the character location to find the final</span>
	<span class="token comment">// bullet spawn location.</span>
	<span class="token keyword">const</span> FVector SpawnLocation <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>BulletSpawnLocation <span class="token operator">!=</span> <span class="token keyword">nullptr</span><span class="token punctuation">)</span> <span class="token operator">?</span> BulletSpawnLocation<span class="token operator">-></span><span class="token function">GetComponentLocation</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">GetActorLocation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">+</span> SpawnRotation<span class="token punctuation">.</span><span class="token function">RotateVector</span><span class="token punctuation">(</span>GunOffset<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">// Set Spawn Collision Handling Override.</span>
	FActorSpawnParameters ActorSpawnParams<span class="token punctuation">;</span>
	ActorSpawnParams<span class="token punctuation">.</span>SpawnCollisionHandlingOverride <span class="token operator">=</span> ESpawnActorCollisionHandlingMethod<span class="token operator">::</span>AdjustIfPossibleButDontSpawnIfColliding<span class="token punctuation">;</span>

	<span class="token comment">// Spawn the BulletActor at the SpawnLocation.</span>
	World<span class="token operator">-></span>SpawnActor<span class="token operator">&lt;</span>ABulletActor<span class="token operator">></span><span class="token punctuation">(</span>ABulletActor<span class="token operator">::</span><span class="token function">StaticClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> SpawnLocation<span class="token punctuation">,</span> SpawnRotation<span class="token punctuation">,</span> ActorSpawnParams<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">// Get the animation object for the PlayerCharacter's body mesh and play the fire animation.</span>
	UAnimInstance<span class="token operator">*</span> AnimInstance <span class="token operator">=</span> PlayerSkeletalMesh<span class="token operator">-></span><span class="token function">GetAnimInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>AnimInstance <span class="token operator">==</span> <span class="token keyword">nullptr</span><span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>

	AnimInstance<span class="token operator">-></span><span class="token function">Montage_Play</span><span class="token punctuation">(</span>GunFireAnimation<span class="token punctuation">,</span> <span class="token number">1.f</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre>
<p>Now that we're on the same page with the PlayerCharacter, let's move on to creating the ZombieCharacter.</p>
<h2 id="zombiecharacter-setup"><a href="#zombiecharacter-setup" aria-hidden="true"><span class="icon icon-link"></span></a><strong>ZombieCharacter Setup</strong></h2>
<p>Before we get into the code I'll go over the assets I'm using from Mixamo real quick.</p>
<ul>
<li>Zombie Jill Character</li>
<li>Zombie Idle Animation</li>
<li>Zombie Dying Animation</li>
<li>Zombie Attack Animation</li>
<li>Zombie Walking Animation</li>
<li>Zombie Run Animation</li>
</ul>
<p>Also make sure that the animations are set to be in place, with skin, and 60 frames per second.</p>
<p>In my Unreal project I made a folder named Models and another one named Animations and I placed the Zombie Character in a sub-folder in the models folder and the animations in the Animations folder.</p>
<p>So now we have to do is define and create the initial setup of the ZombieCharacter which is:</p>
<ul>
<li>A <code>USkeletalMeshComponent</code> for assigning the zombie the skeletal mesh we imported above.</li>
<li>A boolean that contains the value for whether the ZombieCharacter is sprinting or not. This will be read by the AnimInstance to decide whether the Sprint animation should be played or not.</li>
<li>We need to load the Zombie skeletal mesh in the constructor and assign it to the component defined above.</li>
</ul>
<p>We also want to implement states. States are going to be used by the AIController when we create it later to guide the movement and actions of the ZombieCharacter. Let's determine what states we need:</p>
<ul>
<li>We want an IDLE state in which the ZombieCharacter is just standing around as most zombies do.</li>
<li>We want a ROAM state in which the ZombieCharacter just walks around with no real purpose.</li>
<li>We want a CHASE state for when the ZombieCharacter is chasing the PlayerCharacter attempting to attack them.</li>
<li>We want an ATTACK state for when the ZombieCharacter is attempting to attack the PlayerCharacter.</li>
<li>We want a DEAD state for when the PlayerCharacter has killed the ZombieCharacter.</li>
</ul>
<p>So glancing at the above ZombieCharacters are either going to be in an IDLE or ROAMING state right when they spawn. Then, when the ZombieCharacter spots the PlayerCharacter, they will enter the CHASE state and if they manage to catch up to the PlayerCharacter they will enter the ATTACK state. At this point they will keep switching between CHASE and ATTACK depending on if the PlayerCharacter is attempting to run away or not. Finally this ends with the ZombieCharacter either back in the IDLE/ROAM state if they've lost sight of the PlayerCharacter or in the DEAD state if the PlayerCharacter has killed them.
So let's go ahead and implement this.</p>
<p>Let's go ahead now and add the components discussed above and also the states we just went over:</p>
<p><strong>ZombieCharacter.h</strong></p>
<pre class="language-cpp"><code class="language-cpp"><span class="token macro property">#<span class="token directive keyword">pragma</span> once</span>

<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"CoreMinimal.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"GameFramework/Character.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"ZombieCharacter.generated.h"</span></span>

<span class="token comment">/**
 * The states that the ZombieCharacter can be in.
 */</span>
<span class="token function">UENUM</span><span class="token punctuation">(</span>BlueprintType<span class="token punctuation">)</span>
<span class="token keyword">enum</span> <span class="token class-name">class</span> ZombieStates <span class="token operator">:</span> uint8 <span class="token punctuation">{</span>
	IDLE	<span class="token function">UMETA</span><span class="token punctuation">(</span>DisplayName <span class="token operator">=</span> <span class="token string">"IDLE"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	ROAM	<span class="token function">UMETA</span><span class="token punctuation">(</span>DisplayName <span class="token operator">=</span> <span class="token string">"ROAM"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	CHASE	<span class="token function">UMETA</span><span class="token punctuation">(</span>DisplayName <span class="token operator">=</span> <span class="token string">"CHASE"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	ATTACK	<span class="token function">UMETA</span><span class="token punctuation">(</span>DisplayName <span class="token operator">=</span> <span class="token string">"ATTACK"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	DEAD	<span class="token function">UMETA</span><span class="token punctuation">(</span>DisplayName <span class="token operator">=</span> <span class="token string">"DEAD"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">/**
 * A zombie that can roam, chase, and attack.
 */</span>
<span class="token function">UCLASS</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">class</span> <span class="token class-name">ZOMBIEHORDE_API</span> AZombieCharacter <span class="token operator">:</span> <span class="token keyword">public</span> ACharacter
<span class="token punctuation">{</span>
	<span class="token function">GENERATED_BODY</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token keyword">public</span><span class="token operator">:</span>
	<span class="token comment">// Sets default values for this character's properties.</span>
	<span class="token function">AZombieCharacter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">// The skeletal mesh of the ZombieCharacter.</span>
	<span class="token function">UPROPERTY</span><span class="token punctuation">(</span>VisibleDefaultsOnly<span class="token punctuation">,</span> Category <span class="token operator">=</span> Mesh<span class="token punctuation">)</span>
	<span class="token keyword">class</span> <span class="token class-name">USkeletalMeshComponent</span><span class="token operator">*</span> ZombieSkeletalMesh<span class="token punctuation">;</span>

	<span class="token comment">// The current state of the ZombieCharacter.</span>
	<span class="token function">UPROPERTY</span><span class="token punctuation">(</span>VisibleAnywhere<span class="token punctuation">,</span> BlueprintReadOnly<span class="token punctuation">,</span> Category <span class="token operator">=</span> Zombie<span class="token punctuation">)</span>
	ZombieStates State <span class="token operator">=</span> ZombieStates<span class="token operator">::</span>IDLE<span class="token punctuation">;</span>

	<span class="token comment">// The previous state of the ZombieCharacter.</span>
	<span class="token function">UPROPERTY</span><span class="token punctuation">(</span>VisibleAnywhere<span class="token punctuation">,</span> BlueprintReadOnly<span class="token punctuation">,</span> Category <span class="token operator">=</span> Zombie<span class="token punctuation">)</span>
	ZombieStates PreviousState <span class="token operator">=</span> State<span class="token punctuation">;</span>

	<span class="token comment">// Indicates whether the ZombieCharacter is sprinting or not.</span>
	<span class="token function">UPROPERTY</span><span class="token punctuation">(</span>VisibleAnywhere<span class="token punctuation">,</span> BlueprintReadOnly<span class="token punctuation">)</span>
	<span class="token keyword">bool</span> bIsSprinting <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre>
<p><strong>ZombieCharacter.cpp</strong></p>
<pre class="language-cpp"><code class="language-cpp"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"ZombieCharacter.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"Components/SkeletalMeshComponent.h"</span></span>

<span class="token comment">/**
 * Sets the default values for the ZombieCharacter.
 */</span>
AZombieCharacter<span class="token operator">::</span><span class="token function">AZombieCharacter</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	<span class="token comment">// Load the assets needed for the ZombieCharacter.</span>
	<span class="token keyword">static</span> ConstructorHelpers<span class="token operator">::</span>FObjectFinder<span class="token operator">&lt;</span>USkeletalMesh<span class="token operator">></span><span class="token function">ZombieSkeletalMeshAsset</span><span class="token punctuation">(</span><span class="token function">TEXT</span><span class="token punctuation">(</span><span class="token string">"SkeletalMesh'/Game/Models/ZombieJill/jill.jill'"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">// Create the ZombieCharacter's skeletal mesh and set it to be the mesh loaded above.</span>
	ZombieSkeletalMesh <span class="token operator">=</span> <span class="token function">GetMesh</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	ZombieSkeletalMesh<span class="token operator">-></span><span class="token function">SetSkeletalMesh</span><span class="token punctuation">(</span>ZombieSkeletalMeshAsset<span class="token punctuation">.</span>Object<span class="token punctuation">)</span><span class="token punctuation">;</span>
	ZombieSkeletalMesh<span class="token operator">-></span><span class="token function">SetRelativeLocation</span><span class="token punctuation">(</span><span class="token function">FVector</span><span class="token punctuation">(</span><span class="token number">0.f</span><span class="token punctuation">,</span> <span class="token number">0.f</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">90.f</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	ZombieSkeletalMesh<span class="token operator">-></span><span class="token function">SetupAttachment</span><span class="token punctuation">(</span>RootComponent<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre>
<p>Make sure that the above compiles and then let's move on.</p>
<p>Now that we have the basics of the ZombieCharacter set up, we can create the AnimInstance class for it. We want to manage the animation states in C++ and then we'll use those in an animation blueprint.</p>
<p>So let's get started and create the AnimInstance class by creating a new C++ class with a base parent of AnimInstance and name it ZombieAnimInstance. I also put mine in a sub-folder named Zombie.</p>
<p>Let's see what we'll need in the ZombieAnimInstance:</p>
<ul>
<li>We need booleans to know if the ZombieCharacter is moving roaming, sprinting, attacking, or dead. These will be used to show the various animations.</li>
<li>We need a method that will be called by the animation blueprint to update these booleans.</li>
</ul>
<p>Let's get into the header file:</p>
<p><strong>ZombieAnimInstance.h</strong></p>
<pre class="language-cpp"><code class="language-cpp"><span class="token macro property">#<span class="token directive keyword">pragma</span> once</span>

<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"CoreMinimal.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"Animation/AnimInstance.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"ZombieAnimInstance.generated.h"</span></span>

<span class="token comment">/**
 * Manages the booleans needed by the animation blueprint to decide what
 * animation needs to be run.
 */</span>
<span class="token function">UCLASS</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">class</span> <span class="token class-name">ZOMBIEAI_API</span> UZombieAnimInstance <span class="token operator">:</span> <span class="token keyword">public</span> UAnimInstance
<span class="token punctuation">{</span>
	<span class="token function">GENERATED_BODY</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token keyword">public</span><span class="token operator">:</span>
	<span class="token comment">// Indicates whether the ZombieCharacter is roaming or not.</span>
	<span class="token function">UPROPERTY</span><span class="token punctuation">(</span>EditAnywhere<span class="token punctuation">,</span> BlueprintReadOnly<span class="token punctuation">)</span>
	<span class="token keyword">bool</span> bIsRoaming<span class="token punctuation">;</span>

	<span class="token comment">// Indicates whether the ZombieCharacter is chasing or not.</span>
	<span class="token function">UPROPERTY</span><span class="token punctuation">(</span>EditAnywhere<span class="token punctuation">,</span> BlueprintReadOnly<span class="token punctuation">)</span>
	<span class="token keyword">bool</span> bIsChasing<span class="token punctuation">;</span>

	<span class="token comment">// Indicates whether the ZombieCharacter is attacking or not.</span>
	<span class="token function">UPROPERTY</span><span class="token punctuation">(</span>EditAnywhere<span class="token punctuation">,</span> BlueprintReadOnly<span class="token punctuation">)</span>
	<span class="token keyword">bool</span> bIsAttacking<span class="token punctuation">;</span>

	<span class="token comment">// Indicates whether the ZombieCharacter is dying or not.</span>
	<span class="token function">UPROPERTY</span><span class="token punctuation">(</span>EditAnywhere<span class="token punctuation">,</span> BlueprintReadOnly<span class="token punctuation">)</span>
	<span class="token keyword">bool</span> bIsDying<span class="token punctuation">;</span>

	<span class="token comment">// Used by the animation blueprint to update the animation properties above</span>
	<span class="token comment">// and decide what animations to play.</span>
	<span class="token function">UFUNCTION</span><span class="token punctuation">(</span>BlueprintCallable<span class="token punctuation">,</span> Category <span class="token operator">=</span> <span class="token string">"UpdateAnimationProperties"</span><span class="token punctuation">)</span>
	<span class="token keyword">void</span> <span class="token function">UpdateAnimationProperties</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre>
<p><strong>ZombieAnimInstance.cpp</strong></p>
<pre class="language-cpp"><code class="language-cpp"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"ZombieAnimInstance.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"ZombieCharacter.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"../Player/PlayerCharacter.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"Math/Rotator.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"Components/BoxComponent.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"Components/CapsuleComponent.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"GameFramework/CharacterMovementComponent.h"</span></span>

<span class="token comment">/**
 * Used by the animation blueprint to update the animation properties above
 * and decide what animations to play.
 */</span>
<span class="token keyword">void</span> UZombieAnimInstance<span class="token operator">::</span><span class="token function">UpdateAnimationProperties</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	<span class="token comment">// Try to get the Pawn being animated and return if a nullptr.</span>
	APawn<span class="token operator">*</span> ZombiePawn <span class="token operator">=</span> <span class="token function">TryGetPawnOwner</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>ZombiePawn <span class="token operator">==</span> <span class="token keyword">nullptr</span><span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>

	<span class="token comment">// Try to cast the Pawn to our ZombieCharacter since that's the only</span>
	<span class="token comment">// thing we want to animate.</span>
	AZombieCharacter<span class="token operator">*</span> ZombieCharacter <span class="token operator">=</span> Cast<span class="token operator">&lt;</span>AZombieCharacter<span class="token operator">></span><span class="token punctuation">(</span>ZombiePawn<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>ZombieCharacter <span class="token operator">==</span> <span class="token keyword">nullptr</span><span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>

	<span class="token comment">// Set the variables that are dependent on states.</span>
	bIsRoaming <span class="token operator">=</span> ZombieCharacter<span class="token operator">-></span>State <span class="token operator">==</span> ZombieStates<span class="token operator">::</span>ROAM<span class="token punctuation">;</span>
	bIsChasing <span class="token operator">=</span> ZombieCharacter<span class="token operator">-></span>State <span class="token operator">==</span> ZombieStates<span class="token operator">::</span>CHASE<span class="token punctuation">;</span>
	bIsAttacking <span class="token operator">=</span> ZombieCharacter<span class="token operator">-></span>State <span class="token operator">==</span> ZombieStates<span class="token operator">::</span>ATTACK<span class="token punctuation">;</span>
	bIsDying <span class="token operator">=</span> ZombieCharacter<span class="token operator">-></span>State <span class="token operator">==</span> ZombieStates<span class="token operator">::</span>DEAD<span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre>
<p>Ok so now we need to go back to Unreal and create the animation blueprint based off of the ZombieAnimInstance created above. So in your blueprints folder you have to right-click, select to create a new Animation Blueprint, and in the Create Animation Blueprint dialogue you need to make sure it has a parent class of ZombieAnimInstance and a target skeleton of zombie.</p>
<p><img class="g-image g-image--lazy g-image--loading" src="data:image/svg+xml,%3csvg fill='none' viewBox='0 0 412 741' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-da14dbbc1f0a9430cfb86a58d5eb4331'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='40'/%3e%3c/filter%3e%3c/defs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-da14dbbc1f0a9430cfb86a58d5eb4331)' width='412' height='741' xlink:href='data:image/png%3bbase64%2ciVBORw0KGgoAAAANSUhEUgAAAEAAAABzCAYAAAAohwTdAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAUCUlEQVR42u2d95NVxRLH908QzAooaXMiSJSwsAmWHASJi%2bScdpddcs5JQEFAwELqUTwteUUVPhDz01elYkKr0PJ/6Xc%2bc/Z7mb3cXe7C7r3Lu/7QNefMzJkz09Pd093Tc07akUPHbMP6jbaups5qqmqtprrOatetD%2b7XW61g3YYI1HnXsaCudmMk9cEvi76%2bD2oa3q%2br70NNTdivmmpBnVVX1UXu3XVVmBdCrcunvbBurXseWLO62k6fOm9pnTt3toKCfOvbt4/1qYfCwkLr0bOH9YxAT%2bvVq2ckddC7173rSFkv69Gj0AoDyM/Pc1BQUGD5QfsFhQXu3pW763zL4z5on3vqufygLs/nuWfzXV8ArnlP76j3htCrHhre06fy8nIbN26cjR071iZMGG%2bjRlUE6QQbMKC/FRUNt7SsrCw7f/68vf/%2b%2b3bixAlXceTIkVZRURGBURWjggebhtGjR9uIESNs9uzZNn/%2bfFu2bJmDlStX2qJFi23u3LnuetasWbZ8%2bXJbsmSpSxcvXhyUL7IFCxbYvHnzbN26dUHZElu4cKErI2/p0qW2YsUKmzRxUtifmH0Y3eCeevTp9ddfd2Oqq6uzDz/80CZOnGhTp0x15WVlIy0tPT3dvezWrVt27do1e/XVVx3mevfuHYFXXnnFgX8dDX369Almt4d76aRJk9yAV61a5RDCoF977TU3YDrHoEAOA6UuA6Xe%2bPHjHSLIB0DY5MmTXf9mzJgRzNoA1wfe1Vg/1E/1lWf69u1rQ4YMseLiYhs4cKD169fPUVRpyQhLe%2bmllywnJ8cOHDhgVVVVBkW8%2bOKL1qlTpwhQ5%2bWXX24AsE6saz1DG88//7xLX3jhBevYsaN16NDBpeT5%2bVyrjGe4Jq9r166uDvcA/dC7SP33RvcDoL7Afw/3Tz/9tJWAAB5i5uCz7t27O14UBsEcFAEmqePzltJoUB21cY8/74dY5coj9dt70HsfBH4bjAckFBeXhxQAX8yZM8fxGmQKD0OSkN3UqVMducKnAPJh6NChNmzYsMcS6HtJSUlA6ZkhAqAAZnn48OGOR0pLS23w4MGOd6hMGfllZWXuQfjPn%2bHHCSQTGFNGRkaIAPgM8mapQFLW1tbaxo0bHaxfv96B8oENGzY8lsB46P8bb7zhhDDs7mRAt27d3Jq8Zs0a%2b/HHH%2b2zzz6zr776yr788ksHn3/%2buf388892584d%2b/XXX%2b2XX3557ID%2b//HHH3b58mXbvXu3Y/Ps7GwrLim/h4DVq1e7yiDg008/denXX39t33zzjUOMENAUtGUE/Pnnn7Z161bbtm2bg8zMDCspHRGyADw9ZswYhwQEHtTAkojywVoMcA3m/NQHnl27dm2bBgQ9/USvYOJLS0eGCGC5A%2bCPM2fOOFURYTdt2jSHGO5J0apQZFBqUHikdVGGghGPkpJMQACS0leEYIQCGHz//v2doID8Z86c6ZY7SAWyqampcbMM/1CH/E2bNjnhgoDcsWOHE6JI16KiIrd6xAtoaIkCVjdSVryMjPSQArp06eKwQmeYPeQBKZVJwRaYA0GokKSDBg1yoGsGzjX1qANwLbWTax/UJinvoQ3SRADvQh8AAY4CQIAGCgu8%2beabTv%2bmMkoQRoMMJHgIBYkGyIc10BtgB5Qp7qX78wyWmNqAVdD1MZgA8igHeYkavBBQVDTsHgVEswBLICxAJ3ft2uWA/Orqatu5c2eEDTZv3mx79%2b51LECdffv2OUsOmwJgzYVVuEbwwEqHDh2yPXv2OCFKO2ieUIjIM9EUcB8LUIEZgTzplHha%2bVzTAJoh1%2bSJEhiIVE3VF5/rpTxHSttolWov4RQQYYGR91iADiP1t2zZ4kiVe8gYEod8IVfIfMqUKa7jUAj5DAg1GVInlR0OMEhS8mkH4cM1CIDlNPhEy4CiaAqABZhBBv/9999bZWWlGyAkDtkj7VlHjxw5Yvv373f3sABkjKoMqR8%2bfNjlUf/o0aOOJaRSQ/bci41oGwT7pJ8oJMSUAbAAnRHJwgLMMrPLLIq0mUHymU2RM1SC0KTczxfIkJKxRR6D9yGRlBBTBsACFMDLaH2QLR2j4zIfeYh8BkyZkMM1Mwp70IbWdp4lX4gV6fOMECkkkZ9QChgWYxUAkOa///678wfQYcgd6Q2ZwwKQMmyBYgQbUB%2byRvoj0akny4syGR5aMWRNwmq0hcrNNciD6pK6Cmh2mGEElEgdDQ/BBvkiHFF75WVFCKIes%2b4zq%2bRTDkAt6A5SmamvfAZMW%2bRDdTybKH2gURagAwxg69btTqJTmYFLA4ScQQJ1RTHSHyTV5YBkQKwaPO9rfgKekeZIqsEnRQbAAtIE9%2b0/aPPmLwjIc59Nnz7dkS86P5IbkoaE0fu1Koh8uYf8IWlIHYWH%2bjwrncLvRCzFJ5EyICYCmIXZsysDM7ja5s6d51gAYIAgAxKGRSB5XNlQCWRMSjnUA2ApkgdpRys6siF8qZ8MRcghID0GC0Cyhw8fDQY2wVEEpCwyl%2bFD6htK8horXzpFuN4WRUhdS6tWikQP/IEIYDCQ/tx5812KsMIpIskNO5CKBQSYyawCkD5swCYHKwdGFXaCnqEOjghYA0Ur0TZAHEJwYNDBRcGyVhMsacscQmQBQuKQNR1niRRbYDTBGsonD1WZVYFrVGt2iLQFxipAe1CaTOGkI8CXASx7zH5FxShXmXttJPhbTr4hwyxSpnpym1MG2bPhoo0J2IFUa35SZUBGDBbYsTMwUZctD8h0t1v2tD%2bHsgP5kkLSzCbkDmkzo6jCukZJQvHBPoCFMIUhf/YJ2fdj5YBC2gYLjGi4DK5cucqxACuBVGM0PO0UMXAGgnyA1OUzhAWoRx6I0uYm/ndkBHKE51g9yGe1aAssEPEIQboUQtYMVLY%2bsxS9U8wmivIhZ7GH9hTJp46APF8R4lnfFZYsFkhPjzKH6RykeuPGDUfK2ALMnsgeYQZ5QwUoQdpH9Pf0YRfIHCpgHxEXuwwrGUmJdoTGcow2cIrKHIYNGAzLFzo6swQiRM4ggIExKFhCm6hsoErKa7%2bAwVOXaxBJ29Ilkg3SUSIUwOYoWGHw8DDLGksYg0dYwd%2bAnJ3kc881y6DKVSf6GkcrKc8lG9Q3JpPdYScDCGYINcDDbvavXr3qPD/bt293sw0LhGEuixwLMMuQP2SPlA/DXZZEJL6AcmwDVgTaxjl68ODBpILfh9ycnHBvkPgAEMDgKSBeiMGzXGkFgK9JQYJmH6ku1mCWKeOeulAGyIOqkB%2b4yGgbI6mtQG5uPQIIJUEqItgYDMYOg2WAzCSz6IP22VTGtco0%2b345afQ%2bYrKBsWVnZ4Xb4whBlioZLXKLa4fHt/0fBtROWwGF/TRYBlkF5P/3bfb/R/CXwcjmqFxiyTJRk24LpCQC0v9GwL2tsZRmgVSVAempzgLp6VHmcGoKwSYQEGvD8kH2eyJ9%2b43lN1XWqEdICIilBLVU51p68LH6F29/G2UBfAAKbBJo60rBUMqLTls74MGf3TDcrbf1qQ95iw7ikjofHbilsTHWBpqgPL04N%2bS6ZocHw0gbnliA1FFkOWXUwXegQw3sHbb2JieDqKgYaTt377ONm7e5IzBYqPgydDqE/mCRapeKe66xevFL4qXqrkBJKAAEQBY0RGWcmNj3cnsxSBrAU0SZIkkxf7H28Bdg/rIhCsb9LbCWBO08zZg%2bzU6f%2b4cdP3khGPhkm1t/AgUrlBRnLl5reafI55qJ0yQz8Q18gn6Ak/hJfn/KMCCaCj7UXkFzgiQfFsKAraFW5K4H3SeoFaBBf9RHbdUxQYyHWOHSsnoEcEwGb647LeZ5dAU6uRUr796proL78loLeH9BQcM%2b%2bWWx%2bqN8eao7deoYIGZY6BN88skn7dlnn20AzzzzTAT8PF0/99xzjy1wLql9%2b3aWm1sQeoTAiIKjFNAgFoD0dXpEpCRp%2bqjOkkSDArn79etv3bp1teycvBABDBYpzk6PzushVZGYCDyd40PYUQcgNkDu7rbm9YkGf3tfMo2TchEEMMtIT5ybBDgxYNzaODhBhg4watMDnyH%2bQ7m%2bSdsqIPlZEpk0xSeCAJyimVk5lgY/4y7%2b4YcfIidFOCpDzLBOjXBshlR5lH/33XfumbYMt2/fdoGfeLzxBLPEE/lGhBqaYGZWtqVxgPCtt96y3377zT7%2b%2bGO7efOmG6AGzJGZL774wiGB06UASOAIDSF1PEfa1oB%2bcUyGfqMDnDp1ylHCJ5984sbJmaGMzCxL4zQlJH7p0iV3WuTs2bP27rvvRlJBU2XxAs%2bdPn060ta5c%2bcaAGUP23asd124cMFtyqCsHTt2zLEwChx7FRziTk/PDFVh1keEhNzYfhrt3o5VFq8EZvVAQZE%2br51krdvSJFtS8msFk22gE7HoPhmZ2fcCJOQWbw1XtDqgMBuCKdh%2bU5SpYo0QWtRRp1vKDS7p7x%2bZCVkg%2b35/QGvp8GBfJ0rgRWIPWXHYpWEbDjLF5mB5VcRZa/WHyQYBmT4CfDsgXmhqxmPNhCLKZaL6kaPcU/aws9y8cPkoBMACmLIKadcZYgwcUgDehUcB1lMiyKI/tCDgeZ0LigYdtIgFjT2j53T2yM%2bnDzqHpP7pgIbGAGhcjJH8nJxsy8rODU%2bOIhAAkME9gI3AWingrG1ToDqkSFuoivb8Z/22YrXZ2HvIz83NdSYs/aLdxurFA5mZmdY5UABzc/PDVQC1sDLQmOYHHYdPAfhRHzJQGg9Ql6N3aJh8/CDe5xprC%2bOFTtMnnDMK2/U/xNBc4FmswRwQwGw7DBMwMKzIzZxi%2baKtQFlSANfk6d6Hp556qkUtRtpk1hSCD4JBrt%2bX5oC%2bXJGVHajC3QLSwT9W2Kev9R40xLrUkz5kxkuhDtZoZzwEgkMswtHTvLy8%2b0ha5TzbUkDbvB9q1Wc0RPYP8y7G0ZXxZdUjoCAwDKoOHLXzt%2b/amMlTbPKkibZl61bnY1PYPOu0jCBcZQgaXE1oVliJOngta1LemEc9NqvwPd6F3sCyKdeXYhL1rnjbC63BQA/ICFThrgEGC/PzbH7NBtt/9aaNChBQHkjJysrQMYoBAekhcUGIgqcUI6wQGfJRYijD8tKBKHlj/SVP3ufmrN2KO5b1qXcxQc3VGUC%2bU4QiCMjLtSWbttnBj/5tJSOCZaW8zA2eWYbn8ASTci/gHkyy7MgbjLNRZwfJZ2boJPn4FiRgtYTGo3mqDv4J/7Q6oOVZOkxzKSAdBMACucESuGTLLjv13ztWMXmqjR87xqmrIAGtjaApHCOwAmSo2B/IEVUWCkBCc08dfW8AROiEOd5knoV9IGG8tfHED0ph4llOoPA%2b2uI9vI93yUMVb5wgk0WYnFOEECjDhg6x2j0H7OA/r9nchYts1swZkfhfgFkU%2bUGKkJ2iwhQqT2eoB%2bB61ldpFF8IIskHpA7TTrwg9lOUGm3gpKFfzWmH/vMsRpFjgQ4dOtqcoMGz/7puR278x46ePGVVwQwjZBBmPECnFenNwCFHvVjhc3SOwxA4HhSTh/MhVnyg8uINaaO%2bEAa1yVuFECSlvDltHT9%2bPNAOi4PVJcPSWA9nTp9mxy9dsb0f3bB9x07YimVLg8EvcWSmlzBIfzVQHrMsnyEh8nhbdOqcc4O6flRQaK7eq28b8W6dao%2bnHeqChHBvoJ4F4KExY8fZ6MASG6kPqNV/IE1n/aSEAH6eX8/Xy1sa6FOs96pfzWmLZ1CmstAD9BEVt6HoLVHRX32Qu7yxMr%2b8NaCxdzb3veFplSFOkes/YNCjmcOPf4RIiscIFRePSO0YoeLhJamJAHmEcnMyUpMFQACqcPfu6alNAbBBSiMAf0JKIwDnSGoLwdzc1BWCIAA3W0pTgEPA3xSQ6hSQyghgNyxlEYA5jAWc0sYQzpGURgAu9ZRlAYUHp7QQBP5WhR%2bEgFjniJpT/thogi3hFE3U1%2bAGDx70SGeaYipCit3zXdD6VphcyrrWDm90/db%2bMox/JolYP84NRX%2boWf303eb%2bGPQFmwYIYF%2bAJYGd2%2bhNEH0okTJ9UJktc%2bqzUaHPabJd7X8bqLXC7dT27Mo5tmZtdWTHmP4pUIqU3Wh98pcgKfIUOEV9VoEIC7AcUIH9PfYD%2be6HvgDBFhT7gwpy1Cc2%2bZ6IviXCri3XrR3fp0NTZaUldubcRbv80S2rqlrrNk4VAkt/6Cv9YauOnWSdG2I8iiJX4FWDMDl9MFnfAAaEPfL1XWCF0SnkTPECD4oIaQ7oe4axgPLyoE/jxo137/T7pvNN%2biS48vWVS/WR2XcUQDQXvjH2ysgAK0p1HX0fnQqIGWoJoC1mCH0d8EPclKf4IOrTD%2bWpnmKVomOYaJvYZDaFIwggZF4RVI1Fd8VzVij63FFzgTaISKNPilYDoFAFaytPn%2b/Sc/qUF3V1NEZpKDDDr%2bERZMUz7du3D1mAl5GhHx8lE4gLfOKJJxyP/vXXX/bTTz%2b5uH/OLBDjT6w/5xT4Zcbdu3ft%2bvXr7hnkGIc9yONsA%2bccqMOhCdrQr0Jok6iXdu3aOUS3aQTwbxA6zSD4Rxj7%2bghg/nfy7bffutMgfPQJUobUQRB5nHvgn2mE5Zw8eTLycVd%2bIwYyWcGY/QYIgITaCgI4wkfE%2bAcffGAXL150A%2bLjThym4CAEP4Ujnz/GcBQGBCDI3377bZfHwQsQwCkYrkHCO%2b%2b8Y%2b%2b9955duXLFCWsCOWH7iAwg2lL/Aks2MBEEbSCoEMxA9IFI8khRZvQcs6nDkvq9ln%2bwkjKAtqkfQQDfEtPBSYXE%2bgckkwG8nz49CBSSC3Adqw7kDuheAh9Wc9agJKv/k7Po3%2bwlAyTNHwRN1W/qV3yKh/4fr0MvEGRM7tkAAAAASUVORK5CYII=' /%3e%3c/svg%3e" width="412" alt="Zombie Create Animation Blueprint" data-srcset="/assets/static/zombie-create-animation-blueprint.2ece984.b27303ece8b03ba6efda5b866e6989eb.png 412w" data-sizes="(max-width: 412px) 100vw, 412px" data-src="/assets/static/zombie-create-animation-blueprint.2ece984.b27303ece8b03ba6efda5b866e6989eb.png"><noscript><img class="g-image g-image--lazy g-image--loaded" src="/assets/static/zombie-create-animation-blueprint.2ece984.b27303ece8b03ba6efda5b866e6989eb.png" width="412" alt="Zombie Create Animation Blueprint"></noscript></p>
<p>This will open up to the AnimGraph and here you want to right-click and create a new state machine and connect it to the output pose like so:</p>
<p><img class="g-image g-image--lazy g-image--loading" src="data:image/svg+xml,%3csvg fill='none' viewBox='0 0 610 339' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-70446afc193fb5822b9a7af0980622fa'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='40'/%3e%3c/filter%3e%3c/defs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-70446afc193fb5822b9a7af0980622fa)' width='610' height='339' xlink:href='data:image/png%3bbase64%2ciVBORw0KGgoAAAANSUhEUgAAAEAAAAAkCAYAAAA5DDySAAAACXBIWXMAAA7DAAAOwwHHb6hkAAALAUlEQVRo3s1a2XOTRxJXlsNg40uydd/3YfmU71OWseRbvm18gA/A9kLFuAhJCKlKCgKVFKYImzdqk%2bVhK/wPqfwf/Af7sk9btbuPv%2b0ee5TPnw7LqWzIQ1ePZnq%2bme759XTPjDThcBhqCoVCiEQi8Pv9grjMdblkc5HP5ytaXjmW2%2b0%2b01gsy2MFg0FRLrYPy8s5avgHF5hkmblUhInLyrZc8so6j8eDQCCQ%2ba2WU9fx971eL5xOZ86x8n2DOfdj4502N%2bU3eG5yju/NAEr50wyQTyGlAZT9Co0lDcD9hAFkoyQJS7UBlG255JXEH5eK5fquWl5C2eVyZckV%2boY0HCtSaG7qb/Dc5Bw1coVyrRQLMeWCklpeScW6gCQlAooZS8l5LKULnDa3LBcoZGVeFQmvYlbjrAhQboISAcpN8NcgoJgxT0WAXD0lAtQrelYEnLYqyj0gxMYTEw5mwZrrwhllQscGkIsUPCFXFAJkaFCGCcmVYbCQnLpNhphC8spyXV2dGIcNEAgEqRyAX8lporLsE3MK0Bh%2bUe8k1Hg8XtFPtLHssTzXqUOkRFgmDDocDjEwkyxLbrPZBOVqK1RntVpPtKnl1PIMfbPZQmU7OttaEGuqR6y5QfBW4kyxY94ea0JnewwdJNfRFkNrSxPaqK69tYV4M/1uRozqmpsb0dLcJFZZPa7dbhdzZK5hCMndXpZlaOGJMXFZ2ZZLXtYx8SDqunzywhdpkmaLFUuTCfxw%2bBne/OUrvHn1BH979Rh/ffEF8SeCv37%2bOZ4/%2bjOeHNzAs4%2b28ewB0y08JXp8/yY%2b39/Cgzs38OGtVWyvL%2bDa4jQSibjQQTkuw5/nyFyTK1MqxgXU8rkywdNcQFKUXMDt9mA21YuHeyt4uL%2bDR/fv4PGjj3Bv5zq2r03jYHcDn97bxfrsCNKJdiyO9mFlahA3ZpPYWhzD9vIEtpYnsb4wjvl0CmOpQQzG%2b9BKKFHrcMIFCoUan88rKCzqAmJjEW2iPaioO%2bKhrE1QfjOoKGdvTBGamINWZHq4B5/cnsXeWgobswPYmBvA%2bkwf1qaZejEZb8FYfwsmB9uRHurATLIbM2S06VQfZkYGMJXqx3C8Cz1dreQGjWhoiCIYCmaF8qwwqCYZwjxegrObFAlHEQhSDh2qEyTL%2bbjbw5tRWPxm7vVx/h1GvrHqaFUcThemrnbjy/1VPLq7jE/3FgQ9uD2HB7tz2N9KY3sxhbX0EJYnB7EwPkBK92GC%2bowMdmKgO4bGaACN9SFCVIjGJRfze%2bFyu4QBlCFRZoKZMJgr1ARDBJeQF2ujBmxP6oi02JqoxsZYJW6la0R5a7Ja1DNx/c0pHTbHq3BjtEKU9%2baM2J01Ym3MjPpokAxyFLpyGZsnZDDpYbVbYLGaYLGZj7jVDDNxs6w7JlnH8kaLEYFQAM%2bePUOMIK%2bt1cJkMYl6g8mQMYAcK6cBlC4Qpo85PRFcS1qwMmrB3EwKc%2bl%2brC2lsHV9CmPJdlxfGcPS3BAWZxOYn47j1uYMpsa6sbE6IeRYpjPmQVOjH9tTJswmKBq42eeDeQ9D2hodao21qDXUnuRGxW/DL/V6Mtilssu4cOkCGcWCp0%2bfIj2dRnlVeUZ5vVFPSPYUdgF1phShSbq8UVpVE3pjFkzMruDa6jpWr2/i7v4BhpKjmJ5bwBr9Xlm7gYn0DHbv3MW1tetYv7GJvbsfYnwqTQq7oLf5Md5rwsKQTRg1EgnlzQR1SgMUIFaKeZW2EumZNL7/4Xs8P3yO/oF%2bXKm8ghp9Dap0VaisroSuVkcueNIFTs0EGQEOmux60oTOei0CEfKtpgBaYhG0tTcgMdSF3r42DAx2oK%2b/HS2tTaiLRtDQ1IBINCx8z%2bN1w%2bNzQWeyIdVRjblBWxYC1GcBrU4rJl9jqDnieahaV43yynLcO7iH%2bx/dR2okhRcvXuDt27fY2NwQMiEy9OraKnwBX9Yps%2bAmmEGArw7rw2bEQpXwBH3o7GpEf7wTqdEEFpemML84haVrM4LGJ8cwMjpCbSkkribQ1dOF%2bsZ6GtyDKr0ZieZyzMftcPujtBfUZcKRpGg0KhDABtDWaGllq7IModPrjohWlBEwNz%2bH%2bYV5aP6kwfmL54X/v3nzBrt7u8Iwo%2bOjaOtoE3sBK6s8Y2QhQH1eDtMm6CQDrCVMaPSWoVxbC7vTjjBNvqOrkwwRx9XkMIZTSeJJJGkFWPnkSBKDQ4Po7O5ElEKQ1W5GaVUN%2buvLkO6xoNZE2ZjdlsnGOMu0WCyCOEvjVWW/dXldAsqlV0pRVl6G0vJSVBLc2QBcN0xj7%2b/vk/9fEsY4X3IeL799iS%2b%2b/AIajQYV1RWZfmxM5SaYdR%2bQ2wABYYCVuAlR12WU62opHNoJ3hEyQAfilF0NJ68imRoWNHxMV6luYHBAyDjdTuzt7aC5owet7g%2bwmgzizv7HePL4S4yPj2N5eRmbm5vY2dnBwcEBfv75Z3KvNoyMjeDJV0%2bEwfl7jKS%2bgT44XA5UVFUI%2bAv/JoOIMinI/PDwEK9evcLDzx4SKpcy/s9tjIBwKJz/QkR5PyddgOG60m9G1HGJEKCDjcJNIOhHMyUYnd0d6O3vIf/vPUG9fT3kKh20VzQT9Iz45ptnmJxbRLvnHP7%2b8gD/%2bOe/8N///BuvX7/Gd999h5cvX%2bLrr78W9O7dO2G81vZW3Lx9EyYKcWwAVr4/3k9osv5iAFJaKF5TjSsVV%2bDyuIQxeS9YXFrETz/9JKICRwOWZ2Uj4TwuwFbgAnNZDpGiDi%2bFwV6Kr9bLOHdFK4xQWWuA1mhGDeXteqvtmOwneI3ZSjImlFXr0N7TizK9HTH3RUy0GtHWHUeK4MsHEYa9yWSCwWCA0WikMUOoqq4Sq8arz/C9ePkiSkpLUHK5RLgHK80ry6svV/iD8x9gaXkJ6%2bvrAv7c7/DFoTBKWUWZ6MOXrVJH5pway4sUDReUJO4APG7YXT4kGk2YjF5Ao70Erc4SxJwXEXMcUUseku2xY/kGWwlmGy8g3mSHweKA3WbNXLRI4knxflBeUS5WmVeVFZQrzcR%2bzW2CqMztmnMaYYSPP/mYjsVOXCq9JNzjzt07op73C5az0ymT9ZL6sUF4z2GeMxNUpsK9USsmKBcYazFjvOWIKylXXarRgLFmE8ap33jMjL4GB7nPyfO4eiw2SmVVZUZxsdI5iFHCnJHBLvPj2x/R3dMtogHXs9J9/X0YTAwKJLHBMptgKFg4Fc51K%2bykvN4TqIPLH4Y7EKG9gbg/cky566yEHpcvRP2O6ryBcFG3wtIAeZVnJJBCvLrTs9O4vXMbfnJXDoPsIowcJo4WHP7Y/7mf2ATD4V93K%2bz3%2b2jVwiI0RsJHIZLzeVk%2bwUWZTpGcetIJMXL8O3zKLbISAUrYq4kVYr92U5IlVp18nvcHgRjaF6Sb8ObHBpFG41T4TJng%2b7oVrqisEBMvRLzC0kWEolWKtsojBPBeIuvYqKceh/PdpMpN6ve6FTaZTSJCmM1mQRwluE5wFRlNRiGj1%2btFFFHKy/4caTjhUqMtZyb4PhBw2stQobuKo4QtfOJliENpljsHQ4WfxgoNkutprBjKhYDTFFK%2bDOXaLNUbtXKsXE9j%2beSLuhD5rQxw2mTUCHivBjirCxR6gf09X4fVT2PFjPmH3QTfy9OYzI%2bVlO9pTC2Xjwo9jeUbS97Vn2Us2U9ecRfbR54FMk9j/69/iJzlXxvKf4gUO85v8g%2bRP8LLkByLD0T5xsr3DfnCo%2bxXaG7ql6H/AQqLepEApTbZAAAAAElFTkSuQmCC' /%3e%3c/svg%3e" width="610" alt="Zombie Animation Blueprint Anim Graph" data-srcset="/assets/static/zombie-animation-blueprint-anim-graph.7426fad.b84af2cd0ee9b53b95b3555da609b615.png 610w" data-sizes="(max-width: 610px) 100vw, 610px" data-src="/assets/static/zombie-animation-blueprint-anim-graph.7426fad.b84af2cd0ee9b53b95b3555da609b615.png"><noscript><img class="g-image g-image--lazy g-image--loaded" src="/assets/static/zombie-animation-blueprint-anim-graph.7426fad.b84af2cd0ee9b53b95b3555da609b615.png" width="610" alt="Zombie Animation Blueprint Anim Graph"></noscript></p>
<p>And then you want to switch to the Event Graph tab, delete the Try Get Pawn Owner node, and drag out from the Blueprint Update Animation node and connect it to the UpdateAnimationProperties node like so:</p>
<p><img class="g-image g-image--lazy g-image--loading" src="data:image/svg+xml,%3csvg fill='none' viewBox='0 0 657 219' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-d0af0c38d8918ee77e08aac61f6d7ab5'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='40'/%3e%3c/filter%3e%3c/defs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-d0af0c38d8918ee77e08aac61f6d7ab5)' width='657' height='219' xlink:href='data:image/png%3bbase64%2ciVBORw0KGgoAAAANSUhEUgAAAEAAAAAVCAYAAAD2KuiaAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAIjUlEQVRYw81YWXMbxxFmKoklkgCBxUUcBAEssAewOEgA4mmSonhBEsVDPCVTJE2VKNmyRN2yYsdRUqk4cdlO4qRScmI7kiqy4yf/wVR96R5gwCUCksqbH77qnpnuOXp6ZrqnJZPJgKHrOhKJBCzLgmmaSKfTh4LbWUfTNBiGIfij5Bksw7KpVOpYWbsOyzfO57DxuJ5lWee4OUnZFlngxcTj8XrDYQu3G4AHYsM1a2%2bmz7JHGYD17Lo8RjKZPFB33NzYyKxz1NxlHcv%2bKAyQEXNgnvplZNKCWkRTKVqMKetqMpl9HQlZb5oGNNKp1h1tAOEB7PIMnpxKRyCXzdLAGWSpLstU8ixXKzNlOYMXT53k7O02mq31bdV4lmVDy2MnoRlZpIwcUnq2CuYJGqE7QTtqq7O3H0CtXtUs0iFDU5%2b6WZ2rPA6N43JdC0%2bIwec/HI0iSu4TIZ5plHZLgPguVRV8N4F5psHu7n1ZKcM8tzNNECU%2bRohzv%2bRhsVhcjMeeoGkpJFM6BgpRjBY7MdJLKAaJDxIfxFgphMGcV9SPFkMCsp4pl8dKYYxymflyBCNUHurpxHhfFKW8CjWpiXGq41XHlTwflRaVJpckhGkxvZEI3ikVcbXYi%2b18HlfIQptkKeavlkrYIPfaoHOzlctiizxgO5cTMm8XCiSTw1Yhj83eHmyQ/uViEZcG%2brFULmOurw%2bzxC8QNWjwGBkiqSYQ6U7S5Dvx%2bEEF9351He//ZhcPPtzEo19u4/FH27gv%2bC08JNz/YFPgEdd/cAW/ePo2Hn64gbuP13H/yToePVnF3t153N6bxXs3p3B99wz2NjXkzS4aT6UNjotNtoOPvDgC7MJxWsic14MfVlbwl0oFf52dxbO1VXy9tYnPzp3Dq9u38RXxz3d38SXRz%2bfn8dncHL69s4d/Udvfqe6LlWW8un8PX9%2b6hX/cvYu/Ef8nwvrkBNZPlfE7OpdDFr0GNFYumyF3zWF9OoK37t3D2JPvMXP3z7j1%2b3/i/S%2b%2bx8M/foedp1/iKuHB599S/Qvc/Pi5aNv97Td4l/ibf3iJj579gL1PXuLepy%2bw9/FXGF67hcLMZWgjK7i0mMe5kYQ4Glbm4BHgdYsjIC40YhKajj6fDztqHJdpd1YiYSxHu7DcHcUi8YvEL8ZjWKGOzhI/Q5imtlkqTyVVnEmpGCHdUVPHkEFuTfXFtIGCRZeflkQw2IlUvBvhWAxxI40stSVSFpZOh7B8bRM9K3dgTS1hdPESTp29iNLMPGEB%2bTOzKFcWUKZy/7lFaltE/%2bwK%2bi%2bsYnjxMiobVzG2vIGxi5cwNr%2bMntEJGMU%2bdFtlLEzGMDMcJ0NnxOXIa%2bWbX7424hWQFuELzUeTVDr98BC8wUANxIeqPNcrfq/gfSFbmeWlTqevVvbBR5ThDXixsrYCM2MiH1awWKB7JW0hlMpjaSyIt%2b7cwsDOU7y5/QjT1x/h/LsPcfbGA0zs3MHpzfdw%2bso7mNi8jsnNaxhZ3cbY2hbG16%2bQAdYwMLuIkbl5DFZmcGp8DGaxhDCde2/MwPmRICrD5AG6JV6VQ%2bOAdKb6RPloMQIB7z5vg7fW5q2XPfW6Knzw88IDvhrvF3C4HPj3d68wU5nCg3AL/jP%2bU/y6N4BJU8PyKF1uQ0m4YyaiRgbd6RxihKiZpbKFLj2NLs1EJGXQwnSEVQ2hBHlULEGIi4s40NUFfzgMfyhEhg/QZR6BKxDCTNmFylCCXhFLPJNNn8F6UKAb8NAd4PK44Pa4XwsuxVWXZ77d2Y42R5tYsNPlRKujFY4OBzrcHXC7Ffy83YFiRME1uvVvFCJ41uvHN1Pt6NdP4uXzF8jlM2hrPwHFQ/KKE4pSo1T2eF1EayDe43Xvw6fUwZtS6MlBt/KYKLShMqgKDzjSADJMFQbgRRHcirvONwMvuoMnSJQXG0vEMEYuODk1iXxPHoPDg3hzdBglegXMvIbcjJ920guXN4B4hnfYQljLY224EwOGAzvXbtCdkICTjOUhr1J8Hri9iih30HjCiFQ%2bHO4qaD66kaInN4nxXCtmBsgAxr4BGoOjAwZQPDygUwx2LGjxUpYNEKDzzwvvLfUiSZdeIpkQvEGDRGJBJMt0LMIu%2bP1%2benUokKL7gAOc%2bcEQetRWtPzsBPXlFMZlr3F0tNNOKwiGgwh3hRGNRW3GP2xTqrTD7cAbjg6MZ9sw3f8aBpBhaiBAl5ufLjGfdx/eKtg7GJLnNkVRhNEEz8brcMLhdMDldglInuU8io%2boB130elTDXxMJNkB/EIV4K34ytApXtg/Dg/2YmJ7GxeVl5CiuGBgeIn4Jp8%2bMk8FpcYr7aLirRjjhVDCaJgP08R2QEVHosbkABwf1XMDcT04awYqsx5GUzAXsiUyzXIBjc3s2yAZQhQFC6FffgCMUpQuTDBT2wdTjyGd1REJeihd0gYypwu/rgM/rPBZ%2br0N4UyV7EhPl1/QAnhhHRtIyhy3ebgB7MnSUvDQIy9azO4JO8cCpbBJLJTfmcm1YKDhwId%2bO2WwrzlsnMZd3CHreasUFap8vOAUWeqp0vscGW/0c9cP0YpkMmDHoGKbrcYB9PvU4QCZD8j%2bgWeLQmESwnPwPYN6ecDTTl/8M9mSIExWT4gEjzclSRkRrWQLfEVxmalAcb9F9IdsFX5OzoyrDnmVQ4JUS8jpdtOnjkiGZGPDiu%2bg9lUmCTBqagdtl%2bsy5hEwypF4zfZZhWdY5UH%2bg3yoEL%2bo0kTypst/UwfZkgy5TVU0KHdbVGubcODeRDEl350KMwlTm2Ru4/jBwu9ThhcljIfWa6cvdZyMc3rf%2bPzosf6C/Q%2bdWG7s2Brt845wb58Z8S7MvscZvp2bfS/YjkGlwM7u7NX6JySNw1Bj2dvkldpSsXb7xS%2byouYlLsP4p0fgK/Ij/BI%2bb2//zJ/hflf3WljAESoYAAAAASUVORK5CYII=' /%3e%3c/svg%3e" width="657" alt="Zombie Animation Blueprint Event Graph" data-srcset="/assets/static/zombie-animation-blueprint-event-graph.6744923.c536f2ffb50085af1441b7f3d64098b4.png 657w" data-sizes="(max-width: 657px) 100vw, 657px" data-src="/assets/static/zombie-animation-blueprint-event-graph.6744923.c536f2ffb50085af1441b7f3d64098b4.png"><noscript><img class="g-image g-image--lazy g-image--loaded" src="/assets/static/zombie-animation-blueprint-event-graph.6744923.c536f2ffb50085af1441b7f3d64098b4.png" width="657" alt="Zombie Animation Blueprint Event Graph"></noscript></p>
<p>And then finally we'll create our states and their transitions:</p>
<p><img class="g-image g-image--lazy g-image--loading" src="data:image/svg+xml,%3csvg fill='none' viewBox='0 0 758 531' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-a544d5d5532931a946ba9cefc9b7a4a3'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='40'/%3e%3c/filter%3e%3c/defs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-a544d5d5532931a946ba9cefc9b7a4a3)' width='758' height='531' xlink:href='data:image/png%3bbase64%2ciVBORw0KGgoAAAANSUhEUgAAAEAAAAAtCAYAAAAeA21aAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAL7ElEQVRo3r1aW28bxxXWa5/60qc0tiRelsvd5ZIiqQtFiXeRlGXLdkXJluzq6tiOHSeFUyeoDdVBXKiI67aO8%2bA6cVMU6A3oQ/9AX/qQFClgoCjQl/6Z0/MNedbD1VLUNQ%2bDnZ0zc%2bbM2XOfHYjH44Rm2zYZhkGxWIwsy1Jj8hR4NBqlcDis%2bjocTzTTNBUOeffjARw4/DB9nyC4wNAH3L%2b3jgdw7BNEAxroA1zGBvwHPAoDsBYbBBHeiwH%2buZFIZE8GAB7EAJ1BwoAgGgMZIAt0BuhIdORggI5UkKFhrXwhvfkZ4IdLA1wO2KvtBdcZ4MerSxjo9BgAhGjgzPDwsDog%2bhjDZGkCHxwc7ILr87A2FAp1rdPh6AOH4NPnSQNcYH4a0IaGhnbhlqfQ6F%2bnv4M%2b0CnzB0Q0HMfxxAMijjF56nAgQ1%2bH44mGteCuvPvxyBfQRVLgQTrup0HU0L%2b3DhcV9MOFHtAn0o33ASFMFgsDgogE/KBGUG%2bAj4yMUD6fp1wuR5lMhrLZrGoTExPqCfjU1JRisp8GYVAv/MIg/7ogG%2bAx4Di9wH6MIA4/OjZKc2fnaG19jTY2Nmhza5MazQbdfPsmLbQWFHPACFOj5cSMoP8L6xLQSwV6iVcvCZB5gONwbtKlZCpJ1VqVpgvTVCwV1RPv%2bSlm0OgojaRGutTRrwK9VET/AP55%2bhlPRAL6xQFW1iI35VIqmfLwpVIpKhQKnoRgfTqbYSY5ZGNv4NmHBBxLHCAM8B/wSAyweK3FxseOUbleVgcWPcVhxsfH6fLiZYqGmfC4SeFQmEzLpOSES%2bmEQ07AAXsxQGg8EAP2MoJB4qUzwG8sPQbYmvjFedw2qVgtUmG6oNZDnWQt1KFWqvHXtj0CwTD0E2mHMm6C3y0lCfZJGMF%2bcYAf3jcOGA5RJKT53UiIxvJjVCwUaWh4yIsDvKCKmVUtVpUERKKRbj9v8GFckxImB1iR9tggw0O%2bvXUa%2bsUBckYZ66sCB3KDMY4D4jFKTbKOO7bq4/CNRsMTO11FMAZjWK/WyTLb6rIrF2A8bjpBaeUWWSrgSViNjqoC8r4vBujwfgwwnChlzmTIdGOUHktTvVH35vuTnb4M4HeokOVYiglJm1WC19TZRcbBUN8Bj40BR/ECEK1wLEyJTIKazaZyZ3p%2bsYsBSY0BYFAkIBs0mQY7TklmggV11PKBI3uBfnGAtASLYDvZiai%2bbXdC2IA4wE27VKlW6OqVq/TixQsaGxvzmKCMXGc%2bDgYJaNQaZJu2dwDd%2bEICHDaG2UaWnBEOwRNxGnES%2b44D/LHKgeOASDRG4SgnJ7E4DQ6H6dQgGykWdYyZ2leQSDBqRakx21Bfvlgs0vb2torqJAPrJwG70mF4EYcJnuJ39ibRWJSSzIgRVgfzuNLhXjbAYQNUzGWpMjmq2vRYivJZV/XLkxy3JxMdibGU6zJsg0rVEk3mJsmIGQrf6dOnuwgJYkBjLyOo5nVUg5mhngmLUqwOqY4EWtYRbIAn4omE95XQN3jT6fEMffXFA/rvXx/TN7%2b5S18/u01ff3aHvnr2Dv3n5V1any9TiCUkyfPxleDrkcgAD3w9GnCJ39dVQJKd1EiKZqAC8dciKvP1JvgkTrBTLAWsamlWB1FDp6OmErrLmL5ezihjA/CL0k6dOqX8fDgcolOnB2mMN/nn739G//7LJ/TqDzv0ry%2b36dUfd%2bib3z2k//3tV7TWmqPvfPd7NBgaonF2d7mJHL355psq5/Ya45WnxBGSk%2bM9zj7%2bXLFCMY4dhkPDSmJ2rdX6HpzjjZCB4oxBiUi7TiBnkH7QE/vLO/AMCEcQogqXXNdt580sxk/urtLn22/Rr%2b%2bt0ZMfrdDj95bp6b1VevbhOt1dO083lprUmm/Q0uVlCjHjIqi4oC4grZN/o29wP8w6bnb6CGrivMdFVpkUj4WMtpcxtbVduDCH4TrumBOnNEeLWU6t0%2bm092UheTgTzoIxqBrgUggRugZE5BcWFmh5eZlu3bpFt2/fpkKxRO%2b9fY3%2b/Mm79OOtFv1y%2b136xYPb9NnH79PPP7hBj%2b5u0uePH9CXj96hTz/cpAhHcgmO5eOMPIEwVhrC3c7TgfFhAvDMsmG8f/8%2bnWFXmc9w%2bmuybUmXyI5y5Mc6LWu9Z6dvMgOl7%2bDDsV2YZC9TYINbrVZVOt1abNHyyrJKsZcuLdHq2iqdv3Ce5xS8okiXF0DnwoULdOXKFdra2qJNztHthEuts3V6%2bdFNyo0maWVxnq6tr9Dm6jKtX71Ey615uvHWJm0uNum3j%2b7Q0tJlqnBaWymVaIYJ8Vql4j1r3CpMaK1cprNnztDLL17SjevXaWv5LM0WKnS5zDjyxcC10i9z5uiN12pU4fccMwA1hgRLAuoMFy5eoMWlRWrONmn2zCytb6xTpVah7Gi2bd9ixu6KkLgQuKF2YYNDWtdRor9z5xJtXztPDzbP0U825uin1y/Sx7da9MHqLH1674f0/tYiJVjElLix%2bEHcpLl4QhQ7cIs3bYtmgoZCMVqZH6FXf39C929VWDdDig7M19fqfcDRT3X6FWZEbWZGuVox5ModszrhHYdUKTRLFTLPXSUxvw%2bVWF3Gh9k4Rdjni/4NsfGIcRwQUVmXpYzlDxYWqVYrsv4iEWm7Ib3FO09sHunoODK7wZBBK80U/eNPT5i5NYVb3JhqHWL1JjZC5R38JRcWWnywvBqXOELsWkxbj6BLiq1dVWG94iML9EjQ0dyQOkCnKArfjzhB1iLsHR9P8ybw43YnUrS8iFGY2hUJMgNdzvkvNQuU5MTJ5HejEwkGVZ2wj8QJoLPBeUaG7YdhmIoW23a6iqJ%2bPIGR4IFLYp1cwF/thbgh60unHRWYvC6DxXszQCVDKapUmtzvEQprtOmtwnYgny8x/jaz%2b9UDejJA8mR8XfhFESF/7V7g8KF%2buEgGkFY5B3BduQBhO5KKd%2bEBDjmEqi/yl6uVqpzgGEpv5V5Ax401qBpPT0/TG298n3I59Mss9oZSA6EFTe4ldGb54fo9woCnI50wVURI9ETgUo8DAv22RdQGfeghDFazWWeJMVk8LZqbyzCnTWU3hFHeWja0sNwzlRkyjfY%2bkXBk175g%2bkcPH9LTp0/VV6vVUF/gXMDsplG3AbvskJaO6/nAsdYE0R8aGlT1/ZmZKjMBYa1chR0uHRa6SuxeW60WP8uMc4Rh5vHVBINswF43Q70MFGCo8O7s7NC5c/NULhcYHlPGKdgI9k%2bHpY/xMscPtp1ie8ORY2pKMeHE0%2bH9SgDGAEMy9Pz5c1X/h85WKtOKCZAAEHyYgghogsWfmJhmG8GxQnyM27hSgRMvi%2buiuJ%2bKEOBoEpDUOForFHLKILYlYA8G%2bNJhIbhcLjFjS4zPUuvbdBq7DniodPiwZXH/paYcSL8cFdyNRpMmJ7MMh0XerQLCAF0F2ocx%2bOB5lqIZxtt2d/0uR/cqi%2b9bBXpVhQ9zMYKx14ESrruiXR4E9wLNWpMs/rrqYkT9fxBXoTiuyOp1jhHirlf0iHYi0OOoCisGiH8U8X2dCxjeU4fDJclB9XkSG%2bjiL7D2V3WUUUwmOdvjRCshhQqOBAsTBcq6WaUCCHGliJHNjvPcMS8ekJjAv7dOg8QB8u6H6/8G4H1AAFLRFQ7KoQUufh6Biqnn%2bZrP1ZMpvQk%2bwMfHJ5ShnOEEBpeh9Xpd2Ymp6SklJUhpMY6WyWRVmAtjJ3h0Bus06HD9wH4a5ZLHqwcc9XZYDzP73Q5jLq7HEfyUKiXa2NxQufrWtS11f4D%2b9RvX1bU5bovx/0Bb9O193w4H2YDjzQWOeD0OvcbB1KWH/Vo/ETxhTEV2cVPNQTnd79NP5Hr82/xJStJW1cx411q9aixjOg1BP0kF/UAR9JOUXpUOTIePGgnq/wjtpQJ7/ULjL5vv9Y/Qt3YxcphfZA7yo%2bRx/Sd4Yldjx2kD/LlA0FeM9iiInJgEyFcT/dTdoN/d6G6wVxwQ5AZ1fxwUJ%2bjv8OO91ouf7wULcoP%2bfcTVe27QX3jQCyJ6IBRUENELIyIdQoDeBI%2b/IBLU9ILIfuBBNO6nICLz/w/xlBdPCIHoKwAAAABJRU5ErkJggg==' /%3e%3c/svg%3e" width="758" alt="Zombie Animation Blueprint Event Graph" data-srcset="/assets/static/zombie-animations-initial.e4ad7cc.4513516876c3279cb460e3cd8fa67655.png 758w" data-sizes="(max-width: 758px) 100vw, 758px" data-src="/assets/static/zombie-animations-initial.e4ad7cc.4513516876c3279cb460e3cd8fa67655.png"><noscript><img class="g-image g-image--lazy g-image--loaded" src="/assets/static/zombie-animations-initial.e4ad7cc.4513516876c3279cb460e3cd8fa67655.png" width="758" alt="Zombie Animation Blueprint Event Graph"></noscript></p>
<p>I won't list the transitions here as it's a bit tedious but it's pretty easy to set it up since for now we're just using <code>bIsRoaming</code>, <code>bIsChasing</code>, and <code>bIsAttacking</code> but feel free to look at the <a href="https://github.com/robertcorponoi/unreal-zombie-ai" target="_blank" rel="nofollow noopener noreferrer">repo</a> if you need help.</p>
<p>Also note that we're not using the death animation yet but we'll add that later.</p>
<p>So now we can go back to our ZombieCharacter, load the ZombieAnimBlueprint, and set it as the anim instance class of the <code>ZombieSkeletalMesh</code>:</p>
<p><strong>ZombieCharacter.cpp</strong></p>
<pre class="language-cpp"><code class="language-cpp"><span class="token comment">/**
 * Sets the default values for the ZombieCharacter.
 */</span>
AZombieCharacter<span class="token operator">::</span><span class="token function">AZombieCharacter</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	<span class="token comment">// Load the assets needed for the ZombieCharacter.</span>
	<span class="token keyword">static</span> ConstructorHelpers<span class="token operator">::</span>FObjectFinder<span class="token operator">&lt;</span>USkeletalMesh<span class="token operator">></span><span class="token function">ZombieSkeletalMeshAsset</span><span class="token punctuation">(</span><span class="token function">TEXT</span><span class="token punctuation">(</span><span class="token string">"SkeletalMesh'/Game/Models/ZombieJill/jill.jill'"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">static</span> ConstructorHelpers<span class="token operator">::</span>FObjectFinder<span class="token operator">&lt;</span>UAnimBlueprint<span class="token operator">></span><span class="token function">ZombieAnimAsset</span><span class="token punctuation">(</span><span class="token function">TEXT</span><span class="token punctuation">(</span><span class="token string">"AnimBlueprint'/Game/Blueprints/ZombieAnimBlueprint.ZombieAnimBlueprint'"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">// Create the ZombieCharacter's skeletal mesh and set it to be the mesh loaded above.</span>
	ZombieSkeletalMesh <span class="token operator">=</span> <span class="token function">GetMesh</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	ZombieSkeletalMesh<span class="token operator">-></span><span class="token function">SetSkeletalMesh</span><span class="token punctuation">(</span>ZombieSkeletalMeshAsset<span class="token punctuation">.</span>Object<span class="token punctuation">)</span><span class="token punctuation">;</span>
	ZombieSkeletalMesh<span class="token operator">-></span><span class="token function">SetRelativeLocation</span><span class="token punctuation">(</span><span class="token function">FVector</span><span class="token punctuation">(</span><span class="token number">0.f</span><span class="token punctuation">,</span> <span class="token number">0.f</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">90.f</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	ZombieSkeletalMesh<span class="token operator">-></span><span class="token function">SetAnimInstanceClass</span><span class="token punctuation">(</span>ZombieAnimAsset<span class="token punctuation">.</span>Object<span class="token operator">-></span>GeneratedClass<span class="token punctuation">)</span><span class="token punctuation">;</span>
	ZombieSkeletalMesh<span class="token operator">-></span><span class="token function">SetupAttachment</span><span class="token punctuation">(</span>RootComponent<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre>
<p>Now let's get into creating the AIController for the ZombieCharacter so that we can make it move around and respond to the PlayerCharacter.</p>
<h2 id="adding-a-stimuli-source-to-the-playercharacter"><a href="#adding-a-stimuli-source-to-the-playercharacter" aria-hidden="true"><span class="icon icon-link"></span></a><strong>Adding a Stimuli Source to the PlayerCharacter</strong></h2>
<p>Before we can get into the AIController for the ZombieCharacter, we need to improve detection and performance by making sure that the AIController doesn't sense all Pawns and we need to create a stimuli source on the PlayerCharacter so that the ZombieCharacter knows it's supposed to see the PlayerCharacter.</p>
<p>So we have to:</p>
<ul>
<li>Change ini setting so that not all Pawns are registered as sources for stimuli.</li>
<li>Add a <code>UAIPerceptionStimuliSourceComponent</code> to the PlayerCharacter to manage the their stimuli sources. In our case we'll only be using sight but you can add more than one sense if you wish.</li>
<li>Add<code>UAISense_Sight</code> as a registered sense for the PlayerCharacter.</li>
</ul>
<p>First let's handle the first point by setting <code>bAutoRegisterAllPawnsAsSources</code> to <code>false</code> in the <code>Config/DefaultGame.ini</code> file:</p>
<p><strong>DefaultGame.ini</strong></p>
<pre class="language-ini"><code class="language-ini"><span class="token selector">[/Script/AIModule.AISense_Sight]</span>
<span class="token constant">bAutoRegisterAllPawnsAsSources</span><span class="token attr-value"><span class="token punctuation">=</span>false</span></code></pre>
<p>Now let's go ahead and define the <code>UAIPerceptionStimuliSourceComponent</code> in the PlayerCharacter's header:</p>
<p><strong>PlayerCharacter.h</strong></p>
<pre class="language-cpp"><code class="language-cpp"><span class="token comment">// Used to register sense for the PlayerCharacter that are detectable by the ZombieCharacter.</span>
<span class="token function">UPROPERTY</span><span class="token punctuation">(</span>VisibleDefaultsOnly<span class="token punctuation">,</span> Category <span class="token operator">=</span> Player<span class="token punctuation">)</span>
<span class="token keyword">class</span> <span class="token class-name">UAIPerceptionStimuliSourceComponent</span><span class="token operator">*</span> PlayerStimuliSource<span class="token punctuation">;</span></code></pre>
<p>And then in the cpp file we create the component in the constructor and register the sight sense:</p>
<p><strong>PlayerCharacter.cpp</strong></p>
<pre class="language-cpp"><code class="language-cpp"><span class="token comment">// Create the stimuli source and set it to register as a source for `AISense_Sight`.</span>
PlayerStimuliSource <span class="token operator">=</span> CreateDefaultSubobject<span class="token operator">&lt;</span>UAIPerceptionStimuliSourceComponent<span class="token operator">></span><span class="token punctuation">(</span><span class="token function">TEXT</span><span class="token punctuation">(</span><span class="token string">"PlayerStimuliSource"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
PlayerStimuliSource<span class="token operator">-></span><span class="token function">RegisterForSense</span><span class="token punctuation">(</span>TSubclassOf<span class="token operator">&lt;</span>UAISense_Sight<span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p>All the above does is make sure that not every pawn triggers the zombie's sight and we specifically make our PlayerCharacter a trigger. This helps with performance and making sure the AI doesn't get distracted by other zombies and neutral characters.</p>
<p><strong>Note:</strong> I was having a bit of trouble with the above and no matter what I did the stimuli component would not register a sight sense and I had to set that up in my component manually in the editor. As soon as I find out what the issue is I'll update this with the solution if others are having the same problem.</p>
<h2 id="zombieaicontroller-perception"><a href="#zombieaicontroller-perception" aria-hidden="true"><span class="icon icon-link"></span></a><strong>ZombieAIController Perception</strong></h2>
<p>Now let's get on to the fun part, the ZombieAIController. This doesn't mean that we're done with all of the other pieces yet, we'll need to keep adding to the PlayerCharacter and ZombieCharacter but this is where all of the ZombieCharacter's actions and movement are decided.</p>
<p>Let's see what we're going to need from the ZombieAIController as of now:</p>
<ul>
<li>We need a <code>UAIPerceptionComponent</code> so that we can perceive the PlayerCharacter.</li>
<li>We need <code>UAISenseConfig_Sight</code> to attach to the component above in order to detect the PlayerCharacter through sight.</li>
<li>We need a couple variables to tweak the range and age of the sight component.</li>
<li>We need to override the <code>OnPosses</code> method so we can get a reference to our ZombieCharacter.</li>
<li>We need to define the method that gets called when the perception component broadcasts the <code>OnTargetPerceptionUpdated</code> signal.</li>
</ul>
<p>And that's all for now, we just want to keep it simple and make sure that the basics work before progressing further. Go ahead and create a new C++ class with a base parent of AIController and name it ZombieAIController. I put my script in the Zombie folder since it's used directly with the ZombieCharacter.</p>
<p>Now in the ZombieAIController's header, we declare the two components and the variables used to configure the sight:</p>
<p><strong>ZombieAIController.h</strong></p>
<pre class="language-cpp"><code class="language-cpp"><span class="token macro property">#<span class="token directive keyword">pragma</span> once</span>

<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"CoreMinimal.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"AIController.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"GenericTeamAgentInterface.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"Perception/AIPerceptionTypes.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"ZombieAIController.generated.h"</span></span>

<span class="token comment">/**
 * The ZombieAIController is the AIController that manages the states and movement
 * of the ZombieCharacter.
 */</span>
<span class="token function">UCLASS</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">class</span> <span class="token class-name">ZOMBIEHORDEAI_API</span> AZombieAIController <span class="token operator">:</span> <span class="token keyword">public</span> AAIController
<span class="token punctuation">{</span>
	<span class="token function">GENERATED_BODY</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token keyword">public</span><span class="token operator">:</span>
	<span class="token function">AZombieAIController</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">// The ZombieCharacter that the ZombieAIController is controlling.</span>
	<span class="token function">UPROPERTY</span><span class="token punctuation">(</span>VisibleAnywhere<span class="token punctuation">,</span> BlueprintReadOnly<span class="token punctuation">,</span> Category <span class="token operator">=</span> Zombie<span class="token punctuation">)</span>
	<span class="token keyword">class</span> <span class="token class-name">AZombieCharacter</span><span class="token operator">*</span> ZombieCharacter<span class="token punctuation">;</span>

	<span class="token comment">// The ZombieCharacter's perception component.</span>
	<span class="token function">UPROPERTY</span><span class="token punctuation">(</span>VisibleDefaultsOnly<span class="token punctuation">,</span> Category <span class="token operator">=</span> Zombie<span class="token punctuation">)</span>
	<span class="token keyword">class</span> <span class="token class-name">UAIPerceptionComponent</span><span class="token operator">*</span> ZombiePerception<span class="token punctuation">;</span>

	<span class="token comment">// The ZombieCharacter's sight sense component.</span>
	<span class="token function">UPROPERTY</span><span class="token punctuation">(</span>VisibleDefaultsOnly<span class="token punctuation">,</span> Category <span class="token operator">=</span> Zombie<span class="token punctuation">)</span>
	<span class="token keyword">class</span> <span class="token class-name">UAISenseConfig_Sight</span><span class="token operator">*</span> ZombieSight<span class="token punctuation">;</span>

	<span class="token comment">// The radius around the ZombieCharacter that the PlayerCharacter will be sensed.</span>
	<span class="token function">UPROPERTY</span><span class="token punctuation">(</span>EditAnywhere<span class="token punctuation">,</span> BlueprintReadWrite<span class="token punctuation">,</span> Category <span class="token operator">=</span> Zombie<span class="token punctuation">)</span>
	<span class="token keyword">float</span> ZombieSightRadius <span class="token operator">=</span> <span class="token number">500.f</span><span class="token punctuation">;</span>

	<span class="token comment">// The radius around the ZombieCharacter which they'll lose sight of the PlayerCharacter.</span>
	<span class="token function">UPROPERTY</span><span class="token punctuation">(</span>EditAnywhere<span class="token punctuation">,</span> BlueprintReadWrite<span class="token punctuation">,</span> Category <span class="token operator">=</span> Zombie<span class="token punctuation">)</span>
	<span class="token keyword">float</span> ZombieLoseSightRadius <span class="token operator">=</span> ZombieSightRadius <span class="token operator">+</span> <span class="token number">50.f</span><span class="token punctuation">;</span>

	<span class="token comment">// The amount of time that the ZombieCharacter will remember the PlayerCharacter after</span>
	<span class="token comment">// seeing them.</span>
	<span class="token function">UPROPERTY</span><span class="token punctuation">(</span>EditAnywhere<span class="token punctuation">,</span> BlueprintReadWrite<span class="token punctuation">,</span> Category <span class="token operator">=</span> Zombie<span class="token punctuation">)</span>
	<span class="token keyword">float</span> ZombieSightMaxAge <span class="token operator">=</span> <span class="token number">5.f</span><span class="token punctuation">;</span>

<span class="token keyword">protected</span><span class="token operator">:</span>
	<span class="token comment">/**
	 * Called when the ZombieAIController takes over the ZombieCharacter.
	 *
	 * @param ZombieCharacter The ZombieCharacter pawn.
	 */</span>
	<span class="token keyword">virtual</span> <span class="token keyword">void</span> <span class="token function">OnPossess</span><span class="token punctuation">(</span>APawn<span class="token operator">*</span> ZombiePawn<span class="token punctuation">)</span> override<span class="token punctuation">;</span>

	<span class="token comment">/**
	 * Called when the AIController's perception is updated.
	 */</span>
	<span class="token function">UFUNCTION</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token keyword">void</span> <span class="token function">OnTargetPerceptionUpdate</span><span class="token punctuation">(</span>AActor<span class="token operator">*</span> Actor<span class="token punctuation">,</span> FAIStimulus Stimulus<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre>
<p>Now in the cpp file we:</p>
<ul>
<li>Create the perception and sight and set the variables for the sight.</li>
<li>Set the sight to detect enemies, neutrals, and friendlies as we'll be handling teams later.</li>
<li>Set the sight sense to be the dominant sense of the perception component.</li>
<li>Create the <code>OnPossess</code> method and assign the `ZombieCharacter variable if we can cast the Pawn that was possessed to our ZombieCharacter.</li>
<li>Create the <code>OnTargetPerceptionUpdate</code> method that gets all of the currently perceived actors, and uses that to check if the Actor has entered or left the sight radius Lastly we print this information out to the screen so you can see that it works.</li>
</ul>
<p><strong>ZombieAIController.cpp</strong></p>
<pre class="language-cpp"><code class="language-cpp"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"ZombieAIController.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"Perception/AISense_Sight.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"Perception/AISenseConfig_Sight.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"Perception/AIPerceptionComponent.h"</span></span>

<span class="token comment">/**
 * Sets the default values for the ZombieAIController.
 */</span>
AZombieAIController<span class="token operator">::</span><span class="token function">AZombieAIController</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	<span class="token comment">// Create the perception component and the sight component and set the default values</span>
	<span class="token comment">// of the sight component.</span>
	ZombiePerception <span class="token operator">=</span> CreateDefaultSubobject<span class="token operator">&lt;</span>UAIPerceptionComponent<span class="token operator">></span><span class="token punctuation">(</span><span class="token function">TEXT</span><span class="token punctuation">(</span><span class="token string">"ZombiePerception"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	ZombieSight <span class="token operator">=</span> CreateDefaultSubobject<span class="token operator">&lt;</span>UAISenseConfig_Sight<span class="token operator">></span><span class="token punctuation">(</span><span class="token function">TEXT</span><span class="token punctuation">(</span><span class="token string">"ZombieSight"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	ZombieSight<span class="token operator">-></span>SightRadius <span class="token operator">=</span> ZombieSightRadius<span class="token punctuation">;</span>
	ZombieSight<span class="token operator">-></span>LoseSightRadius <span class="token operator">=</span> ZombieLoseSightRadius<span class="token punctuation">;</span>
	ZombieSight<span class="token operator">-></span><span class="token function">SetMaxAge</span><span class="token punctuation">(</span>ZombieSightMaxAge<span class="token punctuation">)</span><span class="token punctuation">;</span>
	ZombieSight<span class="token operator">-></span>DetectionByAffiliation<span class="token punctuation">.</span>bDetectEnemies <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
	ZombieSight<span class="token operator">-></span>DetectionByAffiliation<span class="token punctuation">.</span>bDetectNeutrals <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
	ZombieSight<span class="token operator">-></span>DetectionByAffiliation<span class="token punctuation">.</span>bDetectFriendlies <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>

	<span class="token comment">// Assign the sight sense to the perception component.</span>
	ZombiePerception<span class="token operator">-></span><span class="token function">ConfigureSense</span><span class="token punctuation">(</span><span class="token operator">*</span>ZombieSight<span class="token punctuation">)</span><span class="token punctuation">;</span>
	ZombiePerception<span class="token operator">-></span><span class="token function">SetDominantSense</span><span class="token punctuation">(</span>ZombieSight<span class="token operator">-></span><span class="token function">GetSenseImplementation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">// Bind the `OnTargetPerceptionUpdate` function.</span>
	ZombiePerception<span class="token operator">-></span>OnTargetPerceptionUpdated<span class="token punctuation">.</span><span class="token function">AddDynamic</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>AZombieAIController<span class="token operator">::</span>OnTargetPerceptionUpdate<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">/**
 * Called when the ZombieAIController takes over the ZombieCharacter.
 *
 * @param ZombiePawn The ZombieCharacter pawn.
 */</span>
<span class="token keyword">void</span> AZombieAIController<span class="token operator">::</span><span class="token function">OnPossess</span><span class="token punctuation">(</span>APawn<span class="token operator">*</span> ZombiePawn<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	Super<span class="token operator">::</span><span class="token function">OnPossess</span><span class="token punctuation">(</span>ZombiePawn<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">// Attempt to cast the Pawn that was taken over to a ZombieCharacter and if</span>
	<span class="token comment">// successful then we assign it to our `ZombieCharacter` variable.</span>
	ZombieCharacter <span class="token operator">=</span> Cast<span class="token operator">&lt;</span>AZombieCharacter<span class="token operator">></span><span class="token punctuation">(</span>ZombiePawn<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">/**
 * Called when the AIController's perception is updated.
 */</span>
<span class="token keyword">void</span> AZombieAIController<span class="token operator">::</span><span class="token function">OnTargetPerceptionUpdate</span><span class="token punctuation">(</span>AActor<span class="token operator">*</span> Actor<span class="token punctuation">,</span> FAIStimulus Stimulus<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	<span class="token comment">// Get the Actors that have been perceived.</span>
	TArray<span class="token operator">&lt;</span>AActor<span class="token operator">*</span><span class="token operator">></span> PerceivedActors<span class="token punctuation">;</span>
	ZombiePerception<span class="token operator">-></span><span class="token function">GetCurrentlyPerceivedActors</span><span class="token punctuation">(</span>TSubclassOf<span class="token operator">&lt;</span>UAISense_Sight<span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> PerceivedActors<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">// Get the number of perceived actors and if the current target left or entered</span>
	<span class="token comment">// the field of view.</span>
	<span class="token keyword">bool</span> bIsEntered <span class="token operator">=</span> PerceivedActors<span class="token punctuation">.</span><span class="token function">Contains</span><span class="token punctuation">(</span>Actor<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">int</span> NumberOfObjectsSeen <span class="token operator">=</span> PerceivedActors<span class="token punctuation">.</span><span class="token function">Num</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	FString text <span class="token operator">=</span> <span class="token function">FString</span><span class="token punctuation">(</span>Actor<span class="token operator">-></span><span class="token function">GetName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">" has just "</span> <span class="token operator">+</span> <span class="token punctuation">(</span>bIsEntered <span class="token operator">?</span> <span class="token string">"Entered"</span> <span class="token operator">:</span> <span class="token string">"Left"</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">" the field of view."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token keyword">if</span> <span class="token punctuation">(</span>GEngine<span class="token punctuation">)</span>
	<span class="token punctuation">{</span>
		GEngine<span class="token operator">-></span><span class="token function">AddOnScreenDebugMessage</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">5.f</span><span class="token punctuation">,</span> FColor<span class="token operator">::</span>Cyan<span class="token punctuation">,</span> text<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre>
<p>Before we can test this, we have to do back to the ZombieController and make the ZombieAIController the default AIController:</p>
<p><strong>ZombieCharacter.cpp</strong></p>
<pre class="language-cpp"><code class="language-cpp"><span class="token comment">/**
 * Sets the default values for the ZombieCharacter.
 */</span>
AZombieCharacter<span class="token operator">::</span><span class="token function">AZombieCharacter</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	<span class="token comment">// Load the assets needed for the ZombieCharacter.</span>
	<span class="token keyword">static</span> ConstructorHelpers<span class="token operator">::</span>FObjectFinder<span class="token operator">&lt;</span>USkeletalMesh<span class="token operator">></span><span class="token function">ZombieSkeletalMeshAsset</span><span class="token punctuation">(</span><span class="token function">TEXT</span><span class="token punctuation">(</span><span class="token string">"SkeletalMesh'/Game/Models/ZombieJill/jill.jill'"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">static</span> ConstructorHelpers<span class="token operator">::</span>FObjectFinder<span class="token operator">&lt;</span>UAnimBlueprint<span class="token operator">></span><span class="token function">ZombieAnimAsset</span><span class="token punctuation">(</span><span class="token function">TEXT</span><span class="token punctuation">(</span><span class="token string">"AnimBlueprint'/Game/Blueprints/ZombieAnimBlueprint.ZombieAnimBlueprint'"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">// Create the ZombieCharacter's skeletal mesh and set it to be the mesh loaded above.</span>
	ZombieSkeletalMesh <span class="token operator">=</span> <span class="token function">GetMesh</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	ZombieSkeletalMesh<span class="token operator">-></span><span class="token function">SetSkeletalMesh</span><span class="token punctuation">(</span>ZombieSkeletalMeshAsset<span class="token punctuation">.</span>Object<span class="token punctuation">)</span><span class="token punctuation">;</span>
	ZombieSkeletalMesh<span class="token operator">-></span><span class="token function">SetRelativeLocation</span><span class="token punctuation">(</span><span class="token function">FVector</span><span class="token punctuation">(</span><span class="token number">0.f</span><span class="token punctuation">,</span> <span class="token number">0.f</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">90.f</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	ZombieSkeletalMesh<span class="token operator">-></span><span class="token function">SetAnimInstanceClass</span><span class="token punctuation">(</span>ZombieAnimAsset<span class="token punctuation">.</span>Object<span class="token operator">-></span>GeneratedClass<span class="token punctuation">)</span><span class="token punctuation">;</span>
	ZombieSkeletalMesh<span class="token operator">-></span><span class="token function">SetupAttachment</span><span class="token punctuation">(</span>RootComponent<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">// Set the default AIController of the class.</span>
	AIControllerClass <span class="token operator">=</span> AZombieAIController<span class="token operator">::</span><span class="token function">StaticClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	AutoPossessAI <span class="token operator">=</span> EAutoPossessAI<span class="token operator">::</span>PlacedInWorldOrSpawned<span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre>
<p>Save and compile all this and now let's go back to Unreal and drag an instance of the ZombieCharacter into the scene. Now if you press press and walk in front of the ZombieCharacter, you should see a debug message pop up on the screen saying that the PlayerCharacter has entered the ZombieCharacter's field of view. Now if you leave the field of view the message should show that you've left.</p>
<p>You can also enable the gameplay debugger under Edit->Project Settings->Gameplay Debugger like so:</p>
<p><img class="g-image g-image--lazy g-image--loading" src="data:image/svg+xml,%3csvg fill='none' viewBox='0 0 508 475' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-61e8b65e94eb3947e673dcbfd74d2579'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='40'/%3e%3c/filter%3e%3c/defs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-61e8b65e94eb3947e673dcbfd74d2579)' width='508' height='475' xlink:href='data:image/png%3bbase64%2ciVBORw0KGgoAAAANSUhEUgAAAEAAAAA8CAYAAADWibxkAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAKgElEQVRo3s2bVa8UTRCGzw/C3d3d3d3d3d09BA8BAkGCQ5AQNFggQLjgBvkh9eWp5N00883uzpyzu8NFpUd6e7qr6q2qruqtqlevntWpU8dq1aplTZs2tRYtWljr1q29bdasmTVo0MDoU7duXW%2bTkPrWrl07d53m95WkKibZsmVLGzt2rE2ZMsU2bNhgixYtsgkTJtjcuXOdWrVq5YtJOziM/VcXnmMAk2zYsKEzAWmjBdxzTduoUSOrX7%2b%2bLyQtwTTGlwZEtaE6Y5aaqlDzJk2a%2bIRoWbgWHxKMoW8aYrzGjRs7wUhaxlIrBot4nvYbNaWqNm3aWIcOHWzixIk2cOBAbydNmmSjR492WIwcOdLGjRtnnTt3dtvQtm1b4zfFiH7Nmze3Hj16%2bBjjx4%2b3YcOG%2bZj9%2b/f37zDumDFjnLju16%2bfwy3pN0pBVXwQBrD4rl272tChQ23QoEHOACbcp08fGzJkiHXs2NEnx49gRDGiHwzgd3379vVFM9aoUaOsZ8%2beNnjwYP8O34V437t379xvo5Tkm9WhKg0uq4/ayhuwALXh4otxVX2wK/we0riouaDBPdd6B/EtEb9jDK41ZpLvp9IAqXX79u1t%2bPDhLiGkwYejqpj046EGoP4QKo8moVmoOy0aMHny5Nw18BgxYoRDQv357dSpU11LJYSSM4ALGIAqoobdunWL/VhaBsBExkP1wTcti2SxAwYMcPvAc/WB8cwBGCIMoMNz%2bjO/UkvfGRCVGJOGYIBI9yEWkzAAFcYGgPkuXbq4jcGYirjneUgwn98DR82lrBCIk267du180hATQkJMLq0GwIBZs2bZ%2bvXrc7Rx48YcEXSF7Zo1azwIAyL8troQrBYEwo/wYaTTvXt3lxSqmo8BhZ6xCBajiHLBggW%2bwDhasmSJTZ8%2b3WbMmOG457cVcYNxE5cKhiSrLK8guMQxQUzkd%2bAYQ0dorRgDI4fhCwnjSx/6wvxyGLyiDNDkgQB%2bGkNFK2NES2wgv41m5DOWGC2iy8OHD9v9%2b/ft7t27du3aNbt%2b/bq9f//evnz5Yp8/f87Rt2/f7NGjR/b69WtbsWKFR4bMo%2bIMUGAkqSAtFo1LghlYcaTEOxgUpwViInuInTt32oULF2zfvn22e/duO3DggN27d8%2bePXtmT58%2bdXry5Ik9f/7czp8/70xavHixxwmViAjzQkDBCW00vtc7WepokBSFALtM1J9Wfl/xgQj/j70ABplDgMljAOW6cGWdOnXKGUQ9o8VLoDFxGsCmatOmTXb16lW7dOmSSxhtuHXrlt25c8du376dI%2b6RPlCZOXOmM7niGiAIsDikxQYGiQEDVB4pTZs2zSUFMVGsO4FKaLWjNuDy5ct24sQJO3TokB09etRxjg349OmT45/2%2b/fvduXKFYcH7pCdYiY2QAsoFPtLSyShfF4AmMA03B/ubfbs2TZnzhxviQ9odQ3xbv78%2bQ4b2ZZMIKDtrKI%2bJpNk9xe1AVhyFnjw4EHbv3%2b/7dmzx3bt2uUt93v37vVrWhEag03AzWYGAbCPv0ZqSAW1JyosJJWoDQACZINOnz5tDx48cBuAm8MOAIkbN2749atXr%2bznz5/269cvd5cvX770yDAzCEh6Mni9evXyxUcNXaFoUEYQDUD9kSzGEDe4bds2d41btmyxrVu3uls8cuSIkzQA24MHydQNYtSie3RtjHjHtdroJikMhdEEGAkDYQr3EPdQuEjeQ%2bWI%2bVNBAJencBVrTyAEHLR/x1fzjH06EWIUGtIA1HjdunWu7vSDiUmyO%2bXc/CQOhdkBKpUFBIgEtX8nAiROgCFxuYPQCGLVjx075lAKkyzyIqE3KffOLzEEWJDSV4IAi1FkGGZvC0GAd/ShvzZPYRuX/kqacyjbdlheAEOE%2buOSyM6g7kACKCjDC1QKxQksHq0BTmFWGC3KlxWulP//X0YolJ7SYwQxTAp1BwI80y4RTOfL00WzwsBJKTEYCqSUDWYsiPc8r9QeIFYDFPDIwkczs1GVzZemissKR7PBasPrTCGAOiMJjBoGK2mBolBGCEahRag72R6CK1SdZ%2bwtIBVeMLaVlv5fDECdUXXUH2akqQMUSonBVOAD/oGPoIQHARqCVxbq/xcDaMNgpyauKISA4KIaITAQvMKsb02/WRIIyOfj/2uSlAw1AGmj5lh/AiikHVd0yWLxfzEAa406KhtcE3cUMgBmqgaoWmPUvmSx8LwQkEqWEgKQIBDWHdPWHMsOAflioFAKCLBALD3WnwwT12gBpS9aAqBK5v%2bKQoCoDTdYbO%2bfBgJYftwe0SS2ABuAZ%2bAeRqjgknbrmy8bVS0GaBBlessFAfYTCoZ0IkSw47sKmkIvEReAqZRfCs%2bRK4%2bzA0Q6SKVUEFAcgLRRdzQBjeCevQGtiiy859vcs%2bfAY2BApT284zktYwCpUuQO/yqPwwCsdKGKT1oNYJIsiuiSiWuBggPvsQ2KBmEYfXiHTdLiYQS/YQz68bwUwVNV9EiLYv%2bwLF6T8jiaBc6xMcoCQcoKqeZAP651FqkYBEoVPOUtj6MFqgojPU0srRegdrBs2TJbvXq1Z4fWrl0bS7xbtWqVLVy40OEQVx5PuhcpSXmcYEgHG2AA7ipteRwGkFGm/L106VJbvny5M4M2SixeNQMgIkP8T5XHw%2b1tNIOTjwEwD3yDc5XCheswJqClDyEz2pZ5eVzH2hQcQSyGsJbnxc4SMQalMdLe1PvC8vibN2/sw4cPXiaH3r17Zx8/frSHDx/aixcvXFtwk5kVRjBOSA1p4K6UFkNKuCfUmndY60LlcRhArp%2biCIzgmiqRzgGwWAohtG/fvrWLFy/azZs3HSaZMCCEgIKi6Nk9ZXEECxiWrzRGHzSJZAjpdBhHbjHMBUIwU0fj6If9yRQCtOAQ9wSFLgujqGcqmUeLGWF5nEovkj137pyXyc6cOeOlMSrBUaIfEIFJMDnT8jiTQN2JuMLyONIMy%2bPz5s3z4CRfeZxyOOcDWDzXx48fd8xTDv/69asfjaH98eOHLx47gEvMtDaoaxahMFkFDF2rxKX7qAbwjLgf5mHUOEdAkYRaIb4%2b7qQYz%2bmLbcn8lJjK4orGhPWQwmdxNoDNDhq0Y8cOL4pu3rzZi6S0FEYpkHIPcU6Qe/pibDOJA8LCiKw9BxcwTDUpjz9%2b/NhhwIEoPALukGMxXOMSf//%2bbX/%2b/HHvwH3m5XE%2bjI9XHMCGBbuQtjzOInBpuD4kzqEIJMyhiO3btzthF06ePGmnTp3yftgIGJ6JEYzW9KJH2RUJRut8Scrj8h60eA6dDQ43SfI6mRVHw/K4rD6hK1tTsMxWFWjgt3mG3yYiLFQeX7lypas6USRMle2IUvi8XAejE0MAqaH6YQGDaFChMG6Pa2L4uAxyWB7nDPDZs2dzjBKuo%2bXxShyMTgUBpa50UFJ/nFJ2V5ukQhAQTDTGP1kej4MAGFXwg5Qh1B1IECDxDi0oVB6nZdFoCNrDb/QPEIyr/jWik6Jcq2ZQ8fJ43GYIX8yklc5SCgsm0BLjh3%2bkyrcdVrqdcWgZk/EYX%2bePlSrLnAHRIkmomtr8pC2Ph56jWLY3Cwj8B3wHXPv917A6AAAAAElFTkSuQmCC' /%3e%3c/svg%3e" width="508" alt="Debug Settings" data-srcset="/assets/static/debugger-settings.c26726e.bf1f38dc1acf1c9937eeb997109de29d.png 508w" data-sizes="(max-width: 508px) 100vw, 508px" data-src="/assets/static/debugger-settings.c26726e.bf1f38dc1acf1c9937eeb997109de29d.png"><noscript><img class="g-image g-image--lazy g-image--loaded" src="/assets/static/debugger-settings.c26726e.bf1f38dc1acf1c9937eeb997109de29d.png" width="508" alt="Debug Settings"></noscript></p>
<p>and now when you press play you can press the apostrophe key and it'll show the ZombieCharacter's sight radius and also show when you're inside of it.</p>
<h2 id="implementing-the-idle-and-roam-states"><a href="#implementing-the-idle-and-roam-states" aria-hidden="true"><span class="icon icon-link"></span></a><strong>Implementing the IDLE and Roam States</strong></h2>
<p>So now that we have our ZombieCharacter detecting our PlayerCharacter, we should take a step back and first create the IDLE and ROAM states of the ZombieCharacter.</p>
<p>We'll start with what variables we'll need for the ZombieCharacter:</p>
<ul>
<li>We'll need a variable named <code>StartLocation</code> that will be populated on <code>BeginPlay</code> with the current location of the ZombieCharacter. This is going to be used to limit the ZombieCharacter's roaming area by making it we always move it in reference to its starting location instead of their current location that they roamed to.</li>
<li>We need a variable that tells the ZombieAIController whether this ZombieCharacter can roam or not. If this is set to <code>false</code> then the ZombieCharacter will never move unless it has spotted the PlayerCharacter and is chasing them.</li>
<li>We need a variable for the speed of the ZombieCharacter while they're in the ROAM state.</li>
<li>We need a variable that says how far from its starting location the ZombieCharacter can roam. This will be used by the ZombieAIController to choose a random spot within this area that the ZombieCharacter can walk to.</li>
<li>We need a variable for how long of a delay we are going to have between roam calls. Setting this to a value above 0 will mean that after the ZombieCharacter has roamed to a location, they will wait x amount of seconds before they roam to another location.</li>
</ul>
<p>Now let's see what methods we need to add to the ZombieCharacter:</p>
<ul>
<li>We need to override <code>BeginPlay</code> to set the <code>StartingLocation</code> variable.</li>
<li>We need to add a method to transition the ZombieCharacter to the IDLE state.</li>
<li>We need to add a method to transition the ZombieCharacter to the ROAM state.</li>
</ul>
<p><strong>Note:</strong> While in our state transitions we're just going to set the new state and the new walk speed of the ZombieCharacter, you can add whatever properties you wish the ZombieCharacter to have in these states.</p>
<p>Now let's head on over to the header and define what we discussed above:</p>
<p><strong>ZombieCharacter.h</strong></p>
<pre class="language-cpp"><code class="language-cpp"><span class="token comment">// The starting location of the ZombieCharacter, used when roaming.</span>
<span class="token function">UPROPERTY</span><span class="token punctuation">(</span>VisibleAnywhere<span class="token punctuation">,</span> BlueprintReadOnly<span class="token punctuation">,</span> Category <span class="token operator">=</span> RoamState<span class="token punctuation">)</span>
FVector StartLocation<span class="token punctuation">;</span>

<span class="token comment">// Indicates whether the ZombieCharacter should be able to roam or not.</span>
<span class="token function">UPROPERTY</span><span class="token punctuation">(</span>EditAnywhere<span class="token punctuation">,</span> BlueprintReadWrite<span class="token punctuation">,</span> Category <span class="token operator">=</span> RoamState<span class="token punctuation">)</span>
<span class="token keyword">bool</span> bCanRoam <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>

<span class="token comment">// The max speed of the ZombieCharacter in the ROAM state.</span>
<span class="token function">UPROPERTY</span><span class="token punctuation">(</span>EditAnywhere<span class="token punctuation">,</span> BlueprintReadWrite<span class="token punctuation">,</span> Category <span class="token operator">=</span> RoamState<span class="token punctuation">)</span>
<span class="token keyword">float</span> RoamSpeed <span class="token operator">=</span> <span class="token number">100.f</span><span class="token punctuation">;</span>

<span class="token comment">// The max range around its spawn point that the ZombieCharacter can roam.</span>
<span class="token function">UPROPERTY</span><span class="token punctuation">(</span>EditAnywhere<span class="token punctuation">,</span> BlueprintReadWrite<span class="token punctuation">,</span> Category <span class="token operator">=</span> RoamState<span class="token punctuation">)</span>
<span class="token keyword">float</span> RoamRadius <span class="token operator">=</span> <span class="token number">300.f</span><span class="token punctuation">;</span>

<span class="token comment">// The amount of time to pause in between `Roam` calls. If set to 0 there will</span>
<span class="token comment">// be no delay.</span>
<span class="token function">UPROPERTY</span><span class="token punctuation">(</span>EditAnywhere<span class="token punctuation">,</span> BlueprintReadWrite<span class="token punctuation">,</span> Category <span class="token operator">=</span> RoamState<span class="token punctuation">)</span>
<span class="token keyword">float</span> RoamDelay <span class="token operator">=</span> <span class="token number">3.f</span><span class="token punctuation">;</span></code></pre>
<p>Then, we add a <code>protected</code> block with the <code>BeginPlay</code> method defined:</p>
<pre class="language-cpp"><code class="language-cpp"><span class="token keyword">protected</span><span class="token operator">:</span>
	<span class="token comment">/**
	 * Called when the game starts.
	 */</span>
	<span class="token keyword">virtual</span> <span class="token keyword">void</span> <span class="token function">BeginPlay</span><span class="token punctuation">(</span><span class="token punctuation">)</span> override<span class="token punctuation">;</span></code></pre>
<p>And lastly we define a public block with the IDLE and ROAM state transitions:</p>
<pre class="language-cpp"><code class="language-cpp"><span class="token keyword">public</span><span class="token operator">:</span>
	<span class="token comment">/**
	 * Called to transition the ZombieCharacter to the IDLE state.
	 */</span>
	<span class="token keyword">void</span> <span class="token function">ToIdleState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">/**
	 * Called to transition the ZombieCharacter to the ROAM state.
	 */</span>
	<span class="token keyword">void</span> <span class="token function">ToRoamState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p>Now in the cpp file we create these methods and for the <code>ToRoamState</code> method we set the new <code>MaxWalkSpeed</code> of the ZombieCharacter:</p>
<p><strong>ZombieCharacter.cpp</strong></p>
<pre class="language-cpp"><code class="language-cpp"><span class="token comment">/**
 * Called when the game starts.
 */</span>
<span class="token keyword">void</span> AZombieCharacter<span class="token operator">::</span><span class="token function">BeginPlay</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	Super<span class="token operator">::</span><span class="token function">BeginPlay</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">// Set the starting location of the ZombieCharacter.</span>
	StartLocation <span class="token operator">=</span> <span class="token function">GetActorLocation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">/**
 * Called to transition the ZombieCharacter to the IDLE state.
 */</span>
<span class="token keyword">void</span> AZombieCharacter<span class="token operator">::</span><span class="token function">ToIdleState</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	PreviousState <span class="token operator">=</span> State<span class="token punctuation">;</span>
	State <span class="token operator">=</span> ZombieStates<span class="token operator">::</span>IDLE<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">/**
 * Called to transition the ZombieCharacter to the ROAM state.
 */</span>
<span class="token keyword">void</span> AZombieCharacter<span class="token operator">::</span><span class="token function">ToRoamState</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	PreviousState <span class="token operator">=</span> State<span class="token punctuation">;</span>
	State <span class="token operator">=</span> ZombieStates<span class="token operator">::</span>ROAM<span class="token punctuation">;</span>

	UCharacterMovementComponent<span class="token operator">*</span> ZombieMovement <span class="token operator">=</span> <span class="token function">GetCharacterMovement</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>ZombieMovement <span class="token operator">!=</span> <span class="token keyword">nullptr</span><span class="token punctuation">)</span>
	<span class="token punctuation">{</span>
		ZombieMovement<span class="token operator">-></span>MaxWalkSpeed <span class="token operator">=</span> RoamSpeed<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre>
<p>You'll also need the following include for the above to work:</p>
<pre class="language-cpp"><code class="language-cpp"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"GameFramework/CharacterMovementComponent.h"</span></span></code></pre>
<p>Now let's look at the ZombieAIController will need to make the ZombieCharacter roam.</p>
<p>We're going to need the following variables:</p>
<ul>
<li>A variable for the timer that will be used to delay calls to the method that makes the ZombieCharacter roams. </li>
</ul>
<p>Now let's see what methods we need:</p>
<ul>
<li>We need to create the <code>Roam</code> method that will be called to make the ZombieCharacter roam to a random spot. This spot is chosen from a bounding box as wide as <code>RoamBox</code> and then a <code>MoveToLocation</code> command is issued to move the ZombieCharacter to that spot.</li>
<li>We need to override the <code>BeginPlay</code> method so that we can set the ZombieCharacter to roam if it can.</li>
<li>We need to override the <code>OnMoveCompleted</code> method which is called when a call to <code>Roam</code> is complete. This method will check to see if the ZombieCharacter is still in the ROAM state and if so then we set a timer to wait x amount of time before calling <code>Roam</code> again.</li>
</ul>
<p>So roaming is going to be a repeating sequence of these steps:</p>
<ol>
<li>The <code>Roam</code> method is called and the ZombieCharacter is put into the ROAM state and then the ZombieAIController picks a random spot from the <code>RoamBox</code>.</li>
<li>A <code>MoveToLocation</code> command is issued to move the ZombieCharacter to the above location.</li>
<li>Once the move is complete, the <code>OnMoveCompleted</code> method is called and this checks to see if the ZombieCharacter is still in the ROAM state and if so, it puts the ZombieCharacter in the IDLE state, so that the idle animation can play, and then it sets a timer that when it expires, it calls the <code>Roam</code> method all over again.</li>
</ol>
<p>Ok so let's define the variables and methods in the header file:</p>
<p><strong>ZombieAIController.h</strong></p>
<pre class="language-cpp"><code class="language-cpp"><span class="token comment">// The timer used to pause between `Roam` calls.</span>
FTimerHandle RoamIdleTimer<span class="token punctuation">;</span>

<span class="token comment">// The amount of time to pause in between `Roam` calls.</span>
<span class="token function">UPROPERTY</span><span class="token punctuation">(</span>EditAnywhere<span class="token punctuation">,</span> BlueprintReadWrite<span class="token punctuation">,</span> Category <span class="token operator">=</span> RoamState<span class="token punctuation">)</span>
<span class="token keyword">float</span> RoamDelay <span class="token operator">=</span> <span class="token number">3.f</span><span class="token punctuation">;</span></code></pre>
<p>And then further down under the <code>protected</code> block:</p>
<pre class="language-cpp"><code class="language-cpp"><span class="token comment">/**
 * Called when the game starts.
 */</span>
<span class="token keyword">virtual</span> <span class="token keyword">void</span> <span class="token function">BeginPlay</span><span class="token punctuation">(</span><span class="token punctuation">)</span> override<span class="token punctuation">;</span>

<span class="token comment">/**
 * Called when a move request has been completed.
 */</span>
<span class="token keyword">virtual</span> <span class="token keyword">void</span> <span class="token function">OnMoveCompleted</span><span class="token punctuation">(</span>FAIRequestID RequestID<span class="token punctuation">,</span> <span class="token keyword">const</span> FPathFollowingResult<span class="token operator">&amp;</span> Result<span class="token punctuation">)</span> override<span class="token punctuation">;</span>

<span class="token comment">/**
 * Called to make the ZombieCharacter roam to a different location within its
 * roam radius.
 */</span>
<span class="token keyword">void</span> <span class="token function">Roam</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p>Now let's create the methods in the cpp file:</p>
<p><strong>ZombieAIController.cpp</strong></p>
<pre class="language-cpp"><code class="language-cpp"><span class="token comment">/**
 * Called when the game starts.
 */</span>
<span class="token keyword">void</span> AZombieAIController<span class="token operator">::</span><span class="token function">BeginPlay</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	Super<span class="token operator">::</span><span class="token function">BeginPlay</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">// Simple check but this can be made more complex.</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>ZombieCharacter<span class="token operator">-></span>bCanRoam<span class="token punctuation">)</span> <span class="token function">Roam</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">/**
 * Called when a move request has been completed.
 */</span>
<span class="token keyword">void</span> AZombieAIController<span class="token operator">::</span><span class="token function">OnMoveCompleted</span><span class="token punctuation">(</span>FAIRequestID RequestID<span class="token punctuation">,</span> <span class="token keyword">const</span> FPathFollowingResult<span class="token operator">&amp;</span> Result<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	Super<span class="token operator">::</span><span class="token function">OnMoveCompleted</span><span class="token punctuation">(</span>RequestID<span class="token punctuation">,</span> Result<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token keyword">if</span> <span class="token punctuation">(</span>ZombieCharacter<span class="token operator">-></span>State <span class="token operator">==</span> ZombieStates<span class="token operator">::</span>ROAM<span class="token punctuation">)</span>
	<span class="token punctuation">{</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>ZombieCharacter<span class="token operator">-></span>RoamDelay <span class="token operator">></span> <span class="token number">0.f</span><span class="token punctuation">)</span>
		<span class="token punctuation">{</span>
			<span class="token comment">// If there is a roam delay, we need to set the ZombieCharacter to the idle state</span>
			<span class="token comment">// while we set a timer to run before `Roam` is called again.</span>
			ZombieCharacter<span class="token operator">-></span><span class="token function">ToIdleState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

			UWorld<span class="token operator">*</span> World <span class="token operator">=</span> <span class="token function">GetWorld</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>World <span class="token operator">!=</span> <span class="token keyword">nullptr</span><span class="token punctuation">)</span>
			<span class="token punctuation">{</span>
				<span class="token function">GetWorld</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-></span><span class="token function">GetTimerManager</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">SetTimer</span><span class="token punctuation">(</span>RoamIdleTimer<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>AZombieAIController<span class="token operator">::</span>Roam<span class="token punctuation">,</span> ZombieCharacter<span class="token operator">-></span>RoamDelay<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">else</span> <span class="token punctuation">{</span>
			<span class="token comment">// Otherwise we can just call `Roam` again instantly.</span>
			<span class="token function">Roam</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">/**
 * Called to make the ZombieCharacter roam to a different location within its
 * roam radius.
 */</span>
<span class="token keyword">void</span> AZombieAIController<span class="token operator">::</span><span class="token function">Roam</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	<span class="token comment">// Put the ZombieCharacter in the ROAM state if they are not already. This is important</span>
	<span class="token comment">// because when this move is complete, it gets put into an IDLE state so we need to put</span>
	<span class="token comment">// ourselves back into a ROAM state.</span>
	ZombieCharacter<span class="token operator">-></span><span class="token function">ToRoamState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">// Choose a random point within a bounding box with an origin of the ZombieCharacter's</span>
	<span class="token comment">// spawn location so that the ZombieCharacter will never roam to new places.</span>
	FVector RoamLocation <span class="token operator">=</span> UKismetMathLibrary<span class="token operator">::</span><span class="token function">RandomPointInBoundingBox</span><span class="token punctuation">(</span>ZombieCharacter<span class="token operator">-></span>StartLocation<span class="token punctuation">,</span>
		<span class="token function">FVector</span><span class="token punctuation">(</span>
			ZombieCharacter<span class="token operator">-></span>StartLocation<span class="token punctuation">.</span>X <span class="token operator">+</span> ZombieCharacter<span class="token operator">-></span>RoamRadius<span class="token punctuation">,</span>
			ZombieCharacter<span class="token operator">-></span>StartLocation<span class="token punctuation">.</span>Y <span class="token operator">+</span> ZombieCharacter<span class="token operator">-></span>RoamRadius<span class="token punctuation">,</span>
			ZombieCharacter<span class="token operator">-></span>StartLocation<span class="token punctuation">.</span>Z
		<span class="token punctuation">)</span>
	<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token function">MoveToLocation</span><span class="token punctuation">(</span>RoamLocation<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre>
<p>You'll also need to include the following header for <code>UKismetMathLibrary::RandomPointInBoundingBox</code>:</p>
<pre class="language-cpp"><code class="language-cpp"><span class="token macro property">#<span class="token directive keyword">include</span> "Kismet/KismetMathLibrary.h</span></code></pre>
<p>So now if you save and compile, and replace the instance of the ZombieCharacter in the scene just for good measure since we added more stuff in the constructor, you can press play and see this in action. You'll see the ZombieCharacter walk to a position nearby, wait for 3 seconds, then walk to another random nearby position.</p>
<p>At this point you can mess with the <code>RoamDelay</code> to have less or more time in between <code>Roam</code> calls or you can just set it to 0 have no delay while roaming. If you're using the animations that I am, it might look a bit sudden when the ZombieCharacter transitions from walking to being idle. This is purely because I have limited access to animations but if you had more animations or were making your own you could make an in-between animation or blend animations for smoother transitions.</p>
<h2 id="implementing-the-chase-and-attack-states"><a href="#implementing-the-chase-and-attack-states" aria-hidden="true"><span class="icon icon-link"></span></a><strong>Implementing the CHASE and ATTACK states</strong></h2>
<p>So now that we have our ZombieCharacter's IDLE and ROAM states set up, let's set up the part that relies on the sight sense, chasing and attacking the PlayerCharacter.</p>
<p>Again just like we did with the IDLE and ROAM state, let's go over what we need to add to the ZombieCharacter first.</p>
<p>Here's the variables we'll need to create:</p>
<ul>
<li>We need a variable that defines how fast the ZombieCharacter will move will in the CHASE state.</li>
<li>We need a variable for how long of a delay there should be between the ZombieCharacter chasing the PlayerCharacter and going back to the ROAM state if they can roam. This is to avoid an awkward transition from chasing straight to another animation. With a delay it'll look like the ZombieCharacter is still looking at the PlayerCharacter as they run away and after x seconds they'll go back to idle/roaming.</li>
<li>Also we need a variable for how much damage an attack from the ZombieCharacter will do to the PlayerCharacter.</li>
<li>Finally, we'll need a variable for the amount of time between attacks. This should be the same amount of time that the attack animation is so that we don't end the attack animation early.</li>
</ul>
<p>And then let's take a look at the methods we'll need:</p>
<ul>
<li>We need methods to transition the ZombieCharacter to the CHASE and ATTACK states just like we did for the IDLE and ROAM states.</li>
</ul>
<p>So let's get to defining these in the header file:</p>
<p><strong>ZombieCharacter.h</strong></p>
<pre class="language-cpp"><code class="language-cpp"><span class="token comment">// The max speed of the ZombieCharacter in the CHASE state.</span>
<span class="token function">UPROPERTY</span><span class="token punctuation">(</span>EditAnywhere<span class="token punctuation">,</span> BlueprintReadWrite<span class="token punctuation">,</span> Category <span class="token operator">=</span> ChaseState<span class="token punctuation">)</span>
<span class="token keyword">float</span> ChaseSpeed <span class="token operator">=</span> <span class="token number">300.f</span><span class="token punctuation">;</span>

<span class="token comment">// The amount of delay after a chase after which the ZombieCharacter will</span>
<span class="token comment">// resume to roam. This is to help break up an awkward transition from chasing</span>
<span class="token comment">// straight back to roaming.</span>
<span class="token function">UPROPERTY</span><span class="token punctuation">(</span>EditAnywhere<span class="token punctuation">,</span> BlueprintReadWrite<span class="token punctuation">,</span> Category <span class="token operator">=</span> ChaseState<span class="token punctuation">)</span>
<span class="token keyword">float</span> AfterChaseDelay <span class="token operator">=</span> <span class="token number">3.f</span><span class="token punctuation">;</span>

<span class="token comment">// The amount of damage that the ZombieCharacter does when attacking.</span>
<span class="token function">UPROPERTY</span><span class="token punctuation">(</span>EditAnywhere<span class="token punctuation">,</span> BlueprintReadWrite<span class="token punctuation">,</span> Category <span class="token operator">=</span> AttackState<span class="token punctuation">)</span>
<span class="token keyword">float</span> AttackDamage <span class="token operator">=</span> <span class="token number">5.f</span><span class="token punctuation">;</span>

<span class="token comment">// The amount of delay between attacks, this should be the length of the attack</span>
<span class="token comment">// animation so that attack animations don't stack up.</span>
<span class="token function">UPROPERTY</span><span class="token punctuation">(</span>EditAnywhere<span class="token punctuation">,</span> BlueprintReadWrite<span class="token punctuation">,</span> Category <span class="token operator">=</span> AttackState<span class="token punctuation">)</span>
<span class="token keyword">float</span> TimeBetweenAttacks <span class="token operator">=</span> <span class="token number">2.f</span><span class="token punctuation">;</span></code></pre>
<p>And then further down where we defined <code>ToRoamState</code>:</p>
<pre class="language-cpp"><code class="language-cpp"><span class="token comment">/**
 * Called to transition the ZombieCharacter to the CHASE state.
 */</span>
<span class="token keyword">void</span> <span class="token function">ToChaseState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">/**
 * Called to transition the ZombieCharacter to the ATTACK state.
 */</span>
<span class="token keyword">void</span> <span class="token function">ToAttackState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p>Now in the cpp file we create the <code>ToChaseState</code> and <code>ToAttackState</code> methods. In the <code>ToChaseState</code> method we set the new state and change the max walk speed to the <code>ChaseSpeed</code> value and in the <code>ToAttackState</code> method we just change the state.</p>
<p><strong>ZombieCharacter.cpp</strong></p>
<pre class="language-cpp"><code class="language-cpp"><span class="token comment">/**
 * Called to transition the ZombieCharacter to the CHASE state.
 */</span>
<span class="token keyword">void</span> AZombieCharacter<span class="token operator">::</span><span class="token function">ToChaseState</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	PreviousState <span class="token operator">=</span> State<span class="token punctuation">;</span>
	State <span class="token operator">=</span> ZombieStates<span class="token operator">::</span>CHASE<span class="token punctuation">;</span>

	UCharacterMovementComponent<span class="token operator">*</span> ZombieMovement <span class="token operator">=</span> <span class="token function">GetCharacterMovement</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>ZombieMovement <span class="token operator">!=</span> <span class="token keyword">nullptr</span><span class="token punctuation">)</span>
	<span class="token punctuation">{</span>
		ZombieMovement<span class="token operator">-></span>MaxWalkSpeed <span class="token operator">=</span> ChaseSpeed<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">/**
 * Called to transition the ZombieCharacter to the ATTACK state.
 */</span>
<span class="token keyword">void</span> AZombieCharacter<span class="token operator">::</span><span class="token function">ToAttackState</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	PreviousState <span class="token operator">=</span> State<span class="token punctuation">;</span>
	State <span class="token operator">=</span> ZombieStates<span class="token operator">::</span>ATTACK<span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre>
<p>Now it's time for the fun part again, adding all of the functionality to the ZombieAIController to enable the ZombieCharacter to chase and attack the PlayerCharacter.</p>
<p>We're only going to need one new variable here:</p>
<ul>
<li>We need a another <code>FTimerHandle</code> to handle the delay between the ZombieCharacter chasing the PlayerCharacter and going back to what it was doing before.</li>
</ul>
<p>And now for the methods:</p>
<ul>
<li>A <code>Chase</code> method that takes the PlayerCharacter as an argument and it calls <code>MoveToActor</code> as long as the PlayerCharacter has been seen by the ZombieCharacter.</li>
<li>A <code>StopChase</code> method that stops the ZombieCharacter from chasing the method and sets the timer to make the ZombieCharacter idle after it has lost sight of the PlayerCharacter for a period of time before they go back to the ROAM state.</li>
<li>A <code>IdleOrRoam</code> method that will replace the call to <code>Roam</code> in the <code>BeginPlay</code> method. This has been moved into its own method because now we need to check if the ZombieCharacter was in the CHASE state previously and if so we update the <code>StartLocation</code> of the ZombieCharacter so that they don't walk all the way back to their initial starting location before they roam again. Instead the ZombieCharacter will now begin roaming at the location they stopped chasing the PlayerCharacter.</li>
</ul>
<p>Let's go ahead and define all this in the header first:</p>
<p><strong>ZombieAIController.h</strong></p>
<pre class="language-cpp"><code class="language-cpp"><span class="token comment">/**
 * Checks to see if the PlayerCharacter should be idling or roaming and then proceeds to do so. If
 * the ZombieCharacter's `PreviousState` was `CHASE` and the ZombieCharacter is supposed to roam then
 * the `StartLocation` will be updated to be the current location as we don't want the ZombieCharacter
 * to go all the way back to the initial `StartLocation`.
 */</span>
<span class="token keyword">void</span> <span class="token function">IdleOrRoam</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">/**
 * Called to make the ZombieCharacter chase the PlayerCharacter.
 *
 * @param PlayerCharacter The PlayerCharacter to chase.
 */</span>
<span class="token keyword">void</span> <span class="token function">Chase</span><span class="token punctuation">(</span><span class="token keyword">class</span> <span class="token class-name">APlayerCharacter</span><span class="token operator">*</span> PlayerCharacter<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">/**
 * Called to make the ZombieCharacter stop chasing the PlayerCharacter and go
 * back to being idle/roaming.
 */</span>
<span class="token keyword">void</span> <span class="token function">StopChase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p>And now in the cpp file we create these methods:</p>
<p><strong>ZombieAIController.cpp</strong></p>
<pre class="language-cpp"><code class="language-cpp"><span class="token comment">/**
 * Called when the game starts.
 */</span>
<span class="token keyword">void</span> AZombieAIController<span class="token operator">::</span><span class="token function">BeginPlay</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	Super<span class="token operator">::</span><span class="token function">BeginPlay</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">// Put the ZombieCharacter in the IDLE or ROAM state depending on whether they can roam or not.</span>
	<span class="token function">IdleOrRoam</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">/**
 * Checks to see if the PlayerCharacter should be idling or roaming and then proceeds to do so. If
 * the ZombieCharacter's `PreviousState` was `CHASE` and the ZombieCharacter is supposed to roam then
 * the `StartLocation` will be updated to be the current location as we don't want the ZombieCharacter
 * to go all the way back to the initial `StartLocation`.
 */</span>
<span class="token keyword">void</span> AZombieAIController<span class="token operator">::</span><span class="token function">IdleOrRoam</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>ZombieCharacter<span class="token operator">-></span>bCanRoam<span class="token punctuation">)</span>
	<span class="token punctuation">{</span>
		<span class="token comment">// Check to see if the previous state was `CHASE` because if so we need to set the `StartLocation`</span>
		<span class="token comment">// to the ZombieCharacter's current location.</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>ZombieCharacter<span class="token operator">-></span>PreviousState <span class="token operator">==</span> ZombieStates<span class="token operator">::</span>CHASE<span class="token punctuation">)</span>
		<span class="token punctuation">{</span>
			ZombieCharacter<span class="token operator">-></span>StartLocation <span class="token operator">=</span> ZombieCharacter<span class="token operator">-></span><span class="token function">GetActorLocation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token comment">// Call the `Roam` method so the ZombieCharacter starts roaming.</span>
		<span class="token function">Roam</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">else</span>
	<span class="token punctuation">{</span>
		ZombieCharacter<span class="token operator">-></span><span class="token function">ToIdleState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">/**
 * Called to make the ZombieCharacter chase the PlayerCharacter.
 * 
 * @param PlayerCharacter The PlayerCharacter to chase.
 */</span>
<span class="token keyword">void</span> AZombieAIController<span class="token operator">::</span><span class="token function">Chase</span><span class="token punctuation">(</span>APlayerCharacter<span class="token operator">*</span> PlayerCharacter<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	ZombieCharacter<span class="token operator">-></span><span class="token function">ToChaseState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token function">MoveToActor</span><span class="token punctuation">(</span>PlayerCharacter<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">/**
 * Called to make the ZombieCharacter stop chasing the PlayerCharacter and go
 * back to being idle/roaming.
 */</span>
<span class="token keyword">void</span> AZombieAIController<span class="token operator">::</span><span class="token function">StopChase</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	<span class="token comment">// First we have to stop all movement so the ZombieCharacter quits chasing the PlayerCharacter</span>
	<span class="token comment">// since they're not supposed to see them anymore.</span>
	<span class="token function">StopMovement</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token keyword">if</span> <span class="token punctuation">(</span>ZombieCharacter<span class="token operator">-></span>AfterChaseDelay <span class="token operator">></span> <span class="token number">0.f</span><span class="token punctuation">)</span>
	<span class="token punctuation">{</span>
		UWorld<span class="token operator">*</span> World <span class="token operator">=</span> <span class="token function">GetWorld</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>World <span class="token operator">!=</span> <span class="token keyword">nullptr</span><span class="token punctuation">)</span>
		<span class="token punctuation">{</span>
			<span class="token comment">// If there is an after chase delay then we set the PlayerCharacter to the IDLE state until the</span>
			<span class="token comment">// `ChaseIdleTimer` expires and runs the `IdleOrRoam` method.</span>
			ZombieCharacter<span class="token operator">-></span><span class="token function">ToIdleState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token function">GetWorld</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-></span><span class="token function">GetTimerManager</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">SetTimer</span><span class="token punctuation">(</span>ChaseIdleTimer<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>AZombieAIController<span class="token operator">::</span>IdleOrRoam<span class="token punctuation">,</span> ZombieCharacter<span class="token operator">-></span>AfterChaseDelay<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">else</span>
	<span class="token punctuation">{</span>
		<span class="token comment">// Otherwise if there is no delay we can just go straight to the `IdleOrRoam` method.</span>
		<span class="token function">IdleOrRoam</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre>
<p>So at this point if you save, compile, and press play you'll notice the ZombieCharacter roaming just like before but now if you get close enough in front of it, the ZombieCharacter will start chasing you until you get out of its vision range (which you can see by pressing the single quote key). If you left the PlayerCharacter and ZombieCharacter movement values to the defaults you should easily be able to run out of the ZombieCharacter's field of view and when you do the ZombieCharacter will stop and look at you and then after the <code>AfterChaseDelay</code>, it will go back to being idle or roaming.</p>
<p>You might notice that if you let the ZombieCharacter catch up to you and move, the ZombieCharacter will awkwardly run in place as it its still chasing you but it won't move. This is intended as it leaves room for the attack logic which we'll add next.</p>
<p>So to start setting up attacking, we'll need a <code>UBoxComponent</code> to act as a damage collider. If the PlayerCharacter is within this box then the ZombieCharacter will start attacking the PlayerCharacter and when the PlayerCharacter leaves the box then the ZombieCharacter will go back to chasing the PlayerCharacter.</p>
<p><strong>ZombieCharacter.h</strong></p>
<pre class="language-cpp"><code class="language-cpp"><span class="token comment">// When the ZombieCharacter attacks we check to see if the PlayerCharacter</span>
<span class="token comment">// is inside of this collider.</span>
<span class="token function">UPROPERTY</span><span class="token punctuation">(</span>VisibleDefaultsOnly<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">class</span> <span class="token class-name">UBoxComponent</span><span class="token operator">*</span> ZombieDamageCollider<span class="token punctuation">;</span></code></pre>
<p>And now we'll need to bind some methods to respond to a component entering and exiting the <code>DamageCollider</code> but we're going to do this in the ZombieAIController class because we want to handle all of the logic in there. Let's take a look at what we'll need:</p>
<ul>
<li>We need to create two methods: <code>OnComponentEnterDamageCollider</code> and <code>OnComponentEnterDamageCollider</code>. These methods will be bound to the <code>DamageCollider</code> to respond to when a component enters and leaves the <code>DamageCollider</code>.</li>
<li>In the <code>OnComponentEnterDamageCollider</code> method we'll have to try to cast the <code>OtherActor</code> to our PlayerCharacter and if we can, then we know that the PlayerCharacter is in attack range so we call the <code>ToAttackState</code> method of the ZombieCharacter to make the attack animation play.</li>
<li>In the <code>OnComponentLeaveDamageCollider</code> method we'll again have to try to cast the <code>OtherActor</code> to our PlayerCharacter and if we can, then we know that the PlayerCharacter has left attack range to we call the <code>Chase</code> method to make the ZombieCharacter to back to chasing the PlayerCharacter.</li>
</ul>
<p><strong>ZombieAIController.h</strong></p>
<pre class="language-cpp"><code class="language-cpp"><span class="token comment">/**
 * Called when an actor enters the ZombieCharacter's DamageCollider.
 */</span>
<span class="token function">UFUNCTION</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">void</span> <span class="token function">OnComponentEnterDamageCollider</span><span class="token punctuation">(</span>UPrimitiveComponent<span class="token operator">*</span> OverlappedComp<span class="token punctuation">,</span> AActor<span class="token operator">*</span> OtherActor<span class="token punctuation">,</span> UPrimitiveComponent<span class="token operator">*</span> OtherComp<span class="token punctuation">,</span> int32 OtherBodyIndex<span class="token punctuation">,</span> <span class="token keyword">bool</span> bFromSweep<span class="token punctuation">,</span> <span class="token keyword">const</span> FHitResult<span class="token operator">&amp;</span> SweepResult<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">/**
 * Called when an actor leaves the ZombieCharacter's DamageCollider.
 */</span>
<span class="token function">UFUNCTION</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">void</span> <span class="token function">OnComponentLeaveDamageCollider</span><span class="token punctuation">(</span>UPrimitiveComponent<span class="token operator">*</span> OverlappedComp<span class="token punctuation">,</span> AActor<span class="token operator">*</span> OtherActor<span class="token punctuation">,</span> UPrimitiveComponent<span class="token operator">*</span> OtherComp<span class="token punctuation">,</span> int32 OtherBodyIndex<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p>In the cpp file we bind the above methods in the <code>OnPossess</code> method after we have the reference to our ZombieCharacter and then create the methods with the logic we discussed above:</p>
<p><strong>ZombieAIController.cpp</strong></p>
<pre class="language-cpp"><code class="language-cpp"><span class="token comment">/**
 * Called when the ZombieAIController takes over the ZombieCharacter.
 *
 * @param ZombiePawn The ZombieCharacter pawn.
 */</span>
<span class="token keyword">void</span> AZombieAIController<span class="token operator">::</span><span class="token function">OnPossess</span><span class="token punctuation">(</span>APawn<span class="token operator">*</span> ZombiePawn<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	Super<span class="token operator">::</span><span class="token function">OnPossess</span><span class="token punctuation">(</span>ZombiePawn<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">// Attempt to cast the Pawn that was taken over to a ZombieCharacter and if</span>
	<span class="token comment">// successful then we assign it to our `ZombieCharacter` variable.</span>
	ZombieCharacter <span class="token operator">=</span> Cast<span class="token operator">&lt;</span>AZombieCharacter<span class="token operator">></span><span class="token punctuation">(</span>ZombiePawn<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">// Bind the methods to respond to a component entering or exiting the ZombieCharacter's</span>
	<span class="token comment">// DamageCollider component.</span>
	ZombieCharacter<span class="token operator">-></span>ZombieDamageCollider<span class="token operator">-></span>OnComponentBeginOverlap<span class="token punctuation">.</span><span class="token function">AddDynamic</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>AZombieAIController<span class="token operator">::</span>OnComponentEnterDamageCollider<span class="token punctuation">)</span><span class="token punctuation">;</span>
	ZombieCharacter<span class="token operator">-></span>ZombieDamageCollider<span class="token operator">-></span>OnComponentEndOverlap<span class="token punctuation">.</span><span class="token function">AddDynamic</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>AZombieAIController<span class="token operator">::</span>OnComponentLeaveDamageCollider<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">/**
 * Called when an actor enters the ZombieCharacter's DamageCollider.
 */</span>
<span class="token keyword">void</span> AZombieAIController<span class="token operator">::</span><span class="token function">OnComponentEnterDamageCollider</span><span class="token punctuation">(</span>UPrimitiveComponent<span class="token operator">*</span> OverlappedComp<span class="token punctuation">,</span> AActor<span class="token operator">*</span> OtherActor<span class="token punctuation">,</span> UPrimitiveComponent<span class="token operator">*</span> OtherComp<span class="token punctuation">,</span> int32 OtherBodyIndex<span class="token punctuation">,</span> <span class="token keyword">bool</span> bFromSweep<span class="token punctuation">,</span> <span class="token keyword">const</span> FHitResult<span class="token operator">&amp;</span> SweepResult<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	<span class="token comment">// Try to cast the `OtherActor` to our `PlayerCharacter` and if we can then we</span>
	<span class="token comment">// switch the ZombieCharacter to be in the ATTACK state.</span>
	APlayerCharacter<span class="token operator">*</span> PlayerCharacter <span class="token operator">=</span> Cast<span class="token operator">&lt;</span>APlayerCharacter<span class="token operator">></span><span class="token punctuation">(</span>OtherActor<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>PlayerCharacter <span class="token operator">==</span> <span class="token keyword">nullptr</span><span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>

	ZombieCharacter<span class="token operator">-></span><span class="token function">ToAttackState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">/**
 * Called when an actor leaves the ZombieCharacter's DamageCollider.
 */</span>
<span class="token keyword">void</span> AZombieAIController<span class="token operator">::</span><span class="token function">OnComponentLeaveDamageCollider</span><span class="token punctuation">(</span>UPrimitiveComponent<span class="token operator">*</span> OverlappedComp<span class="token punctuation">,</span> AActor<span class="token operator">*</span> OtherActor<span class="token punctuation">,</span> UPrimitiveComponent<span class="token operator">*</span> OtherComp<span class="token punctuation">,</span> int32 OtherBodyIndex<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	<span class="token comment">// Try to cast the `OtherActor` to our `PlayerCharacter` and if we can then we</span>
	<span class="token comment">// switch the ZombieCharacter to be in the CHASE state since it means that the</span>
	<span class="token comment">// PlayerCharacter is running away.</span>
	APlayerCharacter<span class="token operator">*</span> PlayerCharacter <span class="token operator">=</span> Cast<span class="token operator">&lt;</span>APlayerCharacter<span class="token operator">></span><span class="token punctuation">(</span>OtherActor<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>PlayerCharacter <span class="token operator">==</span> <span class="token keyword">nullptr</span><span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>

	<span class="token function">Chase</span><span class="token punctuation">(</span>PlayerCharacter<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre>
<p>Now if you save and compile this and press play, you can see that if you get the ZombieCharacter to chase you and then you let it catch you, the ZombieCharacter will start attacking you. Now if you get out of attack range of the ZombieCharacter you'll see that the ZombieCharacter goes back to chasing you until you either come in attack range again, or leave the sight radius.</p>
<h2 id="implementing-the-dead-state"><a href="#implementing-the-dead-state" aria-hidden="true"><span class="icon icon-link"></span></a><strong>Implementing the DEAD state</strong></h2>
<p>Last thing we have to do is have implement the DEAD state and for this we're going to have to make the following additions:</p>
<ul>
<li>Add a <code>bIsDying</code> variable to the ZombieAnimInstance so that the animator knows when it should play the zombie death animation.</li>
<li>Add a <code>Damage</code> variable to the PlayerCharacter to set how much damage the BulletActor should do. This is set here and in BulletActor because we want it to be editable and we don't have a great way of editing BulletActor variables without blueprints so we'll just have damage here which will be passed to the BulletActor when spawned. We also need to modify the <code>Fire</code> method so that we pass this damage to the BulletActor.</li>
<li>Add a damage variable and modify the <code>OnBulletHitComponent</code> method of the BulletActor so that it checks whether the BulletActor hit a ZombieCharacter and if so it calls the <code>Hit</code> method on the ZombieCharacter.</li>
<li>Create a variable for health and a <code>Hit</code> method on the ZombieCharacter that is used to deal damage to the ZombieCharacter and also check to see if it's dead in which case we un-possess the ZombieCharacter and call <code>Destroy</code> on the ZombieAIController so that it doesn't try to move the ZombieCharacter anymore. Notice that instead of a <code>Hit</code> method we could override the <code>TakeDamage</code> method but this is a very simple example so we'll just make something simple.</li>
<li>Lastly we have to add the zombie dying state to the animation blueprint and make sure that this animation doesn't loop.</li>
</ul>
<p>So now that we have that laid out for us, let's start by adding the <code>bIsDying</code> variable to the ZombieAnimInstance class:</p>
<p><strong>ZombieAnimInstance.h</strong></p>
<pre class="language-cpp"><code class="language-cpp"><span class="token comment">// Indicates whether the ZombieCharacter is dying or not.</span>
<span class="token function">UPROPERTY</span><span class="token punctuation">(</span>EditAnywhere<span class="token punctuation">,</span> BlueprintReadOnly<span class="token punctuation">)</span>
<span class="token keyword">bool</span> bIsDying<span class="token punctuation">;</span></code></pre>
<p>And then in the cpp file we modify the <code>UpdateAnimationProperties</code> to include the <code>bIsDying</code> variable:</p>
<p><strong>ZombieAnimInstance.cpp</strong></p>
<pre class="language-cpp"><code class="language-cpp"><span class="token comment">/**
 * Used by the animation blueprint to update the animation properties above
 * and decide what animations to play.
 */</span>
<span class="token keyword">void</span> UZombieAnimInstance<span class="token operator">::</span><span class="token function">UpdateAnimationProperties</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	<span class="token comment">// Try to get the Pawn being animated and return if a nullptr.</span>
	APawn<span class="token operator">*</span> ZombiePawn <span class="token operator">=</span> <span class="token function">TryGetPawnOwner</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>ZombiePawn <span class="token operator">==</span> <span class="token keyword">nullptr</span><span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>

	<span class="token comment">// Try to cast the Pawn to our ZombieCharacter since that's the only</span>
	<span class="token comment">// thing we want to animate.</span>
	AZombieCharacter<span class="token operator">*</span> ZombieCharacter <span class="token operator">=</span> Cast<span class="token operator">&lt;</span>AZombieCharacter<span class="token operator">></span><span class="token punctuation">(</span>ZombiePawn<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>ZombieCharacter <span class="token operator">==</span> <span class="token keyword">nullptr</span><span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>

	<span class="token comment">// Set the variables that are dependent on states.</span>
	bIsRoaming <span class="token operator">=</span> ZombieCharacter<span class="token operator">-></span>State <span class="token operator">==</span> ZombieStates<span class="token operator">::</span>ROAM<span class="token punctuation">;</span>
	bIsChasing <span class="token operator">=</span> ZombieCharacter<span class="token operator">-></span>State <span class="token operator">==</span> ZombieStates<span class="token operator">::</span>CHASE<span class="token punctuation">;</span>
	bIsAttacking <span class="token operator">=</span> ZombieCharacter<span class="token operator">-></span>State <span class="token operator">==</span> ZombieStates<span class="token operator">::</span>ATTACK<span class="token punctuation">;</span>
	bIsDying <span class="token operator">=</span> ZombieCharacter<span class="token operator">-></span>State <span class="token operator">==</span> ZombieStates<span class="token operator">::</span>DEAD<span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre>
<p>Now let's head over to the PlayerCharacter and add our <code>Damage</code> variable that can be edited:</p>
<p><strong>PlayerCharacter.h</strong></p>
<pre class="language-cpp"><code class="language-cpp"><span class="token comment">// The amount of damage each shot of the PlayerCharacter's gun does.</span>
<span class="token function">UPROPERTY</span><span class="token punctuation">(</span>EditAnywhere<span class="token punctuation">,</span> BlueprintReadWrite<span class="token punctuation">,</span> Category <span class="token operator">=</span> Player<span class="token punctuation">)</span>
<span class="token keyword">float</span> Damage <span class="token operator">=</span> <span class="token number">10.f</span><span class="token punctuation">;</span></code></pre>
<p>Now in the cpp file we modify the <code>Fire</code> method so we can pass this <code>Damage</code> variable to the BulletActor when it's spawned:</p>
<p><strong>PlayerCharacter.cpp</strong></p>
<pre class="language-cpp"><code class="language-cpp"><span class="token comment">/**
 * Called when the Fire input action is pressed.
 */</span>
<span class="token keyword">void</span> APlayerCharacter<span class="token operator">::</span><span class="token function">Fire</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	<span class="token comment">// Return early if `GetWorld()` returns a nullptr.</span>
	UWorld<span class="token operator">*</span> <span class="token keyword">const</span> World <span class="token operator">=</span> <span class="token function">GetWorld</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>World <span class="token operator">==</span> <span class="token keyword">nullptr</span><span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>

	<span class="token keyword">const</span> FRotator SpawnRotation <span class="token operator">=</span> <span class="token function">GetControlRotation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">// Since the `BulletSpawnLocation` is in camera space, we have to transform it to</span>
	<span class="token comment">// world space before offsetting it from the character location to find the final</span>
	<span class="token comment">// bullet spawn location.</span>
	<span class="token keyword">const</span> FVector SpawnLocation <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>BulletSpawnLocation <span class="token operator">!=</span> <span class="token keyword">nullptr</span><span class="token punctuation">)</span> <span class="token operator">?</span> BulletSpawnLocation<span class="token operator">-></span><span class="token function">GetComponentLocation</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">GetActorLocation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">+</span> SpawnRotation<span class="token punctuation">.</span><span class="token function">RotateVector</span><span class="token punctuation">(</span>GunOffset<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">// Set Spawn Collision Handling Override.</span>
	FActorSpawnParameters ActorSpawnParams<span class="token punctuation">;</span>
	ActorSpawnParams<span class="token punctuation">.</span>SpawnCollisionHandlingOverride <span class="token operator">=</span> ESpawnActorCollisionHandlingMethod<span class="token operator">::</span>AdjustIfPossibleButDontSpawnIfColliding<span class="token punctuation">;</span>

	<span class="token comment">// Spawn the BulletActor and pass the `Damage` value over to it.</span>
	ABulletActor<span class="token operator">*</span> BulletActor <span class="token operator">=</span> World<span class="token operator">-></span>SpawnActorDeferred<span class="token operator">&lt;</span>ABulletActor<span class="token operator">></span><span class="token punctuation">(</span>ABulletActor<span class="token operator">::</span><span class="token function">StaticClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> FTransform<span class="token operator">::</span>Identity<span class="token punctuation">,</span> <span class="token keyword">nullptr</span><span class="token punctuation">,</span> <span class="token keyword">nullptr</span><span class="token punctuation">,</span> ESpawnActorCollisionHandlingMethod<span class="token operator">::</span>AdjustIfPossibleButDontSpawnIfColliding<span class="token punctuation">)</span><span class="token punctuation">;</span>
	BulletActor<span class="token operator">-></span>Damage <span class="token operator">=</span> Damage<span class="token punctuation">;</span>
	UGameplayStatics<span class="token operator">::</span><span class="token function">FinishSpawningActor</span><span class="token punctuation">(</span>BulletActor<span class="token punctuation">,</span> <span class="token function">FTransform</span><span class="token punctuation">(</span>SpawnRotation<span class="token punctuation">,</span> SpawnLocation<span class="token punctuation">,</span> <span class="token function">FVector</span><span class="token punctuation">(</span><span class="token number">1.f</span><span class="token punctuation">,</span> <span class="token number">1.f</span><span class="token punctuation">,</span> <span class="token number">1.f</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">// Get the animation object for the PlayerCharacter's body mesh and play the fire animation.</span>
	UAnimInstance<span class="token operator">*</span> AnimInstance <span class="token operator">=</span> PlayerSkeletalMesh<span class="token operator">-></span><span class="token function">GetAnimInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>AnimInstance <span class="token operator">==</span> <span class="token keyword">nullptr</span><span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>

	AnimInstance<span class="token operator">-></span><span class="token function">Montage_Play</span><span class="token punctuation">(</span>GunFireAnimation<span class="token punctuation">,</span> <span class="token number">1.f</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre>
<p>Next we head on over to the BulletActor so we can add the <code>Damage</code> variable to it:</p>
<p><strong>BulletActor.h</strong></p>
<pre class="language-cpp"><code class="language-cpp"><span class="token comment">// The damage this BulletActor should do.</span>
<span class="token function">UPROPERTY</span><span class="token punctuation">(</span>VisibleAnywhere<span class="token punctuation">,</span> BlueprintReadOnly<span class="token punctuation">)</span>
<span class="token keyword">float</span> Damage<span class="token punctuation">;</span></code></pre>
<p>In the cpp file we have to try to cast what we hit to a ZombieCharacter since we only want to deal damage to that and if we can cast it then we'll call the <code>Hit</code> method of the ZombieCharacter passing in <code>Damage</code> which we'll create next.</p>
<p><strong>BulletActor.cpp</strong></p>
<pre class="language-cpp"><code class="language-cpp"><span class="token comment">/**
 * Called when the BulletActor hits another component.
 */</span>
<span class="token keyword">void</span> ABulletActor<span class="token operator">::</span><span class="token function">OnBulletHitComponent</span><span class="token punctuation">(</span>UPrimitiveComponent<span class="token operator">*</span> HitComp<span class="token punctuation">,</span> AActor<span class="token operator">*</span> OtherActor<span class="token punctuation">,</span> UPrimitiveComponent<span class="token operator">*</span> OtherComp<span class="token punctuation">,</span> FVector NormalImpulse<span class="token punctuation">,</span> <span class="token keyword">const</span> FHitResult<span class="token operator">&amp;</span> Hit<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	<span class="token comment">// We want to return early if anything is null as it could cause a crash otherwise.</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>OtherActor <span class="token operator">==</span> <span class="token keyword">nullptr</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token punctuation">(</span>OtherActor <span class="token operator">==</span> <span class="token keyword">this</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token punctuation">(</span>OtherComp <span class="token operator">==</span> <span class="token keyword">nullptr</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>

	<span class="token comment">// Cast the `OtherActor` to a `ZombieCharacter` if we can and call its `TakeDamage` method.</span>
	AZombieCharacter<span class="token operator">*</span> ZombieCharacter <span class="token operator">=</span> Cast<span class="token operator">&lt;</span>AZombieCharacter<span class="token operator">></span><span class="token punctuation">(</span>OtherActor<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>ZombieCharacter <span class="token operator">==</span> <span class="token keyword">nullptr</span><span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>
	ZombieCharacter<span class="token operator">-></span><span class="token function">Hit</span><span class="token punctuation">(</span>Damage<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">// Finally destroy the the BulletActor so we don't end up with a bunch of bullets that</span>
	<span class="token comment">// litter the level and impact performance.</span>
	<span class="token function">Destroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre>
<p>Moving on we define the <code>Health</code> variable and <code>Hit</code> method for the ZombieCharacter:</p>
<p><strong>ZombieCharacter.h</strong></p>
<pre class="language-cpp"><code class="language-cpp"><span class="token comment">// The amount of health the ZombieCharacter has.</span>
<span class="token function">UPROPERTY</span><span class="token punctuation">(</span>EditAnywhere<span class="token punctuation">,</span> BlueprintReadWrite<span class="token punctuation">,</span> Category <span class="token operator">=</span> Zombie<span class="token punctuation">)</span>
<span class="token keyword">float</span> Health <span class="token operator">=</span> <span class="token number">100.f</span><span class="token punctuation">;</span></code></pre>
<p>And then further down where we define the state methods:</p>
<pre class="language-cpp"><code class="language-cpp"><span class="token comment">/**
 * Called to make the ZombieCharacter take damage and check to see if the
 * ZombieCharacter needs to die.
 */</span>
<span class="token keyword">void</span> <span class="token function">Hit</span><span class="token punctuation">(</span><span class="token keyword">float</span> Damage<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p>And in the cpp file we create the <code>Hit</code> method and in it we subtract the <code>Damage</code> from the <code>Health</code> and if the <code>Health</code> is now at or below 0, then we have the ZombieAIController un-possess the ZombieCharacter and then destroy it so that it won't try to move the ZombieCharacter any further:</p>
<p><strong>ZombieCharacter.cpp</strong></p>
<pre class="language-cpp"><code class="language-cpp"><span class="token comment">/**
 * Called to make the ZombieCharacter take damage and check to see if the
 * ZombieCharacter needs to die.
 */</span>
<span class="token keyword">void</span> AZombieCharacter<span class="token operator">::</span><span class="token function">Hit</span><span class="token punctuation">(</span><span class="token keyword">float</span> Damage<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	<span class="token comment">// Take the damage to apply from the ZombieCharacter's damage.</span>
	Health <span class="token operator">-=</span> Damage<span class="token punctuation">;</span>

	<span class="token comment">// If the ZombieCharacter's `Health` is at or below zero then we have take care of disabling the</span>
	<span class="token comment">// ZombieAIController.</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>Health <span class="token operator">&lt;=</span> <span class="token number">0.f</span><span class="token punctuation">)</span>
	<span class="token punctuation">{</span>
		<span class="token comment">// Have the ZombieAIController un possess the ZombieCharacter and then destroy the</span>
		<span class="token comment">// ZombieAIController so it doesn't give any more input to the ZombieCharacter.</span>
		AAIController<span class="token operator">*</span> ZombieAIController <span class="token operator">=</span> Cast<span class="token operator">&lt;</span>AAIController<span class="token operator">></span><span class="token punctuation">(</span><span class="token function">GetController</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>ZombieAIController <span class="token operator">==</span> <span class="token keyword">nullptr</span><span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>
		ZombieAIController<span class="token operator">-></span><span class="token function">UnPossess</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		ZombieAIController<span class="token operator">-></span><span class="token function">Destroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token comment">// Put the ZombieCharacter in the `DEAD` state so that the animation blueprint will play</span>
		<span class="token comment">// the zombie dying animation.</span>
		<span class="token function">ToDeadState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre>
<p>Finally we just have to make sure to add the zombie dying animation to the animation blueprint and make sure that it doesn't loop. So in the animation blueprint just make a connection from every state to the dying state and set it to trigger when <code>Get Is Dying</code> is set to <code>true</code> like so:</p>
<p><img class="g-image g-image--lazy g-image--loading" src="data:image/svg+xml,%3csvg fill='none' viewBox='0 0 924 541' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-7a088eace4d1073b7a043889c6be92cf'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='40'/%3e%3c/filter%3e%3c/defs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-7a088eace4d1073b7a043889c6be92cf)' width='924' height='541' xlink:href='data:image/png%3bbase64%2ciVBORw0KGgoAAAANSUhEUgAAAEAAAAAlCAYAAADyUO83AAAACXBIWXMAAA7DAAAOwwHHb6hkAAAJeklEQVRo3sVaWW8cxxHWzwiCUOTeMzv3zl5cknuRoh1eMkORMizREh3FMqLEMmDHAmyTCBIEeQjgpwB5T57yC/I/kre853dU6quenu2dPbi7oq2H5vT21FR3V1d9dTTvFQoFsiyLqtWqNNu25VkqlaRvNoyXy%2bWU3hwHfaVSkXd6HH2MT%2bM/j4/um9%2bA3hyfxUe/n8VHj2Ot6N8rFovCwHGclBB9MDY/1uP4EAxMev2u1WpRs9mkWq1G9XqdGo0GRVEk/Sz/aXxmzas3uuh6pvHR77UgsWf0UwEsM2FWYGAYhKEI4Oj4iC4/vqSLx4%2blf35xTs1WcyEBzJp33nr0hpbhMyEAzcBsWKD5e9rC08bvAs%2bjkE87CAI%2b%2bTo1%2bfTr/IxEG2JyXW%2b0cHcGH%2bPksnPPW495wiafLG/NB89UABsbGwQh4IfZgA3ZMXyMcdhOGTbEY2guM%2bvwhkFTBBZwC2yL6Uu0kcuRw7RB4FPF5hNIsELzQd%2bcI5/PT8y7yHpMPujP4wN67Bk097IgOEuF9GmZJhC6Lln8u7u1Jeqfnh63yHfJ850UdELPJb8W8XtvArzMNg8Es2OmSk8DwSxvE0zHQHCWKuLp8SZdVlkXfd6EZbEAmN7n3zus9nVW%2be3tbZGmk0wE2lrgiQBGQmGBBSyUekS1YUwVqzw2bxa8ZqnuPJPMmsA0Pnp8IRAslSu0nitQrliWli9Balh44nZYgjudDr1584YODg6UEHgilzcrGuA5Cb0SWMPzyY34u5rLC7eSeVcDQb3pO9cAfYK5QpHOf96jP79%2bSt9dHdO3zw/p5pfH1IkDPj02gapNm%2bzytlj9T09PqdvtCkMRgOOkJiCqzjwbPLbJ2uSzNnmsHZblyeYdp/pu3aAGFzDSzLCBn67dp99/dkH/%2b9df6d9/v6H//OOG/vvPP9LhYJN%2b8rN13ohL%2b3t7whg88oW8kjILxuWnmECiAanKMX%2b8iyKPAZFV2vb5e3fs5LIBz4%2bCAQheOqzKADJBVCa6v5Gnq7P36W/fvqC/fPmMvv/dFX3/9RV9dXVKXz5/SJ9cHLPbi2ljfV0QFd4kn8tLK7JAor5PZbtE99fWxTQK%2bYIIKsfvrWKJSjYLrVjgb21%2bz/18TmjW1tYUfaEw1sA/O5bOy/To30avx0GfY%2b%2b0zmu/h0jt/PycXr16RS9fvqTNzU3q9Xq00%2bvTH754Ts/P3qNPnz2mr1%2b/pN%2b8eEKff3pJf3rza/rmV2dU4tOO4pCCKCCHT9sPffIjn3/D1i0KYlZzjEf%2bRIvbsZjPcLhLg8GQBsMB9fo92t/fp36/L/GEqbrzQHCZOGACBPHHYzTHhL7vp2p0fz1HV7/Yp5vPHtEXHx/zyX8gJ//68pi%2beXFK1799RsMH71N/0KMet%2b2dbdlAl9tg0KePPrygB%2b/tUWe7I%2b/N1u13ReOCMKD%2bsE9nj87oER8ChIAocjAYpGvJLvzOI0GohbZ9EwzLiWRrfKq10BObjnHCjk3NOKKjo4OEqS%2b%2bvcRqjZigwp7DZ7S/ub6WE4bK2ZaaUFpFJUteyIDIgrckYFKxhecFoqY4EN8PxjzE24LgwqFwloFtq2aJZijBFHmzvV6XMaPGjBj0XJyWJ8%2bqeIEqddpN1ipPQDCrhi48BNwh3Kk5b9UVPsrNMh83nBDAXcQBExqwUDJkRIIIZ6HC7XYjWaxGad4YLzrkBk3xA9Bn0lgIjAMi17Mn0B58KhVbNg6%2bjhNwP5D%2bvHT4rbwA0FDH0mYzY28dZ1fk9IvSkNz0etv8bVGNA5WZT4030fMjdnc%2bv48orlmiMZpvGW6RN191yul4Noa3LIBelc1gi4WAHEOvZ7Q%2bMxfIrjE7bn6jx9NcYNV02GM77zPgwdcrlGbJyglbkvxEEgeADzTHT%2bzZFpogxm9LzGc6eKlvbDsU84NGYPM/WDq8bDKkGQAHGo1IgE0ztpNI0gyFHceTTQhWIBCqeyqnsOYtXGGLEh7clitjswQwLamaJwCtEStVhDSjer3BcUOT8/uqbEgvBLnAeDKULJDDXy/kZIgTIiVIPa89c14IDgJU2BCM4cU7qwipzdfZFR6xFuywEFzWBEcWqQUQBaNcoMpqjEAp6DCohQ7FLACgvUqNmTbs8eZqBphWJ4QA3tAGCENtxvlhK0ImA9PF4EOAx%2bHhIV1/d82p8BbH9hgvib2a6bBvpMNV1pJqi3mEqB16IjTbhpmgRtAQYSAxmuW%2bYAJq8xyL%2bJscQ7QTr/GW6fCqFSE0xNIQQMiB0sZGLqWzEAw5wIOKxPl6HKjvBtAS/l1R8bvSKOCBI%2biv6EtT1wMhQBMqFZ%2b/tQR4V6ksjVWEVgFBjRl4ttubHBM0R2V0bQIGCKo4IjGDyBUN0XWCcRPzmb86aW3n2fUAB7Qp3Fk2uGpVGCAWhiEnND1mVhjZrIkBhgAQAIU1V%2bx3XlVYew3tAcaxwUk8SiixyJ25wVXvBRC39zm5cRxr5AWmlMSElk8/CNwF0FuNww1qQWQxCeOeV3u39wL6N7K/MHRTPkoDvHEN4BbWcbLVWzVgfF5HBKBAcBRQ4el5sVSWRu50hWRomarwtGou/H%2br1eYWq02JAHizPuJ9o8rLG4f96xLYKlXhkWl4ht2HiTu1Uy%2b0FAas6gU06qo6oMupb1PuAeTOgJvvWmIW8A6SKnPoG0ZVAb/F7wWK4iFG6yklHkO5RTzhWSAEeIeV7gXu4mZI1DsMxCXu7u3S3t4ePXiwR4Nhn3Z3dxkkh7SzsyPpsdQcJ26GJjEAaB8EndQTwOUpmtGJon6gTCNk2pbkF7PWv1JZfJm7QXgDXI2hqoP7wJMPHtIuC%2bH45JiOTo6o1W5JAqWSG1UWRx/aM4rsXCPpgbtrpzigQnAnoXfTSBB8YAJB0OY19NPbaX2wZtObfmsQnAZeSgvCVLraQ2h6vFPJTcDjYZLc%2bIk7C5IWSkCkfT3qC/o96DWNej/io7ABt9Bdjkva0hrNhhR5zYZba40xK4fC89yObNyeUs62zeKHDqjKCXqbAjbT4erYHJMHMuKjANBiAdRos9Ohg8MDevLkiWji4dEhPb18SicPTyiO40kTuKt/kJiVli7iTVTZbfIfJDSq3/YPEnodKOyiyo2CKgquYRSK5uHkUfpHf%2bIfJFapCC1CP6syM82bzKrwTKvkzKMXD5SsQe8r2yYqQqveDs8KMG4bN%2b/0Fo0DFr0bXLYgMvd2eKl/kMhcUMwbv43Pj/0PEv8HTAXqV19J/ZYAAAAASUVORK5CYII=' /%3e%3c/svg%3e" width="924" alt="Zombie Animation Dying" data-srcset="/assets/static/zombie-animation-dying.82a2fbd.c458ab9ed06e67d8c8df2ab5f27dd5a7.png 480w, /assets/static/zombie-animation-dying.109a16b.c458ab9ed06e67d8c8df2ab5f27dd5a7.png 924w" data-sizes="(max-width: 924px) 100vw, 924px" data-src="/assets/static/zombie-animation-dying.109a16b.c458ab9ed06e67d8c8df2ab5f27dd5a7.png"><noscript><img class="g-image g-image--lazy g-image--loaded" src="/assets/static/zombie-animation-dying.109a16b.c458ab9ed06e67d8c8df2ab5f27dd5a7.png" width="924" alt="Zombie Animation Dying"></noscript></p>
<p>Now double click in this animation and in the settings on the right make sure that Loop Animation isn't ticked like so:</p>
<p><img class="g-image g-image--lazy g-image--loading" src="data:image/svg+xml,%3csvg fill='none' viewBox='0 0 1104 454' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-c3de4533821366daea4ecb2d8bb3056b'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='40'/%3e%3c/filter%3e%3c/defs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-c3de4533821366daea4ecb2d8bb3056b)' width='1104' height='454' xlink:href='data:image/png%3bbase64%2ciVBORw0KGgoAAAANSUhEUgAAAEAAAAAaCAYAAAAHfFpPAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAG6klEQVRYw9VZWVNURxjlySTKqiyCDLPvwLDMMMMy7MO%2bgwQJRQwWSkUwwVIrDyFlYvIQjA/GZy2rLC2tslx%2b4Umfxu9Wc5mBQZJK8XCq%2b3b31/d%2bp7%2btZwrKy8tRUVGByspKsE9cuHBBt1VVVXpOxtmXOXPcnDt//vyBuWyyfB/3J6qrq/UcYf%2bO0tJS1NTUoLu7G1NTU5iZmcHw8DAaGxsRi8U0GhoaUF9fvw8cM8H1e4jpNhqNatmCQCAAO7xeL4LB4IFxjnHO7/cfmOezz%2beD2%2b0%2bVDbb%2bwjuSXnzmetdLpceT6VS6O/vx8DAgEZbWxuSySQSiQTa29sxNDSkkclkNPr6%2bvT6np4epNNpdHR0KLSrfRJItSf1mvb2FApCoRDC4bAFPvPl5piMsxVl7POEKGmuN/vc1/4%2bU5Z7y3o%2bc73H49EtFZicnMTs7CzGxsa0UgIqs7KyorG8vIwrV67odYuLixrz8/OYnp7BxMQI%2bgc6FVG92N7e1nIFfBFfKJCTlL45LuTwQ%2b0ybMV6csly32zvE1khSMgQixICJiYmNOgK09PTmghawdLSEp4%2bfYoXL17g1atXGq9fv8aDBw/Q1dWFzs5Oi6yurrS2io2NDW1JOV0gl6mKC2SbO8wFjtqXskKQPHO90%2bnUfbEAgZg6CeDJU%2bF3797hw4cPeP/%2bPT5%2b/IiHDx9qpRk/BHzu7e3F5uYmBgcHUZDNHMUU7YhEItbpZ5sT62H/uPtSlhBZIUJcgKdoEsCTpUJCwMuXL/HmzRu8ffvWwu7urqW0ScA%2bC8g3BphKHObHhxFwkhjAoCbK0/zpCnNzc1hYWNBkmG4kYLQX5cUFpN/S0qLbU0OA3QVIAE%2bQlkESHj9%2brOPAs2fPNJ4/f46dnZ2sLkALWF9fP10WIEGQgY8tSWCaowsw0j958jcePdpVeGThzp07OWPAzZs392LAaSGAuX58fFxnALYsiEgG64PZ2TmsrV1Fc3NYoUWhSaFZ1whmujQJ2Nrayh4E/08CpL7IRgA/WnyfyrPooflTKUlzPT29ep2Apm6evmkFIltgT2lSgf1XafAwWakEpSq0p0FRjKbP1jzVXMoehQKzKBHISdkhp2gvZswq0awEj7OvECGyQgQJlVKYdwAph/lMM2c0b2pqsvps8wFluD6rC%2bTK1yd1gaNkD3MBnhYLHyo/MjKiLYJpjoq0trZqfxcS8gHvEpQ7NUFwL9jN6ujPIMg%2ba3zGhNXVVV3ZMSMc5QoSBO/evbt3FzhNaZDmz4LIDHQS7DhnT3m5CGBLS6LcPgIiEYWwennAv9fPghO5wAkJMFOaHVIaH7bGvl5XglYtHgrD649ouDxKkUB07zmwB49PKRBkzb5HgF3Jo%2b8Cn%2b4RtqtyrruAxCISwJYE2Ov6XKebjwVYWSCgU04AsQY/hrrcGOxwoj/lQEa1Q51u3WY6XJjoUxeShIrKnqPTYEBZkI%2bpVNfkPo2APk23bmlJcsKmrKRfSYNU3kyD2RSwFzn5pj9ZqwlwevxYGXDjr43L%2bP36En69No%2bHP1zF/bV57Kr2t81vsDzRjdXpKOpDDni8fq2kefEIqg93ulxYnBzAnzvb%2bOPn29i5fQO//XRL4/69Lfxy7xZ%2b/P4apsaHEI%2b3WKcrtYfUCUIG5%2bvq6nQ/Hwv4rDogQt8MRTCfrkV3rBGdzXEkG2JINbUgEWtCsjWOuEoX1Q4vehM1SDSqvOwPHcj1EuTaWuoxnkkj06cqrY5W9KWT6E2n0NWRQHuqVaWgRuVObuVmLsuVCPH7k7jAZxEQpgLhKPpby1Fcdg6FpUUKhSgiyop0W6IwNjmF7uYq9KQa0NyaUHk0oXOvgHmVOdnt86JfpRefihXh%2bihKL5Thq8KzOFdciLNF51BUUoSSshJUVFbsiwX5BMHjBLl8YREw3FKuPrQQZwqLceZcEb5g%2bwlfFhWj0ulHIliCZEyZqQqG0U8nJ%2bCvrPzoi9VVKoD6UF1zEbWOSyg9X4ri0mJFYrFuCZJQXlF%2brCzAqC0p799EQSQSUuYYxs5yLTZXmjGdbsB8Xz0W%2bhstXFaY6q7HvSkH4lGXUjCc1QX40Q6Hw0Kto1YHMQ2XU49JX0rmfAlg1UYrE4uLx%2bP7rE8jEdeWaT0bYJFkygtUGlS%2bFgyjW0X49fEQ1jIhfDcYwLWhkIU1hRujYcymVbQ%2bIpfzY/m7vFiF3UJMq8mXAPmhlTc4gu4gP3bSKvi7v9frxuzX1zG3%2bC2GhwYxqq7KLJlHR0f1Ol6nWSozqJqwCiG/OlWnJ4Q6bxCXnD44vSGFoAWOe/xHF0K5LkNmJWiO5UMAswJPT2KAFD1SzFC5pJofyIxhMDOqq0LzPwQxdxJBSzLxD7n5PJ7p%2bDH8AAAAAElFTkSuQmCC' /%3e%3c/svg%3e" width="1104" alt="Dying Animation No Loop" data-srcset="/assets/static/dying-animation-no-loop.82a2fbd.ed4bea5cd4c23fc4cbdacdb6263a84e6.png 480w, /assets/static/dying-animation-no-loop.2d81b5b.ed4bea5cd4c23fc4cbdacdb6263a84e6.png 1104w" data-sizes="(max-width: 1104px) 100vw, 1104px" data-src="/assets/static/dying-animation-no-loop.2d81b5b.ed4bea5cd4c23fc4cbdacdb6263a84e6.png"><noscript><img class="g-image g-image--lazy g-image--loaded" src="/assets/static/dying-animation-no-loop.2d81b5b.ed4bea5cd4c23fc4cbdacdb6263a84e6.png" width="1104" alt="Dying Animation No Loop"></noscript></p>
<p>At this point if you save and compile and press play, you should be able to shoot the ZombieCharacter as many times as it needs to get to 0 health or lower and you should see the dying animation play and no further movement from the ZombieCharacter.</p>
<p><strong>Bonus</strong></p>
<p>As a bonus we'll go over how to destroy the ZombieCharacter after a period of time. To do this, we create a timer that runs for the length of the zombie dying animation and after that we can use <code>SetLifeSpan</code> to destroy the ZombieCharacter after a period of time like so:</p>
<p><strong>ZombieCharacter.h</strong></p>
<pre class="language-cpp"><code class="language-cpp"><span class="token comment">// The amount of seconds long that the zombie dying animation is. This is used with</span>
<span class="token comment">// the `SecondsAfterDeathBeforeDestroy` variable to make sure that the dying animation</span>
<span class="token comment">// plays out fully before the ZombieCharacter is destroyed.</span>
<span class="token function">UPROPERTY</span><span class="token punctuation">(</span>EditAnywhere<span class="token punctuation">,</span> BlueprintReadWrite<span class="token punctuation">,</span> Category <span class="token operator">=</span> DyingState<span class="token punctuation">)</span>
<span class="token keyword">float</span> DyingAnimationLengthInSeconds <span class="token operator">=</span> <span class="token number">3.f</span><span class="token punctuation">;</span>

<span class="token comment">// The amount of time after the ZombieCharacter dies that they will destroy. A value</span>
<span class="token comment">// of 0 means that the ZombieCharacter will be destroyed immediately after the dying</span>
<span class="token comment">// animation plays. A value below 0 means that the ZombieCharacter will never be destroyed.</span>
<span class="token function">UPROPERTY</span><span class="token punctuation">(</span>EditAnywhere<span class="token punctuation">,</span> BlueprintReadWrite<span class="token punctuation">,</span> Category <span class="token operator">=</span> DyingState<span class="token punctuation">)</span>
<span class="token keyword">float</span> SecondsAfterDeathBeforeDestroy <span class="token operator">=</span> <span class="token number">5.f</span><span class="token punctuation">;</span>

<span class="token keyword">protected</span><span class="token operator">:</span>
	<span class="token comment">/**
	 * The timer used to wait until the dying animation has finished playing.
	 */</span>
	FTimerHandle DeathAnimationTimer<span class="token punctuation">;</span>

<span class="token keyword">protected</span><span class="token operator">:</span>
	<span class="token comment">/**
	 * Called after the death animation finishes playing.
	 */</span>
	<span class="token keyword">void</span> <span class="token function">AfterDeathAnimationFinished</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p>And then in the cpp file we set the timer to run after the ZombieAIController has been destroyed and we create the <code>AfterDeathAnimationFinished</code> method that the timer runs when finished to destroy the ZombieCharacter:</p>
<p><strong>ZombieCharacter.cpp</strong></p>
<pre class="language-cpp"><code class="language-cpp"><span class="token comment">/**
 * Called to make the ZombieCharacter take damage and check to see if the
 * ZombieCharacter needs to die.
 */</span>
<span class="token keyword">void</span> AZombieCharacter<span class="token operator">::</span><span class="token function">Hit</span><span class="token punctuation">(</span><span class="token keyword">float</span> Damage<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	<span class="token comment">// Take the damage to apply from the ZombieCharacter's damage.</span>
	Health <span class="token operator">-=</span> Damage<span class="token punctuation">;</span>

	<span class="token comment">// If the ZombieCharacter's `Health` is at or below zero then we have take care of disabling the</span>
	<span class="token comment">// ZombieAIController.</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>Health <span class="token operator">&lt;=</span> <span class="token number">0.f</span><span class="token punctuation">)</span>
	<span class="token punctuation">{</span>
		<span class="token comment">// Have the ZombieAIController un possess the ZombieCharacter and then destroy the</span>
		<span class="token comment">// ZombieAIController so it doesn't give any more input to the ZombieCharacter.</span>
		AAIController<span class="token operator">*</span> ZombieAIController <span class="token operator">=</span> Cast<span class="token operator">&lt;</span>AAIController<span class="token operator">></span><span class="token punctuation">(</span><span class="token function">GetController</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>ZombieAIController <span class="token operator">==</span> <span class="token keyword">nullptr</span><span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>
		ZombieAIController<span class="token operator">-></span><span class="token function">UnPossess</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		ZombieAIController<span class="token operator">-></span><span class="token function">Destroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token comment">// Put the ZombieCharacter in the `DEAD` state so that the animation blueprint will play</span>
		<span class="token comment">// the zombie dying animation.</span>
		<span class="token function">ToDeadState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token comment">// Now we set a timer for the length of the dying animation to make sure that if we have to</span>
		<span class="token comment">// destroy the ZombieCharacter, we don't do it until the animation has finished playing.</span>
		UWorld<span class="token operator">*</span> World <span class="token operator">=</span> <span class="token function">GetWorld</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>World <span class="token operator">==</span> <span class="token keyword">nullptr</span><span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>
		World<span class="token operator">-></span><span class="token function">GetTimerManager</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">SetTimer</span><span class="token punctuation">(</span>DeathAnimationTimer<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>AZombieCharacter<span class="token operator">::</span>AfterDeathAnimationFinished<span class="token punctuation">,</span> DyingAnimationLengthInSeconds<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">/**
 * Called after the death animation finishes playing.
 */</span>
<span class="token keyword">void</span> AZombieCharacter<span class="token operator">::</span><span class="token function">AfterDeathAnimationFinished</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	<span class="token comment">// Now that the dying animation has finished playing we can see if we need to Destroy</span>
	<span class="token comment">// the ZombieCharacter.</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>SecondsAfterDeathBeforeDestroy <span class="token operator">==</span> <span class="token number">0.f</span><span class="token punctuation">)</span>
	<span class="token punctuation">{</span>
		<span class="token comment">// The ZombieCharacter should be destroyed immediately so we don't need to set a</span>
		<span class="token comment">// timer.</span>
		<span class="token function">Destroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>SecondsAfterDeathBeforeDestroy <span class="token operator">></span> <span class="token number">0.f</span><span class="token punctuation">)</span>
	<span class="token punctuation">{</span>
		<span class="token comment">// We have to wait some time before the ZombieCharacter should be Destroyed so we</span>
		<span class="token comment">// set a timer that runs the method to destroy the ZombieCharacter.</span>
		<span class="token function">SetLifeSpan</span><span class="token punctuation">(</span>SecondsAfterDeathBeforeDestroy<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre>
<h2 id="conclusion"><a href="#conclusion" aria-hidden="true"><span class="icon icon-link"></span></a><strong>Conclusion</strong></h2>
<p>With the above setup you should be able to even group ZombieCharacter together and form hordes and and when the PlayerCharacter gets close they'll attack at the same time. I might expand on this tutorial in the future to make it into a series about developing a modern survival style game. Thank you for reading and be sure to the check out the <a href="https://github.com/robertcorponoi/unreal-zombie-ai" target="_blank" rel="nofollow noopener noreferrer">repo</a> for a full example.</p>
</div><div class="post__footer"><div class="post-tags"><a href="/tag/unreal/" class="post-tags__link">unreal</a><a href="/tag/ai/" class="post-tags__link">ai</a><a href="/tag/zombie/" class="post-tags__link">zombie</a><a href="/tag/game-development/" class="post-tags__link">game-development</a></div></div><div class="author post__author"><img alt="Author image" src="data:image/svg+xml,%3csvg fill='none' viewBox='0 0 328 328' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-01a977fbf7b567b5530e68a6b3d8c4c9'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='40'/%3e%3c/filter%3e%3c/defs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-01a977fbf7b567b5530e68a6b3d8c4c9)' width='328' height='328' xlink:href='data:image/jpeg%3bbase64%2c/9j/2wBDAAYEBQYFBAYGBQYHBwYIChAKCgkJChQODwwQFxQYGBcUFhYaHSUfGhsjHBYWICwgIyYnKSopGR8tMC0oMCUoKSj/2wBDAQcHBwoIChMKChMoGhYaKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCj/wAARCABAAEADASIAAhEBAxEB/8QAGwAAAwADAQEAAAAAAAAAAAAABQYHAwQIAgH/xAAzEAACAQMDAQUGBgIDAAAAAAABAgMEBREAEiEGBxMxQVEiMmFxgaEUFSRCkbEWF1Jy0f/EABoBAAIDAQEAAAAAAAAAAAAAAAMFAQIEBgD/xAAjEQACAQUAAQQDAAAAAAAAAAABAgADBBESITEFIkFRMmFx/9oADAMBAAIRAxEAPwA9cIAwPGkLqy4wWOneokY7z7KRr4s3lqkVmApLHAAySfIahN6qpes%2bpJoYsiipmCRJ5nnBPzP9aXW9Mu36mhjiA67rO8zNuScQIPAIcZ%2bemHpbq%2btqahY5XeoIGe728sPnonRdlhkG%2bsnjiQ%2bCp7TaYKXpOisqI1NE25f3n3mPx0wqUBryQjHPYWslTBdDLHEWSeE4kiYjcujUdrJ8zpY63qloLnZurLbFtq639BXQpwjSqAVfHhkrx9M6odslFVRQTlAhkQMVznaSPDOsTe2XIggWfIzgn66%2b/k4/4N99TvtJ6sq7J1PW08QWSAKhy7SewSPABWA%2bOkqp60rZYnkUR4Xg4aUf2%2bpFJmGRIyo4TL5dwWoqhVbYTG2G9OPHUH7LKpafqqoQ4aGYNyT4YOc6vFzy9NMqDLFCACcZONR609IzWW6w1k7hpEqoldR7ojc4LfycfXRbAjYgylT7lETqBJJAtJRPON20SMwRP5Pj8hohf5Vp7GZ49kcznbge0E9Do7VdK22odKqopBM6Y7pS3Ef/AFHloddKFmJpFh3gKGZR5D0z8tOGQBeQaZY9kshsV0vUdXDEa4yzAsnfSAIxXlSFxx8PMaovZkaxelojcEZJjI5w3z5%2b%2bdeaKj7iXEcxPdngZ5A8s%2bh0fpNkMAWMYUkt9SST9zpTeAcI%2bYdeDEjHaDVU3%2bb3iOaquMbxkSNHSsANoRcHnz50p1kVJWIqw1dwnxLt2zcgEcnPPpon2gSP/sLqRkJw0XdHHkCE51p9Po0aTtK6lu9iYKPINlSdeRQqbSrElsS91UmAdJd8v9NbL7RiaLv8KWli2g95EeCpz6n%2btNNZIApycD11z/1Tfqi5XiWo2LGvMUPHOzdwT8dZLVHd9k%2bJZio/KdQ9A9TUd7twMZIaMlCjkFlHln6Y51iu0tZLVyzQRmGFSRvbgEaivYhRXK49UyRvLURU5gbMyN7j/tOPPJBH86rs0vUtCssFVQyVOw47yFS6sP7Guip76jbzMpYA88QAtL%2bGnasErGLJbhs7vXR%2bjlP4aPd4lQT9dA6ikrrjUhpaeSlpoxl93sk/ADStYr/eLVevynqfawbmKryArA%2b6c8DHl8Dpbf0mbGIZGBgnqCwS3bqW/VERQFqsR5J5wEXI%2bXhpPq6Wqs9z7tvGRlRiQTuUEeH8afhfaCmvd4inq4o5Gq2cBmxkbV5z4aEdUV9BXT0MUNRFLL36g7GyQDpalWopII5DMAY09QdU0EcM0MDtNKyMgKDgEgjOTqW9ygKDaGZRjJ50VenwSx5J15WAA5xjnOuys/TKdoCF7n7iSrdmp5lI7DrlR0N0mo6oiMzsGSQ%2bo8vvroOWJChYcEj3h56473tBKslOdrgg8HH1HodPll7VrxQUqU8%2bJ1TgF%2bDola3bbZZFOsCMGV%2b5W8AMijCP5nUI7WJ4vzGno4WDPAmXIPgSeB9tGr72t3a50ppqeCGDjHeDlv8AzU3qQ1RI8tQ5aRiSSTkk6qlsSdmGJdq4AwDNaUQA/qIllBHssfeH11kpKSmlnikgYq0bh9pPjjWvOAxIGePDOsSIy8gkHOdAufTUrA/B%2b4Wjdmn/ACf/2Q==' /%3e%3c/svg%3e" width="328" data-src="/assets/static/author.de4034a.47c56ffa8bb5f81a48029e779b4a2893.jpg" data-srcset="/assets/static/author.de4034a.47c56ffa8bb5f81a48029e779b4a2893.jpg 328w" data-sizes="(max-width: 328px) 100vw, 328px" class="author__image g-image g-image--lazy g-image--loading"><noscript><img src="/assets/static/author.de4034a.47c56ffa8bb5f81a48029e779b4a2893.jpg" class="author__image g-image g-image--loaded" width="328" alt="Author image"></noscript><div class="author__bio"><p class="author__name">Robert Corponoi</p><p class="author__intro">Self proclaimed JavaScript wizard</p></div><a href="https://twitter.com/robertcorponoi" target="_blank" rel="noreferrer" class="btn btn--secondary">Follow</a></div></div></main><footer class="footer"><div class="container"><ul class="soc"><li><a href="https://twitter.com/robertcorponoi" target="_blank" rel="noreferrer" title="Twitter" class="soc__icon soc__icon--twitter"><div class="soc__ir"><svg viewBox="0 0 512 512" preserveAspectRatio="xMidYMid meet"><path d="M419.6 168.6c-11.7 5.2-24.2 8.7-37.4 10.2 13.4-8.1 23.8-20.8 28.6-36 -12.6 7.5-26.5 12.9-41.3 15.8 -11.9-12.6-28.8-20.6-47.5-20.6 -42 0-72.9 39.2-63.4 79.9 -54.1-2.7-102.1-28.6-134.2-68 -17 29.2-8.8 67.5 20.1 86.9 -10.7-0.3-20.7-3.3-29.5-8.1 -0.7 30.2 20.9 58.4 52.2 64.6 -9.2 2.5-19.2 3.1-29.4 1.1 8.3 25.9 32.3 44.7 60.8 45.2 -27.4 21.4-61.8 31-96.4 27 28.8 18.5 63 29.2 99.8 29.2 120.8 0 189.1-102.1 185-193.6C399.9 193.1 410.9 181.7 419.6 168.6z"></path></svg></div></a></li><li><a href="https://github.com/robertcorponoi" target="_blank" rel="noreferrer" title="GitHub" class="soc__icon soc__icon--github"><div class="soc__ir"><svg viewBox="0 0 512 512" preserveAspectRatio="xMidYMid meet"><path d="M256 70.7c-102.6 0-185.9 83.2-185.9 185.9 0 82.1 53.3 151.8 127.1 176.4 9.3 1.7 12.3-4 12.3-8.9V389.4c-51.7 11.3-62.5-21.9-62.5-21.9 -8.4-21.5-20.6-27.2-20.6-27.2 -16.9-11.5 1.3-11.3 1.3-11.3 18.7 1.3 28.5 19.2 28.5 19.2 16.6 28.4 43.5 20.2 54.1 15.4 1.7-12 6.5-20.2 11.8-24.9 -41.3-4.7-84.7-20.6-84.7-91.9 0-20.3 7.3-36.9 19.2-49.9 -1.9-4.7-8.3-23.6 1.8-49.2 0 0 15.6-5 51.1 19.1 14.8-4.1 30.7-6.2 46.5-6.3 15.8 0.1 31.7 2.1 46.6 6.3 35.5-24 51.1-19.1 51.1-19.1 10.1 25.6 3.8 44.5 1.8 49.2 11.9 13 19.1 29.6 19.1 49.9 0 71.4-43.5 87.1-84.9 91.7 6.7 5.8 12.8 17.1 12.8 34.4 0 24.9 0 44.9 0 51 0 4.9 3 10.7 12.4 8.9 73.8-24.6 127-94.3 127-176.4C441.9 153.9 358.6 70.7 256 70.7z"></path></svg></div></a></li><li><a href="https://www.linkedin.com/in/robert-corponoi-1353a1112/" target="_blank" rel="noreferrer" title="LinkedIn" class="soc__icon soc__icon--linkedin"><div class="soc__ir"><svg viewBox="0 0 512 512" preserveAspectRatio="xMidYMid meet"><path d="M186.4 142.4c0 19-15.3 34.5-34.2 34.5 -18.9 0-34.2-15.4-34.2-34.5 0-19 15.3-34.5 34.2-34.5C171.1 107.9 186.4 123.4 186.4 142.4zM181.4 201.3h-57.8V388.1h57.8V201.3zM273.8 201.3h-55.4V388.1h55.4c0 0 0-69.3 0-98 0-26.3 12.1-41.9 35.2-41.9 21.3 0 31.5 15 31.5 41.9 0 26.9 0 98 0 98h57.5c0 0 0-68.2 0-118.3 0-50-28.3-74.2-68-74.2 -39.6 0-56.3 30.9-56.3 30.9v-25.2H273.8z"></path></svg></div></a></li></ul><span class="footer__copyright">Copyright © 2021 Robert Corponoi</span><a href="https://opensource.org/licenses/MIT" target="_blank" rel="noreferrer" class="footer__license">All Code MIT Licensed</a></div></footer></div>
  <script src="/assets/js/app.1b9cc82c.js" defer></script><script src="/assets/js/page--src-templates-post-vue.ed68cdd5.js" defer></script>
</body>

</html>