{"hash":"85a87da2caa6a3c8ae7647f17d7dfc4c0f704337","data":{"tag":{"title":"unreal","belongsTo":{"edges":[{"node":{"title":"Unreal C++ Creating a Zombie AI","path":"/unreal-c-creating-a-zombie-ai/","date":"30. August 2020","timeToRead":43,"description":"Learn how to create an Zombie that roams, chases, and attacks the player","cover_image":{"type":"image","mimeType":"image/png","src":"/assets/static/main.07cc2b7.7e8c19927233dfe4043889962a6d211b.png","size":{"width":860,"height":476},"sizes":"(max-width: 860px) 100vw, 860px","srcset":["/assets/static/main.a67b0b2.7e8c19927233dfe4043889962a6d211b.png 480w","/assets/static/main.07cc2b7.7e8c19927233dfe4043889962a6d211b.png 860w"],"dataUri":"data:image/svg+xml,%3csvg fill='none' viewBox='0 0 860 476' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-ec163d2e2f85e78eac8f5adcef7fdfc7'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='10'/%3e%3c/filter%3e%3c/defs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-ec163d2e2f85e78eac8f5adcef7fdfc7)' width='860' height='476' xlink:href='data:image/png%3bbase64%2ciVBORw0KGgoAAAANSUhEUgAAAEAAAAAjCAYAAAAkCQwqAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAPkUlEQVRo3m2a2XNc1RHG579L8ZCkggvwIskarZY0kmY0Gs2MRjPaN8uyLdsYG0LAUEBYKoQlpAgxW1IEkgISINiWwZZ3eRc7eer0r8/pOyPBw6kr37n3nNNff/1197lOXbl6V65cuytXr20k49o64ysb69fr4/rNb%2bSGji%2b%2bvCwXLl6XW7e/k2dfeEP6h2ZlcHhO9vTXpKt3THoHJ6U3O2XXlraCNKeHJd1VlqHSXhkdPyS16QelWFmWrL5TGT8o83sfkUdPvCS/f/4v8sdX3pXXXn9PXv/r%2b/L39z6Rj/69KmfO6nqXbsnFSzfl0uVbtr8bN76W23e%2bk7sbP8j1Gxt6/6ZcvnJLzqyuyeenzuk%2bv412hOG2YSs2X756R5%2b/Iyn%2bMBCuAsLdLSDUgcDwK/rsmdULCsaGrF24KcsrJ9ToCRkqLuhYlM6eirR2jtjIKADl2kGpTByya%2b/AhHT2VqS7ryp9%2bltuZMGe6dH7XXovMzQjA/k5yRYWpDszLs0KXLqrJO3dozKiYE3MHpO5pUd1zScMsP2HTsixR56Tp555TQH7h7z1zkfy3vufyaefnZOzX1wyoNavf70FhGCj22sA%2bD%2bu/KzxG%2bZ5jF%2b7cN2Mv3P3e/XKWckV5uSBpgFp7RiRPZmaDJeXkoHnuzNqqF4xMluYNwC4BwgAUKweUHAOy9jkYenPTUu6syjte8rSoSOvTCnp78wFUMwHUMYsHW3dZQVoWHa05GSnjt7BaQMOJi4dOGGGAcK6ssTtMdu2gHBZR6pu/N3kocR4nQAAzirlvzx3RTa%2b%2btGQzhf3qufH1WMzZlBGDciNzOv9RdswhgBMS/uwhQTGjE6sGBsCQBMyXJpVQ0oJGwbzszYPBjJXYXSfjIztl6IO1tjdXpDdHQW7wjZYBTMYhF6bsoXnWjtLtkdCAqex/6uJfVsYcPVOIwANKOm4fuMbRfK2nDqzpg/fllt3vrd4B2k2x8bYPBtqacvbYAP58l7zICOrLOkZGFfPzKhGzNrGMbJvsCblclU3XbA5YIGNqSM2N2yw0VVURozaewx0hrl4J5Obsr9hF85oUUYA0AO7%2bmV67iFz4JnVixYG7ly39YqF/Z16CGyOfRU79fz5tXU5feaCCd1FFaCFfb%2bVpnQ%2bieMB9RiU7ugZNY8z2CTAlGoHQtyrp2GBeU4H75X1t5GxZX1u2ZjBMwwMYk6Gi6nPW1AvM1/JwuaQGbxrd9ZAb0oPmfdZGzACQNPy4cerJtSbWbARjQ/xnzDgahw8CHLED7SH8h7v9%2b3o07gbsgXZIFQ2murmhtXrDgQbBxgMIbaJfZ7v1N%2bHSouaBVbUkP1q0IqxJY1oKjgIJyDBGozEWMCESV19YU7mMR0w4RwzdsAU3oVhPMueENPfPfGy3Lz1jTmxEYCfimC8AVVQztOn1xS5G/LVV/%2bTt9/9yFBFdFi8XWOWhUGbxQABo7jfrMDgbbwCECOVfea1sqa5seqy5LLj0trUKzvubZHh4pwaGEKkf0hDIjsZvK5zuwC6bgAwwFiY6fw4ADAAh/V5nv3ALg8ZnJFRFvz31AVlwHpkwdcx021mQcporwidO38tQQvaP/%2bHkzG/zwdDVfigP4bu1o2AOguBfJ%2bp9HgSEhjmHuzqn5a21rx0d%2bSlY2eXLE0qMOV5ZYKyQcMBRowqSFwxljVgEYCg/ISGA8RvbdEJw6OBgc5CntvZMig7NTSaWnOybXuvPPr4i1orfK92rf1EDD39p0ABsVg9e8keJt4PP/SM5XfUGXShM%2biyAB4ABK7QkcWLUa3xOBsxRdaagE139IzJL3%2bzR%2b75VacypSLHH3xM8nlqgjHzsAGgV0SQtQCWtaA2nsdYNMUBZT2yBCwzsPocrHG75yG1S0EgVL48v656di3RAryfpEEYgMojeBtK%2bY//84WmsgW5b2cmKWhYIOTekhpWTGIVr/imgvAdNM%2bzAZ7jef4m9vl9d3dNtj3QL9mWPVLOK2MGgzag6KRTiinYBItYEwCZB8MAyUQwiiteZx8t7fkwNDyadeAodIWwZXRrffLyq%2b9axXjqdJ0FDkKoBDXV3d34Ud44%2bYF6qKxi16vezcmO5gGjEhu0tFbea2JHOLioocZ4nPSUVy2gIHLlhgWAwP2qprfa9BGrEwrdw1LIT1modMTCp8PVXg3jWYwENP4dlH3awAUkL7Ys51t2GbaQdHHmHdcnwnd28WFLfefOXTVHOwtcCFNUeU8%2b/arcvysj9%2b/s0xga1AprwAQHz7jIcIV%2bpBlbOKY3o6wOwiVsfDnZBO9z38OEWMdA7uNdQMTTXBExPO01QUVHVXsGjOZZhLYtDgADGMCFNTjBwkAdwn1ChHXZAyC8/bePVde%2bNRZ4SewgpI4ef1YnHQ3UI/cqC0CV3OwaUIiCg/Ge19MNNOc%2bqQsDuGIADQ%2be2xqr/brZEQNoMckCoViaVnDCewyAGp85GuK9u2QgBdaMJnk/pNS6PuB1wGJ/XHmeinROWeBNXCMLrA4gTrwAAT3Q9AKDiWxxNQAjTdQSigc9QGgwujIZh/5djRVdKJrG4qiaEXh/YvYhM65xEF6APmDV3ZyFC0ZZLPcF59ja3UHottYLzjIcyf53x5SMNjRpFqKzpC44dfp8woDLl29LitKUAQB4Yldr1sKA%2bAcE1BRDvcrz2AwxNmfNDr%2bR971SYzAXHuiK3scIgOAZDHZPM8Znj5pBzhSM9UIHIGAUxRPrhqwUQLI0WAllebEashB2NMeagfKYcN2uTdu%2bA49pI/eDFXmkfCpeQEj1m/EzhhyGu/Ge6hqNd5RRY4wMKS92cTGOicMQNvuMvswNSEb/oeD9ybljNia0Znc22DPKRp7zAQiEH7/DKh%2b1RBtKEeQAMKDDIv7mvrFUQwBASKtUtTdufm0sSJoho6kZnzXl92ICJnhpiuEJ0iZmK3aY4RswIeut2JW5AMcNC9cQ01av63uwB49WNP9jTKjva/Zu4wAA1q7p%2b4k4Ro0BmPYYEm1WN8SSuqMQGblsIogTArvG5PEnX7aMR83jLEgheKS6PjvBqffsTMq/vdKCYqVYuWFA6N3rxluM6t8sGigePGUxPhvinDXwjnk6E4oXNIQNV6zs3ZcUXrCL32meALFRHBk4wsreqEntsU5xe5ir8YyCeccUvNUvrlgm%2bPzU%2bVAHZGIIkE5AK%2bTa0IC4CPI3hQ9IMhkbIwN4zu%2bICg1gTtHEeB3QHY9bM8PBho9YDAHw9MLDSWgwxqPXEcHQ6NR1JhRGB5JiKd0%2bJOl0VlkQ0nJnT9kY4m15PqbxTG5GXnz57YQFX2ptkAp9dRBBRA0A8Cg6EBqQfJLzGWyGTRRiKjMhxFsa%2b2ywkfoW5/EKeKGbqwPQEweG%2brONA%2bbgTRdHv8JS3qdLzQ3WZGhgTLI92pvs7pdtu9QZ/Vq/jMxIsbJoV/YZaoI5mZo/JmsXb5oAwoKUHywAAHkfihL/rqRe7BBbbD40LyuW8sY0b3u%2bxosYA5hDsfih8AkxvmIAubjxtxvP%2bs6SrQDwLszrjuKYlMnoDQ1RYVYqxRk5ePAROao9xvz0Qbnn3qx0jr0iHaWXpGn0TRlafE071qWkXabBe%2bPkPy0jrJ69HEKgfrJSC8bT8DQAwOiINb21uLWDSdFjQKgHzVM9MY3FtOcehy2AAS0B2WOc3wk76D81f/wnIAAAfYhrhokj9UTvqPTkF1STtGxWo2oK8NTUAVlcfFCau%2bZk5%2bDT8uuup%2bUXe/4k6YmTktZCDzYj2i3tBZnS7JN0g1Z8xDRICWxpMALQWO76OVzd%2bJWk6PHa3A4torfQCfc0z0wtHDcj3VC8DnAhtS7bfDznIcNz6ABzOAMMBOoJvXZqez2s1K5MqiBq6OUHq5Lrr8iwNlqFUQ1NvWJsUyvda3Cq1TY6drRk5a13PrTqMLW9KWNCwqTtsbTF85z%2bNEcNgCHhSGp/csgR6vZY9Ogm/SSoDkI4H8DDdS2o1wDEIp63sMtUDSjo7o0PQgw4sMVPmRP66%2bhQwcuqweXKXinRfwwp03Ljmq6X7F2EjzPH5nTQsubYxvP3fdrzzO09bueeKTweFD40EAz%2bhhUh/oIRbMbToFd7eIxnSX%2bh0qtuYgGgAtjk/LFNBVBSCOk9QrAnZoQeOz4LWsFcrg%2bs4wcm6IuV5cqwgeyElAvTUlTjSyNzUlLjQzMWehcAc6MbGcB5Is794F%2bfewjEXkBVMqTCxSSNkO4QQNIdhpnIaabwytBKVoqhBoV2492AxriuM%2bC4hYAfijZmh94IBHva2jPUYlFFTh9WI/eoHmT6q0r5cKYQzgWXIntmYklfH65x27b3yOGjT2kpPDS9KQ3iUZ8Iw0DKDy299W1LjqsXLPUBGl4JVK3FYmrMvBBi%2behPFJ77gIihbnzIDOM2AJv9eN9QnQ4FUKgIg/DibWvMOAnqKiYdajicDZrUGUtiQtn7HLTuAQ19yuOYBTYDgPF4EcQ29f1xAdSU30MYHLbNsUk2BVUxLICzbPfI5%2bb5%2bTiiFsA0A6DBcB9snr00Nk4GwFQdAOoRmId2mX7Fkphq0A9Q/XuEnxswLwBhE783AOAfLxbswa2pMAEgnvQgNEELVpJU6FUgHkYvXNzCl6PAllAbHEniP4SMZ4zNAMCsrY1QOCw5lHxzJOy8DG7rLiZM9ZNktCR8pAk9AQNbg7hObAVgzn6wI6akEtwMAFeMajzN9QYlfN0JhxrM54cgHhb1s/0JW8tELdb%2bnCw3PksI4YwAwOFNzZAfvgAA76TjiVHYY2AAYYsTAQUgWQ8He8jbd0u1PdWXpXqbMhEBJTv91ThJGLClHuB38v7P1QTOAtKkFy1udH2MGzBsyDNBo9J7sYSewDL7rSHEPMwcANji8Z%2bOzVBr8h0hb%2bnczw/sE10Em2MA9pLqz01aZbUnw7e6EW2J%2b1Us6mcCjWHAldTYWBPAAgfAUyMGhKqwDkIYoZjpirT0ao%2bCx1W%2b8bQoADERPrzaB5P6WYSfH7IfP6Jzsa5/RAmq39NfS9jttYY3Y6k33/pAnnvhz7Jy%2bIQM5CZkd1vOiodQPREGCGHIpSH2l8KhCJupHrCuLPw/gJXknB9kt5bFXX2be33eazwVaoxx%2b3v6iG24sdu0Q5dMNfngCkAY5KHpxsMCL3x2KZsJC0AMxs8kBydcU3wO%2b%2bTT1dAenl%2bXp57WRqJrWNo6hhIkW9r4GpSTrp5iOBKLhyP%2bidoPJ0NqCn261wfdmVoEopocd7E4z%2bPtRvG0jKGeJ4QCADPhxEfftbZc303HE6h0PPwMn9MX4ofYvN3zb5iELoxujd8x7HQqnjPwb1Ll/wHPg3E0mZT6IgAAAABJRU5ErkJggg==' /%3e%3c/svg%3e"},"content":"<h2 id=\"table-of-contents\"><a href=\"#table-of-contents\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a><strong>Table of Contents</strong></h2>\n<ul>\n<li><a href=\"#overview\">Overview</a></li>\n<li><a href=\"#bulletactor\">BulletActor</a></li>\n<li><a href=\"#playercharacter\">PlayerCharacter</a></li>\n<li><a href=\"#zombiecharacter-setup\">ZombieCharacter Setup</a></li>\n<li><a href=\"#adding-a-stimuli-source-to-the-playercharacter\">Adding a Stimuli Source to the PlayerCharacter</a></li>\n<li><a href=\"#zombieaicontroller-perception\">ZombieAIController Perception</a></li>\n<li><a href=\"#implementing-the-idle-and-roam-states\">Implementing the IDLE and ROAM states</a></li>\n<li><a href=\"#implementing-the-chase-and-attack-states\">Implementing the CHASE and ATTACK states</a></li>\n<li><a href=\"#implementing-the-dead-state\">Implementing the DEAD state</a></li>\n<li><a href=\"#conclusion\">Conclusion</a></li>\n</ul>\n<h2 id=\"overview\"><a href=\"#overview\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a><strong>Overview</strong></h2>\n<p>In this tutorial we'll be taking a look at how to make a Zombie AI that roams, chases, and attacks the player. Let's take a look at the classes we'll need to make this happen.</p>\n<ul>\n<li><strong>BulletActor</strong> - The BulletActor is the projectile that gets shot from the PlayerCharacter's gun and is used when we go over killing the zombie.</li>\n<li><strong>PlayerCharacter</strong> - The PlayerCharacter is going to be the Character from the Unreal FPS demo that we'll expand on.</li>\n<li><strong>ZombieCharacter</strong> - This is going to be the Character of each individual zombie.</li>\n<li><strong>ZombieAIController</strong> - This is going to be the AIController used to decide the movements and actions of the zombie.</li>\n</ul>\n<p>To start off let's get into the PlayerCharacter.</p>\n<h3 id=\"bulletactor\"><a href=\"#bulletactor\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a><strong>BulletActor</strong></h3>\n<p>Before we get into the PlayerCharacter, since this will be a first person shooter character, we'll need to create the class for the bullet that gets shot out of the PlayerCharacter's gun. We need to create this first as the PlayerCharacter will have a reference to the BulletActor.</p>\n<p>Let's see what the BulletActor will need:</p>\n<ul>\n<li>Create a <code>UStaticMeshComponent</code> so we can assign the BulletActor a mesh.</li>\n<li>Since the shape of the bullet will be a sphere we need a <code>USphereComponent</code> to act as a sphere collider.</li>\n<li>To make bullet physics easier we'll use a <code>UProjectileMovementComponent</code> to manage the bullet's position after being shot.</li>\n<li>We have to create the method that gets called when the the bullet has made contact with another component.</li>\n</ul>\n<p>So now that we know what we need to accomplish let's go ahead and create a new C++ class with a base parent of Actor and name it BulletActor. I also placed mine in a new folder named Player since it's only used by the PlayerCharacter so it helps me keep the workspace cleaner.</p>\n<p>Now let's define all of the things we discussed above in the BulletActor's header:</p>\n<p><strong>BulletActor.h</strong></p>\n<pre class=\"language-cpp\"><code class=\"language-cpp\"><span class=\"token macro property\">#<span class=\"token directive keyword\">pragma</span> once</span>\n\n<span class=\"token macro property\">#<span class=\"token directive keyword\">include</span> <span class=\"token string\">\"CoreMinimal.h\"</span></span>\n<span class=\"token macro property\">#<span class=\"token directive keyword\">include</span> <span class=\"token string\">\"GameFramework/Actor.h\"</span></span>\n<span class=\"token macro property\">#<span class=\"token directive keyword\">include</span> <span class=\"token string\">\"BulletActor.generated.h\"</span></span>\n\n<span class=\"token comment\">/**\n * The BulletActor is the projectile that's shot out of the PlayerCharacter's gun.\n */</span>\n<span class=\"token function\">UCLASS</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">ZOMBIEHORDEAI_API</span> ABulletActor <span class=\"token operator\">:</span> <span class=\"token keyword\">public</span> AActor\n<span class=\"token punctuation\">{</span>\n\t<span class=\"token function\">GENERATED_BODY</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\t\n<span class=\"token keyword\">public</span><span class=\"token operator\">:</span>\t\n\t<span class=\"token comment\">// Sets default values for this actor's properties.</span>\n\t<span class=\"token function\">ABulletActor</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">// The static mesh of the BulletActor.</span>\n\t<span class=\"token function\">UPROPERTY</span><span class=\"token punctuation\">(</span>VisibleAnywhere<span class=\"token punctuation\">,</span> BlueprintReadOnly<span class=\"token punctuation\">,</span> Category <span class=\"token operator\">=</span> Bullet<span class=\"token punctuation\">)</span>\n\t<span class=\"token keyword\">class</span> <span class=\"token class-name\">UStaticMeshComponent</span><span class=\"token operator\">*</span> BulletStaticMesh<span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">// The sphere collider of the BulletActor.</span>\n\t<span class=\"token function\">UPROPERTY</span><span class=\"token punctuation\">(</span>VisibleAnywhere<span class=\"token punctuation\">,</span> BlueprintReadOnly<span class=\"token punctuation\">,</span> Category <span class=\"token operator\">=</span> Bullet<span class=\"token punctuation\">)</span>\n\t<span class=\"token keyword\">class</span> <span class=\"token class-name\">USphereComponent</span><span class=\"token operator\">*</span> BulletSphereCollider<span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">// The projectile movement component of the BulletActor.</span>\n\t<span class=\"token function\">UPROPERTY</span><span class=\"token punctuation\">(</span>VisibleAnywhere<span class=\"token punctuation\">,</span> BlueprintReadOnly<span class=\"token punctuation\">,</span> Category <span class=\"token operator\">=</span> Bullet<span class=\"token punctuation\">)</span>\n\t<span class=\"token keyword\">class</span> <span class=\"token class-name\">UProjectileMovementComponent</span><span class=\"token operator\">*</span> BulletMovement<span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">public</span><span class=\"token operator\">:</span>\t\n\t<span class=\"token comment\">/**\n\t * Called when the BulletActor hits another component.\n\t */</span>\n\t<span class=\"token function\">UFUNCTION</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\t<span class=\"token keyword\">void</span> <span class=\"token function\">OnBulletHitComponent</span><span class=\"token punctuation\">(</span>UPrimitiveComponent<span class=\"token operator\">*</span> HitComp<span class=\"token punctuation\">,</span> AActor<span class=\"token operator\">*</span> OtherActor<span class=\"token punctuation\">,</span> UPrimitiveComponent<span class=\"token operator\">*</span> OtherComp<span class=\"token punctuation\">,</span> FVector NormalImpulse<span class=\"token punctuation\">,</span> <span class=\"token keyword\">const</span> FHitResult<span class=\"token operator\">&amp;</span> Hit<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre>\n<p>And now in the cpp we create the sphere collider and movement components and set their default values. We also set the <code>OnBulletHitComponent</code> method to respond whenever the BulletActor hits another component.</p>\n<p><strong>BulletActor.cpp</strong></p>\n<pre class=\"language-cpp\"><code class=\"language-cpp\"><span class=\"token macro property\">#<span class=\"token directive keyword\">include</span> <span class=\"token string\">\"BulletActor.h\"</span></span>\n<span class=\"token macro property\">#<span class=\"token directive keyword\">include</span> <span class=\"token string\">\"Components/SphereComponent.h\"</span></span>\n<span class=\"token macro property\">#<span class=\"token directive keyword\">include</span> <span class=\"token string\">\"Components/StaticMeshComponent.h\"</span></span>\n<span class=\"token macro property\">#<span class=\"token directive keyword\">include</span> <span class=\"token string\">\"GameFramework/ProjectileMovementComponent.h\"</span></span>\n\n<span class=\"token comment\">/**\n * Sets the default values of the BulletActor.\n */</span>\nABulletActor<span class=\"token operator\">::</span><span class=\"token function\">ABulletActor</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n\t<span class=\"token comment\">// Load the BulletActor's mesh.</span>\n\t<span class=\"token keyword\">static</span> ConstructorHelpers<span class=\"token operator\">::</span>FObjectFinder<span class=\"token operator\">&lt;</span>UStaticMesh<span class=\"token operator\">></span> <span class=\"token function\">BulletStaticMeshAsset</span><span class=\"token punctuation\">(</span><span class=\"token function\">TEXT</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"StaticMesh'/Game/FirstPerson/Meshes/FirstPersonProjectileMesh.FirstPersonProjectileMesh'\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">// Create the sphere collider, set its radius, set it to have a collision profile</span>\n\t<span class=\"token comment\">// of Projectile and lastly add the `OnBulletHitComponent` method to respond to the</span>\n\t<span class=\"token comment\">// sphere collider making contact with another component.</span>\n\tBulletSphereCollider <span class=\"token operator\">=</span> CreateDefaultSubobject<span class=\"token operator\">&lt;</span>USphereComponent<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token function\">TEXT</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"BulletSphereCollider\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\tBulletSphereCollider<span class=\"token operator\">-></span><span class=\"token function\">InitSphereRadius</span><span class=\"token punctuation\">(</span><span class=\"token number\">20.f</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\tBulletSphereCollider<span class=\"token operator\">-></span><span class=\"token function\">SetCollisionProfileName</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Projectile\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\tBulletSphereCollider<span class=\"token operator\">-></span>OnComponentHit<span class=\"token punctuation\">.</span><span class=\"token function\">AddDynamic</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span> <span class=\"token operator\">&amp;</span>ABulletActor<span class=\"token operator\">::</span>OnBulletHitComponent<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\tRootComponent <span class=\"token operator\">=</span> BulletSphereCollider<span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">// Create the bullet mesh, set it to the `BulletStaticMesh` loaded above and attach</span>\n\t<span class=\"token comment\">// it to the `BulletSphereCollider`.</span>\n\tBulletStaticMesh <span class=\"token operator\">=</span> CreateDefaultSubobject<span class=\"token operator\">&lt;</span>UStaticMeshComponent<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token function\">TEXT</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"BulletStaticMesh\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\tBulletStaticMesh<span class=\"token operator\">-></span><span class=\"token function\">SetStaticMesh</span><span class=\"token punctuation\">(</span>BulletStaticMeshAsset<span class=\"token punctuation\">.</span>Object<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\tBulletStaticMesh<span class=\"token operator\">-></span><span class=\"token function\">SetRelativeScale3D</span><span class=\"token punctuation\">(</span><span class=\"token function\">FVector</span><span class=\"token punctuation\">(</span><span class=\"token number\">0.1f</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0.1f</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0.1f</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\tBulletStaticMesh<span class=\"token operator\">-></span><span class=\"token function\">UnWeldFromParent</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\tBulletSphereCollider<span class=\"token operator\">-></span><span class=\"token function\">SetCollisionProfileName</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"NoCollision\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\tBulletStaticMesh<span class=\"token operator\">-></span><span class=\"token function\">SetupAttachment</span><span class=\"token punctuation\">(</span>RootComponent<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">// Create the ProjectileMovementComponent and set its speeds and default properties.</span>\n\tBulletMovement <span class=\"token operator\">=</span> CreateDefaultSubobject<span class=\"token operator\">&lt;</span>UProjectileMovementComponent<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token function\">TEXT</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"BulletMovement\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\tBulletMovement<span class=\"token operator\">-></span>UpdatedComponent <span class=\"token operator\">=</span> BulletSphereCollider<span class=\"token punctuation\">;</span>\n\tBulletMovement<span class=\"token operator\">-></span>InitialSpeed <span class=\"token operator\">=</span> <span class=\"token number\">3000.f</span><span class=\"token punctuation\">;</span>\n\tBulletMovement<span class=\"token operator\">-></span>MaxSpeed <span class=\"token operator\">=</span> <span class=\"token number\">3000.f</span><span class=\"token punctuation\">;</span>\n\tBulletMovement<span class=\"token operator\">-></span>bRotationFollowsVelocity <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n\tBulletMovement<span class=\"token operator\">-></span>bShouldBounce <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">// Set the BulletActor to die after 3 seconds.</span>\n\tInitialLifeSpan <span class=\"token operator\">=</span> <span class=\"token number\">3.f</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">/**\n * Called when the BulletActor hits another component.\n */</span>\n<span class=\"token keyword\">void</span> ABulletActor<span class=\"token operator\">::</span><span class=\"token function\">OnBulletHitComponent</span><span class=\"token punctuation\">(</span>UPrimitiveComponent<span class=\"token operator\">*</span> HitComp<span class=\"token punctuation\">,</span> AActor<span class=\"token operator\">*</span> OtherActor<span class=\"token punctuation\">,</span> UPrimitiveComponent<span class=\"token operator\">*</span> OtherComp<span class=\"token punctuation\">,</span> FVector NormalImpulse<span class=\"token punctuation\">,</span> <span class=\"token keyword\">const</span> FHitResult<span class=\"token operator\">&amp;</span> Hit<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n\t<span class=\"token comment\">// We want to return early if anything is null as it could cause a crash otherwise.</span>\n\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>OtherActor <span class=\"token operator\">==</span> <span class=\"token keyword\">nullptr</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">||</span> <span class=\"token punctuation\">(</span>OtherActor <span class=\"token operator\">==</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">||</span> <span class=\"token punctuation\">(</span>OtherComp <span class=\"token operator\">==</span> <span class=\"token keyword\">nullptr</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>OtherComp<span class=\"token operator\">-></span><span class=\"token function\">IsSimulatingPhysics</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n\t<span class=\"token punctuation\">{</span>\n\t\t<span class=\"token comment\">// If the component that the BulletActor hit is using physics then we want</span>\n\t\t<span class=\"token comment\">// to add an impulse force where the BulletActor hit to move them back.</span>\n\t\tOtherComp<span class=\"token operator\">-></span><span class=\"token function\">AddImpulseAtLocation</span><span class=\"token punctuation\">(</span><span class=\"token function\">GetVelocity</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">*</span> <span class=\"token number\">100.f</span><span class=\"token punctuation\">,</span> <span class=\"token function\">GetActorLocation</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n\n\t<span class=\"token function\">Destroy</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre>\n<p>Now that we've got the BulletActor squared away we can move on to the PlayerCharacter.</p>\n<h3 id=\"playercharacter\"><a href=\"#playercharacter\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a><strong>PlayerCharacter</strong></h3>\n<p>The PlayerCharacter is just a standard first person character and uses the model and animations from Unreal's first person demo but we'll go over it quickly so that we're all on the same page when we expand on it later. If you already have a PlayerCharacter you want to use feel free to skip this part, otherwise you can check out the <a href=\"\">repo</a> for an already made one to use or just follow the PlayerCharacter creation guide below.</p>\n<p>So let's see what our PlayerCharacter will need:</p>\n<ul>\n<li>A <code>USkeletalMeshComponent</code> for the PlayerCharacter's body/arms mesh.</li>\n<li>A <code>USkeletalMeshComponent</code> for the PlayerCharacter's gun mesh.</li>\n<li>A <code>USceneComponent</code> that keeps track of where the gun's bullets should be shot from.</li>\n<li>A <code>UCameraComponent</code> for the first person camera.</li>\n<li>A <code>UAnimMontage</code> for the gun fire animation that's populated in the constructor (I got this and the models from the Unreal first person demo project so you can either get the assets from there or from the <a href=\"\">repo</a>).</li>\n<li>We need methods to handle when the \"Fire\" input action is pressed and for when the movement input axis keys are used.</li>\n</ul>\n<p>So let's go ahead and create a new C++ class with a base parent of Character, name it PlayerCharacter, and put it in the Player folder if you created that earlier.</p>\n<p>Now let's take a look at how we can implement the above in the header:</p>\n<p><strong>PlayerCharacter.h</strong></p>\n<pre class=\"language-cpp\"><code class=\"language-cpp\"><span class=\"token macro property\">#<span class=\"token directive keyword\">pragma</span> once</span>\n\n<span class=\"token macro property\">#<span class=\"token directive keyword\">include</span> <span class=\"token string\">\"CoreMinimal.h\"</span></span>\n<span class=\"token macro property\">#<span class=\"token directive keyword\">include</span> <span class=\"token string\">\"GameFramework/Character.h\"</span></span>\n<span class=\"token macro property\">#<span class=\"token directive keyword\">include</span> <span class=\"token string\">\"PlayerCharacter.generated.h\"</span></span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">USkeletalMeshComponent</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">/**\n * The PlayerCharacter is the main player of the game.\n */</span>\n<span class=\"token function\">UCLASS</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">ZOMBIEHORDEAI_API</span> APlayerCharacter <span class=\"token operator\">:</span> <span class=\"token keyword\">public</span> ACharacter\n<span class=\"token punctuation\">{</span>\n\t<span class=\"token function\">GENERATED_BODY</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">public</span><span class=\"token operator\">:</span>\n\t<span class=\"token comment\">// Sets default values for this character's properties.</span>\n\t<span class=\"token function\">APlayerCharacter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">// The skeletal mesh of the PlayerCharacter's body.</span>\n\t<span class=\"token function\">UPROPERTY</span><span class=\"token punctuation\">(</span>VisibleDefaultsOnly<span class=\"token punctuation\">,</span> Category <span class=\"token operator\">=</span> Player<span class=\"token punctuation\">)</span>\n\tUSkeletalMeshComponent<span class=\"token operator\">*</span> PlayerSkeletalMesh<span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">// The skeletal mesh of the PlayerCharacter's gun.</span>\n\t<span class=\"token function\">UPROPERTY</span><span class=\"token punctuation\">(</span>VisibleDefaultsOnly<span class=\"token punctuation\">,</span> Category <span class=\"token operator\">=</span> Player<span class=\"token punctuation\">)</span>\n\tUSkeletalMeshComponent<span class=\"token operator\">*</span> GunSkeletalMesh<span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">// The location on the gun where the BulletActors should spawn from.</span>\n\t<span class=\"token function\">UPROPERTY</span><span class=\"token punctuation\">(</span>VisibleDefaultsOnly<span class=\"token punctuation\">,</span> Category <span class=\"token operator\">=</span> Player<span class=\"token punctuation\">)</span>\n\t<span class=\"token keyword\">class</span> <span class=\"token class-name\">USceneComponent</span><span class=\"token operator\">*</span> BulletSpawnLocation<span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">// The first-person camera of the PlayerCharacter.</span>\n\t<span class=\"token function\">UPROPERTY</span><span class=\"token punctuation\">(</span>VisibleAnywhere<span class=\"token punctuation\">,</span> BlueprintReadOnly<span class=\"token punctuation\">,</span> Category <span class=\"token operator\">=</span> Player<span class=\"token punctuation\">)</span>\n\t<span class=\"token keyword\">class</span> <span class=\"token class-name\">UCameraComponent</span><span class=\"token operator\">*</span> PlayerCamera<span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">// The gun's offset from the PlayerCharacter's location.</span>\n\t<span class=\"token function\">UPROPERTY</span><span class=\"token punctuation\">(</span>EditAnywhere<span class=\"token punctuation\">,</span> BlueprintReadWrite<span class=\"token punctuation\">,</span> Category <span class=\"token operator\">=</span> Player<span class=\"token punctuation\">)</span>\n\tFVector GunOffset<span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">// The AnimMontage to play when the gun is fired. This is set automatically</span>\n\t<span class=\"token comment\">// in the constructor.</span>\n\t<span class=\"token function\">UPROPERTY</span><span class=\"token punctuation\">(</span>EditAnywhere<span class=\"token punctuation\">,</span> BlueprintReadWrite<span class=\"token punctuation\">,</span> Category <span class=\"token operator\">=</span> Player<span class=\"token punctuation\">)</span>\n\t<span class=\"token keyword\">class</span> <span class=\"token class-name\">UAnimMontage</span><span class=\"token operator\">*</span> GunFireAnimation<span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">protected</span><span class=\"token operator\">:</span>\n\t<span class=\"token comment\">/**\n\t * Called to bind functionality to input.\n\t */</span>\n\t<span class=\"token keyword\">virtual</span> <span class=\"token keyword\">void</span> <span class=\"token function\">SetupPlayerInputComponent</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">class</span> <span class=\"token class-name\">UInputComponent</span><span class=\"token operator\">*</span> PlayerInputComponent<span class=\"token punctuation\">)</span> override<span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">/**\n\t * Called when the MoveForwardBackward input axis is used.\n\t */</span>\n\t<span class=\"token keyword\">void</span> <span class=\"token function\">MoveForwardBackward</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">float</span> Value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">/**\n\t * Called when the MoveLeftRight input axis is used.\n\t */</span>\n\t<span class=\"token keyword\">void</span> <span class=\"token function\">MoveLeftRight</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">float</span> Value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">/**\n\t * Called when the \"Fire\" input action button is pressed.\n\t */</span>\n\t<span class=\"token keyword\">void</span> <span class=\"token function\">Fire</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre>\n<p>Now in the cpp we're going to:</p>\n<ul>\n<li>Load our PlayerCharacter body and gun meshes and also the gun animation blueprint and montage. Again these can be found in the Unreal fps demo or the <a href=\"\">repo</a>.</li>\n<li>Create the camera, position it, and attach it to the default capsule collider.</li>\n<li>Create the body mesh, set it to be the skeletal mesh we loaded above, set some options such as having it not cast shadows, and attach it to the camera created above.</li>\n<li>Create the gun mesh, set it to the skeletal mesh we loaded above, and set it to have some of the same settings as the body mesh. We also attach the gun mesh to the body mesh at the GripPoint.</li>\n<li>Set the <code>GunFireAnimation</code> variable to the animation asset loaded during the first step.</li>\n<li>In the <code>SetupPlayerInputComponent</code> method we need to register our methods to their corresponding inputs.</li>\n<li>We need to create the <code>MoveForwardBackward</code>, <code>MoveLeftRight</code>, and <code>Fire</code> methods to handle what happens when the inputs get pressed.</li>\n<li>The movement methods are pretty self explanatory as they just use <code>AddMovementInput</code> and add it to that direction. The <code>Fire</code> method spawns a BulletActor at the end of the gun's muzzle and plays the shooting animation for the gun.</li>\n</ul>\n<p>There's quite a lot going on in the constructor but really it's not all necessary and its just for a cleaner looking demo:</p>\n<p><strong>PlayerCharacter.cpp</strong></p>\n<pre class=\"language-cpp\"><code class=\"language-cpp\"><span class=\"token macro property\">#<span class=\"token directive keyword\">include</span> <span class=\"token string\">\"PlayerCharacter.h\"</span></span>\n<span class=\"token macro property\">#<span class=\"token directive keyword\">include</span> <span class=\"token string\">\"BulletActor.h\"</span></span>\n<span class=\"token macro property\">#<span class=\"token directive keyword\">include</span> <span class=\"token string\">\"Kismet/GameplayStatics.h\"</span></span>\n<span class=\"token macro property\">#<span class=\"token directive keyword\">include</span> <span class=\"token string\">\"Animation/AnimInstance.h\"</span></span>\n<span class=\"token macro property\">#<span class=\"token directive keyword\">include</span> <span class=\"token string\">\"Camera/CameraComponent.h\"</span></span>\n<span class=\"token macro property\">#<span class=\"token directive keyword\">include</span> <span class=\"token string\">\"Components/CapsuleComponent.h\"</span></span>\n<span class=\"token macro property\">#<span class=\"token directive keyword\">include</span> <span class=\"token string\">\"Components/SkeletalMeshComponent.h\"</span></span>\n<span class=\"token macro property\">#<span class=\"token directive keyword\">include</span> <span class=\"token string\">\"Components/InputComponent.h\"</span></span>\n<span class=\"token macro property\">#<span class=\"token directive keyword\">include</span> <span class=\"token string\">\"GameFramework/InputSettings.h\"</span></span>\n<span class=\"token macro property\">#<span class=\"token directive keyword\">include</span> <span class=\"token string\">\"GameFramework/CharacterMovementComponent.h\"</span></span>\n\n<span class=\"token comment\">/**\n * Sets the default value from the PlayerCharacter\n */</span>\nAPlayerCharacter<span class=\"token operator\">::</span><span class=\"token function\">APlayerCharacter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n\t<span class=\"token comment\">// Load the player and gun skeletal meshes.</span>\n\t<span class=\"token keyword\">static</span> ConstructorHelpers<span class=\"token operator\">::</span>FObjectFinder<span class=\"token operator\">&lt;</span>USkeletalMesh<span class=\"token operator\">></span> <span class=\"token function\">PlayerSkeletalMeshAsset</span><span class=\"token punctuation\">(</span><span class=\"token function\">TEXT</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"SkeletalMesh'/Game/FirstPerson/Character/Mesh/SK_Mannequin_Arms.SK_Mannequin_Arms'\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">static</span> ConstructorHelpers<span class=\"token operator\">::</span>FObjectFinder<span class=\"token operator\">&lt;</span>USkeletalMesh<span class=\"token operator\">></span> <span class=\"token function\">GunSkeletalMeshAsset</span><span class=\"token punctuation\">(</span><span class=\"token function\">TEXT</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"SkeletalMesh'/Game/FirstPerson/FPWeapon/Mesh/SK_FPGun.SK_FPGun'\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">// Load the gun fire animation.</span>\n\t<span class=\"token keyword\">static</span> ConstructorHelpers<span class=\"token operator\">::</span>FObjectFinder<span class=\"token operator\">&lt;</span>UAnimBlueprint<span class=\"token operator\">></span> <span class=\"token function\">GunAnimBlueprintAsset</span><span class=\"token punctuation\">(</span><span class=\"token function\">TEXT</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"AnimBlueprint'/Game/FirstPerson/Animations/FirstPerson_AnimBP.FirstPerson_AnimBP'\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">static</span> ConstructorHelpers<span class=\"token operator\">::</span>FObjectFinder<span class=\"token operator\">&lt;</span>UAnimMontage<span class=\"token operator\">></span> <span class=\"token function\">GunFireAnimationAsset</span><span class=\"token punctuation\">(</span><span class=\"token function\">TEXT</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"AnimMontage'/Game/FirstPerson/Animations/FirstPersonFire_Montage.FirstPersonFire_Montage'\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">// Create the first person camera, set its relative location and attach it to the</span>\n\t<span class=\"token comment\">// capsule component.</span>\n\tPlayerCamera <span class=\"token operator\">=</span> CreateDefaultSubobject<span class=\"token operator\">&lt;</span>UCameraComponent<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token function\">TEXT</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"PlayerCamera\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\tPlayerCamera<span class=\"token operator\">-></span><span class=\"token function\">SetRelativeLocation</span><span class=\"token punctuation\">(</span><span class=\"token function\">FVector</span><span class=\"token punctuation\">(</span><span class=\"token operator\">-</span><span class=\"token number\">40.f</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2.f</span><span class=\"token punctuation\">,</span> <span class=\"token number\">70.f</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\tPlayerCamera<span class=\"token operator\">-></span>bUsePawnControlRotation <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n\tPlayerCamera<span class=\"token operator\">-></span><span class=\"token function\">SetupAttachment</span><span class=\"token punctuation\">(</span><span class=\"token function\">GetCapsuleComponent</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">// Create the player mesh component and set up its position and defaults and</span>\n\t<span class=\"token comment\">// lastly attach it to the PlayerCamera.</span>\n\tPlayerSkeletalMesh <span class=\"token operator\">=</span> CreateDefaultSubobject<span class=\"token operator\">&lt;</span>USkeletalMeshComponent<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token function\">TEXT</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"PlayerSkeletalMesh\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\tPlayerSkeletalMesh<span class=\"token operator\">-></span><span class=\"token function\">SetSkeletalMesh</span><span class=\"token punctuation\">(</span>PlayerSkeletalMeshAsset<span class=\"token punctuation\">.</span>Object<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\tPlayerSkeletalMesh<span class=\"token operator\">-></span><span class=\"token function\">SetRelativeLocationAndRotation</span><span class=\"token punctuation\">(</span><span class=\"token function\">FVector</span><span class=\"token punctuation\">(</span><span class=\"token operator\">-</span><span class=\"token number\">0.5f</span><span class=\"token punctuation\">,</span> <span class=\"token operator\">-</span><span class=\"token number\">4.5f</span><span class=\"token punctuation\">,</span> <span class=\"token operator\">-</span><span class=\"token number\">155.f</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token function\">FRotator</span><span class=\"token punctuation\">(</span><span class=\"token number\">2.f</span><span class=\"token punctuation\">,</span> <span class=\"token operator\">-</span><span class=\"token number\">20.f</span><span class=\"token punctuation\">,</span> <span class=\"token number\">5.f</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\tPlayerSkeletalMesh<span class=\"token operator\">-></span><span class=\"token function\">SetOnlyOwnerSee</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\tPlayerSkeletalMesh<span class=\"token operator\">-></span><span class=\"token function\">SetAnimInstanceClass</span><span class=\"token punctuation\">(</span>GunAnimBlueprintAsset<span class=\"token punctuation\">.</span>Object<span class=\"token operator\">-></span>GeneratedClass<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\tPlayerSkeletalMesh<span class=\"token operator\">-></span>CastShadow <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n\tPlayerSkeletalMesh<span class=\"token operator\">-></span>bCastDynamicShadow <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n\tPlayerSkeletalMesh<span class=\"token operator\">-></span>CanCharacterStepUpOn <span class=\"token operator\">=</span> ECB_Yes<span class=\"token punctuation\">;</span>\n\tPlayerSkeletalMesh<span class=\"token operator\">-></span><span class=\"token function\">SetupAttachment</span><span class=\"token punctuation\">(</span>PlayerCamera<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\tPlayerSkeletalMesh<span class=\"token operator\">-></span><span class=\"token function\">SetHiddenInGame</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">// Create the gun mesh component and set up its defaults and lastly attach it to</span>\n\t<span class=\"token comment\">// the RootComponent and the grip point of the PlayerSkeletalMesh.</span>\n\tGunSkeletalMesh <span class=\"token operator\">=</span> CreateDefaultSubobject<span class=\"token operator\">&lt;</span>USkeletalMeshComponent<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token function\">TEXT</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"GunSkeletalMesh\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\tGunSkeletalMesh<span class=\"token operator\">-></span><span class=\"token function\">SetSkeletalMesh</span><span class=\"token punctuation\">(</span>GunSkeletalMeshAsset<span class=\"token punctuation\">.</span>Object<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\tGunSkeletalMesh<span class=\"token operator\">-></span><span class=\"token function\">SetOnlyOwnerSee</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\tGunSkeletalMesh<span class=\"token operator\">-></span>CastShadow <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n\tGunSkeletalMesh<span class=\"token operator\">-></span>bCastDynamicShadow <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n\tGunSkeletalMesh<span class=\"token operator\">-></span>CanCharacterStepUpOn <span class=\"token operator\">=</span> ECB_Yes<span class=\"token punctuation\">;</span>\n\tGunSkeletalMesh<span class=\"token operator\">-></span><span class=\"token function\">SetBoundsScale</span><span class=\"token punctuation\">(</span><span class=\"token number\">2.f</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\tGunSkeletalMesh<span class=\"token operator\">-></span><span class=\"token function\">SetupAttachment</span><span class=\"token punctuation\">(</span>PlayerSkeletalMesh<span class=\"token punctuation\">,</span> <span class=\"token function\">TEXT</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"GripPoint\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\tGunSkeletalMesh<span class=\"token operator\">-></span><span class=\"token function\">SetupAttachment</span><span class=\"token punctuation\">(</span>RootComponent<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\tGunSkeletalMesh<span class=\"token operator\">-></span><span class=\"token function\">AttachToComponent</span><span class=\"token punctuation\">(</span>PlayerSkeletalMesh<span class=\"token punctuation\">,</span> <span class=\"token function\">FAttachmentTransformRules</span><span class=\"token punctuation\">(</span>EAttachmentRule<span class=\"token operator\">::</span>SnapToTarget<span class=\"token punctuation\">,</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token function\">TEXT</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"GripPoint\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">// Set the gun fire animation to the montage loaded above.</span>\n\tGunFireAnimation <span class=\"token operator\">=</span> GunFireAnimationAsset<span class=\"token punctuation\">.</span>Object<span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">// Set the size of the PlayerCharacter's capsule collider.</span>\n\t<span class=\"token function\">GetCapsuleComponent</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-></span><span class=\"token function\">InitCapsuleSize</span><span class=\"token punctuation\">(</span><span class=\"token number\">55.f</span><span class=\"token punctuation\">,</span> <span class=\"token number\">100.f</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token function\">GetCapsuleComponent</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-></span>CanCharacterStepUpOn <span class=\"token operator\">=</span> ECB_Yes<span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">// Set the default offset for where the BulletActors should spawn.</span>\n\tGunOffset <span class=\"token operator\">=</span> <span class=\"token function\">FVector</span><span class=\"token punctuation\">(</span><span class=\"token number\">100.f</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0.f</span><span class=\"token punctuation\">,</span> <span class=\"token number\">10.f</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">// Set the PlayerCharacter to be the default player of the game.</span>\n\tAutoPossessPlayer <span class=\"token operator\">=</span> EAutoReceiveInput<span class=\"token operator\">::</span>Player0<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">/**\n * Called to bind functionality to input.\n */</span>\n<span class=\"token keyword\">void</span> APlayerCharacter<span class=\"token operator\">::</span><span class=\"token function\">SetupPlayerInputComponent</span><span class=\"token punctuation\">(</span>UInputComponent<span class=\"token operator\">*</span> PlayerInputComponent<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n\t<span class=\"token function\">check</span><span class=\"token punctuation\">(</span>PlayerInputComponent<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">// Bind the forward, backward, left, and right movement input axis to the</span>\n\t<span class=\"token comment\">// `MoveForwardBackward` and `MoveLeftRight` methods.</span>\n\tPlayerInputComponent<span class=\"token operator\">-></span><span class=\"token function\">BindAxis</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"MoveForwardBackward\"</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span> <span class=\"token operator\">&amp;</span>APlayerCharacter<span class=\"token operator\">::</span>MoveForwardBackward<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\tPlayerInputComponent<span class=\"token operator\">-></span><span class=\"token function\">BindAxis</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"MoveLeftRight\"</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span> <span class=\"token operator\">&amp;</span>APlayerCharacter<span class=\"token operator\">::</span>MoveLeftRight<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">// Bind the mouse x and y axis to controlling the yaw and pitch.</span>\n\tPlayerInputComponent<span class=\"token operator\">-></span><span class=\"token function\">BindAxis</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"LookUpDown\"</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span> <span class=\"token operator\">&amp;</span>APawn<span class=\"token operator\">::</span>AddControllerYawInput<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\tPlayerInputComponent<span class=\"token operator\">-></span><span class=\"token function\">BindAxis</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"LookLeftRight\"</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span> <span class=\"token operator\">&amp;</span>APawn<span class=\"token operator\">::</span>AddControllerPitchInput<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">// Bind the jump input action to the default Character jump logic.</span>\n\tPlayerInputComponent<span class=\"token operator\">-></span><span class=\"token function\">BindAction</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Jump\"</span><span class=\"token punctuation\">,</span> IE_Pressed<span class=\"token punctuation\">,</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span> <span class=\"token operator\">&amp;</span>ACharacter<span class=\"token operator\">::</span>Jump<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\tPlayerInputComponent<span class=\"token operator\">-></span><span class=\"token function\">BindAction</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Jump\"</span><span class=\"token punctuation\">,</span> IE_Released<span class=\"token punctuation\">,</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span> <span class=\"token operator\">&amp;</span>ACharacter<span class=\"token operator\">::</span>StopJumping<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">// Bind the fire input action to the `Fire` method.</span>\n\tPlayerInputComponent<span class=\"token operator\">-></span><span class=\"token function\">BindAction</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Fire\"</span><span class=\"token punctuation\">,</span> IE_Pressed<span class=\"token punctuation\">,</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span> <span class=\"token operator\">&amp;</span>APlayerCharacter<span class=\"token operator\">::</span>Fire<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">/**\n * Called when the MoveForwardBackward input axis is used.\n */</span>\n<span class=\"token keyword\">void</span> APlayerCharacter<span class=\"token operator\">::</span><span class=\"token function\">MoveForwardBackward</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">float</span> Value<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>Value <span class=\"token operator\">!=</span> <span class=\"token number\">0.f</span><span class=\"token punctuation\">)</span> <span class=\"token function\">AddMovementInput</span><span class=\"token punctuation\">(</span><span class=\"token function\">GetActorForwardVector</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> Value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">/**\n * Called when the MoveLeftRight input axis is used.\n */</span>\n<span class=\"token keyword\">void</span> APlayerCharacter<span class=\"token operator\">::</span><span class=\"token function\">MoveLeftRight</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">float</span> Value<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>Value <span class=\"token operator\">!=</span> <span class=\"token number\">0.f</span><span class=\"token punctuation\">)</span> <span class=\"token function\">AddMovementInput</span><span class=\"token punctuation\">(</span><span class=\"token function\">GetActorRightVector</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> Value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">/**\n * Called when the Fire input action is pressed.\n */</span>\n<span class=\"token keyword\">void</span> APlayerCharacter<span class=\"token operator\">::</span><span class=\"token function\">Fire</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n\t<span class=\"token comment\">// Return early if `GetWorld()` returns a nullptr.</span>\n\tUWorld<span class=\"token operator\">*</span> <span class=\"token keyword\">const</span> World <span class=\"token operator\">=</span> <span class=\"token function\">GetWorld</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>World <span class=\"token operator\">==</span> <span class=\"token keyword\">nullptr</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token keyword\">const</span> FRotator SpawnRotation <span class=\"token operator\">=</span> <span class=\"token function\">GetControlRotation</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\n\t<span class=\"token comment\">// Since the `BulletSpawnLocation` is in camera space, we have to transform it to</span>\n\t<span class=\"token comment\">// world space before offsetting it from the character location to find the final</span>\n\t<span class=\"token comment\">// bullet spawn location.</span>\n\t<span class=\"token keyword\">const</span> FVector SpawnLocation <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>BulletSpawnLocation <span class=\"token operator\">!=</span> <span class=\"token keyword\">nullptr</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">?</span> BulletSpawnLocation<span class=\"token operator\">-></span><span class=\"token function\">GetComponentLocation</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">:</span> <span class=\"token function\">GetActorLocation</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> SpawnRotation<span class=\"token punctuation\">.</span><span class=\"token function\">RotateVector</span><span class=\"token punctuation\">(</span>GunOffset<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">// Set Spawn Collision Handling Override.</span>\n\tFActorSpawnParameters ActorSpawnParams<span class=\"token punctuation\">;</span>\n\tActorSpawnParams<span class=\"token punctuation\">.</span>SpawnCollisionHandlingOverride <span class=\"token operator\">=</span> ESpawnActorCollisionHandlingMethod<span class=\"token operator\">::</span>AdjustIfPossibleButDontSpawnIfColliding<span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">// Spawn the BulletActor at the SpawnLocation.</span>\n\tWorld<span class=\"token operator\">-></span>SpawnActor<span class=\"token operator\">&lt;</span>ABulletActor<span class=\"token operator\">></span><span class=\"token punctuation\">(</span>ABulletActor<span class=\"token operator\">::</span><span class=\"token function\">StaticClass</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> SpawnLocation<span class=\"token punctuation\">,</span> SpawnRotation<span class=\"token punctuation\">,</span> ActorSpawnParams<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">// Get the animation object for the PlayerCharacter's body mesh and play the fire animation.</span>\n\tUAnimInstance<span class=\"token operator\">*</span> AnimInstance <span class=\"token operator\">=</span> PlayerSkeletalMesh<span class=\"token operator\">-></span><span class=\"token function\">GetAnimInstance</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>AnimInstance <span class=\"token operator\">==</span> <span class=\"token keyword\">nullptr</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n\n\tAnimInstance<span class=\"token operator\">-></span><span class=\"token function\">Montage_Play</span><span class=\"token punctuation\">(</span>GunFireAnimation<span class=\"token punctuation\">,</span> <span class=\"token number\">1.f</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre>\n<p>Now that we're on the same page with the PlayerCharacter, let's move on to creating the ZombieCharacter.</p>\n<h2 id=\"zombiecharacter-setup\"><a href=\"#zombiecharacter-setup\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a><strong>ZombieCharacter Setup</strong></h2>\n<p>Before we get into the code I'll go over the assets I'm using from Mixamo real quick.</p>\n<ul>\n<li>Zombie Jill Character</li>\n<li>Zombie Idle Animation</li>\n<li>Zombie Dying Animation</li>\n<li>Zombie Attack Animation</li>\n<li>Zombie Walking Animation</li>\n<li>Zombie Run Animation</li>\n</ul>\n<p>Also make sure that the animations are set to be in place, with skin, and 60 frames per second.</p>\n<p>In my Unreal project I made a folder named Models and another one named Animations and I placed the Zombie Character in a sub-folder in the models folder and the animations in the Animations folder.</p>\n<p>So now we have to do is define and create the initial setup of the ZombieCharacter which is:</p>\n<ul>\n<li>A <code>USkeletalMeshComponent</code> for assigning the zombie the skeletal mesh we imported above.</li>\n<li>A boolean that contains the value for whether the ZombieCharacter is sprinting or not. This will be read by the AnimInstance to decide whether the Sprint animation should be played or not.</li>\n<li>We need to load the Zombie skeletal mesh in the constructor and assign it to the component defined above.</li>\n</ul>\n<p>We also want to implement states. States are going to be used by the AIController when we create it later to guide the movement and actions of the ZombieCharacter. Let's determine what states we need:</p>\n<ul>\n<li>We want an IDLE state in which the ZombieCharacter is just standing around as most zombies do.</li>\n<li>We want a ROAM state in which the ZombieCharacter just walks around with no real purpose.</li>\n<li>We want a CHASE state for when the ZombieCharacter is chasing the PlayerCharacter attempting to attack them.</li>\n<li>We want an ATTACK state for when the ZombieCharacter is attempting to attack the PlayerCharacter.</li>\n<li>We want a DEAD state for when the PlayerCharacter has killed the ZombieCharacter.</li>\n</ul>\n<p>So glancing at the above ZombieCharacters are either going to be in an IDLE or ROAMING state right when they spawn. Then, when the ZombieCharacter spots the PlayerCharacter, they will enter the CHASE state and if they manage to catch up to the PlayerCharacter they will enter the ATTACK state. At this point they will keep switching between CHASE and ATTACK depending on if the PlayerCharacter is attempting to run away or not. Finally this ends with the ZombieCharacter either back in the IDLE/ROAM state if they've lost sight of the PlayerCharacter or in the DEAD state if the PlayerCharacter has killed them.\nSo let's go ahead and implement this.</p>\n<p>Let's go ahead now and add the components discussed above and also the states we just went over:</p>\n<p><strong>ZombieCharacter.h</strong></p>\n<pre class=\"language-cpp\"><code class=\"language-cpp\"><span class=\"token macro property\">#<span class=\"token directive keyword\">pragma</span> once</span>\n\n<span class=\"token macro property\">#<span class=\"token directive keyword\">include</span> <span class=\"token string\">\"CoreMinimal.h\"</span></span>\n<span class=\"token macro property\">#<span class=\"token directive keyword\">include</span> <span class=\"token string\">\"GameFramework/Character.h\"</span></span>\n<span class=\"token macro property\">#<span class=\"token directive keyword\">include</span> <span class=\"token string\">\"ZombieCharacter.generated.h\"</span></span>\n\n<span class=\"token comment\">/**\n * The states that the ZombieCharacter can be in.\n */</span>\n<span class=\"token function\">UENUM</span><span class=\"token punctuation\">(</span>BlueprintType<span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">enum</span> <span class=\"token class-name\">class</span> ZombieStates <span class=\"token operator\">:</span> uint8 <span class=\"token punctuation\">{</span>\n\tIDLE\t<span class=\"token function\">UMETA</span><span class=\"token punctuation\">(</span>DisplayName <span class=\"token operator\">=</span> <span class=\"token string\">\"IDLE\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n\tROAM\t<span class=\"token function\">UMETA</span><span class=\"token punctuation\">(</span>DisplayName <span class=\"token operator\">=</span> <span class=\"token string\">\"ROAM\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n\tCHASE\t<span class=\"token function\">UMETA</span><span class=\"token punctuation\">(</span>DisplayName <span class=\"token operator\">=</span> <span class=\"token string\">\"CHASE\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n\tATTACK\t<span class=\"token function\">UMETA</span><span class=\"token punctuation\">(</span>DisplayName <span class=\"token operator\">=</span> <span class=\"token string\">\"ATTACK\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n\tDEAD\t<span class=\"token function\">UMETA</span><span class=\"token punctuation\">(</span>DisplayName <span class=\"token operator\">=</span> <span class=\"token string\">\"DEAD\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">/**\n * A zombie that can roam, chase, and attack.\n */</span>\n<span class=\"token function\">UCLASS</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">ZOMBIEHORDE_API</span> AZombieCharacter <span class=\"token operator\">:</span> <span class=\"token keyword\">public</span> ACharacter\n<span class=\"token punctuation\">{</span>\n\t<span class=\"token function\">GENERATED_BODY</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">public</span><span class=\"token operator\">:</span>\n\t<span class=\"token comment\">// Sets default values for this character's properties.</span>\n\t<span class=\"token function\">AZombieCharacter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">// The skeletal mesh of the ZombieCharacter.</span>\n\t<span class=\"token function\">UPROPERTY</span><span class=\"token punctuation\">(</span>VisibleDefaultsOnly<span class=\"token punctuation\">,</span> Category <span class=\"token operator\">=</span> Mesh<span class=\"token punctuation\">)</span>\n\t<span class=\"token keyword\">class</span> <span class=\"token class-name\">USkeletalMeshComponent</span><span class=\"token operator\">*</span> ZombieSkeletalMesh<span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">// The current state of the ZombieCharacter.</span>\n\t<span class=\"token function\">UPROPERTY</span><span class=\"token punctuation\">(</span>VisibleAnywhere<span class=\"token punctuation\">,</span> BlueprintReadOnly<span class=\"token punctuation\">,</span> Category <span class=\"token operator\">=</span> Zombie<span class=\"token punctuation\">)</span>\n\tZombieStates State <span class=\"token operator\">=</span> ZombieStates<span class=\"token operator\">::</span>IDLE<span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">// The previous state of the ZombieCharacter.</span>\n\t<span class=\"token function\">UPROPERTY</span><span class=\"token punctuation\">(</span>VisibleAnywhere<span class=\"token punctuation\">,</span> BlueprintReadOnly<span class=\"token punctuation\">,</span> Category <span class=\"token operator\">=</span> Zombie<span class=\"token punctuation\">)</span>\n\tZombieStates PreviousState <span class=\"token operator\">=</span> State<span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">// Indicates whether the ZombieCharacter is sprinting or not.</span>\n\t<span class=\"token function\">UPROPERTY</span><span class=\"token punctuation\">(</span>VisibleAnywhere<span class=\"token punctuation\">,</span> BlueprintReadOnly<span class=\"token punctuation\">)</span>\n\t<span class=\"token keyword\">bool</span> bIsSprinting <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre>\n<p><strong>ZombieCharacter.cpp</strong></p>\n<pre class=\"language-cpp\"><code class=\"language-cpp\"><span class=\"token macro property\">#<span class=\"token directive keyword\">include</span> <span class=\"token string\">\"ZombieCharacter.h\"</span></span>\n<span class=\"token macro property\">#<span class=\"token directive keyword\">include</span> <span class=\"token string\">\"Components/SkeletalMeshComponent.h\"</span></span>\n\n<span class=\"token comment\">/**\n * Sets the default values for the ZombieCharacter.\n */</span>\nAZombieCharacter<span class=\"token operator\">::</span><span class=\"token function\">AZombieCharacter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n\t<span class=\"token comment\">// Load the assets needed for the ZombieCharacter.</span>\n\t<span class=\"token keyword\">static</span> ConstructorHelpers<span class=\"token operator\">::</span>FObjectFinder<span class=\"token operator\">&lt;</span>USkeletalMesh<span class=\"token operator\">></span><span class=\"token function\">ZombieSkeletalMeshAsset</span><span class=\"token punctuation\">(</span><span class=\"token function\">TEXT</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"SkeletalMesh'/Game/Models/ZombieJill/jill.jill'\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">// Create the ZombieCharacter's skeletal mesh and set it to be the mesh loaded above.</span>\n\tZombieSkeletalMesh <span class=\"token operator\">=</span> <span class=\"token function\">GetMesh</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\tZombieSkeletalMesh<span class=\"token operator\">-></span><span class=\"token function\">SetSkeletalMesh</span><span class=\"token punctuation\">(</span>ZombieSkeletalMeshAsset<span class=\"token punctuation\">.</span>Object<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\tZombieSkeletalMesh<span class=\"token operator\">-></span><span class=\"token function\">SetRelativeLocation</span><span class=\"token punctuation\">(</span><span class=\"token function\">FVector</span><span class=\"token punctuation\">(</span><span class=\"token number\">0.f</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0.f</span><span class=\"token punctuation\">,</span> <span class=\"token operator\">-</span><span class=\"token number\">90.f</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\tZombieSkeletalMesh<span class=\"token operator\">-></span><span class=\"token function\">SetupAttachment</span><span class=\"token punctuation\">(</span>RootComponent<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre>\n<p>Make sure that the above compiles and then let's move on.</p>\n<p>Now that we have the basics of the ZombieCharacter set up, we can create the AnimInstance class for it. We want to manage the animation states in C++ and then we'll use those in an animation blueprint.</p>\n<p>So let's get started and create the AnimInstance class by creating a new C++ class with a base parent of AnimInstance and name it ZombieAnimInstance. I also put mine in a sub-folder named Zombie.</p>\n<p>Let's see what we'll need in the ZombieAnimInstance:</p>\n<ul>\n<li>We need booleans to know if the ZombieCharacter is moving roaming, sprinting, attacking, or dead. These will be used to show the various animations.</li>\n<li>We need a method that will be called by the animation blueprint to update these booleans.</li>\n</ul>\n<p>Let's get into the header file:</p>\n<p><strong>ZombieAnimInstance.h</strong></p>\n<pre class=\"language-cpp\"><code class=\"language-cpp\"><span class=\"token macro property\">#<span class=\"token directive keyword\">pragma</span> once</span>\n\n<span class=\"token macro property\">#<span class=\"token directive keyword\">include</span> <span class=\"token string\">\"CoreMinimal.h\"</span></span>\n<span class=\"token macro property\">#<span class=\"token directive keyword\">include</span> <span class=\"token string\">\"Animation/AnimInstance.h\"</span></span>\n<span class=\"token macro property\">#<span class=\"token directive keyword\">include</span> <span class=\"token string\">\"ZombieAnimInstance.generated.h\"</span></span>\n\n<span class=\"token comment\">/**\n * Manages the booleans needed by the animation blueprint to decide what\n * animation needs to be run.\n */</span>\n<span class=\"token function\">UCLASS</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">ZOMBIEAI_API</span> UZombieAnimInstance <span class=\"token operator\">:</span> <span class=\"token keyword\">public</span> UAnimInstance\n<span class=\"token punctuation\">{</span>\n\t<span class=\"token function\">GENERATED_BODY</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">public</span><span class=\"token operator\">:</span>\n\t<span class=\"token comment\">// Indicates whether the ZombieCharacter is roaming or not.</span>\n\t<span class=\"token function\">UPROPERTY</span><span class=\"token punctuation\">(</span>EditAnywhere<span class=\"token punctuation\">,</span> BlueprintReadOnly<span class=\"token punctuation\">)</span>\n\t<span class=\"token keyword\">bool</span> bIsRoaming<span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">// Indicates whether the ZombieCharacter is chasing or not.</span>\n\t<span class=\"token function\">UPROPERTY</span><span class=\"token punctuation\">(</span>EditAnywhere<span class=\"token punctuation\">,</span> BlueprintReadOnly<span class=\"token punctuation\">)</span>\n\t<span class=\"token keyword\">bool</span> bIsChasing<span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">// Indicates whether the ZombieCharacter is attacking or not.</span>\n\t<span class=\"token function\">UPROPERTY</span><span class=\"token punctuation\">(</span>EditAnywhere<span class=\"token punctuation\">,</span> BlueprintReadOnly<span class=\"token punctuation\">)</span>\n\t<span class=\"token keyword\">bool</span> bIsAttacking<span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">// Indicates whether the ZombieCharacter is dying or not.</span>\n\t<span class=\"token function\">UPROPERTY</span><span class=\"token punctuation\">(</span>EditAnywhere<span class=\"token punctuation\">,</span> BlueprintReadOnly<span class=\"token punctuation\">)</span>\n\t<span class=\"token keyword\">bool</span> bIsDying<span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">// Used by the animation blueprint to update the animation properties above</span>\n\t<span class=\"token comment\">// and decide what animations to play.</span>\n\t<span class=\"token function\">UFUNCTION</span><span class=\"token punctuation\">(</span>BlueprintCallable<span class=\"token punctuation\">,</span> Category <span class=\"token operator\">=</span> <span class=\"token string\">\"UpdateAnimationProperties\"</span><span class=\"token punctuation\">)</span>\n\t<span class=\"token keyword\">void</span> <span class=\"token function\">UpdateAnimationProperties</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre>\n<p><strong>ZombieAnimInstance.cpp</strong></p>\n<pre class=\"language-cpp\"><code class=\"language-cpp\"><span class=\"token macro property\">#<span class=\"token directive keyword\">include</span> <span class=\"token string\">\"ZombieAnimInstance.h\"</span></span>\n<span class=\"token macro property\">#<span class=\"token directive keyword\">include</span> <span class=\"token string\">\"ZombieCharacter.h\"</span></span>\n<span class=\"token macro property\">#<span class=\"token directive keyword\">include</span> <span class=\"token string\">\"../Player/PlayerCharacter.h\"</span></span>\n<span class=\"token macro property\">#<span class=\"token directive keyword\">include</span> <span class=\"token string\">\"Math/Rotator.h\"</span></span>\n<span class=\"token macro property\">#<span class=\"token directive keyword\">include</span> <span class=\"token string\">\"Components/BoxComponent.h\"</span></span>\n<span class=\"token macro property\">#<span class=\"token directive keyword\">include</span> <span class=\"token string\">\"Components/CapsuleComponent.h\"</span></span>\n<span class=\"token macro property\">#<span class=\"token directive keyword\">include</span> <span class=\"token string\">\"GameFramework/CharacterMovementComponent.h\"</span></span>\n\n<span class=\"token comment\">/**\n * Used by the animation blueprint to update the animation properties above\n * and decide what animations to play.\n */</span>\n<span class=\"token keyword\">void</span> UZombieAnimInstance<span class=\"token operator\">::</span><span class=\"token function\">UpdateAnimationProperties</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n\t<span class=\"token comment\">// Try to get the Pawn being animated and return if a nullptr.</span>\n\tAPawn<span class=\"token operator\">*</span> ZombiePawn <span class=\"token operator\">=</span> <span class=\"token function\">TryGetPawnOwner</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>ZombiePawn <span class=\"token operator\">==</span> <span class=\"token keyword\">nullptr</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">// Try to cast the Pawn to our ZombieCharacter since that's the only</span>\n\t<span class=\"token comment\">// thing we want to animate.</span>\n\tAZombieCharacter<span class=\"token operator\">*</span> ZombieCharacter <span class=\"token operator\">=</span> Cast<span class=\"token operator\">&lt;</span>AZombieCharacter<span class=\"token operator\">></span><span class=\"token punctuation\">(</span>ZombiePawn<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>ZombieCharacter <span class=\"token operator\">==</span> <span class=\"token keyword\">nullptr</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">// Set the variables that are dependent on states.</span>\n\tbIsRoaming <span class=\"token operator\">=</span> ZombieCharacter<span class=\"token operator\">-></span>State <span class=\"token operator\">==</span> ZombieStates<span class=\"token operator\">::</span>ROAM<span class=\"token punctuation\">;</span>\n\tbIsChasing <span class=\"token operator\">=</span> ZombieCharacter<span class=\"token operator\">-></span>State <span class=\"token operator\">==</span> ZombieStates<span class=\"token operator\">::</span>CHASE<span class=\"token punctuation\">;</span>\n\tbIsAttacking <span class=\"token operator\">=</span> ZombieCharacter<span class=\"token operator\">-></span>State <span class=\"token operator\">==</span> ZombieStates<span class=\"token operator\">::</span>ATTACK<span class=\"token punctuation\">;</span>\n\tbIsDying <span class=\"token operator\">=</span> ZombieCharacter<span class=\"token operator\">-></span>State <span class=\"token operator\">==</span> ZombieStates<span class=\"token operator\">::</span>DEAD<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre>\n<p>Ok so now we need to go back to Unreal and create the animation blueprint based off of the ZombieAnimInstance created above. So in your blueprints folder you have to right-click, select to create a new Animation Blueprint, and in the Create Animation Blueprint dialogue you need to make sure it has a parent class of ZombieAnimInstance and a target skeleton of zombie.</p>\n<p><img class=\"g-image g-image--lazy g-image--loading\" src=\"data:image/svg+xml,%3csvg fill='none' viewBox='0 0 412 741' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-da14dbbc1f0a9430cfb86a58d5eb4331'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='40'/%3e%3c/filter%3e%3c/defs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-da14dbbc1f0a9430cfb86a58d5eb4331)' width='412' height='741' xlink:href='data:image/png%3bbase64%2ciVBORw0KGgoAAAANSUhEUgAAAEAAAABzCAYAAAAohwTdAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAUCUlEQVR42u2d95NVxRLH908QzAooaXMiSJSwsAmWHASJi%2bScdpddcs5JQEFAwELqUTwteUUVPhDz01elYkKr0PJ/6Xc%2bc/Z7mb3cXe7C7r3Lu/7QNefMzJkz09Pd093Tc07akUPHbMP6jbaups5qqmqtprrOatetD%2b7XW61g3YYI1HnXsaCudmMk9cEvi76%2bD2oa3q%2br70NNTdivmmpBnVVX1UXu3XVVmBdCrcunvbBurXseWLO62k6fOm9pnTt3toKCfOvbt4/1qYfCwkLr0bOH9YxAT%2bvVq2ckddC7173rSFkv69Gj0AoDyM/Pc1BQUGD5QfsFhQXu3pW763zL4z5on3vqufygLs/nuWfzXV8ArnlP76j3htCrHhre06fy8nIbN26cjR071iZMGG%2bjRlUE6QQbMKC/FRUNt7SsrCw7f/68vf/%2b%2b3bixAlXceTIkVZRURGBURWjggebhtGjR9uIESNs9uzZNn/%2bfFu2bJmDlStX2qJFi23u3LnuetasWbZ8%2bXJbsmSpSxcvXhyUL7IFCxbYvHnzbN26dUHZElu4cKErI2/p0qW2YsUKmzRxUtifmH0Y3eCeevTp9ddfd2Oqq6uzDz/80CZOnGhTp0x15WVlIy0tPT3dvezWrVt27do1e/XVVx3mevfuHYFXXnnFgX8dDX369Almt4d76aRJk9yAV61a5RDCoF977TU3YDrHoEAOA6UuA6Xe%2bPHjHSLIB0DY5MmTXf9mzJgRzNoA1wfe1Vg/1E/1lWf69u1rQ4YMseLiYhs4cKD169fPUVRpyQhLe%2bmllywnJ8cOHDhgVVVVBkW8%2bOKL1qlTpwhQ5%2bWXX24AsE6saz1DG88//7xLX3jhBevYsaN16NDBpeT5%2bVyrjGe4Jq9r166uDvcA/dC7SP33RvcDoL7Afw/3Tz/9tJWAAB5i5uCz7t27O14UBsEcFAEmqePzltJoUB21cY8/74dY5coj9dt70HsfBH4bjAckFBeXhxQAX8yZM8fxGmQKD0OSkN3UqVMducKnAPJh6NChNmzYsMcS6HtJSUlA6ZkhAqAAZnn48OGOR0pLS23w4MGOd6hMGfllZWXuQfjPn%2bHHCSQTGFNGRkaIAPgM8mapQFLW1tbaxo0bHaxfv96B8oENGzY8lsB46P8bb7zhhDDs7mRAt27d3Jq8Zs0a%2b/HHH%2b2zzz6zr776yr788ksHn3/%2buf388892584d%2b/XXX%2b2XX3557ID%2b//HHH3b58mXbvXu3Y/Ps7GwrLim/h4DVq1e7yiDg008/denXX39t33zzjUOMENAUtGUE/Pnnn7Z161bbtm2bg8zMDCspHRGyADw9ZswYhwQEHtTAkojywVoMcA3m/NQHnl27dm2bBgQ9/USvYOJLS0eGCGC5A%2bCPM2fOOFURYTdt2jSHGO5J0apQZFBqUHikdVGGghGPkpJMQACS0leEYIQCGHz//v2doID8Z86c6ZY7SAWyqampcbMM/1CH/E2bNjnhgoDcsWOHE6JI16KiIrd6xAtoaIkCVjdSVryMjPSQArp06eKwQmeYPeQBKZVJwRaYA0GokKSDBg1yoGsGzjX1qANwLbWTax/UJinvoQ3SRADvQh8AAY4CQIAGCgu8%2beabTv%2bmMkoQRoMMJHgIBYkGyIc10BtgB5Qp7qX78wyWmNqAVdD1MZgA8igHeYkavBBQVDTsHgVEswBLICxAJ3ft2uWA/Orqatu5c2eEDTZv3mx79%2b51LECdffv2OUsOmwJgzYVVuEbwwEqHDh2yPXv2OCFKO2ieUIjIM9EUcB8LUIEZgTzplHha%2bVzTAJoh1%2bSJEhiIVE3VF5/rpTxHSttolWov4RQQYYGR91iADiP1t2zZ4kiVe8gYEod8IVfIfMqUKa7jUAj5DAg1GVInlR0OMEhS8mkH4cM1CIDlNPhEy4CiaAqABZhBBv/9999bZWWlGyAkDtkj7VlHjxw5Yvv373f3sABkjKoMqR8%2bfNjlUf/o0aOOJaRSQ/bci41oGwT7pJ8oJMSUAbAAnRHJwgLMMrPLLIq0mUHymU2RM1SC0KTczxfIkJKxRR6D9yGRlBBTBsACFMDLaH2QLR2j4zIfeYh8BkyZkMM1Mwp70IbWdp4lX4gV6fOMECkkkZ9QChgWYxUAkOa///678wfQYcgd6Q2ZwwKQMmyBYgQbUB%2byRvoj0akny4syGR5aMWRNwmq0hcrNNciD6pK6Cmh2mGEElEgdDQ/BBvkiHFF75WVFCKIes%2b4zq%2bRTDkAt6A5SmamvfAZMW%2bRDdTybKH2gURagAwxg69btTqJTmYFLA4ScQQJ1RTHSHyTV5YBkQKwaPO9rfgKekeZIqsEnRQbAAtIE9%2b0/aPPmLwjIc59Nnz7dkS86P5IbkoaE0fu1Koh8uYf8IWlIHYWH%2bjwrncLvRCzFJ5EyICYCmIXZsysDM7ja5s6d51gAYIAgAxKGRSB5XNlQCWRMSjnUA2ApkgdpRys6siF8qZ8MRcghID0GC0Cyhw8fDQY2wVEEpCwyl%2bFD6htK8horXzpFuN4WRUhdS6tWikQP/IEIYDCQ/tx5812KsMIpIskNO5CKBQSYyawCkD5swCYHKwdGFXaCnqEOjghYA0Ur0TZAHEJwYNDBRcGyVhMsacscQmQBQuKQNR1niRRbYDTBGsonD1WZVYFrVGt2iLQFxipAe1CaTOGkI8CXASx7zH5FxShXmXttJPhbTr4hwyxSpnpym1MG2bPhoo0J2IFUa35SZUBGDBbYsTMwUZctD8h0t1v2tD%2bHsgP5kkLSzCbkDmkzo6jCukZJQvHBPoCFMIUhf/YJ2fdj5YBC2gYLjGi4DK5cucqxACuBVGM0PO0UMXAGgnyA1OUzhAWoRx6I0uYm/ndkBHKE51g9yGe1aAssEPEIQboUQtYMVLY%2bsxS9U8wmivIhZ7GH9hTJp46APF8R4lnfFZYsFkhPjzKH6RykeuPGDUfK2ALMnsgeYQZ5QwUoQdpH9Pf0YRfIHCpgHxEXuwwrGUmJdoTGcow2cIrKHIYNGAzLFzo6swQiRM4ggIExKFhCm6hsoErKa7%2bAwVOXaxBJ29Ilkg3SUSIUwOYoWGHw8DDLGksYg0dYwd%2bAnJ3kc881y6DKVSf6GkcrKc8lG9Q3JpPdYScDCGYINcDDbvavXr3qPD/bt293sw0LhGEuixwLMMuQP2SPlA/DXZZEJL6AcmwDVgTaxjl68ODBpILfh9ycnHBvkPgAEMDgKSBeiMGzXGkFgK9JQYJmH6ku1mCWKeOeulAGyIOqkB%2b4yGgbI6mtQG5uPQIIJUEqItgYDMYOg2WAzCSz6IP22VTGtco0%2b345afQ%2bYrKBsWVnZ4Xb4whBlioZLXKLa4fHt/0fBtROWwGF/TRYBlkF5P/3bfb/R/CXwcjmqFxiyTJRk24LpCQC0v9GwL2tsZRmgVSVAempzgLp6VHmcGoKwSYQEGvD8kH2eyJ9%2b43lN1XWqEdICIilBLVU51p68LH6F29/G2UBfAAKbBJo60rBUMqLTls74MGf3TDcrbf1qQ95iw7ikjofHbilsTHWBpqgPL04N%2bS6ZocHw0gbnliA1FFkOWXUwXegQw3sHbb2JieDqKgYaTt377ONm7e5IzBYqPgydDqE/mCRapeKe66xevFL4qXqrkBJKAAEQBY0RGWcmNj3cnsxSBrAU0SZIkkxf7H28Bdg/rIhCsb9LbCWBO08zZg%2bzU6f%2b4cdP3khGPhkm1t/AgUrlBRnLl5reafI55qJ0yQz8Q18gn6Ak/hJfn/KMCCaCj7UXkFzgiQfFsKAraFW5K4H3SeoFaBBf9RHbdUxQYyHWOHSsnoEcEwGb647LeZ5dAU6uRUr796proL78loLeH9BQcM%2b%2bWWx%2bqN8eao7deoYIGZY6BN88skn7dlnn20AzzzzTAT8PF0/99xzjy1wLql9%2b3aWm1sQeoTAiIKjFNAgFoD0dXpEpCRp%2bqjOkkSDArn79etv3bp1teycvBABDBYpzk6PzushVZGYCDyd40PYUQcgNkDu7rbm9YkGf3tfMo2TchEEMMtIT5ybBDgxYNzaODhBhg4watMDnyH%2bQ7m%2bSdsqIPlZEpk0xSeCAJyimVk5lgY/4y7%2b4YcfIidFOCpDzLBOjXBshlR5lH/33XfumbYMt2/fdoGfeLzxBLPEE/lGhBqaYGZWtqVxgPCtt96y3377zT7%2b%2bGO7efOmG6AGzJGZL774wiGB06UASOAIDSF1PEfa1oB%2bcUyGfqMDnDp1ylHCJ5984sbJmaGMzCxL4zQlJH7p0iV3WuTs2bP27rvvRlJBU2XxAs%2bdPn060ta5c%2bcaAGUP23asd124cMFtyqCsHTt2zLEwChx7FRziTk/PDFVh1keEhNzYfhrt3o5VFq8EZvVAQZE%2br51krdvSJFtS8msFk22gE7HoPhmZ2fcCJOQWbw1XtDqgMBuCKdh%2bU5SpYo0QWtRRp1vKDS7p7x%2bZCVkg%2b35/QGvp8GBfJ0rgRWIPWXHYpWEbDjLF5mB5VcRZa/WHyQYBmT4CfDsgXmhqxmPNhCLKZaL6kaPcU/aws9y8cPkoBMACmLIKadcZYgwcUgDehUcB1lMiyKI/tCDgeZ0LigYdtIgFjT2j53T2yM%2bnDzqHpP7pgIbGAGhcjJH8nJxsy8rODU%2bOIhAAkME9gI3AWingrG1ToDqkSFuoivb8Z/22YrXZ2HvIz83NdSYs/aLdxurFA5mZmdY5UABzc/PDVQC1sDLQmOYHHYdPAfhRHzJQGg9Ql6N3aJh8/CDe5xprC%2bOFTtMnnDMK2/U/xNBc4FmswRwQwGw7DBMwMKzIzZxi%2baKtQFlSANfk6d6Hp556qkUtRtpk1hSCD4JBrt%2bX5oC%2bXJGVHajC3QLSwT9W2Kev9R40xLrUkz5kxkuhDtZoZzwEgkMswtHTvLy8%2b0ha5TzbUkDbvB9q1Wc0RPYP8y7G0ZXxZdUjoCAwDKoOHLXzt%2b/amMlTbPKkibZl61bnY1PYPOu0jCBcZQgaXE1oVliJOngta1LemEc9NqvwPd6F3sCyKdeXYhL1rnjbC63BQA/ICFThrgEGC/PzbH7NBtt/9aaNChBQHkjJysrQMYoBAekhcUGIgqcUI6wQGfJRYijD8tKBKHlj/SVP3ufmrN2KO5b1qXcxQc3VGUC%2bU4QiCMjLtSWbttnBj/5tJSOCZaW8zA2eWYbn8ASTci/gHkyy7MgbjLNRZwfJZ2boJPn4FiRgtYTGo3mqDv4J/7Q6oOVZOkxzKSAdBMACucESuGTLLjv13ztWMXmqjR87xqmrIAGtjaApHCOwAmSo2B/IEVUWCkBCc08dfW8AROiEOd5knoV9IGG8tfHED0ph4llOoPA%2b2uI9vI93yUMVb5wgk0WYnFOEECjDhg6x2j0H7OA/r9nchYts1swZkfhfgFkU%2bUGKkJ2iwhQqT2eoB%2bB61ldpFF8IIskHpA7TTrwg9lOUGm3gpKFfzWmH/vMsRpFjgQ4dOtqcoMGz/7puR278x46ePGVVwQwjZBBmPECnFenNwCFHvVjhc3SOwxA4HhSTh/MhVnyg8uINaaO%2bEAa1yVuFECSlvDltHT9%2bPNAOi4PVJcPSWA9nTp9mxy9dsb0f3bB9x07YimVLg8EvcWSmlzBIfzVQHrMsnyEh8nhbdOqcc4O6flRQaK7eq28b8W6dao%2bnHeqChHBvoJ4F4KExY8fZ6MASG6kPqNV/IE1n/aSEAH6eX8/Xy1sa6FOs96pfzWmLZ1CmstAD9BEVt6HoLVHRX32Qu7yxMr%2b8NaCxdzb3veFplSFOkes/YNCjmcOPf4RIiscIFRePSO0YoeLhJamJAHmEcnMyUpMFQACqcPfu6alNAbBBSiMAf0JKIwDnSGoLwdzc1BWCIAA3W0pTgEPA3xSQ6hSQyghgNyxlEYA5jAWc0sYQzpGURgAu9ZRlAYUHp7QQBP5WhR%2bEgFjniJpT/thogi3hFE3U1%2bAGDx70SGeaYipCit3zXdD6VphcyrrWDm90/db%2bMox/JolYP84NRX%2boWf303eb%2bGPQFmwYIYF%2bAJYGd2%2bhNEH0okTJ9UJktc%2bqzUaHPabJd7X8bqLXC7dT27Mo5tmZtdWTHmP4pUIqU3Wh98pcgKfIUOEV9VoEIC7AcUIH9PfYD%2be6HvgDBFhT7gwpy1Cc2%2bZ6IviXCri3XrR3fp0NTZaUldubcRbv80S2rqlrrNk4VAkt/6Cv9YauOnWSdG2I8iiJX4FWDMDl9MFnfAAaEPfL1XWCF0SnkTPECD4oIaQ7oe4axgPLyoE/jxo137/T7pvNN%2biS48vWVS/WR2XcUQDQXvjH2ysgAK0p1HX0fnQqIGWoJoC1mCH0d8EPclKf4IOrTD%2bWpnmKVomOYaJvYZDaFIwggZF4RVI1Fd8VzVij63FFzgTaISKNPilYDoFAFaytPn%2b/Sc/qUF3V1NEZpKDDDr%2bERZMUz7du3D1mAl5GhHx8lE4gLfOKJJxyP/vXXX/bTTz%2b5uH/OLBDjT6w/5xT4Zcbdu3ft%2bvXr7hnkGIc9yONsA%2bccqMOhCdrQr0Jok6iXdu3aOUS3aQTwbxA6zSD4Rxj7%2bghg/nfy7bffutMgfPQJUobUQRB5nHvgn2mE5Zw8eTLycVd%2bIwYyWcGY/QYIgITaCgI4wkfE%2bAcffGAXL150A%2bLjThym4CAEP4Ujnz/GcBQGBCDI3377bZfHwQsQwCkYrkHCO%2b%2b8Y%2b%2b9955duXLFCWsCOWH7iAwg2lL/Aks2MBEEbSCoEMxA9IFI8khRZvQcs6nDkvq9ln%2bwkjKAtqkfQQDfEtPBSYXE%2bgckkwG8nz49CBSSC3Adqw7kDuheAh9Wc9agJKv/k7Po3%2bwlAyTNHwRN1W/qV3yKh/4fr0MvEGRM7tkAAAAASUVORK5CYII=' /%3e%3c/svg%3e\" width=\"412\" alt=\"Zombie Create Animation Blueprint\" data-srcset=\"/assets/static/zombie-create-animation-blueprint.2ece984.b27303ece8b03ba6efda5b866e6989eb.png 412w\" data-sizes=\"(max-width: 412px) 100vw, 412px\" data-src=\"/assets/static/zombie-create-animation-blueprint.2ece984.b27303ece8b03ba6efda5b866e6989eb.png\"><noscript><img class=\"g-image g-image--lazy g-image--loaded\" src=\"/assets/static/zombie-create-animation-blueprint.2ece984.b27303ece8b03ba6efda5b866e6989eb.png\" width=\"412\" alt=\"Zombie Create Animation Blueprint\"></noscript></p>\n<p>This will open up to the AnimGraph and here you want to right-click and create a new state machine and connect it to the output pose like so:</p>\n<p><img class=\"g-image g-image--lazy g-image--loading\" src=\"data:image/svg+xml,%3csvg fill='none' viewBox='0 0 610 339' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-70446afc193fb5822b9a7af0980622fa'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='40'/%3e%3c/filter%3e%3c/defs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-70446afc193fb5822b9a7af0980622fa)' width='610' height='339' xlink:href='data:image/png%3bbase64%2ciVBORw0KGgoAAAANSUhEUgAAAEAAAAAkCAYAAAA5DDySAAAACXBIWXMAAA7DAAAOwwHHb6hkAAALAUlEQVRo3s1a2XOTRxJXlsNg40uydd/3YfmU71OWseRbvm18gA/A9kLFuAhJCKlKCgKVFKYImzdqk%2bVhK/wPqfwf/Af7sk9btbuPv%2b0ee5TPnw7LqWzIQ1ePZnq%2bme759XTPjDThcBhqCoVCiEQi8Pv9grjMdblkc5HP5ytaXjmW2%2b0%2b01gsy2MFg0FRLrYPy8s5avgHF5hkmblUhInLyrZc8so6j8eDQCCQ%2ba2WU9fx971eL5xOZ86x8n2DOfdj4502N%2bU3eG5yju/NAEr50wyQTyGlAZT9Co0lDcD9hAFkoyQJS7UBlG255JXEH5eK5fquWl5C2eVyZckV%2boY0HCtSaG7qb/Dc5Bw1coVyrRQLMeWCklpeScW6gCQlAooZS8l5LKULnDa3LBcoZGVeFQmvYlbjrAhQboISAcpN8NcgoJgxT0WAXD0lAtQrelYEnLYqyj0gxMYTEw5mwZrrwhllQscGkIsUPCFXFAJkaFCGCcmVYbCQnLpNhphC8spyXV2dGIcNEAgEqRyAX8lporLsE3MK0Bh%2bUe8k1Hg8XtFPtLHssTzXqUOkRFgmDDocDjEwkyxLbrPZBOVqK1RntVpPtKnl1PIMfbPZQmU7OttaEGuqR6y5QfBW4kyxY94ea0JnewwdJNfRFkNrSxPaqK69tYV4M/1uRozqmpsb0dLcJFZZPa7dbhdzZK5hCMndXpZlaOGJMXFZ2ZZLXtYx8SDqunzywhdpkmaLFUuTCfxw%2bBne/OUrvHn1BH979Rh/ffEF8SeCv37%2bOZ4/%2bjOeHNzAs4%2b28ewB0y08JXp8/yY%2b39/Cgzs38OGtVWyvL%2bDa4jQSibjQQTkuw5/nyFyTK1MqxgXU8rkywdNcQFKUXMDt9mA21YuHeyt4uL%2bDR/fv4PGjj3Bv5zq2r03jYHcDn97bxfrsCNKJdiyO9mFlahA3ZpPYWhzD9vIEtpYnsb4wjvl0CmOpQQzG%2b9BKKFHrcMIFCoUan88rKCzqAmJjEW2iPaioO%2bKhrE1QfjOoKGdvTBGamINWZHq4B5/cnsXeWgobswPYmBvA%2bkwf1qaZejEZb8FYfwsmB9uRHurATLIbM2S06VQfZkYGMJXqx3C8Cz1dreQGjWhoiCIYCmaF8qwwqCYZwjxegrObFAlHEQhSDh2qEyTL%2bbjbw5tRWPxm7vVx/h1GvrHqaFUcThemrnbjy/1VPLq7jE/3FgQ9uD2HB7tz2N9KY3sxhbX0EJYnB7EwPkBK92GC%2bowMdmKgO4bGaACN9SFCVIjGJRfze%2bFyu4QBlCFRZoKZMJgr1ARDBJeQF2ujBmxP6oi02JqoxsZYJW6la0R5a7Ja1DNx/c0pHTbHq3BjtEKU9%2baM2J01Ym3MjPpokAxyFLpyGZsnZDDpYbVbYLGaYLGZj7jVDDNxs6w7JlnH8kaLEYFQAM%2bePUOMIK%2bt1cJkMYl6g8mQMYAcK6cBlC4Qpo85PRFcS1qwMmrB3EwKc%2bl%2brC2lsHV9CmPJdlxfGcPS3BAWZxOYn47j1uYMpsa6sbE6IeRYpjPmQVOjH9tTJswmKBq42eeDeQ9D2hodao21qDXUnuRGxW/DL/V6Mtilssu4cOkCGcWCp0%2bfIj2dRnlVeUZ5vVFPSPYUdgF1phShSbq8UVpVE3pjFkzMruDa6jpWr2/i7v4BhpKjmJ5bwBr9Xlm7gYn0DHbv3MW1tetYv7GJvbsfYnwqTQq7oLf5Md5rwsKQTRg1EgnlzQR1SgMUIFaKeZW2EumZNL7/4Xs8P3yO/oF%2bXKm8ghp9Dap0VaisroSuVkcueNIFTs0EGQEOmux60oTOei0CEfKtpgBaYhG0tTcgMdSF3r42DAx2oK%2b/HS2tTaiLRtDQ1IBINCx8z%2bN1w%2bNzQWeyIdVRjblBWxYC1GcBrU4rJl9jqDnieahaV43yynLcO7iH%2bx/dR2okhRcvXuDt27fY2NwQMiEy9OraKnwBX9Yps%2bAmmEGArw7rw2bEQpXwBH3o7GpEf7wTqdEEFpemML84haVrM4LGJ8cwMjpCbSkkribQ1dOF%2bsZ6GtyDKr0ZieZyzMftcPujtBfUZcKRpGg0KhDABtDWaGllq7IModPrjohWlBEwNz%2bH%2bYV5aP6kwfmL54X/v3nzBrt7u8Iwo%2bOjaOtoE3sBK6s8Y2QhQH1eDtMm6CQDrCVMaPSWoVxbC7vTjjBNvqOrkwwRx9XkMIZTSeJJJGkFWPnkSBKDQ4Po7O5ElEKQ1W5GaVUN%2buvLkO6xoNZE2ZjdlsnGOMu0WCyCOEvjVWW/dXldAsqlV0pRVl6G0vJSVBLc2QBcN0xj7%2b/vk/9fEsY4X3IeL799iS%2b%2b/AIajQYV1RWZfmxM5SaYdR%2bQ2wABYYCVuAlR12WU62opHNoJ3hEyQAfilF0NJ68imRoWNHxMV6luYHBAyDjdTuzt7aC5owet7g%2bwmgzizv7HePL4S4yPj2N5eRmbm5vY2dnBwcEBfv75Z3KvNoyMjeDJV0%2bEwfl7jKS%2bgT44XA5UVFUI%2bAv/JoOIMinI/PDwEK9evcLDzx4SKpcy/s9tjIBwKJz/QkR5PyddgOG60m9G1HGJEKCDjcJNIOhHMyUYnd0d6O3vIf/vPUG9fT3kKh20VzQT9Iz45ptnmJxbRLvnHP7%2b8gD/%2bOe/8N///BuvX7/Gd999h5cvX%2bLrr78W9O7dO2G81vZW3Lx9EyYKcWwAVr4/3k9osv5iAFJaKF5TjSsVV%2bDyuIQxeS9YXFrETz/9JKICRwOWZ2Uj4TwuwFbgAnNZDpGiDi%2bFwV6Kr9bLOHdFK4xQWWuA1mhGDeXteqvtmOwneI3ZSjImlFXr0N7TizK9HTH3RUy0GtHWHUeK4MsHEYa9yWSCwWCA0WikMUOoqq4Sq8arz/C9ePkiSkpLUHK5RLgHK80ry6svV/iD8x9gaXkJ6%2bvrAv7c7/DFoTBKWUWZ6MOXrVJH5pway4sUDReUJO4APG7YXT4kGk2YjF5Ao70Erc4SxJwXEXMcUUseku2xY/kGWwlmGy8g3mSHweKA3WbNXLRI4knxflBeUS5WmVeVFZQrzcR%2bzW2CqMztmnMaYYSPP/mYjsVOXCq9JNzjzt07op73C5az0ymT9ZL6sUF4z2GeMxNUpsK9USsmKBcYazFjvOWIKylXXarRgLFmE8ap33jMjL4GB7nPyfO4eiw2SmVVZUZxsdI5iFHCnJHBLvPj2x/R3dMtogHXs9J9/X0YTAwKJLHBMptgKFg4Fc51K%2bykvN4TqIPLH4Y7EKG9gbg/cky566yEHpcvRP2O6ryBcFG3wtIAeZVnJJBCvLrTs9O4vXMbfnJXDoPsIowcJo4WHP7Y/7mf2ATD4V93K%2bz3%2b2jVwiI0RsJHIZLzeVk%2bwUWZTpGcetIJMXL8O3zKLbISAUrYq4kVYr92U5IlVp18nvcHgRjaF6Sb8ObHBpFG41T4TJng%2b7oVrqisEBMvRLzC0kWEolWKtsojBPBeIuvYqKceh/PdpMpN6ve6FTaZTSJCmM1mQRwluE5wFRlNRiGj1%2btFFFHKy/4caTjhUqMtZyb4PhBw2stQobuKo4QtfOJliENpljsHQ4WfxgoNkutprBjKhYDTFFK%2bDOXaLNUbtXKsXE9j%2beSLuhD5rQxw2mTUCHivBjirCxR6gf09X4fVT2PFjPmH3QTfy9OYzI%2bVlO9pTC2Xjwo9jeUbS97Vn2Us2U9ecRfbR54FMk9j/69/iJzlXxvKf4gUO85v8g%2bRP8LLkByLD0T5xsr3DfnCo%2bxXaG7ql6H/AQqLepEApTbZAAAAAElFTkSuQmCC' /%3e%3c/svg%3e\" width=\"610\" alt=\"Zombie Animation Blueprint Anim Graph\" data-srcset=\"/assets/static/zombie-animation-blueprint-anim-graph.7426fad.b84af2cd0ee9b53b95b3555da609b615.png 610w\" data-sizes=\"(max-width: 610px) 100vw, 610px\" data-src=\"/assets/static/zombie-animation-blueprint-anim-graph.7426fad.b84af2cd0ee9b53b95b3555da609b615.png\"><noscript><img class=\"g-image g-image--lazy g-image--loaded\" src=\"/assets/static/zombie-animation-blueprint-anim-graph.7426fad.b84af2cd0ee9b53b95b3555da609b615.png\" width=\"610\" alt=\"Zombie Animation Blueprint Anim Graph\"></noscript></p>\n<p>And then you want to switch to the Event Graph tab, delete the Try Get Pawn Owner node, and drag out from the Blueprint Update Animation node and connect it to the UpdateAnimationProperties node like so:</p>\n<p><img class=\"g-image g-image--lazy g-image--loading\" src=\"data:image/svg+xml,%3csvg fill='none' viewBox='0 0 657 219' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-d0af0c38d8918ee77e08aac61f6d7ab5'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='40'/%3e%3c/filter%3e%3c/defs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-d0af0c38d8918ee77e08aac61f6d7ab5)' width='657' height='219' xlink:href='data:image/png%3bbase64%2ciVBORw0KGgoAAAANSUhEUgAAAEAAAAAVCAYAAAD2KuiaAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAIjUlEQVRYw81YWXMbxxFmKoklkgCBxUUcBAEssAewOEgA4mmSonhBEsVDPCVTJE2VKNmyRN2yYsdRUqk4cdlO4qRScmI7kiqy4yf/wVR96R5gwCUCksqbH77qnpnuOXp6ZrqnJZPJgKHrOhKJBCzLgmmaSKfTh4LbWUfTNBiGIfij5Bksw7KpVOpYWbsOyzfO57DxuJ5lWee4OUnZFlngxcTj8XrDYQu3G4AHYsM1a2%2bmz7JHGYD17Lo8RjKZPFB33NzYyKxz1NxlHcv%2bKAyQEXNgnvplZNKCWkRTKVqMKetqMpl9HQlZb5oGNNKp1h1tAOEB7PIMnpxKRyCXzdLAGWSpLstU8ixXKzNlOYMXT53k7O02mq31bdV4lmVDy2MnoRlZpIwcUnq2CuYJGqE7QTtqq7O3H0CtXtUs0iFDU5%2b6WZ2rPA6N43JdC0%2bIwec/HI0iSu4TIZ5plHZLgPguVRV8N4F5psHu7n1ZKcM8tzNNECU%2bRohzv%2bRhsVhcjMeeoGkpJFM6BgpRjBY7MdJLKAaJDxIfxFgphMGcV9SPFkMCsp4pl8dKYYxymflyBCNUHurpxHhfFKW8CjWpiXGq41XHlTwflRaVJpckhGkxvZEI3ikVcbXYi%2b18HlfIQptkKeavlkrYIPfaoHOzlctiizxgO5cTMm8XCiSTw1Yhj83eHmyQ/uViEZcG%2brFULmOurw%2bzxC8QNWjwGBkiqSYQ6U7S5Dvx%2bEEF9351He//ZhcPPtzEo19u4/FH27gv%2bC08JNz/YFPgEdd/cAW/ePo2Hn64gbuP13H/yToePVnF3t153N6bxXs3p3B99wz2NjXkzS4aT6UNjotNtoOPvDgC7MJxWsic14MfVlbwl0oFf52dxbO1VXy9tYnPzp3Dq9u38RXxz3d38SXRz%2bfn8dncHL69s4d/Udvfqe6LlWW8un8PX9%2b6hX/cvYu/Ef8nwvrkBNZPlfE7OpdDFr0GNFYumyF3zWF9OoK37t3D2JPvMXP3z7j1%2b3/i/S%2b%2bx8M/foedp1/iKuHB599S/Qvc/Pi5aNv97Td4l/ibf3iJj579gL1PXuLepy%2bw9/FXGF67hcLMZWgjK7i0mMe5kYQ4Glbm4BHgdYsjIC40YhKajj6fDztqHJdpd1YiYSxHu7DcHcUi8YvEL8ZjWKGOzhI/Q5imtlkqTyVVnEmpGCHdUVPHkEFuTfXFtIGCRZeflkQw2IlUvBvhWAxxI40stSVSFpZOh7B8bRM9K3dgTS1hdPESTp29iNLMPGEB%2bTOzKFcWUKZy/7lFaltE/%2bwK%2bi%2bsYnjxMiobVzG2vIGxi5cwNr%2bMntEJGMU%2bdFtlLEzGMDMcJ0NnxOXIa%2bWbX7424hWQFuELzUeTVDr98BC8wUANxIeqPNcrfq/gfSFbmeWlTqevVvbBR5ThDXixsrYCM2MiH1awWKB7JW0hlMpjaSyIt%2b7cwsDOU7y5/QjT1x/h/LsPcfbGA0zs3MHpzfdw%2bso7mNi8jsnNaxhZ3cbY2hbG16%2bQAdYwMLuIkbl5DFZmcGp8DGaxhDCde2/MwPmRICrD5AG6JV6VQ%2bOAdKb6RPloMQIB7z5vg7fW5q2XPfW6Knzw88IDvhrvF3C4HPj3d68wU5nCg3AL/jP%2bU/y6N4BJU8PyKF1uQ0m4YyaiRgbd6RxihKiZpbKFLj2NLs1EJGXQwnSEVQ2hBHlULEGIi4s40NUFfzgMfyhEhg/QZR6BKxDCTNmFylCCXhFLPJNNn8F6UKAb8NAd4PK44Pa4XwsuxVWXZ77d2Y42R5tYsNPlRKujFY4OBzrcHXC7Ffy83YFiRME1uvVvFCJ41uvHN1Pt6NdP4uXzF8jlM2hrPwHFQ/KKE4pSo1T2eF1EayDe43Xvw6fUwZtS6MlBt/KYKLShMqgKDzjSADJMFQbgRRHcirvONwMvuoMnSJQXG0vEMEYuODk1iXxPHoPDg3hzdBglegXMvIbcjJ920guXN4B4hnfYQljLY224EwOGAzvXbtCdkICTjOUhr1J8Hri9iih30HjCiFQ%2bHO4qaD66kaInN4nxXCtmBsgAxr4BGoOjAwZQPDygUwx2LGjxUpYNEKDzzwvvLfUiSZdeIpkQvEGDRGJBJMt0LMIu%2bP1%2benUokKL7gAOc%2bcEQetRWtPzsBPXlFMZlr3F0tNNOKwiGgwh3hRGNRW3GP2xTqrTD7cAbjg6MZ9sw3f8aBpBhaiBAl5ufLjGfdx/eKtg7GJLnNkVRhNEEz8brcMLhdMDldglInuU8io%2boB130elTDXxMJNkB/EIV4K34ytApXtg/Dg/2YmJ7GxeVl5CiuGBgeIn4Jp8%2bMk8FpcYr7aLirRjjhVDCaJgP08R2QEVHosbkABwf1XMDcT04awYqsx5GUzAXsiUyzXIBjc3s2yAZQhQFC6FffgCMUpQuTDBT2wdTjyGd1REJeihd0gYypwu/rgM/rPBZ%2br0N4UyV7EhPl1/QAnhhHRtIyhy3ebgB7MnSUvDQIy9azO4JO8cCpbBJLJTfmcm1YKDhwId%2bO2WwrzlsnMZd3CHreasUFap8vOAUWeqp0vscGW/0c9cP0YpkMmDHoGKbrcYB9PvU4QCZD8j%2bgWeLQmESwnPwPYN6ecDTTl/8M9mSIExWT4gEjzclSRkRrWQLfEVxmalAcb9F9IdsFX5OzoyrDnmVQ4JUS8jpdtOnjkiGZGPDiu%2bg9lUmCTBqagdtl%2bsy5hEwypF4zfZZhWdY5UH%2bg3yoEL%2bo0kTypst/UwfZkgy5TVU0KHdbVGubcODeRDEl350KMwlTm2Ru4/jBwu9ThhcljIfWa6cvdZyMc3rf%2bPzosf6C/Q%2bdWG7s2Brt845wb58Z8S7MvscZvp2bfS/YjkGlwM7u7NX6JySNw1Bj2dvkldpSsXb7xS%2byouYlLsP4p0fgK/Ij/BI%2bb2//zJ/hflf3WljAESoYAAAAASUVORK5CYII=' /%3e%3c/svg%3e\" width=\"657\" alt=\"Zombie Animation Blueprint Event Graph\" data-srcset=\"/assets/static/zombie-animation-blueprint-event-graph.6744923.c536f2ffb50085af1441b7f3d64098b4.png 657w\" data-sizes=\"(max-width: 657px) 100vw, 657px\" data-src=\"/assets/static/zombie-animation-blueprint-event-graph.6744923.c536f2ffb50085af1441b7f3d64098b4.png\"><noscript><img class=\"g-image g-image--lazy g-image--loaded\" src=\"/assets/static/zombie-animation-blueprint-event-graph.6744923.c536f2ffb50085af1441b7f3d64098b4.png\" width=\"657\" alt=\"Zombie Animation Blueprint Event Graph\"></noscript></p>\n<p>And then finally we'll create our states and their transitions:</p>\n<p><img class=\"g-image g-image--lazy g-image--loading\" src=\"data:image/svg+xml,%3csvg fill='none' viewBox='0 0 758 531' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-a544d5d5532931a946ba9cefc9b7a4a3'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='40'/%3e%3c/filter%3e%3c/defs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-a544d5d5532931a946ba9cefc9b7a4a3)' width='758' height='531' xlink:href='data:image/png%3bbase64%2ciVBORw0KGgoAAAANSUhEUgAAAEAAAAAtCAYAAAAeA21aAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAL7ElEQVRo3r1aW28bxxXWa5/60qc0tiRelsvd5ZIiqQtFiXeRlGXLdkXJluzq6tiOHSeFUyeoDdVBXKiI67aO8%2bA6cVMU6A3oQ/9AX/qQFClgoCjQl/6Z0/MNedbD1VLUNQ%2bDnZ0zc%2bbM2XOfHYjH44Rm2zYZhkGxWIwsy1Jj8hR4NBqlcDis%2bjocTzTTNBUOeffjARw4/DB9nyC4wNAH3L%2b3jgdw7BNEAxroA1zGBvwHPAoDsBYbBBHeiwH%2buZFIZE8GAB7EAJ1BwoAgGgMZIAt0BuhIdORggI5UkKFhrXwhvfkZ4IdLA1wO2KvtBdcZ4MerSxjo9BgAhGjgzPDwsDog%2bhjDZGkCHxwc7ILr87A2FAp1rdPh6AOH4NPnSQNcYH4a0IaGhnbhlqfQ6F%2bnv4M%2b0CnzB0Q0HMfxxAMijjF56nAgQ1%2bH44mGteCuvPvxyBfQRVLgQTrup0HU0L%2b3DhcV9MOFHtAn0o33ASFMFgsDgogE/KBGUG%2bAj4yMUD6fp1wuR5lMhrLZrGoTExPqCfjU1JRisp8GYVAv/MIg/7ogG%2bAx4Di9wH6MIA4/OjZKc2fnaG19jTY2Nmhza5MazQbdfPsmLbQWFHPACFOj5cSMoP8L6xLQSwV6iVcvCZB5gONwbtKlZCpJ1VqVpgvTVCwV1RPv%2bSlm0OgojaRGutTRrwK9VET/AP55%2bhlPRAL6xQFW1iI35VIqmfLwpVIpKhQKnoRgfTqbYSY5ZGNv4NmHBBxLHCAM8B/wSAyweK3FxseOUbleVgcWPcVhxsfH6fLiZYqGmfC4SeFQmEzLpOSES%2bmEQ07AAXsxQGg8EAP2MoJB4qUzwG8sPQbYmvjFedw2qVgtUmG6oNZDnWQt1KFWqvHXtj0CwTD0E2mHMm6C3y0lCfZJGMF%2bcYAf3jcOGA5RJKT53UiIxvJjVCwUaWh4yIsDvKCKmVUtVpUERKKRbj9v8GFckxImB1iR9tggw0O%2bvXUa%2bsUBckYZ66sCB3KDMY4D4jFKTbKOO7bq4/CNRsMTO11FMAZjWK/WyTLb6rIrF2A8bjpBaeUWWSrgSViNjqoC8r4vBujwfgwwnChlzmTIdGOUHktTvVH35vuTnb4M4HeokOVYiglJm1WC19TZRcbBUN8Bj40BR/ECEK1wLEyJTIKazaZyZ3p%2bsYsBSY0BYFAkIBs0mQY7TklmggV11PKBI3uBfnGAtASLYDvZiai%2bbXdC2IA4wE27VKlW6OqVq/TixQsaGxvzmKCMXGc%2bDgYJaNQaZJu2dwDd%2bEICHDaG2UaWnBEOwRNxGnES%2b44D/LHKgeOASDRG4SgnJ7E4DQ6H6dQgGykWdYyZ2leQSDBqRakx21Bfvlgs0vb2torqJAPrJwG70mF4EYcJnuJ39ibRWJSSzIgRVgfzuNLhXjbAYQNUzGWpMjmq2vRYivJZV/XLkxy3JxMdibGU6zJsg0rVEk3mJsmIGQrf6dOnuwgJYkBjLyOo5nVUg5mhngmLUqwOqY4EWtYRbIAn4omE95XQN3jT6fEMffXFA/rvXx/TN7%2b5S18/u01ff3aHvnr2Dv3n5V1any9TiCUkyfPxleDrkcgAD3w9GnCJ39dVQJKd1EiKZqAC8dciKvP1JvgkTrBTLAWsamlWB1FDp6OmErrLmL5ezihjA/CL0k6dOqX8fDgcolOnB2mMN/nn739G//7LJ/TqDzv0ry%2b36dUfd%2bib3z2k//3tV7TWmqPvfPd7NBgaonF2d7mJHL355psq5/Ya45WnxBGSk%2bM9zj7%2bXLFCMY4dhkPDSmJ2rdX6HpzjjZCB4oxBiUi7TiBnkH7QE/vLO/AMCEcQogqXXNdt580sxk/urtLn22/Rr%2b%2bt0ZMfrdDj95bp6b1VevbhOt1dO083lprUmm/Q0uVlCjHjIqi4oC4grZN/o29wP8w6bnb6CGrivMdFVpkUj4WMtpcxtbVduDCH4TrumBOnNEeLWU6t0%2bm092UheTgTzoIxqBrgUggRugZE5BcWFmh5eZlu3bpFt2/fpkKxRO%2b9fY3%2b/Mm79OOtFv1y%2b136xYPb9NnH79PPP7hBj%2b5u0uePH9CXj96hTz/cpAhHcgmO5eOMPIEwVhrC3c7TgfFhAvDMsmG8f/8%2bnWFXmc9w%2bmuybUmXyI5y5Mc6LWu9Z6dvMgOl7%2bDDsV2YZC9TYINbrVZVOt1abNHyyrJKsZcuLdHq2iqdv3Ce5xS8okiXF0DnwoULdOXKFdra2qJNztHthEuts3V6%2bdFNyo0maWVxnq6tr9Dm6jKtX71Ey615uvHWJm0uNum3j%2b7Q0tJlqnBaWymVaIYJ8Vql4j1r3CpMaK1cprNnztDLL17SjevXaWv5LM0WKnS5zDjyxcC10i9z5uiN12pU4fccMwA1hgRLAuoMFy5eoMWlRWrONmn2zCytb6xTpVah7Gi2bd9ixu6KkLgQuKF2YYNDWtdRor9z5xJtXztPDzbP0U825uin1y/Sx7da9MHqLH1674f0/tYiJVjElLix%2bEHcpLl4QhQ7cIs3bYtmgoZCMVqZH6FXf39C929VWDdDig7M19fqfcDRT3X6FWZEbWZGuVox5ModszrhHYdUKTRLFTLPXSUxvw%2bVWF3Gh9k4Rdjni/4NsfGIcRwQUVmXpYzlDxYWqVYrsv4iEWm7Ib3FO09sHunoODK7wZBBK80U/eNPT5i5NYVb3JhqHWL1JjZC5R38JRcWWnywvBqXOELsWkxbj6BLiq1dVWG94iML9EjQ0dyQOkCnKArfjzhB1iLsHR9P8ybw43YnUrS8iFGY2hUJMgNdzvkvNQuU5MTJ5HejEwkGVZ2wj8QJoLPBeUaG7YdhmIoW23a6iqJ%2bPIGR4IFLYp1cwF/thbgh60unHRWYvC6DxXszQCVDKapUmtzvEQprtOmtwnYgny8x/jaz%2b9UDejJA8mR8XfhFESF/7V7g8KF%2buEgGkFY5B3BduQBhO5KKd%2bEBDjmEqi/yl6uVqpzgGEpv5V5Ax401qBpPT0/TG298n3I59Mss9oZSA6EFTe4ldGb54fo9woCnI50wVURI9ETgUo8DAv22RdQGfeghDFazWWeJMVk8LZqbyzCnTWU3hFHeWja0sNwzlRkyjfY%2bkXBk175g%2bkcPH9LTp0/VV6vVUF/gXMDsplG3AbvskJaO6/nAsdYE0R8aGlT1/ZmZKjMBYa1chR0uHRa6SuxeW60WP8uMc4Rh5vHVBINswF43Q70MFGCo8O7s7NC5c/NULhcYHlPGKdgI9k%2bHpY/xMscPtp1ie8ORY2pKMeHE0%2bH9SgDGAEMy9Pz5c1X/h85WKtOKCZAAEHyYgghogsWfmJhmG8GxQnyM27hSgRMvi%2buiuJ%2bKEOBoEpDUOForFHLKILYlYA8G%2bNJhIbhcLjFjS4zPUuvbdBq7DniodPiwZXH/paYcSL8cFdyNRpMmJ7MMh0XerQLCAF0F2ocx%2bOB5lqIZxtt2d/0uR/cqi%2b9bBXpVhQ9zMYKx14ESrruiXR4E9wLNWpMs/rrqYkT9fxBXoTiuyOp1jhHirlf0iHYi0OOoCisGiH8U8X2dCxjeU4fDJclB9XkSG%2bjiL7D2V3WUUUwmOdvjRCshhQqOBAsTBcq6WaUCCHGliJHNjvPcMS8ekJjAv7dOg8QB8u6H6/8G4H1AAFLRFQ7KoQUufh6Biqnn%2bZrP1ZMpvQk%2bwMfHJ5ShnOEEBpeh9Xpd2Ymp6SklJUhpMY6WyWRVmAtjJ3h0Bus06HD9wH4a5ZLHqwcc9XZYDzP73Q5jLq7HEfyUKiXa2NxQufrWtS11f4D%2b9RvX1bU5bovx/0Bb9O193w4H2YDjzQWOeD0OvcbB1KWH/Vo/ETxhTEV2cVPNQTnd79NP5Hr82/xJStJW1cx411q9aixjOg1BP0kF/UAR9JOUXpUOTIePGgnq/wjtpQJ7/ULjL5vv9Y/Qt3YxcphfZA7yo%2bRx/Sd4Yldjx2kD/LlA0FeM9iiInJgEyFcT/dTdoN/d6G6wVxwQ5AZ1fxwUJ%2bjv8OO91ouf7wULcoP%2bfcTVe27QX3jQCyJ6IBRUENELIyIdQoDeBI%2b/IBLU9ILIfuBBNO6nICLz/w/xlBdPCIHoKwAAAABJRU5ErkJggg==' /%3e%3c/svg%3e\" width=\"758\" alt=\"Zombie Animation Blueprint Event Graph\" data-srcset=\"/assets/static/zombie-animations-initial.e4ad7cc.4513516876c3279cb460e3cd8fa67655.png 758w\" data-sizes=\"(max-width: 758px) 100vw, 758px\" data-src=\"/assets/static/zombie-animations-initial.e4ad7cc.4513516876c3279cb460e3cd8fa67655.png\"><noscript><img class=\"g-image g-image--lazy g-image--loaded\" src=\"/assets/static/zombie-animations-initial.e4ad7cc.4513516876c3279cb460e3cd8fa67655.png\" width=\"758\" alt=\"Zombie Animation Blueprint Event Graph\"></noscript></p>\n<p>I won't list the transitions here as it's a bit tedious but it's pretty easy to set it up since for now we're just using <code>bIsRoaming</code>, <code>bIsChasing</code>, and <code>bIsAttacking</code> but feel free to look at the <a href=\"\">repo</a> if you need help.</p>\n<p>Also note that we're not using the death animation yet but we'll add that later.</p>\n<p>So now we can go back to our ZombieCharacter, load the ZombieAnimBlueprint, and set it as the anim instance class of the <code>ZombieSkeletalMesh</code>:</p>\n<p><strong>ZombieCharacter.cpp</strong></p>\n<pre class=\"language-cpp\"><code class=\"language-cpp\"><span class=\"token comment\">/**\n * Sets the default values for the ZombieCharacter.\n */</span>\nAZombieCharacter<span class=\"token operator\">::</span><span class=\"token function\">AZombieCharacter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n\t<span class=\"token comment\">// Load the assets needed for the ZombieCharacter.</span>\n\t<span class=\"token keyword\">static</span> ConstructorHelpers<span class=\"token operator\">::</span>FObjectFinder<span class=\"token operator\">&lt;</span>USkeletalMesh<span class=\"token operator\">></span><span class=\"token function\">ZombieSkeletalMeshAsset</span><span class=\"token punctuation\">(</span><span class=\"token function\">TEXT</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"SkeletalMesh'/Game/Models/ZombieJill/jill.jill'\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">static</span> ConstructorHelpers<span class=\"token operator\">::</span>FObjectFinder<span class=\"token operator\">&lt;</span>UAnimBlueprint<span class=\"token operator\">></span><span class=\"token function\">ZombieAnimAsset</span><span class=\"token punctuation\">(</span><span class=\"token function\">TEXT</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"AnimBlueprint'/Game/Blueprints/ZombieAnimBlueprint.ZombieAnimBlueprint'\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">// Create the ZombieCharacter's skeletal mesh and set it to be the mesh loaded above.</span>\n\tZombieSkeletalMesh <span class=\"token operator\">=</span> <span class=\"token function\">GetMesh</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\tZombieSkeletalMesh<span class=\"token operator\">-></span><span class=\"token function\">SetSkeletalMesh</span><span class=\"token punctuation\">(</span>ZombieSkeletalMeshAsset<span class=\"token punctuation\">.</span>Object<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\tZombieSkeletalMesh<span class=\"token operator\">-></span><span class=\"token function\">SetRelativeLocation</span><span class=\"token punctuation\">(</span><span class=\"token function\">FVector</span><span class=\"token punctuation\">(</span><span class=\"token number\">0.f</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0.f</span><span class=\"token punctuation\">,</span> <span class=\"token operator\">-</span><span class=\"token number\">90.f</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\tZombieSkeletalMesh<span class=\"token operator\">-></span><span class=\"token function\">SetAnimInstanceClass</span><span class=\"token punctuation\">(</span>ZombieAnimAsset<span class=\"token punctuation\">.</span>Object<span class=\"token operator\">-></span>GeneratedClass<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\tZombieSkeletalMesh<span class=\"token operator\">-></span><span class=\"token function\">SetupAttachment</span><span class=\"token punctuation\">(</span>RootComponent<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre>\n<p>Now let's get into creating the AIController for the ZombieCharacter so that we can make it move around and respond to the PlayerCharacter.</p>\n<h2 id=\"adding-a-stimuli-source-to-the-playercharacter\"><a href=\"#adding-a-stimuli-source-to-the-playercharacter\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a><strong>Adding a Stimuli Source to the PlayerCharacter</strong></h2>\n<p>Before we can get into the AIController for the ZombieCharacter, we need to improve detection and performance by making sure that the AIController doesn't sense all Pawns and we need to create a stimuli source on the PlayerCharacter so that the ZombieCharacter knows it's supposed to see the PlayerCharacter.</p>\n<p>So we have to:</p>\n<ul>\n<li>Change ini setting so that not all Pawns are registered as sources for stimuli.</li>\n<li>Add a <code>UAIPerceptionStimuliSourceComponent</code> to the PlayerCharacter to manage the their stimuli sources. In our case we'll only be using sight but you can add more than one sense if you wish.</li>\n<li>Add<code>UAISense_Sight</code> as a registered sense for the PlayerCharacter.</li>\n</ul>\n<p>First let's handle the first point by setting <code>bAutoRegisterAllPawnsAsSources</code> to <code>false</code> in the <code>Config/DefaultGame.ini</code> file:</p>\n<p><strong>DefaultGame.ini</strong></p>\n<pre class=\"language-ini\"><code class=\"language-ini\"><span class=\"token selector\">[/Script/AIModule.AISense_Sight]</span>\n<span class=\"token constant\">bAutoRegisterAllPawnsAsSources</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span>false</span></code></pre>\n<p>Now let's go ahead and define the <code>UAIPerceptionStimuliSourceComponent</code> in the PlayerCharacter's header:</p>\n<p><strong>PlayerCharacter.h</strong></p>\n<pre class=\"language-cpp\"><code class=\"language-cpp\"><span class=\"token comment\">// Used to register sense for the PlayerCharacter that are detectable by the ZombieCharacter.</span>\n<span class=\"token function\">UPROPERTY</span><span class=\"token punctuation\">(</span>VisibleDefaultsOnly<span class=\"token punctuation\">,</span> Category <span class=\"token operator\">=</span> Player<span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">UAIPerceptionStimuliSourceComponent</span><span class=\"token operator\">*</span> PlayerStimuliSource<span class=\"token punctuation\">;</span></code></pre>\n<p>And then in the cpp file we create the component in the constructor and register the sight sense:</p>\n<p><strong>PlayerCharacter.cpp</strong></p>\n<pre class=\"language-cpp\"><code class=\"language-cpp\"><span class=\"token comment\">// Create the stimuli source and set it to register as a source for `AISense_Sight`.</span>\nPlayerStimuliSource <span class=\"token operator\">=</span> CreateDefaultSubobject<span class=\"token operator\">&lt;</span>UAIPerceptionStimuliSourceComponent<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token function\">TEXT</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"PlayerStimuliSource\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nPlayerStimuliSource<span class=\"token operator\">-></span><span class=\"token function\">RegisterForSense</span><span class=\"token punctuation\">(</span>TSubclassOf<span class=\"token operator\">&lt;</span>UAISense_Sight<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre>\n<p>All the above does is make sure that not every pawn triggers the zombie's sight and we specifically make our PlayerCharacter a trigger. This helps with performance and making sure the AI doesn't get distracted by other zombies and neutral characters.</p>\n<p><strong>Note:</strong> I was having a bit of trouble with the above and no matter what I did the stimuli component would not register a sight sense and I had to set that up in my component manually in the editor. As soon as I find out what the issue is I'll update this with the solution if others are having the same problem.</p>\n<h2 id=\"zombieaicontroller-perception\"><a href=\"#zombieaicontroller-perception\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a><strong>ZombieAIController Perception</strong></h2>\n<p>Now let's get on to the fun part, the ZombieAIController. This doesn't mean that we're done with all of the other pieces yet, we'll need to keep adding to the PlayerCharacter and ZombieCharacter but this is where all of the ZombieCharacter's actions and movement are decided.</p>\n<p>Let's see what we're going to need from the ZombieAIController as of now:</p>\n<ul>\n<li>We need a <code>UAIPerceptionComponent</code> so that we can perceive the PlayerCharacter.</li>\n<li>We need <code>UAISenseConfig_Sight</code> to attach to the component above in order to detect the PlayerCharacter through sight.</li>\n<li>We need a couple variables to tweak the range and age of the sight component.</li>\n<li>We need to override the <code>OnPosses</code> method so we can get a reference to our ZombieCharacter.</li>\n<li>We need to define the method that gets called when the perception component broadcasts the <code>OnTargetPerceptionUpdated</code> signal.</li>\n</ul>\n<p>And that's all for now, we just want to keep it simple and make sure that the basics work before progressing further. Go ahead and create a new C++ class with a base parent of AIController and name it ZombieAIController. I put my script in the Zombie folder since it's used directly with the ZombieCharacter.</p>\n<p>Now in the ZombieAIController's header, we declare the two components and the variables used to configure the sight:</p>\n<p><strong>ZombieAIController.h</strong></p>\n<pre class=\"language-cpp\"><code class=\"language-cpp\"><span class=\"token macro property\">#<span class=\"token directive keyword\">pragma</span> once</span>\n\n<span class=\"token macro property\">#<span class=\"token directive keyword\">include</span> <span class=\"token string\">\"CoreMinimal.h\"</span></span>\n<span class=\"token macro property\">#<span class=\"token directive keyword\">include</span> <span class=\"token string\">\"AIController.h\"</span></span>\n<span class=\"token macro property\">#<span class=\"token directive keyword\">include</span> <span class=\"token string\">\"GenericTeamAgentInterface.h\"</span></span>\n<span class=\"token macro property\">#<span class=\"token directive keyword\">include</span> <span class=\"token string\">\"Perception/AIPerceptionTypes.h\"</span></span>\n<span class=\"token macro property\">#<span class=\"token directive keyword\">include</span> <span class=\"token string\">\"ZombieAIController.generated.h\"</span></span>\n\n<span class=\"token comment\">/**\n * The ZombieAIController is the AIController that manages the states and movement\n * of the ZombieCharacter.\n */</span>\n<span class=\"token function\">UCLASS</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">ZOMBIEHORDEAI_API</span> AZombieAIController <span class=\"token operator\">:</span> <span class=\"token keyword\">public</span> AAIController\n<span class=\"token punctuation\">{</span>\n\t<span class=\"token function\">GENERATED_BODY</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">public</span><span class=\"token operator\">:</span>\n\t<span class=\"token function\">AZombieAIController</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">// The ZombieCharacter that the ZombieAIController is controlling.</span>\n\t<span class=\"token function\">UPROPERTY</span><span class=\"token punctuation\">(</span>VisibleAnywhere<span class=\"token punctuation\">,</span> BlueprintReadOnly<span class=\"token punctuation\">,</span> Category <span class=\"token operator\">=</span> Zombie<span class=\"token punctuation\">)</span>\n\t<span class=\"token keyword\">class</span> <span class=\"token class-name\">AZombieCharacter</span><span class=\"token operator\">*</span> ZombieCharacter<span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">// The ZombieCharacter's perception component.</span>\n\t<span class=\"token function\">UPROPERTY</span><span class=\"token punctuation\">(</span>VisibleDefaultsOnly<span class=\"token punctuation\">,</span> Category <span class=\"token operator\">=</span> Zombie<span class=\"token punctuation\">)</span>\n\t<span class=\"token keyword\">class</span> <span class=\"token class-name\">UAIPerceptionComponent</span><span class=\"token operator\">*</span> ZombiePerception<span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">// The ZombieCharacter's sight sense component.</span>\n\t<span class=\"token function\">UPROPERTY</span><span class=\"token punctuation\">(</span>VisibleDefaultsOnly<span class=\"token punctuation\">,</span> Category <span class=\"token operator\">=</span> Zombie<span class=\"token punctuation\">)</span>\n\t<span class=\"token keyword\">class</span> <span class=\"token class-name\">UAISenseConfig_Sight</span><span class=\"token operator\">*</span> ZombieSight<span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">// The radius around the ZombieCharacter that the PlayerCharacter will be sensed.</span>\n\t<span class=\"token function\">UPROPERTY</span><span class=\"token punctuation\">(</span>EditAnywhere<span class=\"token punctuation\">,</span> BlueprintReadWrite<span class=\"token punctuation\">,</span> Category <span class=\"token operator\">=</span> Zombie<span class=\"token punctuation\">)</span>\n\t<span class=\"token keyword\">float</span> ZombieSightRadius <span class=\"token operator\">=</span> <span class=\"token number\">500.f</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">// The radius around the ZombieCharacter which they'll lose sight of the PlayerCharacter.</span>\n\t<span class=\"token function\">UPROPERTY</span><span class=\"token punctuation\">(</span>EditAnywhere<span class=\"token punctuation\">,</span> BlueprintReadWrite<span class=\"token punctuation\">,</span> Category <span class=\"token operator\">=</span> Zombie<span class=\"token punctuation\">)</span>\n\t<span class=\"token keyword\">float</span> ZombieLoseSightRadius <span class=\"token operator\">=</span> ZombieSightRadius <span class=\"token operator\">+</span> <span class=\"token number\">50.f</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">// The amount of time that the ZombieCharacter will remember the PlayerCharacter after</span>\n\t<span class=\"token comment\">// seeing them.</span>\n\t<span class=\"token function\">UPROPERTY</span><span class=\"token punctuation\">(</span>EditAnywhere<span class=\"token punctuation\">,</span> BlueprintReadWrite<span class=\"token punctuation\">,</span> Category <span class=\"token operator\">=</span> Zombie<span class=\"token punctuation\">)</span>\n\t<span class=\"token keyword\">float</span> ZombieSightMaxAge <span class=\"token operator\">=</span> <span class=\"token number\">5.f</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">protected</span><span class=\"token operator\">:</span>\n\t<span class=\"token comment\">/**\n\t * Called when the ZombieAIController takes over the ZombieCharacter.\n\t *\n\t * @param ZombieCharacter The ZombieCharacter pawn.\n\t */</span>\n\t<span class=\"token keyword\">virtual</span> <span class=\"token keyword\">void</span> <span class=\"token function\">OnPossess</span><span class=\"token punctuation\">(</span>APawn<span class=\"token operator\">*</span> ZombiePawn<span class=\"token punctuation\">)</span> override<span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">/**\n\t * Called when the AIController's perception is updated.\n\t */</span>\n\t<span class=\"token function\">UFUNCTION</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\t<span class=\"token keyword\">void</span> <span class=\"token function\">OnTargetPerceptionUpdate</span><span class=\"token punctuation\">(</span>AActor<span class=\"token operator\">*</span> Actor<span class=\"token punctuation\">,</span> FAIStimulus Stimulus<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre>\n<p>Now in the cpp file we:</p>\n<ul>\n<li>Create the perception and sight and set the variables for the sight.</li>\n<li>Set the sight to detect enemies, neutrals, and friendlies as we'll be handling teams later.</li>\n<li>Set the sight sense to be the dominant sense of the perception component.</li>\n<li>Create the <code>OnPossess</code> method and assign the `ZombieCharacter variable if we can cast the Pawn that was possessed to our ZombieCharacter.</li>\n<li>Create the <code>OnTargetPerceptionUpdate</code> method that gets all of the currently perceived actors, and uses that to check if the Actor has entered or left the sight radius Lastly we print this information out to the screen so you can see that it works.</li>\n</ul>\n<p><strong>ZombieAIController.cpp</strong></p>\n<pre class=\"language-cpp\"><code class=\"language-cpp\"><span class=\"token macro property\">#<span class=\"token directive keyword\">include</span> <span class=\"token string\">\"ZombieAIController.h\"</span></span>\n<span class=\"token macro property\">#<span class=\"token directive keyword\">include</span> <span class=\"token string\">\"Perception/AISense_Sight.h\"</span></span>\n<span class=\"token macro property\">#<span class=\"token directive keyword\">include</span> <span class=\"token string\">\"Perception/AISenseConfig_Sight.h\"</span></span>\n<span class=\"token macro property\">#<span class=\"token directive keyword\">include</span> <span class=\"token string\">\"Perception/AIPerceptionComponent.h\"</span></span>\n\n<span class=\"token comment\">/**\n * Sets the default values for the ZombieAIController.\n */</span>\nAZombieAIController<span class=\"token operator\">::</span><span class=\"token function\">AZombieAIController</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n\t<span class=\"token comment\">// Create the perception component and the sight component and set the default values</span>\n\t<span class=\"token comment\">// of the sight component.</span>\n\tZombiePerception <span class=\"token operator\">=</span> CreateDefaultSubobject<span class=\"token operator\">&lt;</span>UAIPerceptionComponent<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token function\">TEXT</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"ZombiePerception\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\tZombieSight <span class=\"token operator\">=</span> CreateDefaultSubobject<span class=\"token operator\">&lt;</span>UAISenseConfig_Sight<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token function\">TEXT</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"ZombieSight\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\tZombieSight<span class=\"token operator\">-></span>SightRadius <span class=\"token operator\">=</span> ZombieSightRadius<span class=\"token punctuation\">;</span>\n\tZombieSight<span class=\"token operator\">-></span>LoseSightRadius <span class=\"token operator\">=</span> ZombieLoseSightRadius<span class=\"token punctuation\">;</span>\n\tZombieSight<span class=\"token operator\">-></span><span class=\"token function\">SetMaxAge</span><span class=\"token punctuation\">(</span>ZombieSightMaxAge<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\tZombieSight<span class=\"token operator\">-></span>DetectionByAffiliation<span class=\"token punctuation\">.</span>bDetectEnemies <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n\tZombieSight<span class=\"token operator\">-></span>DetectionByAffiliation<span class=\"token punctuation\">.</span>bDetectNeutrals <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n\tZombieSight<span class=\"token operator\">-></span>DetectionByAffiliation<span class=\"token punctuation\">.</span>bDetectFriendlies <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">// Assign the sight sense to the perception component.</span>\n\tZombiePerception<span class=\"token operator\">-></span><span class=\"token function\">ConfigureSense</span><span class=\"token punctuation\">(</span><span class=\"token operator\">*</span>ZombieSight<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\tZombiePerception<span class=\"token operator\">-></span><span class=\"token function\">SetDominantSense</span><span class=\"token punctuation\">(</span>ZombieSight<span class=\"token operator\">-></span><span class=\"token function\">GetSenseImplementation</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">// Bind the `OnTargetPerceptionUpdate` function.</span>\n\tZombiePerception<span class=\"token operator\">-></span>OnTargetPerceptionUpdated<span class=\"token punctuation\">.</span><span class=\"token function\">AddDynamic</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span> <span class=\"token operator\">&amp;</span>AZombieAIController<span class=\"token operator\">::</span>OnTargetPerceptionUpdate<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">/**\n * Called when the ZombieAIController takes over the ZombieCharacter.\n *\n * @param ZombiePawn The ZombieCharacter pawn.\n */</span>\n<span class=\"token keyword\">void</span> AZombieAIController<span class=\"token operator\">::</span><span class=\"token function\">OnPossess</span><span class=\"token punctuation\">(</span>APawn<span class=\"token operator\">*</span> ZombiePawn<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n\tSuper<span class=\"token operator\">::</span><span class=\"token function\">OnPossess</span><span class=\"token punctuation\">(</span>ZombiePawn<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">// Attempt to cast the Pawn that was taken over to a ZombieCharacter and if</span>\n\t<span class=\"token comment\">// successful then we assign it to our `ZombieCharacter` variable.</span>\n\tZombieCharacter <span class=\"token operator\">=</span> Cast<span class=\"token operator\">&lt;</span>AZombieCharacter<span class=\"token operator\">></span><span class=\"token punctuation\">(</span>ZombiePawn<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">/**\n * Called when the AIController's perception is updated.\n */</span>\n<span class=\"token keyword\">void</span> AZombieAIController<span class=\"token operator\">::</span><span class=\"token function\">OnTargetPerceptionUpdate</span><span class=\"token punctuation\">(</span>AActor<span class=\"token operator\">*</span> Actor<span class=\"token punctuation\">,</span> FAIStimulus Stimulus<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n\t<span class=\"token comment\">// Get the Actors that have been perceived.</span>\n\tTArray<span class=\"token operator\">&lt;</span>AActor<span class=\"token operator\">*</span><span class=\"token operator\">></span> PerceivedActors<span class=\"token punctuation\">;</span>\n\tZombiePerception<span class=\"token operator\">-></span><span class=\"token function\">GetCurrentlyPerceivedActors</span><span class=\"token punctuation\">(</span>TSubclassOf<span class=\"token operator\">&lt;</span>UAISense_Sight<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> PerceivedActors<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">// Get the number of perceived actors and if the current target left or entered</span>\n\t<span class=\"token comment\">// the field of view.</span>\n\t<span class=\"token keyword\">bool</span> bIsEntered <span class=\"token operator\">=</span> PerceivedActors<span class=\"token punctuation\">.</span><span class=\"token function\">Contains</span><span class=\"token punctuation\">(</span>Actor<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">int</span> NumberOfObjectsSeen <span class=\"token operator\">=</span> PerceivedActors<span class=\"token punctuation\">.</span><span class=\"token function\">Num</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\tFString text <span class=\"token operator\">=</span> <span class=\"token function\">FString</span><span class=\"token punctuation\">(</span>Actor<span class=\"token operator\">-></span><span class=\"token function\">GetName</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token string\">\" has just \"</span> <span class=\"token operator\">+</span> <span class=\"token punctuation\">(</span>bIsEntered <span class=\"token operator\">?</span> <span class=\"token string\">\"Entered\"</span> <span class=\"token operator\">:</span> <span class=\"token string\">\"Left\"</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token string\">\" the field of view.\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>GEngine<span class=\"token punctuation\">)</span>\n\t<span class=\"token punctuation\">{</span>\n\t\tGEngine<span class=\"token operator\">-></span><span class=\"token function\">AddOnScreenDebugMessage</span><span class=\"token punctuation\">(</span><span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">5.f</span><span class=\"token punctuation\">,</span> FColor<span class=\"token operator\">::</span>Cyan<span class=\"token punctuation\">,</span> text<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre>\n<p>Before we can test this, we have to do back to the ZombieController and make the ZombieAIController the default AIController:</p>\n<p><strong>ZombieCharacter.cpp</strong></p>\n<pre class=\"language-cpp\"><code class=\"language-cpp\"><span class=\"token comment\">/**\n * Sets the default values for the ZombieCharacter.\n */</span>\nAZombieCharacter<span class=\"token operator\">::</span><span class=\"token function\">AZombieCharacter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n\t<span class=\"token comment\">// Load the assets needed for the ZombieCharacter.</span>\n\t<span class=\"token keyword\">static</span> ConstructorHelpers<span class=\"token operator\">::</span>FObjectFinder<span class=\"token operator\">&lt;</span>USkeletalMesh<span class=\"token operator\">></span><span class=\"token function\">ZombieSkeletalMeshAsset</span><span class=\"token punctuation\">(</span><span class=\"token function\">TEXT</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"SkeletalMesh'/Game/Models/ZombieJill/jill.jill'\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">static</span> ConstructorHelpers<span class=\"token operator\">::</span>FObjectFinder<span class=\"token operator\">&lt;</span>UAnimBlueprint<span class=\"token operator\">></span><span class=\"token function\">ZombieAnimAsset</span><span class=\"token punctuation\">(</span><span class=\"token function\">TEXT</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"AnimBlueprint'/Game/Blueprints/ZombieAnimBlueprint.ZombieAnimBlueprint'\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">// Create the ZombieCharacter's skeletal mesh and set it to be the mesh loaded above.</span>\n\tZombieSkeletalMesh <span class=\"token operator\">=</span> <span class=\"token function\">GetMesh</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\tZombieSkeletalMesh<span class=\"token operator\">-></span><span class=\"token function\">SetSkeletalMesh</span><span class=\"token punctuation\">(</span>ZombieSkeletalMeshAsset<span class=\"token punctuation\">.</span>Object<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\tZombieSkeletalMesh<span class=\"token operator\">-></span><span class=\"token function\">SetRelativeLocation</span><span class=\"token punctuation\">(</span><span class=\"token function\">FVector</span><span class=\"token punctuation\">(</span><span class=\"token number\">0.f</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0.f</span><span class=\"token punctuation\">,</span> <span class=\"token operator\">-</span><span class=\"token number\">90.f</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\tZombieSkeletalMesh<span class=\"token operator\">-></span><span class=\"token function\">SetAnimInstanceClass</span><span class=\"token punctuation\">(</span>ZombieAnimAsset<span class=\"token punctuation\">.</span>Object<span class=\"token operator\">-></span>GeneratedClass<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\tZombieSkeletalMesh<span class=\"token operator\">-></span><span class=\"token function\">SetupAttachment</span><span class=\"token punctuation\">(</span>RootComponent<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">// Set the default AIController of the class.</span>\n\tAIControllerClass <span class=\"token operator\">=</span> AZombieAIController<span class=\"token operator\">::</span><span class=\"token function\">StaticClass</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\tAutoPossessAI <span class=\"token operator\">=</span> EAutoPossessAI<span class=\"token operator\">::</span>PlacedInWorldOrSpawned<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre>\n<p>Save and compile all this and now let's go back to Unreal and drag an instance of the ZombieCharacter into the scene. Now if you press press and walk in front of the ZombieCharacter, you should see a debug message pop up on the screen saying that the PlayerCharacter has entered the ZombieCharacter's field of view. Now if you leave the field of view the message should show that you've left.</p>\n<p>You can also enable the gameplay debugger under Edit->Project Settings->Gameplay Debugger like so:</p>\n<p><img class=\"g-image g-image--lazy g-image--loading\" src=\"data:image/svg+xml,%3csvg fill='none' viewBox='0 0 508 475' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-61e8b65e94eb3947e673dcbfd74d2579'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='40'/%3e%3c/filter%3e%3c/defs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-61e8b65e94eb3947e673dcbfd74d2579)' width='508' height='475' xlink:href='data:image/png%3bbase64%2ciVBORw0KGgoAAAANSUhEUgAAAEAAAAA8CAYAAADWibxkAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAKgElEQVRo3s2bVa8UTRCGzw/C3d3d3d3d3d09BA8BAkGCQ5AQNFggQLjgBvkh9eWp5N00883uzpyzu8NFpUd6e7qr6q2qruqtqlevntWpU8dq1aplTZs2tRYtWljr1q29bdasmTVo0MDoU7duXW%2bTkPrWrl07d53m95WkKibZsmVLGzt2rE2ZMsU2bNhgixYtsgkTJtjcuXOdWrVq5YtJOziM/VcXnmMAk2zYsKEzAWmjBdxzTduoUSOrX7%2b%2bLyQtwTTGlwZEtaE6Y5aaqlDzJk2a%2bIRoWbgWHxKMoW8aYrzGjRs7wUhaxlIrBot4nvYbNaWqNm3aWIcOHWzixIk2cOBAbydNmmSjR492WIwcOdLGjRtnnTt3dtvQtm1b4zfFiH7Nmze3Hj16%2bBjjx4%2b3YcOG%2bZj9%2b/f37zDumDFjnLju16%2bfwy3pN0pBVXwQBrD4rl272tChQ23QoEHOACbcp08fGzJkiHXs2NEnx49gRDGiHwzgd3379vVFM9aoUaOsZ8%2beNnjwYP8O34V437t379xvo5Tkm9WhKg0uq4/ayhuwALXh4otxVX2wK/we0riouaDBPdd6B/EtEb9jDK41ZpLvp9IAqXX79u1t%2bPDhLiGkwYejqpj046EGoP4QKo8moVmoOy0aMHny5Nw18BgxYoRDQv357dSpU11LJYSSM4ALGIAqoobdunWL/VhaBsBExkP1wTcti2SxAwYMcPvAc/WB8cwBGCIMoMNz%2bjO/UkvfGRCVGJOGYIBI9yEWkzAAFcYGgPkuXbq4jcGYirjneUgwn98DR82lrBCIk267du180hATQkJMLq0GwIBZs2bZ%2bvXrc7Rx48YcEXSF7Zo1azwIAyL8troQrBYEwo/wYaTTvXt3lxSqmo8BhZ6xCBajiHLBggW%2bwDhasmSJTZ8%2b3WbMmOG457cVcYNxE5cKhiSrLK8guMQxQUzkd%2bAYQ0dorRgDI4fhCwnjSx/6wvxyGLyiDNDkgQB%2bGkNFK2NES2wgv41m5DOWGC2iy8OHD9v9%2b/ft7t27du3aNbt%2b/bq9f//evnz5Yp8/f87Rt2/f7NGjR/b69WtbsWKFR4bMo%2bIMUGAkqSAtFo1LghlYcaTEOxgUpwViInuInTt32oULF2zfvn22e/duO3DggN27d8%2bePXtmT58%2bdXry5Ik9f/7czp8/70xavHixxwmViAjzQkDBCW00vtc7WepokBSFALtM1J9Wfl/xgQj/j70ABplDgMljAOW6cGWdOnXKGUQ9o8VLoDFxGsCmatOmTXb16lW7dOmSSxhtuHXrlt25c8du376dI%2b6RPlCZOXOmM7niGiAIsDikxQYGiQEDVB4pTZs2zSUFMVGsO4FKaLWjNuDy5ct24sQJO3TokB09etRxjg349OmT45/2%2b/fvduXKFYcH7pCdYiY2QAsoFPtLSyShfF4AmMA03B/ubfbs2TZnzhxviQ9odQ3xbv78%2bQ4b2ZZMIKDtrKI%2bJpNk9xe1AVhyFnjw4EHbv3%2b/7dmzx3bt2uUt93v37vVrWhEag03AzWYGAbCPv0ZqSAW1JyosJJWoDQACZINOnz5tDx48cBuAm8MOAIkbN2749atXr%2bznz5/269cvd5cvX770yDAzCEh6Mni9evXyxUcNXaFoUEYQDUD9kSzGEDe4bds2d41btmyxrVu3uls8cuSIkzQA24MHydQNYtSie3RtjHjHtdroJikMhdEEGAkDYQr3EPdQuEjeQ%2bWI%2bVNBAJencBVrTyAEHLR/x1fzjH06EWIUGtIA1HjdunWu7vSDiUmyO%2bXc/CQOhdkBKpUFBIgEtX8nAiROgCFxuYPQCGLVjx075lAKkyzyIqE3KffOLzEEWJDSV4IAi1FkGGZvC0GAd/ShvzZPYRuX/kqacyjbdlheAEOE%2buOSyM6g7kACKCjDC1QKxQksHq0BTmFWGC3KlxWulP//X0YolJ7SYwQxTAp1BwI80y4RTOfL00WzwsBJKTEYCqSUDWYsiPc8r9QeIFYDFPDIwkczs1GVzZemissKR7PBasPrTCGAOiMJjBoGK2mBolBGCEahRag72R6CK1SdZ%2bwtIBVeMLaVlv5fDECdUXXUH2akqQMUSonBVOAD/oGPoIQHARqCVxbq/xcDaMNgpyauKISA4KIaITAQvMKsb02/WRIIyOfj/2uSlAw1AGmj5lh/AiikHVd0yWLxfzEAa406KhtcE3cUMgBmqgaoWmPUvmSx8LwQkEqWEgKQIBDWHdPWHMsOAflioFAKCLBALD3WnwwT12gBpS9aAqBK5v%2bKQoCoDTdYbO%2bfBgJYftwe0SS2ABuAZ%2bAeRqjgknbrmy8bVS0GaBBlessFAfYTCoZ0IkSw47sKmkIvEReAqZRfCs%2bRK4%2bzA0Q6SKVUEFAcgLRRdzQBjeCevQGtiiy859vcs%2bfAY2BApT284zktYwCpUuQO/yqPwwCsdKGKT1oNYJIsiuiSiWuBggPvsQ2KBmEYfXiHTdLiYQS/YQz68bwUwVNV9EiLYv%2bwLF6T8jiaBc6xMcoCQcoKqeZAP651FqkYBEoVPOUtj6MFqgojPU0srRegdrBs2TJbvXq1Z4fWrl0bS7xbtWqVLVy40OEQVx5PuhcpSXmcYEgHG2AA7ipteRwGkFGm/L106VJbvny5M4M2SixeNQMgIkP8T5XHw%2b1tNIOTjwEwD3yDc5XCheswJqClDyEz2pZ5eVzH2hQcQSyGsJbnxc4SMQalMdLe1PvC8vibN2/sw4cPXiaH3r17Zx8/frSHDx/aixcvXFtwk5kVRjBOSA1p4K6UFkNKuCfUmndY60LlcRhArp%2biCIzgmiqRzgGwWAohtG/fvrWLFy/azZs3HSaZMCCEgIKi6Nk9ZXEECxiWrzRGHzSJZAjpdBhHbjHMBUIwU0fj6If9yRQCtOAQ9wSFLgujqGcqmUeLGWF5nEovkj137pyXyc6cOeOlMSrBUaIfEIFJMDnT8jiTQN2JuMLyONIMy%2bPz5s3z4CRfeZxyOOcDWDzXx48fd8xTDv/69asfjaH98eOHLx47gEvMtDaoaxahMFkFDF2rxKX7qAbwjLgf5mHUOEdAkYRaIb4%2b7qQYz%2bmLbcn8lJjK4orGhPWQwmdxNoDNDhq0Y8cOL4pu3rzZi6S0FEYpkHIPcU6Qe/pibDOJA8LCiKw9BxcwTDUpjz9%2b/NhhwIEoPALukGMxXOMSf//%2bbX/%2b/HHvwH3m5XE%2bjI9XHMCGBbuQtjzOInBpuD4kzqEIJMyhiO3btzthF06ePGmnTp3yftgIGJ6JEYzW9KJH2RUJRut8Scrj8h60eA6dDQ43SfI6mRVHw/K4rD6hK1tTsMxWFWjgt3mG3yYiLFQeX7lypas6USRMle2IUvi8XAejE0MAqaH6YQGDaFChMG6Pa2L4uAxyWB7nDPDZs2dzjBKuo%2bXxShyMTgUBpa50UFJ/nFJ2V5ukQhAQTDTGP1kej4MAGFXwg5Qh1B1IECDxDi0oVB6nZdFoCNrDb/QPEIyr/jWik6Jcq2ZQ8fJ43GYIX8yklc5SCgsm0BLjh3%2bkyrcdVrqdcWgZk/EYX%2bePlSrLnAHRIkmomtr8pC2Ph56jWLY3Cwj8B3wHXPv917A6AAAAAElFTkSuQmCC' /%3e%3c/svg%3e\" width=\"508\" alt=\"Debug Settings\" data-srcset=\"/assets/static/debugger-settings.c26726e.bf1f38dc1acf1c9937eeb997109de29d.png 508w\" data-sizes=\"(max-width: 508px) 100vw, 508px\" data-src=\"/assets/static/debugger-settings.c26726e.bf1f38dc1acf1c9937eeb997109de29d.png\"><noscript><img class=\"g-image g-image--lazy g-image--loaded\" src=\"/assets/static/debugger-settings.c26726e.bf1f38dc1acf1c9937eeb997109de29d.png\" width=\"508\" alt=\"Debug Settings\"></noscript></p>\n<p>and now when you press play you can press the apostrophe key and it'll show the ZombieCharacter's sight radius and also show when you're inside of it.</p>\n<h2 id=\"implementing-the-idle-and-roam-states\"><a href=\"#implementing-the-idle-and-roam-states\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a><strong>Implementing the IDLE and Roam States</strong></h2>\n<p>So now that we have our ZombieCharacter detecting our PlayerCharacter, we should take a step back and first create the IDLE and ROAM states of the ZombieCharacter.</p>\n<p>We'll start with what variables we'll need for the ZombieCharacter:</p>\n<ul>\n<li>We'll need a variable named <code>StartLocation</code> that will be populated on <code>BeginPlay</code> with the current location of the ZombieCharacter. This is going to be used to limit the ZombieCharacter's roaming area by making it we always move it in reference to its starting location instead of their current location that they roamed to.</li>\n<li>We need a variable that tells the ZombieAIController whether this ZombieCharacter can roam or not. If this is set to <code>false</code> then the ZombieCharacter will never move unless it has spotted the PlayerCharacter and is chasing them.</li>\n<li>We need a variable for the speed of the ZombieCharacter while they're in the ROAM state.</li>\n<li>We need a variable that says how far from its starting location the ZombieCharacter can roam. This will be used by the ZombieAIController to choose a random spot within this area that the ZombieCharacter can walk to.</li>\n<li>We need a variable for how long of a delay we are going to have between roam calls. Setting this to a value above 0 will mean that after the ZombieCharacter has roamed to a location, they will wait x amount of seconds before they roam to another location.</li>\n</ul>\n<p>Now let's see what methods we need to add to the ZombieCharacter:</p>\n<ul>\n<li>We need to override <code>BeginPlay</code> to set the <code>StartingLocation</code> variable.</li>\n<li>We need to add a method to transition the ZombieCharacter to the IDLE state.</li>\n<li>We need to add a method to transition the ZombieCharacter to the ROAM state.</li>\n</ul>\n<p><strong>Note:</strong> While in our state transitions we're just going to set the new state and the new walk speed of the ZombieCharacter, you can add whatever properties you wish the ZombieCharacter to have in these states.</p>\n<p>Now let's head on over to the header and define what we discussed above:</p>\n<p><strong>ZombieCharacter.h</strong></p>\n<pre class=\"language-cpp\"><code class=\"language-cpp\"><span class=\"token comment\">// The starting location of the ZombieCharacter, used when roaming.</span>\n<span class=\"token function\">UPROPERTY</span><span class=\"token punctuation\">(</span>VisibleAnywhere<span class=\"token punctuation\">,</span> BlueprintReadOnly<span class=\"token punctuation\">,</span> Category <span class=\"token operator\">=</span> RoamState<span class=\"token punctuation\">)</span>\nFVector StartLocation<span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// Indicates whether the ZombieCharacter should be able to roam or not.</span>\n<span class=\"token function\">UPROPERTY</span><span class=\"token punctuation\">(</span>EditAnywhere<span class=\"token punctuation\">,</span> BlueprintReadWrite<span class=\"token punctuation\">,</span> Category <span class=\"token operator\">=</span> RoamState<span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">bool</span> bCanRoam <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// The max speed of the ZombieCharacter in the ROAM state.</span>\n<span class=\"token function\">UPROPERTY</span><span class=\"token punctuation\">(</span>EditAnywhere<span class=\"token punctuation\">,</span> BlueprintReadWrite<span class=\"token punctuation\">,</span> Category <span class=\"token operator\">=</span> RoamState<span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">float</span> RoamSpeed <span class=\"token operator\">=</span> <span class=\"token number\">100.f</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// The max range around its spawn point that the ZombieCharacter can roam.</span>\n<span class=\"token function\">UPROPERTY</span><span class=\"token punctuation\">(</span>EditAnywhere<span class=\"token punctuation\">,</span> BlueprintReadWrite<span class=\"token punctuation\">,</span> Category <span class=\"token operator\">=</span> RoamState<span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">float</span> RoamRadius <span class=\"token operator\">=</span> <span class=\"token number\">300.f</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// The amount of time to pause in between `Roam` calls. If set to 0 there will</span>\n<span class=\"token comment\">// be no delay.</span>\n<span class=\"token function\">UPROPERTY</span><span class=\"token punctuation\">(</span>EditAnywhere<span class=\"token punctuation\">,</span> BlueprintReadWrite<span class=\"token punctuation\">,</span> Category <span class=\"token operator\">=</span> RoamState<span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">float</span> RoamDelay <span class=\"token operator\">=</span> <span class=\"token number\">3.f</span><span class=\"token punctuation\">;</span></code></pre>\n<p>Then, we add a <code>protected</code> block with the <code>BeginPlay</code> method defined:</p>\n<pre class=\"language-cpp\"><code class=\"language-cpp\"><span class=\"token keyword\">protected</span><span class=\"token operator\">:</span>\n\t<span class=\"token comment\">/**\n\t * Called when the game starts.\n\t */</span>\n\t<span class=\"token keyword\">virtual</span> <span class=\"token keyword\">void</span> <span class=\"token function\">BeginPlay</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> override<span class=\"token punctuation\">;</span></code></pre>\n<p>And lastly we define a public block with the IDLE and ROAM state transitions:</p>\n<pre class=\"language-cpp\"><code class=\"language-cpp\"><span class=\"token keyword\">public</span><span class=\"token operator\">:</span>\n\t<span class=\"token comment\">/**\n\t * Called to transition the ZombieCharacter to the IDLE state.\n\t */</span>\n\t<span class=\"token keyword\">void</span> <span class=\"token function\">ToIdleState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">/**\n\t * Called to transition the ZombieCharacter to the ROAM state.\n\t */</span>\n\t<span class=\"token keyword\">void</span> <span class=\"token function\">ToRoamState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre>\n<p>Now in the cpp file we create these methods and for the <code>ToRoamState</code> method we set the new <code>MaxWalkSpeed</code> of the ZombieCharacter:</p>\n<p><strong>ZombieCharacter.cpp</strong></p>\n<pre class=\"language-cpp\"><code class=\"language-cpp\"><span class=\"token comment\">/**\n * Called when the game starts.\n */</span>\n<span class=\"token keyword\">void</span> AZombieCharacter<span class=\"token operator\">::</span><span class=\"token function\">BeginPlay</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n\tSuper<span class=\"token operator\">::</span><span class=\"token function\">BeginPlay</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">// Set the starting location of the ZombieCharacter.</span>\n\tStartLocation <span class=\"token operator\">=</span> <span class=\"token function\">GetActorLocation</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">/**\n * Called to transition the ZombieCharacter to the IDLE state.\n */</span>\n<span class=\"token keyword\">void</span> AZombieCharacter<span class=\"token operator\">::</span><span class=\"token function\">ToIdleState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n\tPreviousState <span class=\"token operator\">=</span> State<span class=\"token punctuation\">;</span>\n\tState <span class=\"token operator\">=</span> ZombieStates<span class=\"token operator\">::</span>IDLE<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">/**\n * Called to transition the ZombieCharacter to the ROAM state.\n */</span>\n<span class=\"token keyword\">void</span> AZombieCharacter<span class=\"token operator\">::</span><span class=\"token function\">ToRoamState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n\tPreviousState <span class=\"token operator\">=</span> State<span class=\"token punctuation\">;</span>\n\tState <span class=\"token operator\">=</span> ZombieStates<span class=\"token operator\">::</span>ROAM<span class=\"token punctuation\">;</span>\n\n\tUCharacterMovementComponent<span class=\"token operator\">*</span> ZombieMovement <span class=\"token operator\">=</span> <span class=\"token function\">GetCharacterMovement</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>ZombieMovement <span class=\"token operator\">!=</span> <span class=\"token keyword\">nullptr</span><span class=\"token punctuation\">)</span>\n\t<span class=\"token punctuation\">{</span>\n\t\tZombieMovement<span class=\"token operator\">-></span>MaxWalkSpeed <span class=\"token operator\">=</span> RoamSpeed<span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre>\n<p>You'll also need the following include for the above to work:</p>\n<pre class=\"language-cpp\"><code class=\"language-cpp\"><span class=\"token macro property\">#<span class=\"token directive keyword\">include</span> <span class=\"token string\">\"GameFramework/CharacterMovementComponent.h\"</span></span></code></pre>\n<p>Now let's look at the ZombieAIController will need to make the ZombieCharacter roam.</p>\n<p>We're going to need the following variables:</p>\n<ul>\n<li>A variable for the timer that will be used to delay calls to the method that makes the ZombieCharacter roams. </li>\n</ul>\n<p>Now let's see what methods we need:</p>\n<ul>\n<li>We need to create the <code>Roam</code> method that will be called to make the ZombieCharacter roam to a random spot. This spot is chosen from a bounding box as wide as <code>RoamBox</code> and then a <code>MoveToLocation</code> command is issued to move the ZombieCharacter to that spot.</li>\n<li>We need to override the <code>BeginPlay</code> method so that we can set the ZombieCharacter to roam if it can.</li>\n<li>We need to override the <code>OnMoveCompleted</code> method which is called when a call to <code>Roam</code> is complete. This method will check to see if the ZombieCharacter is still in the ROAM state and if so then we set a timer to wait x amount of time before calling <code>Roam</code> again.</li>\n</ul>\n<p>So roaming is going to be a repeating sequence of these steps:</p>\n<ol>\n<li>The <code>Roam</code> method is called and the ZombieCharacter is put into the ROAM state and then the ZombieAIController picks a random spot from the <code>RoamBox</code>.</li>\n<li>A <code>MoveToLocation</code> command is issued to move the ZombieCharacter to the above location.</li>\n<li>Once the move is complete, the <code>OnMoveCompleted</code> method is called and this checks to see if the ZombieCharacter is still in the ROAM state and if so, it puts the ZombieCharacter in the IDLE state, so that the idle animation can play, and then it sets a timer that when it expires, it calls the <code>Roam</code> method all over again.</li>\n</ol>\n<p>Ok so let's define the variables and methods in the header file:</p>\n<p><strong>ZombieAIController.h</strong></p>\n<pre class=\"language-cpp\"><code class=\"language-cpp\"><span class=\"token comment\">// The timer used to pause between `Roam` calls.</span>\nFTimerHandle RoamIdleTimer<span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// The amount of time to pause in between `Roam` calls.</span>\n<span class=\"token function\">UPROPERTY</span><span class=\"token punctuation\">(</span>EditAnywhere<span class=\"token punctuation\">,</span> BlueprintReadWrite<span class=\"token punctuation\">,</span> Category <span class=\"token operator\">=</span> RoamState<span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">float</span> RoamDelay <span class=\"token operator\">=</span> <span class=\"token number\">3.f</span><span class=\"token punctuation\">;</span></code></pre>\n<p>And then further down under the <code>protected</code> block:</p>\n<pre class=\"language-cpp\"><code class=\"language-cpp\"><span class=\"token comment\">/**\n * Called when the game starts.\n */</span>\n<span class=\"token keyword\">virtual</span> <span class=\"token keyword\">void</span> <span class=\"token function\">BeginPlay</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> override<span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">/**\n * Called when a move request has been completed.\n */</span>\n<span class=\"token keyword\">virtual</span> <span class=\"token keyword\">void</span> <span class=\"token function\">OnMoveCompleted</span><span class=\"token punctuation\">(</span>FAIRequestID RequestID<span class=\"token punctuation\">,</span> <span class=\"token keyword\">const</span> FPathFollowingResult<span class=\"token operator\">&amp;</span> Result<span class=\"token punctuation\">)</span> override<span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">/**\n * Called to make the ZombieCharacter roam to a different location within its\n * roam radius.\n */</span>\n<span class=\"token keyword\">void</span> <span class=\"token function\">Roam</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre>\n<p>Now let's create the methods in the cpp file:</p>\n<p><strong>ZombieAIController.cpp</strong></p>\n<pre class=\"language-cpp\"><code class=\"language-cpp\"><span class=\"token comment\">/**\n * Called when the game starts.\n */</span>\n<span class=\"token keyword\">void</span> AZombieAIController<span class=\"token operator\">::</span><span class=\"token function\">BeginPlay</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n\tSuper<span class=\"token operator\">::</span><span class=\"token function\">BeginPlay</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">// Simple check but this can be made more complex.</span>\n\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>ZombieCharacter<span class=\"token operator\">-></span>bCanRoam<span class=\"token punctuation\">)</span> <span class=\"token function\">Roam</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">/**\n * Called when a move request has been completed.\n */</span>\n<span class=\"token keyword\">void</span> AZombieAIController<span class=\"token operator\">::</span><span class=\"token function\">OnMoveCompleted</span><span class=\"token punctuation\">(</span>FAIRequestID RequestID<span class=\"token punctuation\">,</span> <span class=\"token keyword\">const</span> FPathFollowingResult<span class=\"token operator\">&amp;</span> Result<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n\tSuper<span class=\"token operator\">::</span><span class=\"token function\">OnMoveCompleted</span><span class=\"token punctuation\">(</span>RequestID<span class=\"token punctuation\">,</span> Result<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>ZombieCharacter<span class=\"token operator\">-></span>State <span class=\"token operator\">==</span> ZombieStates<span class=\"token operator\">::</span>ROAM<span class=\"token punctuation\">)</span>\n\t<span class=\"token punctuation\">{</span>\n\t\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>ZombieCharacter<span class=\"token operator\">-></span>RoamDelay <span class=\"token operator\">></span> <span class=\"token number\">0.f</span><span class=\"token punctuation\">)</span>\n\t\t<span class=\"token punctuation\">{</span>\n\t\t\t<span class=\"token comment\">// If there is a roam delay, we need to set the ZombieCharacter to the idle state</span>\n\t\t\t<span class=\"token comment\">// while we set a timer to run before `Roam` is called again.</span>\n\t\t\tZombieCharacter<span class=\"token operator\">-></span><span class=\"token function\">ToIdleState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t\t\tUWorld<span class=\"token operator\">*</span> World <span class=\"token operator\">=</span> <span class=\"token function\">GetWorld</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>World <span class=\"token operator\">!=</span> <span class=\"token keyword\">nullptr</span><span class=\"token punctuation\">)</span>\n\t\t\t<span class=\"token punctuation\">{</span>\n\t\t\t\t<span class=\"token function\">GetWorld</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-></span><span class=\"token function\">GetTimerManager</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">SetTimer</span><span class=\"token punctuation\">(</span>RoamIdleTimer<span class=\"token punctuation\">,</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span> <span class=\"token operator\">&amp;</span>AZombieAIController<span class=\"token operator\">::</span>Roam<span class=\"token punctuation\">,</span> ZombieCharacter<span class=\"token operator\">-></span>RoamDelay<span class=\"token punctuation\">,</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t<span class=\"token punctuation\">}</span>\n\t\t<span class=\"token punctuation\">}</span>\n\t\t<span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n\t\t\t<span class=\"token comment\">// Otherwise we can just call `Roam` again instantly.</span>\n\t\t\t<span class=\"token function\">Roam</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token punctuation\">}</span>\n\t<span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">/**\n * Called to make the ZombieCharacter roam to a different location within its\n * roam radius.\n */</span>\n<span class=\"token keyword\">void</span> AZombieAIController<span class=\"token operator\">::</span><span class=\"token function\">Roam</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n\t<span class=\"token comment\">// Put the ZombieCharacter in the ROAM state if they are not already. This is important</span>\n\t<span class=\"token comment\">// because when this move is complete, it gets put into an IDLE state so we need to put</span>\n\t<span class=\"token comment\">// ourselves back into a ROAM state.</span>\n\tZombieCharacter<span class=\"token operator\">-></span><span class=\"token function\">ToRoamState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">// Choose a random point within a bounding box with an origin of the ZombieCharacter's</span>\n\t<span class=\"token comment\">// spawn location so that the ZombieCharacter will never roam to new places.</span>\n\tFVector RoamLocation <span class=\"token operator\">=</span> UKismetMathLibrary<span class=\"token operator\">::</span><span class=\"token function\">RandomPointInBoundingBox</span><span class=\"token punctuation\">(</span>ZombieCharacter<span class=\"token operator\">-></span>StartLocation<span class=\"token punctuation\">,</span>\n\t\t<span class=\"token function\">FVector</span><span class=\"token punctuation\">(</span>\n\t\t\tZombieCharacter<span class=\"token operator\">-></span>StartLocation<span class=\"token punctuation\">.</span>X <span class=\"token operator\">+</span> ZombieCharacter<span class=\"token operator\">-></span>RoamRadius<span class=\"token punctuation\">,</span>\n\t\t\tZombieCharacter<span class=\"token operator\">-></span>StartLocation<span class=\"token punctuation\">.</span>Y <span class=\"token operator\">+</span> ZombieCharacter<span class=\"token operator\">-></span>RoamRadius<span class=\"token punctuation\">,</span>\n\t\t\tZombieCharacter<span class=\"token operator\">-></span>StartLocation<span class=\"token punctuation\">.</span>Z\n\t\t<span class=\"token punctuation\">)</span>\n\t<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token function\">MoveToLocation</span><span class=\"token punctuation\">(</span>RoamLocation<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre>\n<p>You'll also need to include the following header for <code>UKismetMathLibrary::RandomPointInBoundingBox</code>:</p>\n<pre class=\"language-cpp\"><code class=\"language-cpp\"><span class=\"token macro property\">#<span class=\"token directive keyword\">include</span> \"Kismet/KismetMathLibrary.h</span></code></pre>\n<p>So now if you save and compile, and replace the instance of the ZombieCharacter in the scene just for good measure since we added more stuff in the constructor, you can press play and see this in action. You'll see the ZombieCharacter walk to a position nearby, wait for 3 seconds, then walk to another random nearby position.</p>\n<p>At this point you can mess with the <code>RoamDelay</code> to have less or more time in between <code>Roam</code> calls or you can just set it to 0 have no delay while roaming. If you're using the animations that I am, it might look a bit sudden when the ZombieCharacter transitions from walking to being idle. This is purely because I have limited access to animations but if you had more animations or were making your own you could make an in-between animation or blend animations for smoother transitions.</p>\n<h2 id=\"implementing-the-chase-and-attack-states\"><a href=\"#implementing-the-chase-and-attack-states\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a><strong>Implementing the CHASE and ATTACK states</strong></h2>\n<p>So now that we have our ZombieCharacter's IDLE and ROAM states set up, let's set up the part that relies on the sight sense, chasing and attacking the PlayerCharacter.</p>\n<p>Again just like we did with the IDLE and ROAM state, let's go over what we need to add to the ZombieCharacter first.</p>\n<p>Here's the variables we'll need to create:</p>\n<ul>\n<li>We need a variable that defines how fast the ZombieCharacter will move will in the CHASE state.</li>\n<li>We need a variable for how long of a delay there should be between the ZombieCharacter chasing the PlayerCharacter and going back to the ROAM state if they can roam. This is to avoid an awkward transition from chasing straight to another animation. With a delay it'll look like the ZombieCharacter is still looking at the PlayerCharacter as they run away and after x seconds they'll go back to idle/roaming.</li>\n<li>Also we need a variable for how much damage an attack from the ZombieCharacter will do to the PlayerCharacter.</li>\n<li>Finally, we'll need a variable for the amount of time between attacks. This should be the same amount of time that the attack animation is so that we don't end the attack animation early.</li>\n</ul>\n<p>And then let's take a look at the methods we'll need:</p>\n<ul>\n<li>We need methods to transition the ZombieCharacter to the CHASE and ATTACK states just like we did for the IDLE and ROAM states.</li>\n</ul>\n<p>So let's get to defining these in the header file:</p>\n<p><strong>ZombieCharacter.h</strong></p>\n<pre class=\"language-cpp\"><code class=\"language-cpp\"><span class=\"token comment\">// The max speed of the ZombieCharacter in the CHASE state.</span>\n<span class=\"token function\">UPROPERTY</span><span class=\"token punctuation\">(</span>EditAnywhere<span class=\"token punctuation\">,</span> BlueprintReadWrite<span class=\"token punctuation\">,</span> Category <span class=\"token operator\">=</span> ChaseState<span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">float</span> ChaseSpeed <span class=\"token operator\">=</span> <span class=\"token number\">300.f</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// The amount of delay after a chase after which the ZombieCharacter will</span>\n<span class=\"token comment\">// resume to roam. This is to help break up an awkward transition from chasing</span>\n<span class=\"token comment\">// straight back to roaming.</span>\n<span class=\"token function\">UPROPERTY</span><span class=\"token punctuation\">(</span>EditAnywhere<span class=\"token punctuation\">,</span> BlueprintReadWrite<span class=\"token punctuation\">,</span> Category <span class=\"token operator\">=</span> ChaseState<span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">float</span> AfterChaseDelay <span class=\"token operator\">=</span> <span class=\"token number\">3.f</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// The amount of damage that the ZombieCharacter does when attacking.</span>\n<span class=\"token function\">UPROPERTY</span><span class=\"token punctuation\">(</span>EditAnywhere<span class=\"token punctuation\">,</span> BlueprintReadWrite<span class=\"token punctuation\">,</span> Category <span class=\"token operator\">=</span> AttackState<span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">float</span> AttackDamage <span class=\"token operator\">=</span> <span class=\"token number\">5.f</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// The amount of delay between attacks, this should be the length of the attack</span>\n<span class=\"token comment\">// animation so that attack animations don't stack up.</span>\n<span class=\"token function\">UPROPERTY</span><span class=\"token punctuation\">(</span>EditAnywhere<span class=\"token punctuation\">,</span> BlueprintReadWrite<span class=\"token punctuation\">,</span> Category <span class=\"token operator\">=</span> AttackState<span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">float</span> TimeBetweenAttacks <span class=\"token operator\">=</span> <span class=\"token number\">2.f</span><span class=\"token punctuation\">;</span></code></pre>\n<p>And then further down where we defined <code>ToRoamState</code>:</p>\n<pre class=\"language-cpp\"><code class=\"language-cpp\"><span class=\"token comment\">/**\n * Called to transition the ZombieCharacter to the CHASE state.\n */</span>\n<span class=\"token keyword\">void</span> <span class=\"token function\">ToChaseState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">/**\n * Called to transition the ZombieCharacter to the ATTACK state.\n */</span>\n<span class=\"token keyword\">void</span> <span class=\"token function\">ToAttackState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre>\n<p>Now in the cpp file we create the <code>ToChaseState</code> and <code>ToAttackState</code> methods. In the <code>ToChaseState</code> method we set the new state and change the max walk speed to the <code>ChaseSpeed</code> value and in the <code>ToAttackState</code> method we just change the state.</p>\n<p><strong>ZombieCharacter.cpp</strong></p>\n<pre class=\"language-cpp\"><code class=\"language-cpp\"><span class=\"token comment\">/**\n * Called to transition the ZombieCharacter to the CHASE state.\n */</span>\n<span class=\"token keyword\">void</span> AZombieCharacter<span class=\"token operator\">::</span><span class=\"token function\">ToChaseState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n\tPreviousState <span class=\"token operator\">=</span> State<span class=\"token punctuation\">;</span>\n\tState <span class=\"token operator\">=</span> ZombieStates<span class=\"token operator\">::</span>CHASE<span class=\"token punctuation\">;</span>\n\n\tUCharacterMovementComponent<span class=\"token operator\">*</span> ZombieMovement <span class=\"token operator\">=</span> <span class=\"token function\">GetCharacterMovement</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>ZombieMovement <span class=\"token operator\">!=</span> <span class=\"token keyword\">nullptr</span><span class=\"token punctuation\">)</span>\n\t<span class=\"token punctuation\">{</span>\n\t\tZombieMovement<span class=\"token operator\">-></span>MaxWalkSpeed <span class=\"token operator\">=</span> ChaseSpeed<span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">/**\n * Called to transition the ZombieCharacter to the ATTACK state.\n */</span>\n<span class=\"token keyword\">void</span> AZombieCharacter<span class=\"token operator\">::</span><span class=\"token function\">ToAttackState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n\tPreviousState <span class=\"token operator\">=</span> State<span class=\"token punctuation\">;</span>\n\tState <span class=\"token operator\">=</span> ZombieStates<span class=\"token operator\">::</span>ATTACK<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre>\n<p>Now it's time for the fun part again, adding all of the functionality to the ZombieAIController to enable the ZombieCharacter to chase and attack the PlayerCharacter.</p>\n<p>We're only going to need one new variable here:</p>\n<ul>\n<li>We need a another <code>FTimerHandle</code> to handle the delay between the ZombieCharacter chasing the PlayerCharacter and going back to what it was doing before.</li>\n</ul>\n<p>And now for the methods:</p>\n<ul>\n<li>A <code>Chase</code> method that takes the PlayerCharacter as an argument and it calls <code>MoveToActor</code> as long as the PlayerCharacter has been seen by the ZombieCharacter.</li>\n<li>A <code>StopChase</code> method that stops the ZombieCharacter from chasing the method and sets the timer to make the ZombieCharacter idle after it has lost sight of the PlayerCharacter for a period of time before they go back to the ROAM state.</li>\n<li>A <code>IdleOrRoam</code> method that will replace the call to <code>Roam</code> in the <code>BeginPlay</code> method. This has been moved into its own method because now we need to check if the ZombieCharacter was in the CHASE state previously and if so we update the <code>StartLocation</code> of the ZombieCharacter so that they don't walk all the way back to their initial starting location before they roam again. Instead the ZombieCharacter will now begin roaming at the location they stopped chasing the PlayerCharacter.</li>\n</ul>\n<p>Let's go ahead and define all this in the header first:</p>\n<p><strong>ZombieAIController.h</strong></p>\n<pre class=\"language-cpp\"><code class=\"language-cpp\"><span class=\"token comment\">/**\n * Checks to see if the PlayerCharacter should be idling or roaming and then proceeds to do so. If\n * the ZombieCharacter's `PreviousState` was `CHASE` and the ZombieCharacter is supposed to roam then\n * the `StartLocation` will be updated to be the current location as we don't want the ZombieCharacter\n * to go all the way back to the initial `StartLocation`.\n */</span>\n<span class=\"token keyword\">void</span> <span class=\"token function\">IdleOrRoam</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">/**\n * Called to make the ZombieCharacter chase the PlayerCharacter.\n *\n * @param PlayerCharacter The PlayerCharacter to chase.\n */</span>\n<span class=\"token keyword\">void</span> <span class=\"token function\">Chase</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">class</span> <span class=\"token class-name\">APlayerCharacter</span><span class=\"token operator\">*</span> PlayerCharacter<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">/**\n * Called to make the ZombieCharacter stop chasing the PlayerCharacter and go\n * back to being idle/roaming.\n */</span>\n<span class=\"token keyword\">void</span> <span class=\"token function\">StopChase</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre>\n<p>And now in the cpp file we create these methods:</p>\n<p><strong>ZombieAIController.cpp</strong></p>\n<pre class=\"language-cpp\"><code class=\"language-cpp\"><span class=\"token comment\">/**\n * Called when the game starts.\n */</span>\n<span class=\"token keyword\">void</span> AZombieAIController<span class=\"token operator\">::</span><span class=\"token function\">BeginPlay</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n\tSuper<span class=\"token operator\">::</span><span class=\"token function\">BeginPlay</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">// Put the ZombieCharacter in the IDLE or ROAM state depending on whether they can roam or not.</span>\n\t<span class=\"token function\">IdleOrRoam</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">/**\n * Checks to see if the PlayerCharacter should be idling or roaming and then proceeds to do so. If\n * the ZombieCharacter's `PreviousState` was `CHASE` and the ZombieCharacter is supposed to roam then\n * the `StartLocation` will be updated to be the current location as we don't want the ZombieCharacter\n * to go all the way back to the initial `StartLocation`.\n */</span>\n<span class=\"token keyword\">void</span> AZombieAIController<span class=\"token operator\">::</span><span class=\"token function\">IdleOrRoam</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>ZombieCharacter<span class=\"token operator\">-></span>bCanRoam<span class=\"token punctuation\">)</span>\n\t<span class=\"token punctuation\">{</span>\n\t\t<span class=\"token comment\">// Check to see if the previous state was `CHASE` because if so we need to set the `StartLocation`</span>\n\t\t<span class=\"token comment\">// to the ZombieCharacter's current location.</span>\n\t\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>ZombieCharacter<span class=\"token operator\">-></span>PreviousState <span class=\"token operator\">==</span> ZombieStates<span class=\"token operator\">::</span>CHASE<span class=\"token punctuation\">)</span>\n\t\t<span class=\"token punctuation\">{</span>\n\t\t\tZombieCharacter<span class=\"token operator\">-></span>StartLocation <span class=\"token operator\">=</span> ZombieCharacter<span class=\"token operator\">-></span><span class=\"token function\">GetActorLocation</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token punctuation\">}</span>\n\n\t\t<span class=\"token comment\">// Call the `Roam` method so the ZombieCharacter starts roaming.</span>\n\t\t<span class=\"token function\">Roam</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n\t<span class=\"token keyword\">else</span>\n\t<span class=\"token punctuation\">{</span>\n\t\tZombieCharacter<span class=\"token operator\">-></span><span class=\"token function\">ToIdleState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">/**\n * Called to make the ZombieCharacter chase the PlayerCharacter.\n * \n * @param PlayerCharacter The PlayerCharacter to chase.\n */</span>\n<span class=\"token keyword\">void</span> AZombieAIController<span class=\"token operator\">::</span><span class=\"token function\">Chase</span><span class=\"token punctuation\">(</span>APlayerCharacter<span class=\"token operator\">*</span> PlayerCharacter<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n\tZombieCharacter<span class=\"token operator\">-></span><span class=\"token function\">ToChaseState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token function\">MoveToActor</span><span class=\"token punctuation\">(</span>PlayerCharacter<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">/**\n * Called to make the ZombieCharacter stop chasing the PlayerCharacter and go\n * back to being idle/roaming.\n */</span>\n<span class=\"token keyword\">void</span> AZombieAIController<span class=\"token operator\">::</span><span class=\"token function\">StopChase</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n\t<span class=\"token comment\">// First we have to stop all movement so the ZombieCharacter quits chasing the PlayerCharacter</span>\n\t<span class=\"token comment\">// since they're not supposed to see them anymore.</span>\n\t<span class=\"token function\">StopMovement</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>ZombieCharacter<span class=\"token operator\">-></span>AfterChaseDelay <span class=\"token operator\">></span> <span class=\"token number\">0.f</span><span class=\"token punctuation\">)</span>\n\t<span class=\"token punctuation\">{</span>\n\t\tUWorld<span class=\"token operator\">*</span> World <span class=\"token operator\">=</span> <span class=\"token function\">GetWorld</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>World <span class=\"token operator\">!=</span> <span class=\"token keyword\">nullptr</span><span class=\"token punctuation\">)</span>\n\t\t<span class=\"token punctuation\">{</span>\n\t\t\t<span class=\"token comment\">// If there is an after chase delay then we set the PlayerCharacter to the IDLE state until the</span>\n\t\t\t<span class=\"token comment\">// `ChaseIdleTimer` expires and runs the `IdleOrRoam` method.</span>\n\t\t\tZombieCharacter<span class=\"token operator\">-></span><span class=\"token function\">ToIdleState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t<span class=\"token function\">GetWorld</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-></span><span class=\"token function\">GetTimerManager</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">SetTimer</span><span class=\"token punctuation\">(</span>ChaseIdleTimer<span class=\"token punctuation\">,</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span> <span class=\"token operator\">&amp;</span>AZombieAIController<span class=\"token operator\">::</span>IdleOrRoam<span class=\"token punctuation\">,</span> ZombieCharacter<span class=\"token operator\">-></span>AfterChaseDelay<span class=\"token punctuation\">,</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token punctuation\">}</span>\n\t<span class=\"token punctuation\">}</span>\n\t<span class=\"token keyword\">else</span>\n\t<span class=\"token punctuation\">{</span>\n\t\t<span class=\"token comment\">// Otherwise if there is no delay we can just go straight to the `IdleOrRoam` method.</span>\n\t\t<span class=\"token function\">IdleOrRoam</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre>\n<p>So at this point if you save, compile, and press play you'll notice the ZombieCharacter roaming just like before but now if you get close enough in front of it, the ZombieCharacter will start chasing you until you get out of its vision range (which you can see by pressing the single quote key). If you left the PlayerCharacter and ZombieCharacter movement values to the defaults you should easily be able to run out of the ZombieCharacter's field of view and when you do the ZombieCharacter will stop and look at you and then after the <code>AfterChaseDelay</code>, it will go back to being idle or roaming.</p>\n<p>You might notice that if you let the ZombieCharacter catch up to you and move, the ZombieCharacter will awkwardly run in place as it its still chasing you but it won't move. This is intended as it leaves room for the attack logic which we'll add next.</p>\n<p>So to start setting up attacking, we'll need a <code>UBoxComponent</code> to act as a damage collider. If the PlayerCharacter is within this box then the ZombieCharacter will start attacking the PlayerCharacter and when the PlayerCharacter leaves the box then the ZombieCharacter will go back to chasing the PlayerCharacter.</p>\n<p><strong>ZombieCharacter.h</strong></p>\n<pre class=\"language-cpp\"><code class=\"language-cpp\"><span class=\"token comment\">// When the ZombieCharacter attacks we check to see if the PlayerCharacter</span>\n<span class=\"token comment\">// is inside of this collider.</span>\n<span class=\"token function\">UPROPERTY</span><span class=\"token punctuation\">(</span>VisibleDefaultsOnly<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">UBoxComponent</span><span class=\"token operator\">*</span> ZombieDamageCollider<span class=\"token punctuation\">;</span></code></pre>\n<p>And now we'll need to bind some methods to respond to a component entering and exiting the <code>DamageCollider</code> but we're going to do this in the ZombieAIController class because we want to handle all of the logic in there. Let's take a look at what we'll need:</p>\n<ul>\n<li>We need to create two methods: <code>OnComponentEnterDamageCollider</code> and <code>OnComponentEnterDamageCollider</code>. These methods will be bound to the <code>DamageCollider</code> to respond to when a component enters and leaves the <code>DamageCollider</code>.</li>\n<li>In the <code>OnComponentEnterDamageCollider</code> method we'll have to try to cast the <code>OtherActor</code> to our PlayerCharacter and if we can, then we know that the PlayerCharacter is in attack range so we call the <code>ToAttackState</code> method of the ZombieCharacter to make the attack animation play.</li>\n<li>In the <code>OnComponentLeaveDamageCollider</code> method we'll again have to try to cast the <code>OtherActor</code> to our PlayerCharacter and if we can, then we know that the PlayerCharacter has left attack range to we call the <code>Chase</code> method to make the ZombieCharacter to back to chasing the PlayerCharacter.</li>\n</ul>\n<p><strong>ZombieAIController.h</strong></p>\n<pre class=\"language-cpp\"><code class=\"language-cpp\"><span class=\"token comment\">/**\n * Called when an actor enters the ZombieCharacter's DamageCollider.\n */</span>\n<span class=\"token function\">UFUNCTION</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">void</span> <span class=\"token function\">OnComponentEnterDamageCollider</span><span class=\"token punctuation\">(</span>UPrimitiveComponent<span class=\"token operator\">*</span> OverlappedComp<span class=\"token punctuation\">,</span> AActor<span class=\"token operator\">*</span> OtherActor<span class=\"token punctuation\">,</span> UPrimitiveComponent<span class=\"token operator\">*</span> OtherComp<span class=\"token punctuation\">,</span> int32 OtherBodyIndex<span class=\"token punctuation\">,</span> <span class=\"token keyword\">bool</span> bFromSweep<span class=\"token punctuation\">,</span> <span class=\"token keyword\">const</span> FHitResult<span class=\"token operator\">&amp;</span> SweepResult<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">/**\n * Called when an actor leaves the ZombieCharacter's DamageCollider.\n */</span>\n<span class=\"token function\">UFUNCTION</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">void</span> <span class=\"token function\">OnComponentLeaveDamageCollider</span><span class=\"token punctuation\">(</span>UPrimitiveComponent<span class=\"token operator\">*</span> OverlappedComp<span class=\"token punctuation\">,</span> AActor<span class=\"token operator\">*</span> OtherActor<span class=\"token punctuation\">,</span> UPrimitiveComponent<span class=\"token operator\">*</span> OtherComp<span class=\"token punctuation\">,</span> int32 OtherBodyIndex<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre>\n<p>In the cpp file we bind the above methods in the <code>OnPossess</code> method after we have the reference to our ZombieCharacter and then create the methods with the logic we discussed above:</p>\n<p><strong>ZombieAIController.cpp</strong></p>\n<pre class=\"language-cpp\"><code class=\"language-cpp\"><span class=\"token comment\">/**\n * Called when the ZombieAIController takes over the ZombieCharacter.\n *\n * @param ZombiePawn The ZombieCharacter pawn.\n */</span>\n<span class=\"token keyword\">void</span> AZombieAIController<span class=\"token operator\">::</span><span class=\"token function\">OnPossess</span><span class=\"token punctuation\">(</span>APawn<span class=\"token operator\">*</span> ZombiePawn<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n\tSuper<span class=\"token operator\">::</span><span class=\"token function\">OnPossess</span><span class=\"token punctuation\">(</span>ZombiePawn<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">// Attempt to cast the Pawn that was taken over to a ZombieCharacter and if</span>\n\t<span class=\"token comment\">// successful then we assign it to our `ZombieCharacter` variable.</span>\n\tZombieCharacter <span class=\"token operator\">=</span> Cast<span class=\"token operator\">&lt;</span>AZombieCharacter<span class=\"token operator\">></span><span class=\"token punctuation\">(</span>ZombiePawn<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">// Bind the methods to respond to a component entering or exiting the ZombieCharacter's</span>\n\t<span class=\"token comment\">// DamageCollider component.</span>\n\tZombieCharacter<span class=\"token operator\">-></span>ZombieDamageCollider<span class=\"token operator\">-></span>OnComponentBeginOverlap<span class=\"token punctuation\">.</span><span class=\"token function\">AddDynamic</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span> <span class=\"token operator\">&amp;</span>AZombieAIController<span class=\"token operator\">::</span>OnComponentEnterDamageCollider<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\tZombieCharacter<span class=\"token operator\">-></span>ZombieDamageCollider<span class=\"token operator\">-></span>OnComponentEndOverlap<span class=\"token punctuation\">.</span><span class=\"token function\">AddDynamic</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span> <span class=\"token operator\">&amp;</span>AZombieAIController<span class=\"token operator\">::</span>OnComponentLeaveDamageCollider<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">/**\n * Called when an actor enters the ZombieCharacter's DamageCollider.\n */</span>\n<span class=\"token keyword\">void</span> AZombieAIController<span class=\"token operator\">::</span><span class=\"token function\">OnComponentEnterDamageCollider</span><span class=\"token punctuation\">(</span>UPrimitiveComponent<span class=\"token operator\">*</span> OverlappedComp<span class=\"token punctuation\">,</span> AActor<span class=\"token operator\">*</span> OtherActor<span class=\"token punctuation\">,</span> UPrimitiveComponent<span class=\"token operator\">*</span> OtherComp<span class=\"token punctuation\">,</span> int32 OtherBodyIndex<span class=\"token punctuation\">,</span> <span class=\"token keyword\">bool</span> bFromSweep<span class=\"token punctuation\">,</span> <span class=\"token keyword\">const</span> FHitResult<span class=\"token operator\">&amp;</span> SweepResult<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n\t<span class=\"token comment\">// Try to cast the `OtherActor` to our `PlayerCharacter` and if we can then we</span>\n\t<span class=\"token comment\">// switch the ZombieCharacter to be in the ATTACK state.</span>\n\tAPlayerCharacter<span class=\"token operator\">*</span> PlayerCharacter <span class=\"token operator\">=</span> Cast<span class=\"token operator\">&lt;</span>APlayerCharacter<span class=\"token operator\">></span><span class=\"token punctuation\">(</span>OtherActor<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>PlayerCharacter <span class=\"token operator\">==</span> <span class=\"token keyword\">nullptr</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n\n\tZombieCharacter<span class=\"token operator\">-></span><span class=\"token function\">ToAttackState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">/**\n * Called when an actor leaves the ZombieCharacter's DamageCollider.\n */</span>\n<span class=\"token keyword\">void</span> AZombieAIController<span class=\"token operator\">::</span><span class=\"token function\">OnComponentLeaveDamageCollider</span><span class=\"token punctuation\">(</span>UPrimitiveComponent<span class=\"token operator\">*</span> OverlappedComp<span class=\"token punctuation\">,</span> AActor<span class=\"token operator\">*</span> OtherActor<span class=\"token punctuation\">,</span> UPrimitiveComponent<span class=\"token operator\">*</span> OtherComp<span class=\"token punctuation\">,</span> int32 OtherBodyIndex<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n\t<span class=\"token comment\">// Try to cast the `OtherActor` to our `PlayerCharacter` and if we can then we</span>\n\t<span class=\"token comment\">// switch the ZombieCharacter to be in the CHASE state since it means that the</span>\n\t<span class=\"token comment\">// PlayerCharacter is running away.</span>\n\tAPlayerCharacter<span class=\"token operator\">*</span> PlayerCharacter <span class=\"token operator\">=</span> Cast<span class=\"token operator\">&lt;</span>APlayerCharacter<span class=\"token operator\">></span><span class=\"token punctuation\">(</span>OtherActor<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>PlayerCharacter <span class=\"token operator\">==</span> <span class=\"token keyword\">nullptr</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token function\">Chase</span><span class=\"token punctuation\">(</span>PlayerCharacter<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre>\n<p>Now if you save and compile this and press play, you can see that if you get the ZombieCharacter to chase you and then you let it catch you, the ZombieCharacter will start attacking you. Now if you get out of attack range of the ZombieCharacter you'll see that the ZombieCharacter goes back to chasing you until you either come in attack range again, or leave the sight radius.</p>\n<h2 id=\"implementing-the-dead-state\"><a href=\"#implementing-the-dead-state\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a><strong>Implementing the DEAD state</strong></h2>\n<p>Last thing we have to do is have implement the DEAD state and for this we're going to have to make the following additions:</p>\n<ul>\n<li>Add a <code>bIsDying</code> variable to the ZombieAnimInstance so that the animator knows when it should play the zombie death animation.</li>\n<li>Add a <code>Damage</code> variable to the PlayerCharacter to set how much damage the BulletActor should do. This is set here and in BulletActor because we want it to be editable and we don't have a great way of editing BulletActor variables without blueprints so we'll just have damage here which will be passed to the BulletActor when spawned. We also need to modify the <code>Fire</code> method so that we pass this damage to the BulletActor.</li>\n<li>Add a damage variable and modify the <code>OnBulletHitComponent</code> method of the BulletActor so that it checks whether the BulletActor hit a ZombieCharacter and if so it calls the <code>Hit</code> method on the ZombieCharacter.</li>\n<li>Create a variable for health and a <code>Hit</code> method on the ZombieCharacter that is used to deal damage to the ZombieCharacter and also check to see if it's dead in which case we un-possess the ZombieCharacter and call <code>Destroy</code> on the ZombieAIController so that it doesn't try to move the ZombieCharacter anymore. Notice that instead of a <code>Hit</code> method we could override the <code>TakeDamage</code> method but this is a very simple example so we'll just make something simple.</li>\n<li>Lastly we have to add the zombie dying state to the animation blueprint and make sure that this animation doesn't loop.</li>\n</ul>\n<p>So now that we have that laid out for us, let's start by adding the <code>bIsDying</code> variable to the ZombieAnimInstance class:</p>\n<p><strong>ZombieAnimInstance.h</strong></p>\n<pre class=\"language-cpp\"><code class=\"language-cpp\"><span class=\"token comment\">// Indicates whether the ZombieCharacter is dying or not.</span>\n<span class=\"token function\">UPROPERTY</span><span class=\"token punctuation\">(</span>EditAnywhere<span class=\"token punctuation\">,</span> BlueprintReadOnly<span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">bool</span> bIsDying<span class=\"token punctuation\">;</span></code></pre>\n<p>And then in the cpp file we modify the <code>UpdateAnimationProperties</code> to include the <code>bIsDying</code> variable:</p>\n<p><strong>ZombieAnimInstance.cpp</strong></p>\n<pre class=\"language-cpp\"><code class=\"language-cpp\"><span class=\"token comment\">/**\n * Used by the animation blueprint to update the animation properties above\n * and decide what animations to play.\n */</span>\n<span class=\"token keyword\">void</span> UZombieAnimInstance<span class=\"token operator\">::</span><span class=\"token function\">UpdateAnimationProperties</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n\t<span class=\"token comment\">// Try to get the Pawn being animated and return if a nullptr.</span>\n\tAPawn<span class=\"token operator\">*</span> ZombiePawn <span class=\"token operator\">=</span> <span class=\"token function\">TryGetPawnOwner</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>ZombiePawn <span class=\"token operator\">==</span> <span class=\"token keyword\">nullptr</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">// Try to cast the Pawn to our ZombieCharacter since that's the only</span>\n\t<span class=\"token comment\">// thing we want to animate.</span>\n\tAZombieCharacter<span class=\"token operator\">*</span> ZombieCharacter <span class=\"token operator\">=</span> Cast<span class=\"token operator\">&lt;</span>AZombieCharacter<span class=\"token operator\">></span><span class=\"token punctuation\">(</span>ZombiePawn<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>ZombieCharacter <span class=\"token operator\">==</span> <span class=\"token keyword\">nullptr</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">// Set the variables that are dependent on states.</span>\n\tbIsRoaming <span class=\"token operator\">=</span> ZombieCharacter<span class=\"token operator\">-></span>State <span class=\"token operator\">==</span> ZombieStates<span class=\"token operator\">::</span>ROAM<span class=\"token punctuation\">;</span>\n\tbIsChasing <span class=\"token operator\">=</span> ZombieCharacter<span class=\"token operator\">-></span>State <span class=\"token operator\">==</span> ZombieStates<span class=\"token operator\">::</span>CHASE<span class=\"token punctuation\">;</span>\n\tbIsAttacking <span class=\"token operator\">=</span> ZombieCharacter<span class=\"token operator\">-></span>State <span class=\"token operator\">==</span> ZombieStates<span class=\"token operator\">::</span>ATTACK<span class=\"token punctuation\">;</span>\n\tbIsDying <span class=\"token operator\">=</span> ZombieCharacter<span class=\"token operator\">-></span>State <span class=\"token operator\">==</span> ZombieStates<span class=\"token operator\">::</span>DEAD<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre>\n<p>Now let's head over to the PlayerCharacter and add our <code>Damage</code> variable that can be edited:</p>\n<p><strong>PlayerCharacter.h</strong></p>\n<pre class=\"language-cpp\"><code class=\"language-cpp\"><span class=\"token comment\">// The amount of damage each shot of the PlayerCharacter's gun does.</span>\n<span class=\"token function\">UPROPERTY</span><span class=\"token punctuation\">(</span>EditAnywhere<span class=\"token punctuation\">,</span> BlueprintReadWrite<span class=\"token punctuation\">,</span> Category <span class=\"token operator\">=</span> Player<span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">float</span> Damage <span class=\"token operator\">=</span> <span class=\"token number\">10.f</span><span class=\"token punctuation\">;</span></code></pre>\n<p>Now in the cpp file we modify the <code>Fire</code> method so we can pass this <code>Damage</code> variable to the BulletActor when it's spawned:</p>\n<p><strong>PlayerCharacter.cpp</strong></p>\n<pre class=\"language-cpp\"><code class=\"language-cpp\"><span class=\"token comment\">/**\n * Called when the Fire input action is pressed.\n */</span>\n<span class=\"token keyword\">void</span> APlayerCharacter<span class=\"token operator\">::</span><span class=\"token function\">Fire</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n\t<span class=\"token comment\">// Return early if `GetWorld()` returns a nullptr.</span>\n\tUWorld<span class=\"token operator\">*</span> <span class=\"token keyword\">const</span> World <span class=\"token operator\">=</span> <span class=\"token function\">GetWorld</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>World <span class=\"token operator\">==</span> <span class=\"token keyword\">nullptr</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token keyword\">const</span> FRotator SpawnRotation <span class=\"token operator\">=</span> <span class=\"token function\">GetControlRotation</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">// Since the `BulletSpawnLocation` is in camera space, we have to transform it to</span>\n\t<span class=\"token comment\">// world space before offsetting it from the character location to find the final</span>\n\t<span class=\"token comment\">// bullet spawn location.</span>\n\t<span class=\"token keyword\">const</span> FVector SpawnLocation <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>BulletSpawnLocation <span class=\"token operator\">!=</span> <span class=\"token keyword\">nullptr</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">?</span> BulletSpawnLocation<span class=\"token operator\">-></span><span class=\"token function\">GetComponentLocation</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">:</span> <span class=\"token function\">GetActorLocation</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> SpawnRotation<span class=\"token punctuation\">.</span><span class=\"token function\">RotateVector</span><span class=\"token punctuation\">(</span>GunOffset<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">// Set Spawn Collision Handling Override.</span>\n\tFActorSpawnParameters ActorSpawnParams<span class=\"token punctuation\">;</span>\n\tActorSpawnParams<span class=\"token punctuation\">.</span>SpawnCollisionHandlingOverride <span class=\"token operator\">=</span> ESpawnActorCollisionHandlingMethod<span class=\"token operator\">::</span>AdjustIfPossibleButDontSpawnIfColliding<span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">// Spawn the BulletActor and pass the `Damage` value over to it.</span>\n\tABulletActor<span class=\"token operator\">*</span> BulletActor <span class=\"token operator\">=</span> World<span class=\"token operator\">-></span>SpawnActorDeferred<span class=\"token operator\">&lt;</span>ABulletActor<span class=\"token operator\">></span><span class=\"token punctuation\">(</span>ABulletActor<span class=\"token operator\">::</span><span class=\"token function\">StaticClass</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> FTransform<span class=\"token operator\">::</span>Identity<span class=\"token punctuation\">,</span> <span class=\"token keyword\">nullptr</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">nullptr</span><span class=\"token punctuation\">,</span> ESpawnActorCollisionHandlingMethod<span class=\"token operator\">::</span>AdjustIfPossibleButDontSpawnIfColliding<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\tBulletActor<span class=\"token operator\">-></span>Damage <span class=\"token operator\">=</span> Damage<span class=\"token punctuation\">;</span>\n\tUGameplayStatics<span class=\"token operator\">::</span><span class=\"token function\">FinishSpawningActor</span><span class=\"token punctuation\">(</span>BulletActor<span class=\"token punctuation\">,</span> <span class=\"token function\">FTransform</span><span class=\"token punctuation\">(</span>SpawnRotation<span class=\"token punctuation\">,</span> SpawnLocation<span class=\"token punctuation\">,</span> <span class=\"token function\">FVector</span><span class=\"token punctuation\">(</span><span class=\"token number\">1.f</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1.f</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1.f</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">// Get the animation object for the PlayerCharacter's body mesh and play the fire animation.</span>\n\tUAnimInstance<span class=\"token operator\">*</span> AnimInstance <span class=\"token operator\">=</span> PlayerSkeletalMesh<span class=\"token operator\">-></span><span class=\"token function\">GetAnimInstance</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>AnimInstance <span class=\"token operator\">==</span> <span class=\"token keyword\">nullptr</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n\n\tAnimInstance<span class=\"token operator\">-></span><span class=\"token function\">Montage_Play</span><span class=\"token punctuation\">(</span>GunFireAnimation<span class=\"token punctuation\">,</span> <span class=\"token number\">1.f</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre>\n<p>Next we head on over to the BulletActor so we can add the <code>Damage</code> variable to it:</p>\n<p><strong>BulletActor.h</strong></p>\n<pre class=\"language-cpp\"><code class=\"language-cpp\"><span class=\"token comment\">// The damage this BulletActor should do.</span>\n<span class=\"token function\">UPROPERTY</span><span class=\"token punctuation\">(</span>VisibleAnywhere<span class=\"token punctuation\">,</span> BlueprintReadOnly<span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">float</span> Damage<span class=\"token punctuation\">;</span></code></pre>\n<p>In the cpp file we have to try to cast what we hit to a ZombieCharacter since we only want to deal damage to that and if we can cast it then we'll call the <code>Hit</code> method of the ZombieCharacter passing in <code>Damage</code> which we'll create next.</p>\n<p><strong>BulletActor.cpp</strong></p>\n<pre class=\"language-cpp\"><code class=\"language-cpp\"><span class=\"token comment\">/**\n * Called when the BulletActor hits another component.\n */</span>\n<span class=\"token keyword\">void</span> ABulletActor<span class=\"token operator\">::</span><span class=\"token function\">OnBulletHitComponent</span><span class=\"token punctuation\">(</span>UPrimitiveComponent<span class=\"token operator\">*</span> HitComp<span class=\"token punctuation\">,</span> AActor<span class=\"token operator\">*</span> OtherActor<span class=\"token punctuation\">,</span> UPrimitiveComponent<span class=\"token operator\">*</span> OtherComp<span class=\"token punctuation\">,</span> FVector NormalImpulse<span class=\"token punctuation\">,</span> <span class=\"token keyword\">const</span> FHitResult<span class=\"token operator\">&amp;</span> Hit<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n\t<span class=\"token comment\">// We want to return early if anything is null as it could cause a crash otherwise.</span>\n\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>OtherActor <span class=\"token operator\">==</span> <span class=\"token keyword\">nullptr</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">||</span> <span class=\"token punctuation\">(</span>OtherActor <span class=\"token operator\">==</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">||</span> <span class=\"token punctuation\">(</span>OtherComp <span class=\"token operator\">==</span> <span class=\"token keyword\">nullptr</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">// Cast the `OtherActor` to a `ZombieCharacter` if we can and call its `TakeDamage` method.</span>\n\tAZombieCharacter<span class=\"token operator\">*</span> ZombieCharacter <span class=\"token operator\">=</span> Cast<span class=\"token operator\">&lt;</span>AZombieCharacter<span class=\"token operator\">></span><span class=\"token punctuation\">(</span>OtherActor<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>ZombieCharacter <span class=\"token operator\">==</span> <span class=\"token keyword\">nullptr</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n\tZombieCharacter<span class=\"token operator\">-></span><span class=\"token function\">Hit</span><span class=\"token punctuation\">(</span>Damage<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">// Finally destroy the the BulletActor so we don't end up with a bunch of bullets that</span>\n\t<span class=\"token comment\">// litter the level and impact performance.</span>\n\t<span class=\"token function\">Destroy</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre>\n<p>Moving on we define the <code>Health</code> variable and <code>Hit</code> method for the ZombieCharacter:</p>\n<p><strong>ZombieCharacter.h</strong></p>\n<pre class=\"language-cpp\"><code class=\"language-cpp\"><span class=\"token comment\">// The amount of health the ZombieCharacter has.</span>\n<span class=\"token function\">UPROPERTY</span><span class=\"token punctuation\">(</span>EditAnywhere<span class=\"token punctuation\">,</span> BlueprintReadWrite<span class=\"token punctuation\">,</span> Category <span class=\"token operator\">=</span> Zombie<span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">float</span> Health <span class=\"token operator\">=</span> <span class=\"token number\">100.f</span><span class=\"token punctuation\">;</span></code></pre>\n<p>And then further down where we define the state methods:</p>\n<pre class=\"language-cpp\"><code class=\"language-cpp\"><span class=\"token comment\">/**\n * Called to make the ZombieCharacter take damage and check to see if the\n * ZombieCharacter needs to die.\n */</span>\n<span class=\"token keyword\">void</span> <span class=\"token function\">Hit</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">float</span> Damage<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre>\n<p>And in the cpp file we create the <code>Hit</code> method and in it we subtract the <code>Damage</code> from the <code>Health</code> and if the <code>Health</code> is now at or below 0, then we have the ZombieAIController un-possess the ZombieCharacter and then destroy it so that it won't try to move the ZombieCharacter any further:</p>\n<p><strong>ZombieCharacter.cpp</strong></p>\n<pre class=\"language-cpp\"><code class=\"language-cpp\"><span class=\"token comment\">/**\n * Called to make the ZombieCharacter take damage and check to see if the\n * ZombieCharacter needs to die.\n */</span>\n<span class=\"token keyword\">void</span> AZombieCharacter<span class=\"token operator\">::</span><span class=\"token function\">Hit</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">float</span> Damage<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n\t<span class=\"token comment\">// Take the damage to apply from the ZombieCharacter's damage.</span>\n\tHealth <span class=\"token operator\">-=</span> Damage<span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">// If the ZombieCharacter's `Health` is at or below zero then we have take care of disabling the</span>\n\t<span class=\"token comment\">// ZombieAIController.</span>\n\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>Health <span class=\"token operator\">&lt;=</span> <span class=\"token number\">0.f</span><span class=\"token punctuation\">)</span>\n\t<span class=\"token punctuation\">{</span>\n\t\t<span class=\"token comment\">// Have the ZombieAIController un possess the ZombieCharacter and then destroy the</span>\n\t\t<span class=\"token comment\">// ZombieAIController so it doesn't give any more input to the ZombieCharacter.</span>\n\t\tAAIController<span class=\"token operator\">*</span> ZombieAIController <span class=\"token operator\">=</span> Cast<span class=\"token operator\">&lt;</span>AAIController<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token function\">GetController</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>ZombieAIController <span class=\"token operator\">==</span> <span class=\"token keyword\">nullptr</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n\t\tZombieAIController<span class=\"token operator\">-></span><span class=\"token function\">UnPossess</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\tZombieAIController<span class=\"token operator\">-></span><span class=\"token function\">Destroy</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t\t<span class=\"token comment\">// Put the ZombieCharacter in the `DEAD` state so that the animation blueprint will play</span>\n\t\t<span class=\"token comment\">// the zombie dying animation.</span>\n\t\t<span class=\"token function\">ToDeadState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre>\n<p>Finally we just have to make sure to add the zombie dying animation to the animation blueprint and make sure that it doesn't loop. So in the animation blueprint just make a connection from every state to the dying state and set it to trigger when <code>Get Is Dying</code> is set to <code>true</code> like so:</p>\n<p><img class=\"g-image g-image--lazy g-image--loading\" src=\"data:image/svg+xml,%3csvg fill='none' viewBox='0 0 924 541' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-7a088eace4d1073b7a043889c6be92cf'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='40'/%3e%3c/filter%3e%3c/defs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-7a088eace4d1073b7a043889c6be92cf)' width='924' height='541' xlink:href='data:image/png%3bbase64%2ciVBORw0KGgoAAAANSUhEUgAAAEAAAAAlCAYAAADyUO83AAAACXBIWXMAAA7DAAAOwwHHb6hkAAAJeklEQVRo3sVaWW8cxxHWzwiCUOTeMzv3zl5cknuRoh1eMkORMizREh3FMqLEMmDHAmyTCBIEeQjgpwB5T57yC/I/kre853dU6quenu2dPbi7oq2H5vT21FR3V1d9dTTvFQoFsiyLqtWqNNu25VkqlaRvNoyXy%2bWU3hwHfaVSkXd6HH2MT%2bM/j4/um9%2bA3hyfxUe/n8VHj2Ot6N8rFovCwHGclBB9MDY/1uP4EAxMev2u1WpRs9mkWq1G9XqdGo0GRVEk/Sz/aXxmzas3uuh6pvHR77UgsWf0UwEsM2FWYGAYhKEI4Oj4iC4/vqSLx4%2blf35xTs1WcyEBzJp33nr0hpbhMyEAzcBsWKD5e9rC08bvAs%2bjkE87CAI%2b%2bTo1%2bfTr/IxEG2JyXW%2b0cHcGH%2bPksnPPW495wiafLG/NB89UABsbGwQh4IfZgA3ZMXyMcdhOGTbEY2guM%2bvwhkFTBBZwC2yL6Uu0kcuRw7RB4FPF5hNIsELzQd%2bcI5/PT8y7yHpMPujP4wN67Bk097IgOEuF9GmZJhC6Lln8u7u1Jeqfnh63yHfJ850UdELPJb8W8XtvArzMNg8Es2OmSk8DwSxvE0zHQHCWKuLp8SZdVlkXfd6EZbEAmN7n3zus9nVW%2be3tbZGmk0wE2lrgiQBGQmGBBSyUekS1YUwVqzw2bxa8ZqnuPJPMmsA0Pnp8IRAslSu0nitQrliWli9Balh44nZYgjudDr1584YODg6UEHgilzcrGuA5Cb0SWMPzyY34u5rLC7eSeVcDQb3pO9cAfYK5QpHOf96jP79%2bSt9dHdO3zw/p5pfH1IkDPj02gapNm%2bzytlj9T09PqdvtCkMRgOOkJiCqzjwbPLbJ2uSzNnmsHZblyeYdp/pu3aAGFzDSzLCBn67dp99/dkH/%2b9df6d9/v6H//OOG/vvPP9LhYJN%2b8rN13ohL%2b3t7whg88oW8kjILxuWnmECiAanKMX%2b8iyKPAZFV2vb5e3fs5LIBz4%2bCAQheOqzKADJBVCa6v5Gnq7P36W/fvqC/fPmMvv/dFX3/9RV9dXVKXz5/SJ9cHLPbi2ljfV0QFd4kn8tLK7JAor5PZbtE99fWxTQK%2bYIIKsfvrWKJSjYLrVjgb21%2bz/18TmjW1tYUfaEw1sA/O5bOy/To30avx0GfY%2b%2b0zmu/h0jt/PycXr16RS9fvqTNzU3q9Xq00%2bvTH754Ts/P3qNPnz2mr1%2b/pN%2b8eEKff3pJf3rza/rmV2dU4tOO4pCCKCCHT9sPffIjn3/D1i0KYlZzjEf%2bRIvbsZjPcLhLg8GQBsMB9fo92t/fp36/L/GEqbrzQHCZOGACBPHHYzTHhL7vp2p0fz1HV7/Yp5vPHtEXHx/zyX8gJ//68pi%2beXFK1799RsMH71N/0KMet%2b2dbdlAl9tg0KePPrygB%2b/tUWe7I%2b/N1u13ReOCMKD%2bsE9nj87oER8ChIAocjAYpGvJLvzOI0GohbZ9EwzLiWRrfKq10BObjnHCjk3NOKKjo4OEqS%2b%2bvcRqjZigwp7DZ7S/ub6WE4bK2ZaaUFpFJUteyIDIgrckYFKxhecFoqY4EN8PxjzE24LgwqFwloFtq2aJZijBFHmzvV6XMaPGjBj0XJyWJ8%2bqeIEqddpN1ipPQDCrhi48BNwh3Kk5b9UVPsrNMh83nBDAXcQBExqwUDJkRIIIZ6HC7XYjWaxGad4YLzrkBk3xA9Bn0lgIjAMi17Mn0B58KhVbNg6%2bjhNwP5D%2bvHT4rbwA0FDH0mYzY28dZ1fk9IvSkNz0etv8bVGNA5WZT4030fMjdnc%2bv48orlmiMZpvGW6RN191yul4Noa3LIBelc1gi4WAHEOvZ7Q%2bMxfIrjE7bn6jx9NcYNV02GM77zPgwdcrlGbJyglbkvxEEgeADzTHT%2bzZFpogxm9LzGc6eKlvbDsU84NGYPM/WDq8bDKkGQAHGo1IgE0ztpNI0gyFHceTTQhWIBCqeyqnsOYtXGGLEh7clitjswQwLamaJwCtEStVhDSjer3BcUOT8/uqbEgvBLnAeDKULJDDXy/kZIgTIiVIPa89c14IDgJU2BCM4cU7qwipzdfZFR6xFuywEFzWBEcWqQUQBaNcoMpqjEAp6DCohQ7FLACgvUqNmTbs8eZqBphWJ4QA3tAGCENtxvlhK0ImA9PF4EOAx%2bHhIV1/d82p8BbH9hgvib2a6bBvpMNV1pJqi3mEqB16IjTbhpmgRtAQYSAxmuW%2bYAJq8xyL%2bJscQ7QTr/GW6fCqFSE0xNIQQMiB0sZGLqWzEAw5wIOKxPl6HKjvBtAS/l1R8bvSKOCBI%2biv6EtT1wMhQBMqFZ%2b/tQR4V6ksjVWEVgFBjRl4ttubHBM0R2V0bQIGCKo4IjGDyBUN0XWCcRPzmb86aW3n2fUAB7Qp3Fk2uGpVGCAWhiEnND1mVhjZrIkBhgAQAIU1V%2bx3XlVYew3tAcaxwUk8SiixyJ25wVXvBRC39zm5cRxr5AWmlMSElk8/CNwF0FuNww1qQWQxCeOeV3u39wL6N7K/MHRTPkoDvHEN4BbWcbLVWzVgfF5HBKBAcBRQ4el5sVSWRu50hWRomarwtGou/H%2br1eYWq02JAHizPuJ9o8rLG4f96xLYKlXhkWl4ht2HiTu1Uy%2b0FAas6gU06qo6oMupb1PuAeTOgJvvWmIW8A6SKnPoG0ZVAb/F7wWK4iFG6yklHkO5RTzhWSAEeIeV7gXu4mZI1DsMxCXu7u3S3t4ePXiwR4Nhn3Z3dxkkh7SzsyPpsdQcJ26GJjEAaB8EndQTwOUpmtGJon6gTCNk2pbkF7PWv1JZfJm7QXgDXI2hqoP7wJMPHtIuC%2bH45JiOTo6o1W5JAqWSG1UWRx/aM4rsXCPpgbtrpzigQnAnoXfTSBB8YAJB0OY19NPbaX2wZtObfmsQnAZeSgvCVLraQ2h6vFPJTcDjYZLc%2bIk7C5IWSkCkfT3qC/o96DWNej/io7ABt9Bdjkva0hrNhhR5zYZba40xK4fC89yObNyeUs62zeKHDqjKCXqbAjbT4erYHJMHMuKjANBiAdRos9Ohg8MDevLkiWji4dEhPb18SicPTyiO40kTuKt/kJiVli7iTVTZbfIfJDSq3/YPEnodKOyiyo2CKgquYRSK5uHkUfpHf%2bIfJFapCC1CP6syM82bzKrwTKvkzKMXD5SsQe8r2yYqQqveDs8KMG4bN%2b/0Fo0DFr0bXLYgMvd2eKl/kMhcUMwbv43Pj/0PEv8HTAXqV19J/ZYAAAAASUVORK5CYII=' /%3e%3c/svg%3e\" width=\"924\" alt=\"Zombie Animation Dying\" data-srcset=\"/assets/static/zombie-animation-dying.82a2fbd.c458ab9ed06e67d8c8df2ab5f27dd5a7.png 480w, /assets/static/zombie-animation-dying.109a16b.c458ab9ed06e67d8c8df2ab5f27dd5a7.png 924w\" data-sizes=\"(max-width: 924px) 100vw, 924px\" data-src=\"/assets/static/zombie-animation-dying.109a16b.c458ab9ed06e67d8c8df2ab5f27dd5a7.png\"><noscript><img class=\"g-image g-image--lazy g-image--loaded\" src=\"/assets/static/zombie-animation-dying.109a16b.c458ab9ed06e67d8c8df2ab5f27dd5a7.png\" width=\"924\" alt=\"Zombie Animation Dying\"></noscript></p>\n<p>Now double click in this animation and in the settings on the right make sure that Loop Animation isn't ticked like so:</p>\n<p><img class=\"g-image g-image--lazy g-image--loading\" src=\"data:image/svg+xml,%3csvg fill='none' viewBox='0 0 1104 454' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-c3de4533821366daea4ecb2d8bb3056b'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='40'/%3e%3c/filter%3e%3c/defs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-c3de4533821366daea4ecb2d8bb3056b)' width='1104' height='454' xlink:href='data:image/png%3bbase64%2ciVBORw0KGgoAAAANSUhEUgAAAEAAAAAaCAYAAAAHfFpPAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAG6klEQVRYw9VZWVNURxjlySTKqiyCDLPvwLDMMMMy7MO%2bgwQJRQwWSkUwwVIrDyFlYvIQjA/GZy2rLC2tslx%2b4Umfxu9Wc5mBQZJK8XCq%2b3b31/d%2bp7%2btZwrKy8tRUVGByspKsE9cuHBBt1VVVXpOxtmXOXPcnDt//vyBuWyyfB/3J6qrq/UcYf%2bO0tJS1NTUoLu7G1NTU5iZmcHw8DAaGxsRi8U0GhoaUF9fvw8cM8H1e4jpNhqNatmCQCAAO7xeL4LB4IFxjnHO7/cfmOezz%2beD2%2b0%2bVDbb%2bwjuSXnzmetdLpceT6VS6O/vx8DAgEZbWxuSySQSiQTa29sxNDSkkclkNPr6%2bvT6np4epNNpdHR0KLSrfRJItSf1mvb2FApCoRDC4bAFPvPl5piMsxVl7POEKGmuN/vc1/4%2bU5Z7y3o%2bc73H49EtFZicnMTs7CzGxsa0UgIqs7KyorG8vIwrV67odYuLixrz8/OYnp7BxMQI%2bgc6FVG92N7e1nIFfBFfKJCTlL45LuTwQ%2b0ybMV6csly32zvE1khSMgQixICJiYmNOgK09PTmghawdLSEp4%2bfYoXL17g1atXGq9fv8aDBw/Q1dWFzs5Oi6yurrS2io2NDW1JOV0gl6mKC2SbO8wFjtqXskKQPHO90%2bnUfbEAgZg6CeDJU%2bF3797hw4cPeP/%2bPT5%2b/IiHDx9qpRk/BHzu7e3F5uYmBgcHUZDNHMUU7YhEItbpZ5sT62H/uPtSlhBZIUJcgKdoEsCTpUJCwMuXL/HmzRu8ffvWwu7urqW0ScA%2bC8g3BphKHObHhxFwkhjAoCbK0/zpCnNzc1hYWNBkmG4kYLQX5cUFpN/S0qLbU0OA3QVIAE%2bQlkESHj9%2brOPAs2fPNJ4/f46dnZ2sLkALWF9fP10WIEGQgY8tSWCaowsw0j958jcePdpVeGThzp07OWPAzZs392LAaSGAuX58fFxnALYsiEgG64PZ2TmsrV1Fc3NYoUWhSaFZ1whmujQJ2Nrayh4E/08CpL7IRgA/WnyfyrPooflTKUlzPT29ep2Apm6evmkFIltgT2lSgf1XafAwWakEpSq0p0FRjKbP1jzVXMoehQKzKBHISdkhp2gvZswq0awEj7OvECGyQgQJlVKYdwAph/lMM2c0b2pqsvps8wFluD6rC%2bTK1yd1gaNkD3MBnhYLHyo/MjKiLYJpjoq0trZqfxcS8gHvEpQ7NUFwL9jN6ujPIMg%2ba3zGhNXVVV3ZMSMc5QoSBO/evbt3FzhNaZDmz4LIDHQS7DhnT3m5CGBLS6LcPgIiEYWwennAv9fPghO5wAkJMFOaHVIaH7bGvl5XglYtHgrD649ouDxKkUB07zmwB49PKRBkzb5HgF3Jo%2b8Cn%2b4RtqtyrruAxCISwJYE2Ov6XKebjwVYWSCgU04AsQY/hrrcGOxwoj/lQEa1Q51u3WY6XJjoUxeShIrKnqPTYEBZkI%2bpVNfkPo2APk23bmlJcsKmrKRfSYNU3kyD2RSwFzn5pj9ZqwlwevxYGXDjr43L%2bP36En69No%2bHP1zF/bV57Kr2t81vsDzRjdXpKOpDDni8fq2kefEIqg93ulxYnBzAnzvb%2bOPn29i5fQO//XRL4/69Lfxy7xZ%2b/P4apsaHEI%2b3WKcrtYfUCUIG5%2bvq6nQ/Hwv4rDogQt8MRTCfrkV3rBGdzXEkG2JINbUgEWtCsjWOuEoX1Q4vehM1SDSqvOwPHcj1EuTaWuoxnkkj06cqrY5W9KWT6E2n0NWRQHuqVaWgRuVObuVmLsuVCPH7k7jAZxEQpgLhKPpby1Fcdg6FpUUKhSgiyop0W6IwNjmF7uYq9KQa0NyaUHk0oXOvgHmVOdnt86JfpRefihXh%2bihKL5Thq8KzOFdciLNF51BUUoSSshJUVFbsiwX5BMHjBLl8YREw3FKuPrQQZwqLceZcEb5g%2bwlfFhWj0ulHIliCZEyZqQqG0U8nJ%2bCvrPzoi9VVKoD6UF1zEbWOSyg9X4ri0mJFYrFuCZJQXlF%2brCzAqC0p799EQSQSUuYYxs5yLTZXmjGdbsB8Xz0W%2bhstXFaY6q7HvSkH4lGXUjCc1QX40Q6Hw0Kto1YHMQ2XU49JX0rmfAlg1UYrE4uLx%2bP7rE8jEdeWaT0bYJFkygtUGlS%2bFgyjW0X49fEQ1jIhfDcYwLWhkIU1hRujYcymVbQ%2bIpfzY/m7vFiF3UJMq8mXAPmhlTc4gu4gP3bSKvi7v9frxuzX1zG3%2bC2GhwYxqq7KLJlHR0f1Ol6nWSozqJqwCiG/OlWnJ4Q6bxCXnD44vSGFoAWOe/xHF0K5LkNmJWiO5UMAswJPT2KAFD1SzFC5pJofyIxhMDOqq0LzPwQxdxJBSzLxD7n5PJ7p%2bDH8AAAAAElFTkSuQmCC' /%3e%3c/svg%3e\" width=\"1104\" alt=\"Dying Animation No Loop\" data-srcset=\"/assets/static/dying-animation-no-loop.82a2fbd.ed4bea5cd4c23fc4cbdacdb6263a84e6.png 480w, /assets/static/dying-animation-no-loop.2d81b5b.ed4bea5cd4c23fc4cbdacdb6263a84e6.png 1104w\" data-sizes=\"(max-width: 1104px) 100vw, 1104px\" data-src=\"/assets/static/dying-animation-no-loop.2d81b5b.ed4bea5cd4c23fc4cbdacdb6263a84e6.png\"><noscript><img class=\"g-image g-image--lazy g-image--loaded\" src=\"/assets/static/dying-animation-no-loop.2d81b5b.ed4bea5cd4c23fc4cbdacdb6263a84e6.png\" width=\"1104\" alt=\"Dying Animation No Loop\"></noscript></p>\n<p>At this point if you save and compile and press play, you should be able to shoot the ZombieCharacter as many times as it needs to get to 0 health or lower and you should see the dying animation play and no further movement from the ZombieCharacter.</p>\n<p><strong>Bonus</strong></p>\n<p>As a bonus we'll go over how to destroy the ZombieCharacter after a period of time. To do this, we create a timer that runs for the length of the zombie dying animation and after that we can use <code>SetLifeSpan</code> to destroy the ZombieCharacter after a period of time like so:</p>\n<p><strong>ZombieCharacter.h</strong></p>\n<pre class=\"language-cpp\"><code class=\"language-cpp\"><span class=\"token comment\">// The amount of seconds long that the zombie dying animation is. This is used with</span>\n<span class=\"token comment\">// the `SecondsAfterDeathBeforeDestroy` variable to make sure that the dying animation</span>\n<span class=\"token comment\">// plays out fully before the ZombieCharacter is destroyed.</span>\n<span class=\"token function\">UPROPERTY</span><span class=\"token punctuation\">(</span>EditAnywhere<span class=\"token punctuation\">,</span> BlueprintReadWrite<span class=\"token punctuation\">,</span> Category <span class=\"token operator\">=</span> DyingState<span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">float</span> DyingAnimationLengthInSeconds <span class=\"token operator\">=</span> <span class=\"token number\">3.f</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// The amount of time after the ZombieCharacter dies that they will destroy. A value</span>\n<span class=\"token comment\">// of 0 means that the ZombieCharacter will be destroyed immediately after the dying</span>\n<span class=\"token comment\">// animation plays. A value below 0 means that the ZombieCharacter will never be destroyed.</span>\n<span class=\"token function\">UPROPERTY</span><span class=\"token punctuation\">(</span>EditAnywhere<span class=\"token punctuation\">,</span> BlueprintReadWrite<span class=\"token punctuation\">,</span> Category <span class=\"token operator\">=</span> DyingState<span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">float</span> SecondsAfterDeathBeforeDestroy <span class=\"token operator\">=</span> <span class=\"token number\">5.f</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">protected</span><span class=\"token operator\">:</span>\n\t<span class=\"token comment\">/**\n\t * The timer used to wait until the dying animation has finished playing.\n\t */</span>\n\tFTimerHandle DeathAnimationTimer<span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">protected</span><span class=\"token operator\">:</span>\n\t<span class=\"token comment\">/**\n\t * Called after the death animation finishes playing.\n\t */</span>\n\t<span class=\"token keyword\">void</span> <span class=\"token function\">AfterDeathAnimationFinished</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre>\n<p>And then in the cpp file we set the timer to run after the ZombieAIController has been destroyed and we create the <code>AfterDeathAnimationFinished</code> method that the timer runs when finished to destroy the ZombieCharacter:</p>\n<p><strong>ZombieCharacter.cpp</strong></p>\n<pre class=\"language-cpp\"><code class=\"language-cpp\"><span class=\"token comment\">/**\n * Called to make the ZombieCharacter take damage and check to see if the\n * ZombieCharacter needs to die.\n */</span>\n<span class=\"token keyword\">void</span> AZombieCharacter<span class=\"token operator\">::</span><span class=\"token function\">Hit</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">float</span> Damage<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n\t<span class=\"token comment\">// Take the damage to apply from the ZombieCharacter's damage.</span>\n\tHealth <span class=\"token operator\">-=</span> Damage<span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">// If the ZombieCharacter's `Health` is at or below zero then we have take care of disabling the</span>\n\t<span class=\"token comment\">// ZombieAIController.</span>\n\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>Health <span class=\"token operator\">&lt;=</span> <span class=\"token number\">0.f</span><span class=\"token punctuation\">)</span>\n\t<span class=\"token punctuation\">{</span>\n\t\t<span class=\"token comment\">// Have the ZombieAIController un possess the ZombieCharacter and then destroy the</span>\n\t\t<span class=\"token comment\">// ZombieAIController so it doesn't give any more input to the ZombieCharacter.</span>\n\t\tAAIController<span class=\"token operator\">*</span> ZombieAIController <span class=\"token operator\">=</span> Cast<span class=\"token operator\">&lt;</span>AAIController<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token function\">GetController</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>ZombieAIController <span class=\"token operator\">==</span> <span class=\"token keyword\">nullptr</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n\t\tZombieAIController<span class=\"token operator\">-></span><span class=\"token function\">UnPossess</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\tZombieAIController<span class=\"token operator\">-></span><span class=\"token function\">Destroy</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t\t<span class=\"token comment\">// Put the ZombieCharacter in the `DEAD` state so that the animation blueprint will play</span>\n\t\t<span class=\"token comment\">// the zombie dying animation.</span>\n\t\t<span class=\"token function\">ToDeadState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t\t<span class=\"token comment\">// Now we set a timer for the length of the dying animation to make sure that if we have to</span>\n\t\t<span class=\"token comment\">// destroy the ZombieCharacter, we don't do it until the animation has finished playing.</span>\n\t\tUWorld<span class=\"token operator\">*</span> World <span class=\"token operator\">=</span> <span class=\"token function\">GetWorld</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>World <span class=\"token operator\">==</span> <span class=\"token keyword\">nullptr</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n\t\tWorld<span class=\"token operator\">-></span><span class=\"token function\">GetTimerManager</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">SetTimer</span><span class=\"token punctuation\">(</span>DeathAnimationTimer<span class=\"token punctuation\">,</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span> <span class=\"token operator\">&amp;</span>AZombieCharacter<span class=\"token operator\">::</span>AfterDeathAnimationFinished<span class=\"token punctuation\">,</span> DyingAnimationLengthInSeconds<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">/**\n * Called after the death animation finishes playing.\n */</span>\n<span class=\"token keyword\">void</span> AZombieCharacter<span class=\"token operator\">::</span><span class=\"token function\">AfterDeathAnimationFinished</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n\t<span class=\"token comment\">// Now that the dying animation has finished playing we can see if we need to Destroy</span>\n\t<span class=\"token comment\">// the ZombieCharacter.</span>\n\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>SecondsAfterDeathBeforeDestroy <span class=\"token operator\">==</span> <span class=\"token number\">0.f</span><span class=\"token punctuation\">)</span>\n\t<span class=\"token punctuation\">{</span>\n\t\t<span class=\"token comment\">// The ZombieCharacter should be destroyed immediately so we don't need to set a</span>\n\t\t<span class=\"token comment\">// timer.</span>\n\t\t<span class=\"token function\">Destroy</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n\t<span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>SecondsAfterDeathBeforeDestroy <span class=\"token operator\">></span> <span class=\"token number\">0.f</span><span class=\"token punctuation\">)</span>\n\t<span class=\"token punctuation\">{</span>\n\t\t<span class=\"token comment\">// We have to wait some time before the ZombieCharacter should be Destroyed so we</span>\n\t\t<span class=\"token comment\">// set a timer that runs the method to destroy the ZombieCharacter.</span>\n\t\t<span class=\"token function\">SetLifeSpan</span><span class=\"token punctuation\">(</span>SecondsAfterDeathBeforeDestroy<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre>\n<h2 id=\"conclusion\"><a href=\"#conclusion\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a><strong>Conclusion</strong></h2>\n<p>With the above setup you should be able to even group ZombieCharacter together and form hordes and and when the PlayerCharacter gets close they'll attack at the same time. I might expand on this tutorial in the future to make it into a series about developing a modern survival style game. Thank you for reading and be sure to the check out the <a href=\"\">repo</a> for a full example.</p>\n"}},{"node":{"title":"Unreal C++ Creating An AI That Follows & Leads","path":"/unreal-c-creating-an-ai-that-follows-and-leads/","date":"25. August 2020","timeToRead":29,"description":"Learn how to create an AI that follows and leads the player","cover_image":{"type":"image","mimeType":"image/png","src":"/assets/static/main.4303ea3.0b05b0644aa83e7fb840b562679686d8.png","size":{"width":847,"height":525},"sizes":"(max-width: 847px) 100vw, 847px","srcset":["/assets/static/main.a67b0b2.0b05b0644aa83e7fb840b562679686d8.png 480w","/assets/static/main.4303ea3.0b05b0644aa83e7fb840b562679686d8.png 847w"],"dataUri":"data:image/svg+xml,%3csvg fill='none' viewBox='0 0 847 525' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-e25f127c9c04fcb1d54fa24829b54f4d'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='10'/%3e%3c/filter%3e%3c/defs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-e25f127c9c04fcb1d54fa24829b54f4d)' width='847' height='525' xlink:href='data:image/png%3bbase64%2ciVBORw0KGgoAAAANSUhEUgAAAEAAAAAoCAYAAABOzvzpAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAP0UlEQVRo3pVaaZdU1RXtH5EAPVV3dVV3Vc8NzRDjEjGISgcciShqXCExIgGNKyoxJsbEARUHhKZp6LHmoefqeaIHmpngWvlDJ/uce%2b%2br%2b2oA8%2bGuV/Wq6tXd%2b%2byzz7n3vZLvzw7T2R9G6IfzY3S%2bc5w6L0zQhYsZ6uqepIuXpujS5Wm63DtDPX2z1Ns/R30D89Q/uEADoUUaDC9RKLJM4egyRaJXKBJboWh8hWLxVYolVimeWKN4co0SPFLrMpLpq85IDdljI2fkfG79Lqmvxdfmwf8Vi6v/jsSuyFzCmFcosiRzHMRceb48bxkDC9TXP0%2b9fXNUcs4Fegqgp%2blSzwxAzwL0HEDPAzQADwJwaMkCbQBrsHoyAlIDdYANb1Baj6GRa%2b4xqsawM647r%2bWznO%2bnrWsZcvJISShSmJBoTJHC8%2bV58/yZjAEhYp5KOruy0e7maPfM6mgr4PnRLhDpnAinDHhnsm7AWaB6jBUZ9ndyCMkjQtSh5pBwKWPVImHZRQJjK7lwEeC7FXg78iwRlkohqUdzIp9IWuB11J0JFgOuQY78hOEmwybip5HgKMFODVHBIpVko58v%2b/tG3wG/VhS8O%2bpZ4A648RsPHmM3ChJRSA1OOhQhwaRC2FJBSVex6BcEf8UBH0tYOZ/OEpAL3om6A/yGC/zoxE0a5eO4OeaPLBm5RDyYBOUJOhXi%2balQYnKfCSiU%2b6H7mF6e4T0IvAYyNnELwG/heBORvE6jkzcpM3VNncvcxLilBpMzYZNw/f8jwTLGrApUKlgE5Lt%2bv3H9YtKX6BfJ%2b1zZa%2bASaQwGn0hfoa6LIYrE53GdZTp7LoRrz8r5RGoZ11jHtdbx%2bw2HBD4aUkxqKBLyzdGUUZ6bkwqmMlheIATY8ue6WLjOF4m%2bU89zwRvgarL8OjXM31%2bhOADGk5x/GZqYuovrzdHJt9%2bj787208TkbYmuImAN110VQpik5NAKrsHn1nC9a44SOHWEDPYFFwlFVOCqCBYBbvmrmh8K5%2bd%2b8egb4GoyaTh0QgBfoRgAM3iOKkdwavYezS38V859/0MU110CiA2kwW2MWzQ%2biZG5peSvo89qYGKYBCER1%2bWj%2bY8kiEkPq/kICRg8L6OCfDNUPlCS6/75pa%2bA82tWHeAj14X1ZJr/ZFkA8UgigkwERykzfZem534E0Gt0rjNBx/70ET28u4NqA1upfcdj9OzzR%2bnY8Y/ok08vICBjEvnxzA387jYIuI7XN8UDVCrdoiGQOTTCEV4RVSRwjOI/ZcSXIPMFOSZSazKyZuguiaIA1epqAu4rf7vkbciFYwn%2bfBGfLyLSVxChq6IElv/45B2amrkn0ezpm6D3PjhN%2b548RDX%2bZiqvrKPqmiaqrApiBMjra6ItZT4539D8C3rs8efo8MvH6J13P6Vvv49gTjMAvI40uUXx8DSFeoYpFpmlWHSOEgAaxxyS%2bP/0EKKNOXEw4skVkDmKuS1LKggBOSrQBNyv%2bbnigGcWo3HutTk95vHZghCQ7dfXKAkFjI6wed2gwcgc/f3js3TwmVepoWkXebwNArACgH21LVQX3Cbn6oJtIOYg%2bQNtIKVRSKnC%2bdIKP20urQE5zaKS/QdeoddeO0EfnvqSvvu6hwYGJgEa4EFCMrGI4zyFcC7UP0nhgWkhoH9gSpfEtYJpUFKs/hvw/KXBMJ%2bbw2ezApxJMAaYSCAHwXAK7A9Din2Xhulv739GR148Srse2gcw9bRpS7WAYrnXADhHvKqmgfx1AIzIMyGsCiEA7z3VQfLifaC%2bXc4bQipYLZW1VIfftjbvor17n6FDh47SyZMf02efdVHn%2bThFQPpg7xiIyGDeM5jvnPaBnIWTXjSVFKsAfQN8bhpjSsCHo0vyY06BGP8YRMShgHQKjOJPv/6ql15//STt3P4o1QBApaeOagCGI%2bqprhdgDNgrgLIECCH4Pn/HV9eKc61CAJ8TUuR9vZDAvw3Wb6PmehDprSdvdUCOHqjKi%2b%2b0b3uEnnryN/T7V4/T%2b1AJp11cK9TtA6sFCJClrloqnu9MIXcykgZR6aBWnYUP19RBmFQE0voBufnWm6doz54DVIfoVWGS1QBX52%2bi1sbt1IDJMpAKTJAj6KttVZEEOZU66jWaED7HPuAFIZwWfK6aSQooknxMpleRxt/x8W/xeQCfNza0Uz3SyOOppYAP/%2bMN0vadj0mKckVwtcYWAa4UMGt9jj6D7%2bHo98NswotCQCqtauvl3gydgpl1dBymICby800eqsLkg5iI39eISEDqODYBvB%2bAGYiYnERTR1xLmqNrZM/f8SCarU3bqa15B5VB6kwKk9DcsI1agq0UBLE%2bfKcxqFPHE5DvVSL6tbh2La7X1NguxzPfDMB8b%2bs2XXWsuZXAIUBVAEPAEl7P4vWcNArdl8foEsYn/%2b6il44chxn9imoBxsug/Y0SgWBwqxw58ixJjo7X3wKZNwqIckyyCucZPMu7vNIv51jaJgX4fWlFLR18/Nd0%2bMBz5AFJ5QDIZLY27aS9D%2b%2blIwefV%2boCIUwme4oyTaSUtxFGu0Pev/3nT9BP3BXgqiGyCEjq1WF8pZAC1BqApX%2bxexRKmNAKWKHnXvgdzMxDpeU%2bqsLE6zGRehDAEwrUtVA18rEMn/HnHGGWNgNkYKbMcY77NAn8mQHBgwlik9u/7wB1PNEh32dzrMZ3mdAnHn2KXnnmBfJ7VZopdTSKkspQLWpAVGmZl55%2b9jXpEFPDV60NE1UFErYCuBJkFWCb4KKzVOQUYOeP6TJ46q9nqH37btq0uVJKVB0ABXSOmhLHJYuBMVgmgSfq0YbGHsCSLteqMO7P4MsqfCh51bS7fRft2fUIeQGO5V1bA3kD9M6W7bT3oUeprQFqq23CNWrlevxf9fAbX20z7UDeD4Znpf1Wi7Or1ppgTfctuhcobIL5ZXAgNC9EhCOLuPBtvF%2bgN/74AbVufUiky82MRBqEcPT5KLLEZ6XlNXKOj8b0%2bMgR4zQQ52dDw/D6VLrUAgibGgMThUBddVAam9xWeEMbZF6D9KqoglF6vHjdREHOe6joqzN9aJTuoANdd2%2bZpdx9AI9ILgGsAocAnQZMQkQvHlgJfSCCZTSWuUtd3WPwhGOQHur8Zo%2bAYgAsSZ6gpADLulK5uwPIyluJIJsnhk/3B2XGG3SFEG8AgUwYG6wXiqiobqHywCEq83eQL7AdyqmiEyf/gby/A8DreqcomwLZdvgBnSCrINsJLooJmlZYsbYMImbw2Zz0/2MTd%2bjrbwbRxT0PXwhIFP0AaNzeeIADyJwDWSx5Jk3qOwhigAyUzxvFeH2qVVYk%2bIQc8RJOJf8O8jc9TVsqGung0y9jvXFdrwTRirs2THUJtOWfS0C2Esw7KjAKUCowq0Elo3CUt5lnpccez9xB73%2bDPv7nOdq9pwPRrddOX6fl70OPnwVkwAggEGD6A6%2bYZtAhTEqkVo3qH%2bp16VTkNja1wxzraceuPbJO4EWSgNckZOW/plIgmZP/uQQoH1BrAbcPLLtUYLpBllMoMi%2bDWc5M35Nz77z7L2pu2Umbt3h0rtc6IFUVaJUU4HRhVXBK%2bAxYpIKqENo09XlOD/6%2bUY2ffSG4VUg6/eVlWWmqRZjaKBXzc/YETAlcdSpApBgBPVYlMAuisFZArgrMqpAXQ0xCBCsyXgVOzvyIa8zQq789gQk2ITXUGsBEUvp/EFCoPLLcjWkyWCl1uuEpLavRqcEtdgP9fHMVHT/xkYA3kTfRFwUMX3WaIJP/cUv%2bajms9wSFgD7LB1xL4iXXngB3ha77AMwyjEfW4LEFnFuFSd4GEfew7k%2bhf3gdbXKLY4RZkD6rQujVX7kCWWZ9zmRJ9eCWGoT4UAJ/tqkSeX9ENkl4t4mjbqKvCLCin7Y6wBwCQvamqL0ilI7Q2hN0%2b4DZFlvN7gjr3WBegzMJvCnBEeBujPcEPj/dQ4/vexYA2Oi8Ev0yUzbZ3bWxeU20tT9UO%2bpQi6TG5p3yOfci/YNTskeYdqRfLPqW/E35i5lVbtFd4fkCPqBJ0BeK2bfChty7wrwOV2pYkcmxGvj43vunaeu2X8IUq0Tipjfw6xQwPmH2BMw5LqsNWCPUBtqk5//iy0tS8hzwo9dk56lQ9EX%2bBaKvNkUX3QTwzpCrIbKqgewNaPbc9wIx0uuum51pbUQxvUXFtZm7s%2bnZH3GNJTr6h79gWQsv8Aa1CbY5DZHpB1TtVxUhiN6fuz1OgTePfSCbp/wfQ3oUA5%2b09gIdAqLmPqG6OyR3hmwCpCGyNkYcL4gaM3TvDxoSTCrk3hxJpldlu4zVwJNk2TIRF7HAevGlNygAIriPN9XAgGeFcPn0wPR8/iZ53XHgsOwWy6arGN9GftkbWnctfw14I3%2bj5pC5M8R3hbM%2bYFcD%2b9aYaYqyXpC/SaqU4GyP6YioHdoN2do2auD3E5BwZvo/dObbED21/xCWztxSByx/qJFNFTa9TXD8tm0PY25jcl8hC97q%2bJy%2bf821ERrLWfwIAVr%2b3NaXmGcB3OUQg5fEg2p/YNAhwTwHkGuI2VtkCS0/5y7NsEoJjlpKqsWibGOntXQnQQLvGvPe4U40NaXwBzZG1So36UpQT59/0S19fkobnfl9wVWfI/0V13MDZitcRX/B3B3OkFIBSOgBCb3TUhLZC3JLoimLbhXYSljL5p9Wg7ph4iYinlImKXv5OpK8exxHCT12/ENqaNyG6Ks%2bgFeIb751Su4NGFWlR6xbYEPrrp7fpKXq%2b3PBL%2bmHJvTDEur5AH44YpIudCsSbBU4myQ5W%2bVCQtStAiFBs59Iu2%2bY2kQ47Spemz18Y2Bc06fQSPX0TdLhl9%2bgLVjk7O94UXyEnT57rcJu75K%2b3viUXeyYanpC4SUtfSZgXhFw/sIEdV6c0A9JTOaUxDnXVpmtAscPHFNcy%2bkPLDfmKA1v6OE2yUR6VdQQ1yYpFUNufl4Tf%2bjsSss9BttXXE5vNztWvY%2banV87%2boYABJR3vPqADQSMEz8lwiowJNgVwRCgSHAvkvLTYdWVDtlb51ZauB5vWXdymZUQBhF8LgEjC5sU0X29uLsld3uV57S6rn3/5byar54VUrnfp4MrzwiJCromnEdlFAluL%2bgTP5hXhqhvm5uSwoOVYHaO1VhxKoM7LSwgw9nSpTrJdVFDODoP8seFFFd5cxndmnuZ6/iR2fNfdiIv4DUBWfC8CzZLJWfPjainw7oyrqfDui9P6bI44yySskpw%2b0GeEmw15FaJVNYsFbCrLtPkaPOtNt7aMu21ba5Oa%2buMtSxwy/DCFgEc9QHzhJgmgNXN2EDAqHpETlJBGaJRgSHB7BnmbpuZByjMczd2n2CeyMhtmrLpseYiQ/btNEHm3qNNmHkcxw18VUwuash3Hn5Yyst5AT4wLxikzPcqAv4HHB%2bTg4TGj0AAAAAASUVORK5CYII=' /%3e%3c/svg%3e"},"content":"<h2 id=\"table-of-contents\"><a href=\"#table-of-contents\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a><strong>Table of Contents</strong></h2>\n<ul>\n<li><a href=\"#overview\">Overview</a></li>\n<li><a href=\"#playercharacter\">PlayerCharacter</a></li>\n<li><a href=\"#allycharacter\">AllyCharacter</a></li>\n<li><a href=\"#allyaicontroller\">AllyAIController</a></li>\n<li><a href=\"#making-the-allycharacter-follow-the-playercharacter\">Making the AllyCharacter Follow the PlayerCharacter</a></li>\n<li><a href=\"#making-the-allycharacter-lead-the-playercharacter\">Making the AllyCharacter Lead the PlayerCharacter</a></li>\n<li><a href=\"#conclusion\">Conclusion</a></li>\n</ul>\n<h2 id=\"overview\"><a href=\"#overview\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a><strong>Overview</strong></h2>\n<p>In this tutorial we'll look at what it takes to create an AI that follows the player and can lead the player to waypoints. This won't be too in-depth but it'll get you started with an AI system of following and leading without relying on logic placed in <code>Tick</code> leading to more fluid movement and better performance. Let's take a look at the classes we'll need to make this happen.</p>\n<ul>\n<li><strong>PlayerCharacter</strong> - The PlayerCharacter is going to be a standard third-person Character that we'll expand on.</li>\n<li><strong>AllyCharacter</strong> - The AllyCharacter is the Character that's going to follow and lead the PlayerCharacter.</li>\n<li><strong>AllyAIController</strong> - The AllyAIController is going to be the AIController that controls when/how the AllyCharacter moves.</li>\n</ul>\n<h2 id=\"playercharacter\"><a href=\"#playercharacter\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a><strong>PlayerCharacter</strong></h2>\n<p>So as stated above the PlayerCharacter is a standard third person Character but we'll go over it quickly as it's important to be on the same page before progressing.</p>\n<p>The PlayerCharacter has the following:</p>\n<ul>\n<li>A <code>USkeletalMeshComponent</code> so we can change the mesh of the PlayerCharacter to a default third person skeletal mesh.</li>\n<li>A <code>USpringArmComponent</code> and <code>UCameraComponent</code> to add a camera on a boom so we can have some decent camera controls.</li>\n<li>A boolean that keeps track of whether the PlayerCharacter is currently sprinting or not. This will be used by the animation blueprint and the AllyCharacter.</li>\n<li>Methods to respond to axis inputs for moving forward, backward, left and right.</li>\n<li>Methods to respond to the sprint button being pressed and released.</li>\n</ul>\n<p>Below is the PlayerCharacter header file where the components and methods talked about above are defined:</p>\n<p><strong>PlayerCharacter.h</strong></p>\n<pre class=\"language-cpp\"><code class=\"language-cpp\"><span class=\"token macro property\">#<span class=\"token directive keyword\">pragma</span> once</span>\n\n<span class=\"token macro property\">#<span class=\"token directive keyword\">include</span> <span class=\"token string\">\"CoreMinimal.h\"</span></span>\n<span class=\"token macro property\">#<span class=\"token directive keyword\">include</span> <span class=\"token string\">\"GameFramework/Character.h\"</span></span>\n<span class=\"token macro property\">#<span class=\"token directive keyword\">include</span> <span class=\"token string\">\"PlayerCharacter.generated.h\"</span></span>\n\n<span class=\"token comment\">/**\n * PlayerCharacter is the main Character of the game controlled by the player.\n */</span>\n<span class=\"token function\">UCLASS</span><span class=\"token punctuation\">(</span>config <span class=\"token operator\">=</span> Game<span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">FOLLOWLEADAI_API</span> APlayerCharacter <span class=\"token operator\">:</span> <span class=\"token keyword\">public</span> ACharacter\n<span class=\"token punctuation\">{</span>\n\t<span class=\"token function\">GENERATED_BODY</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">public</span><span class=\"token operator\">:</span>\n\t<span class=\"token comment\">// Sets default values for this character's properties.</span>\n\t<span class=\"token function\">APlayerCharacter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">// The PlayerCharacter's skeletal mesh.</span>\n\t<span class=\"token function\">UPROPERTY</span><span class=\"token punctuation\">(</span>VisibleAnywhere<span class=\"token punctuation\">,</span> BlueprintReadOnly<span class=\"token punctuation\">,</span> Category <span class=\"token operator\">=</span> Mesh<span class=\"token punctuation\">)</span>\n\t<span class=\"token keyword\">class</span> <span class=\"token class-name\">USkeletalMeshComponent</span><span class=\"token operator\">*</span> PlayerSkeletalMesh<span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">// The PlayerCharacter's camera.</span>\n\t<span class=\"token function\">UPROPERTY</span><span class=\"token punctuation\">(</span>VisibleAnywhere<span class=\"token punctuation\">,</span> BlueprintReadOnly<span class=\"token punctuation\">,</span> Category <span class=\"token operator\">=</span> Camera<span class=\"token punctuation\">)</span>\n\t<span class=\"token keyword\">class</span> <span class=\"token class-name\">UCameraComponent</span><span class=\"token operator\">*</span> PlayerCamera<span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">// The boom for the PlayerCharacter's camera.</span>\n\t<span class=\"token function\">UPROPERTY</span><span class=\"token punctuation\">(</span>VisibleAnywhere<span class=\"token punctuation\">,</span> BlueprintReadOnly<span class=\"token punctuation\">,</span> Category <span class=\"token operator\">=</span> Camera<span class=\"token punctuation\">)</span>\n\t<span class=\"token keyword\">class</span> <span class=\"token class-name\">USpringArmComponent</span><span class=\"token operator\">*</span> PlayerCameraSpringArm<span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">// Indicates whether the PlayerCharacter is sprinting or not.</span>\n\t<span class=\"token function\">UPROPERTY</span><span class=\"token punctuation\">(</span>EditAnywhere<span class=\"token punctuation\">,</span> BlueprintReadWrite<span class=\"token punctuation\">,</span> Category <span class=\"token operator\">=</span> Animation<span class=\"token punctuation\">)</span>\n\t<span class=\"token keyword\">bool</span> bIsSprinting <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">protected</span><span class=\"token operator\">:</span>\n\t<span class=\"token comment\">// The speed at which the PlayerCharacter should walk at.</span>\n\t<span class=\"token function\">UPROPERTY</span><span class=\"token punctuation\">(</span>EditAnywhere<span class=\"token punctuation\">,</span> BlueprintReadWrite<span class=\"token punctuation\">,</span> Category <span class=\"token operator\">=</span> Movement<span class=\"token punctuation\">)</span>\n\t<span class=\"token keyword\">float</span> WalkSpeed <span class=\"token operator\">=</span> <span class=\"token number\">200.f</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">// The speed at which the PlayerCharacter should sprint at.</span>\n\t<span class=\"token function\">UPROPERTY</span><span class=\"token punctuation\">(</span>EditAnywhere<span class=\"token punctuation\">,</span> BlueprintReadWrite<span class=\"token punctuation\">,</span> Category <span class=\"token operator\">=</span> Movement<span class=\"token punctuation\">)</span>\n\t<span class=\"token keyword\">float</span> SprintSpeed <span class=\"token operator\">=</span> <span class=\"token number\">500.f</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">protected</span><span class=\"token operator\">:</span>\n\t<span class=\"token comment\">/**\n\t * Called when the PlayerCamera moves forward and backward.\n     *\n     * @param Value The axis value from the input.\n\t */</span>\n\t<span class=\"token keyword\">void</span> <span class=\"token function\">MoveForwardBackward</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">float</span> Value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">/**\n\t * Called when the PlayerCamera moves left and right.\n\t *\n\t * @param Value The axis value from the input.\n\t */</span>\n\t<span class=\"token keyword\">void</span> <span class=\"token function\">MoveLeftRight</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">float</span> Value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">/**\n\t * Called when the sprint input action button is pressed down.\n\t */</span>\n\t <span class=\"token keyword\">void</span> <span class=\"token function\">SprintStart</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t <span class=\"token comment\">/**\n\t  * Called when the sprint input action button is released.\n\t  */</span>\n\t <span class=\"token keyword\">void</span> <span class=\"token function\">SprintStop</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">/**\n\t * Called to bind functionality to input.\n\t *\n\t * @param PlayerInputComponent An Actor component for input bindings.\n\t */</span>\n\t<span class=\"token keyword\">virtual</span> <span class=\"token keyword\">void</span> <span class=\"token function\">SetupPlayerInputComponent</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">class</span> <span class=\"token class-name\">UInputComponent</span><span class=\"token operator\">*</span> PlayerInputComponent<span class=\"token punctuation\">)</span> override<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre>\n<p>Now in the cpp file we:</p>\n<ul>\n<li>Load the skeletal mesh and AnimBlueprint (look at the <a href=\"https://github.com/robertcorponoi/unreal-follow-lead-ai\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">repo</a> or Unreal's third person character demo for an example of the animation blueprint as it's out of scope for this tutorial.</li>\n<li>Create the components, set their default values, and attach them where they're needed.</li>\n<li>Set up the methods that respond to the axis and action inputs.</li>\n<li>Create the methods defined the header to move the PlayerCharacter forward, backward, left, right. Also set up the methods to start and stop sprinting.</li>\n</ul>\n<p><strong>PlayerCharacter.cpp</strong></p>\n<pre class=\"language-cpp\"><code class=\"language-cpp\"><span class=\"token macro property\">#<span class=\"token directive keyword\">include</span> <span class=\"token string\">\"PlayerCharacter.h\"</span></span>\n<span class=\"token macro property\">#<span class=\"token directive keyword\">include</span> <span class=\"token string\">\"Camera/CameraComponent.h\"</span></span>\n<span class=\"token macro property\">#<span class=\"token directive keyword\">include</span> <span class=\"token string\">\"Components/InputComponent.h\"</span></span>\n<span class=\"token macro property\">#<span class=\"token directive keyword\">include</span> <span class=\"token string\">\"Components/CapsuleComponent.h\"</span></span>\n<span class=\"token macro property\">#<span class=\"token directive keyword\">include</span> <span class=\"token string\">\"Components/SkeletalMeshComponent.h\"</span></span>\n<span class=\"token macro property\">#<span class=\"token directive keyword\">include</span> <span class=\"token string\">\"GameFramework/Controller.h\"</span></span>\n<span class=\"token macro property\">#<span class=\"token directive keyword\">include</span> <span class=\"token string\">\"GameFramework/CharacterMovementComponent.h\"</span></span>\n<span class=\"token macro property\">#<span class=\"token directive keyword\">include</span> <span class=\"token string\">\"GameFramework/SpringArmComponent.h\"</span></span>\n\n<span class=\"token comment\">/**\n * Sets the default values for the PlayerCharacter.\n */</span>\nAPlayerCharacter<span class=\"token operator\">::</span><span class=\"token function\">APlayerCharacter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n\t<span class=\"token comment\">// Load the resources needed for the PlayerCharacter.</span>\n\t<span class=\"token keyword\">static</span> ConstructorHelpers<span class=\"token operator\">::</span>FObjectFinder<span class=\"token operator\">&lt;</span>USkeletalMesh<span class=\"token operator\">></span><span class=\"token function\">PlayerSkeletalMeshAsset</span><span class=\"token punctuation\">(</span><span class=\"token function\">TEXT</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"SkeletalMesh'/Game/Mannequin/Character/Mesh/SK_Mannequin.SK_Mannequin'\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">static</span> ConstructorHelpers<span class=\"token operator\">::</span>FObjectFinder<span class=\"token operator\">&lt;</span>UAnimBlueprint<span class=\"token operator\">></span><span class=\"token function\">PlayerAnimBlueprint</span><span class=\"token punctuation\">(</span><span class=\"token function\">TEXT</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"AnimBlueprint'/Game/Mannequin/Animations/ThirdPerson_AnimBP.ThirdPerson_AnimBP'\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">// Set the SkeletalMeshComponent to the Character's mesh and adjust its properties.</span>\n\tPlayerSkeletalMesh <span class=\"token operator\">=</span> <span class=\"token function\">GetMesh</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\tPlayerSkeletalMesh<span class=\"token operator\">-></span><span class=\"token function\">SetSkeletalMesh</span><span class=\"token punctuation\">(</span>PlayerSkeletalMeshAsset<span class=\"token punctuation\">.</span>Object<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\tPlayerSkeletalMesh<span class=\"token operator\">-></span><span class=\"token function\">SetRelativeLocationAndRotation</span><span class=\"token punctuation\">(</span><span class=\"token function\">FVector</span><span class=\"token punctuation\">(</span><span class=\"token number\">0.f</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0.f</span><span class=\"token punctuation\">,</span> <span class=\"token operator\">-</span><span class=\"token number\">90.f</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token function\">FRotator</span><span class=\"token punctuation\">(</span><span class=\"token number\">0.f</span><span class=\"token punctuation\">,</span> <span class=\"token operator\">-</span><span class=\"token number\">90.f</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0.f</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\tPlayerSkeletalMesh<span class=\"token operator\">-></span><span class=\"token function\">SetAnimInstanceClass</span><span class=\"token punctuation\">(</span>PlayerAnimBlueprint<span class=\"token punctuation\">.</span>Object<span class=\"token operator\">-></span>GeneratedClass<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">// Create the SpringArmComponent and attach it to the RootComponent.</span>\n\tPlayerCameraSpringArm <span class=\"token operator\">=</span> CreateDefaultSubobject<span class=\"token operator\">&lt;</span>USpringArmComponent<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token function\">TEXT</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"PlayerCameraSpringArm\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\tPlayerCameraSpringArm<span class=\"token operator\">-></span>TargetArmLength <span class=\"token operator\">=</span> <span class=\"token number\">500.f</span><span class=\"token punctuation\">;</span>\n\tPlayerCameraSpringArm<span class=\"token operator\">-></span>bUsePawnControlRotation <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n\tPlayerCameraSpringArm<span class=\"token operator\">-></span><span class=\"token function\">SetupAttachment</span><span class=\"token punctuation\">(</span>RootComponent<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">// Create the CameraComponent and attach it to the SpringArmComponent.</span>\n\tPlayerCamera <span class=\"token operator\">=</span> CreateDefaultSubobject<span class=\"token operator\">&lt;</span>UCameraComponent<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token function\">TEXT</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"PlayerCamera\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\tPlayerCamera<span class=\"token operator\">-></span>bUsePawnControlRotation <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n\tPlayerCamera<span class=\"token operator\">-></span><span class=\"token function\">SetupAttachment</span><span class=\"token punctuation\">(</span>PlayerCameraSpringArm<span class=\"token punctuation\">,</span> USpringArmComponent<span class=\"token operator\">::</span>SocketName<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">// Sets the capsule collider's size.</span>\n\t<span class=\"token function\">GetCapsuleComponent</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-></span><span class=\"token function\">InitCapsuleSize</span><span class=\"token punctuation\">(</span><span class=\"token number\">40.f</span><span class=\"token punctuation\">,</span> <span class=\"token number\">100.f</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">// Set the PlayerCharacter to not rotate when the controller rotates.</span>\n\tbUseControllerRotationPitch <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n\tbUseControllerRotationYaw <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n\tbUseControllerRotationRoll <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">// Set the default values for the PlayerCharacter's movement.</span>\n\t<span class=\"token function\">GetCharacterMovement</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-></span>bOrientRotationToMovement <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token function\">GetCharacterMovement</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-></span>RotationRate <span class=\"token operator\">=</span> <span class=\"token function\">FRotator</span><span class=\"token punctuation\">(</span><span class=\"token number\">0.0f</span><span class=\"token punctuation\">,</span> <span class=\"token number\">540.0f</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0.0f</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token function\">GetCharacterMovement</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-></span>MaxWalkSpeed <span class=\"token operator\">=</span> WalkSpeed<span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">// Set the PlayerCharacter to be the default player of the game.</span>\n\tAutoPossessPlayer <span class=\"token operator\">=</span> EAutoReceiveInput<span class=\"token operator\">::</span>Player0<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">/**\n * Called to bind functionality to input.\n *\n * @param PlayerInputComponent An Actor component for input bindings.\n */</span>\n<span class=\"token keyword\">void</span> APlayerCharacter<span class=\"token operator\">::</span><span class=\"token function\">SetupPlayerInputComponent</span><span class=\"token punctuation\">(</span>UInputComponent<span class=\"token operator\">*</span> PlayerInputComponent<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n\t<span class=\"token function\">check</span><span class=\"token punctuation\">(</span>PlayerInputComponent<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">// Set up the methods to respond to the PlayerCharacter moving forward, backward,</span>\n\t<span class=\"token comment\">// left, and right.</span>\n\tPlayerInputComponent<span class=\"token operator\">-></span><span class=\"token function\">BindAxis</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"MoveForwardBackward\"</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span> <span class=\"token operator\">&amp;</span>APlayerCharacter<span class=\"token operator\">::</span>MoveForwardBackward<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\tPlayerInputComponent<span class=\"token operator\">-></span><span class=\"token function\">BindAxis</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"MoveLeftRight\"</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span> <span class=\"token operator\">&amp;</span>APlayerCharacter<span class=\"token operator\">::</span>MoveLeftRight<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">// Set the \"TurnLeftRight\" and \"LookUpDown\" axis inputs to control the yaw and pitch</span>\n\t<span class=\"token comment\">// of the camera.</span>\n\tPlayerInputComponent<span class=\"token operator\">-></span><span class=\"token function\">BindAxis</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"TurnLeftRight\"</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span> <span class=\"token operator\">&amp;</span>APawn<span class=\"token operator\">::</span>AddControllerYawInput<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\tPlayerInputComponent<span class=\"token operator\">-></span><span class=\"token function\">BindAxis</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"LookUpDown\"</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span> <span class=\"token operator\">&amp;</span>APawn<span class=\"token operator\">::</span>AddControllerPitchInput<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">// Set up the methods to respond to the sprint action input being pressed and released.</span>\n\tPlayerInputComponent<span class=\"token operator\">-></span><span class=\"token function\">BindAction</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Sprint\"</span><span class=\"token punctuation\">,</span> IE_Pressed<span class=\"token punctuation\">,</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span> <span class=\"token operator\">&amp;</span>APlayerCharacter<span class=\"token operator\">::</span>SprintStart<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\tPlayerInputComponent<span class=\"token operator\">-></span><span class=\"token function\">BindAction</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Sprint\"</span><span class=\"token punctuation\">,</span> IE_Released<span class=\"token punctuation\">,</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span> <span class=\"token operator\">&amp;</span>APlayerCharacter<span class=\"token operator\">::</span>SprintStop<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">/**\n * Called when the PlayerCamera moves forward and backward.\n *\n * @param Value The axis value from the input.\n */</span>\n<span class=\"token keyword\">void</span> APlayerCharacter<span class=\"token operator\">::</span><span class=\"token function\">MoveForwardBackward</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">float</span> Value<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n\t<span class=\"token comment\">// Return early if the Controller is a nullptr or the axis input value is zero.</span>\n\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token function\">GetController</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">==</span> <span class=\"token keyword\">nullptr</span> <span class=\"token operator\">||</span> Value <span class=\"token operator\">==</span> <span class=\"token number\">0.f</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">// Find the forward rotation.</span>\n\t<span class=\"token keyword\">const</span> FRotator Rotation <span class=\"token operator\">=</span> <span class=\"token function\">GetController</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-></span><span class=\"token function\">GetControlRotation</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">const</span> FRotator <span class=\"token function\">YawRotation</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> Rotation<span class=\"token punctuation\">.</span>Yaw<span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">// Find the forward vector.</span>\n\t<span class=\"token keyword\">const</span> FVector Direction <span class=\"token operator\">=</span> <span class=\"token function\">FRotationMatrix</span><span class=\"token punctuation\">(</span>YawRotation<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">GetUnitAxis</span><span class=\"token punctuation\">(</span>EAxis<span class=\"token operator\">::</span>X<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">// Apply movement to the forward direction of the PlayerCharacter with a value</span>\n\t<span class=\"token comment\">// of `Value`.</span>\n\t<span class=\"token function\">AddMovementInput</span><span class=\"token punctuation\">(</span>Direction<span class=\"token punctuation\">,</span> Value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">/**\n * Called when the PlayerCamera moves left and right.\n *\n * @param Value The axis value from the input.\n */</span>\n<span class=\"token keyword\">void</span> APlayerCharacter<span class=\"token operator\">::</span><span class=\"token function\">MoveLeftRight</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">float</span> Value<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n\t<span class=\"token comment\">// Return early if the Controller is a nullptr or the `Value` is zero.</span>\n\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token function\">GetController</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">==</span> <span class=\"token keyword\">nullptr</span> <span class=\"token operator\">||</span> Value <span class=\"token operator\">==</span> <span class=\"token number\">0.f</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">// Find the right rotation.</span>\n\t<span class=\"token keyword\">const</span> FRotator Rotation <span class=\"token operator\">=</span> <span class=\"token function\">GetController</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-></span><span class=\"token function\">GetControlRotation</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">const</span> FRotator <span class=\"token function\">YawRotation</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> Rotation<span class=\"token punctuation\">.</span>Yaw<span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">// Find the right direction.</span>\n\t<span class=\"token keyword\">const</span> FVector Direction <span class=\"token operator\">=</span> <span class=\"token function\">FRotationMatrix</span><span class=\"token punctuation\">(</span>YawRotation<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">GetUnitAxis</span><span class=\"token punctuation\">(</span>EAxis<span class=\"token operator\">::</span>Y<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">// Add movement to the right axis with a value of `Value`.</span>\n\t<span class=\"token function\">AddMovementInput</span><span class=\"token punctuation\">(</span>Direction<span class=\"token punctuation\">,</span> Value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">/**\n * Called when the sprint input action button is pressed down and it sets the\n * `bIsSprinting` boolean to `true` so the animator knows to play the sprint animation.\n */</span>\n<span class=\"token keyword\">void</span> APlayerCharacter<span class=\"token operator\">::</span><span class=\"token function\">SprintStart</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n\tbIsSprinting <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token function\">GetCharacterMovement</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token function\">GetCharacterMovement</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-></span>MaxWalkSpeed <span class=\"token operator\">=</span> SprintSpeed<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">/**\n * Called when the sprint input action button is pressed down and it sets the\n * `bIsSprinting` boolean to `false` so the animator knows to stop the sprint animation.\n */</span>\n<span class=\"token keyword\">void</span> APlayerCharacter<span class=\"token operator\">::</span><span class=\"token function\">SprintStop</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n\tbIsSprinting <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token function\">GetCharacterMovement</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token function\">GetCharacterMovement</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-></span>MaxWalkSpeed <span class=\"token operator\">=</span> WalkSpeed<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre>\n<p>So now if you save, compile, drag out an instance of the PlayerCharacter, and press play (assuming you set up the mesh and animation blueprint or copied it from the repo) you should be able to move the PlayerCharacter with the input keys you specified. Also if you press the sprint button you set you should see the PlayerCharacter moving faster then if you let it go you should see it go back to walking again.</p>\n<h2 id=\"allycharacter\"><a href=\"#allycharacter\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a><strong>AllyCharacter</strong></h2>\n<p>Now let's see what we need for the AllyCharacter:</p>\n<ul>\n<li>A <code>USkeletalMeshComponent</code> so that we can add a mesh and see our AllyCharacter (can be found in the repo or any character from Mixamo/etc will work).</li>\n<li>A <code>UBoxComponent</code> to act as a box collider that will let us know when the AllyCharacter has come in contact with a Waypoint (created later on when implementing leading).</li>\n<li>A variable to keep a reference to the PlayerCharacter. This will be populated manually when the AllyCharacter is placed onto the level.</li>\n<li>A variable to know if the AllyCharacter is sprinting or not. Unlike the PlayerCharacter this will be managed by the AIController we'll create later instead of player input.</li>\n<li>Methods to handle what happens when a component enters the box collider.</li>\n<li>Methods to make the AllyCharacter sprint and stop sprinting. Just as with the variables above this will be called by the AIController instead of any input manager.</li>\n</ul>\n<p>So let's get started and create a new C++ class with a base parent of Character and name it AllyCharacter. I also put mine in a folder named Ally.</p>\n<p>Now let's create the variables and methods we discussed above in the header file:</p>\n<p><strong>AllyCharacter.h</strong></p>\n<pre class=\"language-cpp\"><code class=\"language-cpp\"><span class=\"token macro property\">#<span class=\"token directive keyword\">pragma</span> once</span>\n\n<span class=\"token macro property\">#<span class=\"token directive keyword\">include</span> <span class=\"token string\">\"CoreMinimal.h\"</span></span>\n<span class=\"token macro property\">#<span class=\"token directive keyword\">include</span> <span class=\"token string\">\"GameFramework/Character.h\"</span></span>\n<span class=\"token macro property\">#<span class=\"token directive keyword\">include</span> <span class=\"token string\">\"AllyCharacter.generated.h\"</span></span>\n\n<span class=\"token comment\">/**\n * The AllyCharacter follows and leads the PlayerCharacter.\n */</span>\n<span class=\"token function\">UCLASS</span><span class=\"token punctuation\">(</span>config <span class=\"token operator\">=</span> Game<span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">FOLLOWLEADAI_API</span> AAllyCharacter <span class=\"token operator\">:</span> <span class=\"token keyword\">public</span> ACharacter\n<span class=\"token punctuation\">{</span>\n\t<span class=\"token function\">GENERATED_BODY</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">public</span><span class=\"token operator\">:</span>\n\t<span class=\"token comment\">// Sets default values for this character's properties.</span>\n\t<span class=\"token function\">AAllyCharacter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">// The SkeletalMeshComponent of the AllyCharacter.</span>\n\t<span class=\"token function\">UPROPERTY</span><span class=\"token punctuation\">(</span>VisibleAnywhere<span class=\"token punctuation\">,</span> BlueprintReadWrite<span class=\"token punctuation\">)</span>\n\t<span class=\"token keyword\">class</span> <span class=\"token class-name\">USkeletalMeshComponent</span><span class=\"token operator\">*</span> AllySkeletalMesh<span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">// The BoxComponent that to use as a trigger for detecting Waypoints.</span>\n\t<span class=\"token function\">UPROPERTY</span><span class=\"token punctuation\">(</span>EditAnywhere<span class=\"token punctuation\">,</span> BlueprintReadWrite<span class=\"token punctuation\">)</span>\n\t<span class=\"token keyword\">class</span> <span class=\"token class-name\">UBoxComponent</span><span class=\"token operator\">*</span> AllyBoxCollider<span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">// The PlayerCharacter to follow and lead.</span>\n\t<span class=\"token function\">UPROPERTY</span><span class=\"token punctuation\">(</span>EditAnywhere<span class=\"token punctuation\">,</span> BlueprintReadWrite<span class=\"token punctuation\">,</span> Category <span class=\"token operator\">=</span> Ally<span class=\"token punctuation\">)</span>\n\t<span class=\"token keyword\">class</span> <span class=\"token class-name\">APlayerCharacter</span><span class=\"token operator\">*</span> PlayerCharacter<span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">// Indicates whether the AllyCharacter is sprinting or not.</span>\n\t<span class=\"token function\">UPROPERTY</span><span class=\"token punctuation\">(</span>VisibleAnywhere<span class=\"token punctuation\">,</span> BlueprintReadOnly<span class=\"token punctuation\">)</span>\n\t<span class=\"token keyword\">bool</span> bIsSprinting <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">protected</span><span class=\"token operator\">:</span>\n\t<span class=\"token comment\">// The speed at which the AllyCharacter should walk at.</span>\n\t<span class=\"token function\">UPROPERTY</span><span class=\"token punctuation\">(</span>EditAnywhere<span class=\"token punctuation\">,</span> BlueprintReadWrite<span class=\"token punctuation\">,</span> Category <span class=\"token operator\">=</span> Movement<span class=\"token punctuation\">)</span>\n\t<span class=\"token keyword\">float</span> WalkSpeed <span class=\"token operator\">=</span> <span class=\"token number\">200.f</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">// The speed at which the AllyCharacter should sprint at.</span>\n\t<span class=\"token function\">UPROPERTY</span><span class=\"token punctuation\">(</span>EditAnywhere<span class=\"token punctuation\">,</span> BlueprintReadWrite<span class=\"token punctuation\">,</span> Category <span class=\"token operator\">=</span> Movement<span class=\"token punctuation\">)</span>\n\t<span class=\"token keyword\">float</span> SprintSpeed <span class=\"token operator\">=</span> <span class=\"token number\">500.f</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">public</span><span class=\"token operator\">:</span>\n\t<span class=\"token comment\">/**\n\t * Called when the AllyCharacter is created.\n\t */</span>\n\t<span class=\"token keyword\">void</span> <span class=\"token function\">BeginPlay</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> override<span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">/**\n\t * Called when a component enters the AllyCharacter's box collider.\n\t */</span>\n\t<span class=\"token function\">UFUNCTION</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\t<span class=\"token keyword\">void</span> <span class=\"token function\">OnComponentEnterBoxCollider</span><span class=\"token punctuation\">(</span>UPrimitiveComponent<span class=\"token operator\">*</span> OverlappedComp<span class=\"token punctuation\">,</span> AActor<span class=\"token operator\">*</span> OtherActor<span class=\"token punctuation\">,</span> UPrimitiveComponent<span class=\"token operator\">*</span> OtherComp<span class=\"token punctuation\">,</span> int32 OtherBodyIndex<span class=\"token punctuation\">,</span> <span class=\"token keyword\">bool</span> bFromSweep<span class=\"token punctuation\">,</span> <span class=\"token keyword\">const</span> FHitResult<span class=\"token operator\">&amp;</span> SweepResult<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">/**\n\t * Called to make the AllyCharacter sprint.\n\t */</span>\n\t<span class=\"token function\">UFUNCTION</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\t<span class=\"token keyword\">void</span> <span class=\"token function\">SprintStart</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">/**\n\t * Called to make the AllyCharacter stop sprinting\n\t */</span>\n\t<span class=\"token function\">UFUNCTION</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\t<span class=\"token keyword\">void</span> <span class=\"token function\">SprintStop</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre>\n<p>Now in the AllyCharacter's cpp file we:</p>\n<ul>\n<li>Load the mesh and animation blueprint for the AllyCharacter. Again these can be found in the <a href=\"https://github.com/robertcorponoi/unreal-follow-lead-ai\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">repo</a> if you need guidance or don't want to make your own.</li>\n<li>Create the box collider and its properties so that it acts as a trigger and then finally registers the <code>OnComponentEnterBoxCollider</code> method to respond to components entering the box collider.</li>\n</ul>\n<p><strong>AllyCharacter.cpp</strong></p>\n<pre class=\"language-cpp\"><code class=\"language-cpp\"><span class=\"token macro property\">#<span class=\"token directive keyword\">include</span> <span class=\"token string\">\"AllyCharacter.h\"</span></span>\n\n<span class=\"token comment\">/**\n * Sets the default values for the AllyCharacter.\n */</span>\nAAllyCharacter<span class=\"token operator\">::</span><span class=\"token function\">AAllyCharacter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n\t<span class=\"token keyword\">static</span> ConstructorHelpers<span class=\"token operator\">::</span>FObjectFinder<span class=\"token operator\">&lt;</span>USkeletalMesh<span class=\"token operator\">></span><span class=\"token function\">AllySkeletalMeshAsset</span><span class=\"token punctuation\">(</span><span class=\"token function\">TEXT</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"SkeletalMesh'/Game/Mannequin/Character/Mesh/SK_Mannequin.SK_Mannequin'\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">static</span> ConstructorHelpers<span class=\"token operator\">::</span>FObjectFinder<span class=\"token operator\">&lt;</span>UAnimBlueprint<span class=\"token operator\">></span><span class=\"token function\">AllyAnimBlueprint</span><span class=\"token punctuation\">(</span><span class=\"token function\">TEXT</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"AnimBlueprint'/Game/Blueprints/PlayerAnimBlueprint.PlayerAnimBlueprint'\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">// Set the SkeletalMeshComponent to the Character's mesh and adjust its properties.</span>\n\tAllySkeletalMesh <span class=\"token operator\">=</span> <span class=\"token function\">GetMesh</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\tAllySkeletalMesh<span class=\"token operator\">-></span><span class=\"token function\">SetSkeletalMesh</span><span class=\"token punctuation\">(</span>AllySkeletalMeshAsset<span class=\"token punctuation\">.</span>Object<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\tAllySkeletalMesh<span class=\"token operator\">-></span><span class=\"token function\">SetRelativeLocationAndRotation</span><span class=\"token punctuation\">(</span><span class=\"token function\">FVector</span><span class=\"token punctuation\">(</span><span class=\"token number\">0.f</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0.f</span><span class=\"token punctuation\">,</span> <span class=\"token operator\">-</span><span class=\"token number\">90.f</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token function\">FRotator</span><span class=\"token punctuation\">(</span><span class=\"token number\">0.f</span><span class=\"token punctuation\">,</span> <span class=\"token operator\">-</span><span class=\"token number\">90.f</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0.f</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\tAllySkeletalMesh<span class=\"token operator\">-></span><span class=\"token function\">SetAnimInstanceClass</span><span class=\"token punctuation\">(</span>AllyAnimBlueprint<span class=\"token punctuation\">.</span>Object<span class=\"token operator\">-></span>GeneratedClass<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">// Set the initial speed to the `WalkSpeed`.</span>\n\t<span class=\"token function\">GetCharacterMovement</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-></span>MaxWalkSpeed <span class=\"token operator\">=</span> WalkSpeed<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">/**\n * Called when the AllyCharacter is created.\n */</span>\n<span class=\"token keyword\">void</span> AAllyCharacter<span class=\"token operator\">::</span><span class=\"token function\">BeginPlay</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n\tSuper<span class=\"token operator\">::</span><span class=\"token function\">BeginPlay</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">/**\n * Called when a component enters the AllyCharacter's box collider.\n */</span>\n<span class=\"token keyword\">void</span> AAllyCharacter<span class=\"token operator\">::</span><span class=\"token function\">OnComponentEnterBoxCollider</span><span class=\"token punctuation\">(</span>UPrimitiveComponent<span class=\"token operator\">*</span> OverlappedComp<span class=\"token punctuation\">,</span> AActor<span class=\"token operator\">*</span> OtherActor<span class=\"token punctuation\">,</span> UPrimitiveComponent<span class=\"token operator\">*</span> OtherComp<span class=\"token punctuation\">,</span> int32 OtherBodyIndex<span class=\"token punctuation\">,</span> <span class=\"token keyword\">bool</span> bFromSweep<span class=\"token punctuation\">,</span> <span class=\"token keyword\">const</span> FHitResult<span class=\"token operator\">&amp;</span> SweepResult<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n\t<span class=\"token comment\">// Return early if anything is null so we can avoid a potential crash.</span>\n\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>OtherActor <span class=\"token operator\">==</span> <span class=\"token keyword\">nullptr</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">||</span> <span class=\"token punctuation\">(</span>OtherActor <span class=\"token operator\">==</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">||</span> <span class=\"token punctuation\">(</span>OtherComp <span class=\"token operator\">==</span> <span class=\"token keyword\">nullptr</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">/**\n * Called to make the AllyCharacter sprint.\n */</span>\n<span class=\"token keyword\">void</span> AAllyCharacter<span class=\"token operator\">::</span><span class=\"token function\">SprintStart</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n\tbIsSprinting <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token function\">GetCharacterMovement</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token function\">GetCharacterMovement</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-></span>MaxWalkSpeed <span class=\"token operator\">=</span> SprintSpeed<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">/**\n * Called to make the AllyCharacter stop sprinting.\n */</span>\n<span class=\"token keyword\">void</span> AAllyCharacter<span class=\"token operator\">::</span><span class=\"token function\">SprintStop</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n\tbIsSprinting <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token function\">GetCharacterMovement</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token function\">GetCharacterMovement</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-></span>MaxWalkSpeed <span class=\"token operator\">=</span> SprintSpeed<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre>\n<p>Now make sure that this saves and compiles but there's nothing to test yet as we haven't set up the AIController for the AllyCharacter yet.</p>\n<h2 id=\"allyaicontroller\"><a href=\"#allyaicontroller\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a><strong>AllyAIController</strong></h2>\n<p>The AllyAIController is going to be used to move the AllyCharacter to where it needs to be. This controller will evolve as we add the follow functionality and then leading functionality but let's see what we need for the basics:</p>\n<ul>\n<li>We need to keep a reference to the AllyCharacter. Unlike the PlayerCharacter reference in the AllyCharacter this one will not have to be assigned manually.</li>\n<li>We need to override <code>OnBeginPlay</code> as we'll add some starting logic to make the AllyCharacter move to the PlayerCharacter right away.</li>\n<li>We need to override <code>OnPossess</code> to make the above possible.</li>\n<li>We need to override <code>OnMoveCompleted</code> so that we can issue move commands consecutively instead of stacking them for better performance.</li>\n</ul>\n<p>So let's get started and create a new C++ class with a base parent of AIController and name it AllyAIController. I put this class in the Ally folder alongside AllyCharacter.</p>\n<p>Now let's get on to defining the variable and method we discussed above in the header:</p>\n<p><strong>AllyAIController.h</strong></p>\n<pre class=\"language-cpp\"><code class=\"language-cpp\"><span class=\"token macro property\">#<span class=\"token directive keyword\">pragma</span> once</span>\n\n<span class=\"token macro property\">#<span class=\"token directive keyword\">include</span> <span class=\"token string\">\"CoreMinimal.h\"</span></span>\n<span class=\"token macro property\">#<span class=\"token directive keyword\">include</span> <span class=\"token string\">\"AIController.h\"</span></span>\n<span class=\"token macro property\">#<span class=\"token directive keyword\">include</span> <span class=\"token string\">\"AllyAIController.generated.h\"</span></span>\n\n<span class=\"token comment\">/**\n * The AllyAIController controls the movement and behavior of the AllyCharacter.\n */</span>\n<span class=\"token function\">UCLASS</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">FOLLOWLEADAI_API</span> AAllyAIController <span class=\"token operator\">:</span> <span class=\"token keyword\">public</span> AAIController\n<span class=\"token punctuation\">{</span>\n\t<span class=\"token function\">GENERATED_BODY</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">public</span><span class=\"token operator\">:</span>\n\t<span class=\"token function\">AAllyAIController</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">protected</span><span class=\"token operator\">:</span>\n\t<span class=\"token comment\">// A reference to the AllyCharacter.</span>\n\t<span class=\"token function\">UPROPERTY</span><span class=\"token punctuation\">(</span>VisibleAnywhere<span class=\"token punctuation\">,</span> BlueprintReadOnly<span class=\"token punctuation\">,</span> Category <span class=\"token operator\">=</span> AI<span class=\"token punctuation\">)</span>\n\t<span class=\"token keyword\">class</span> <span class=\"token class-name\">AAllyCharacter</span><span class=\"token operator\">*</span> AllyCharacter<span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">protected</span><span class=\"token operator\">:</span>\n\t<span class=\"token comment\">/**\n\t * Called when the AllyAIController takes over the AllyCharacter.\n\t *\n\t * @param AllyPawn The AllyCharacter pawn.\n\t */</span>\n\t<span class=\"token keyword\">virtual</span> <span class=\"token keyword\">void</span> <span class=\"token function\">OnPossess</span><span class=\"token punctuation\">(</span>APawn<span class=\"token operator\">*</span> AllyPawn<span class=\"token punctuation\">)</span> override<span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">/**\n\t * Called when a move request has been completed.\n\t */</span>\n\t<span class=\"token keyword\">virtual</span> <span class=\"token keyword\">void</span> <span class=\"token function\">OnMoveCompleted</span><span class=\"token punctuation\">(</span>FAIRequestID RequestID<span class=\"token punctuation\">,</span> <span class=\"token keyword\">const</span> FPathFollowingResult<span class=\"token operator\">&amp;</span> Result<span class=\"token punctuation\">)</span> override<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre>\n<p>Now in the cpp file we assign the reference to the AllyCharacter in <code>OnPossess</code> and create the <code>OnMoveCompleted</code> method but leave it empty for now:</p>\n<p><strong>AllyAIController.cpp</strong></p>\n<pre class=\"language-cpp\"><code class=\"language-cpp\"><span class=\"token macro property\">#<span class=\"token directive keyword\">include</span> <span class=\"token string\">\"AllyAIController.h\"</span></span>\n<span class=\"token macro property\">#<span class=\"token directive keyword\">include</span> <span class=\"token string\">\"AllyCharacter.h\"</span></span>\n<span class=\"token macro property\">#<span class=\"token directive keyword\">include</span> <span class=\"token string\">\"../Player/PlayerCharacter.h\"</span></span>\n\n<span class=\"token comment\">/**\n * Sets up the default values for the AllyAIController.\n */</span>\nAAllyAIController<span class=\"token operator\">::</span><span class=\"token function\">AAllyAIController</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n\t<span class=\"token comment\">// Starts the AI logic for this AIController as soon as the AllyCharacter</span>\n\t<span class=\"token comment\">// is taken over so that we can issue commands immediately.</span>\n\tbStartAILogicOnPossess <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">/**\n * Called when the AllyAIController takes over the AllyCharacter.\n *\n * @param AllyPawn The AllyCharacter pawn.\n */</span>\n<span class=\"token keyword\">void</span> AAllyAIController<span class=\"token operator\">::</span><span class=\"token function\">OnPossess</span><span class=\"token punctuation\">(</span>APawn<span class=\"token operator\">*</span> AllyPawn<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n\tSuper<span class=\"token operator\">::</span><span class=\"token function\">OnPossess</span><span class=\"token punctuation\">(</span>AllyPawn<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">// Attempt to cast the Pawn that was taken over to an AllyCharacter and if</span>\n\t<span class=\"token comment\">// successful then we assign it to our `AllyCharacter` variable.</span>\n\tAAllyCharacter<span class=\"token operator\">*</span> Ally <span class=\"token operator\">=</span> Cast<span class=\"token operator\">&lt;</span>AAllyCharacter<span class=\"token operator\">></span><span class=\"token punctuation\">(</span>AllyPawn<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>Ally <span class=\"token operator\">!=</span> <span class=\"token keyword\">nullptr</span><span class=\"token punctuation\">)</span> AllyCharacter <span class=\"token operator\">=</span> Ally<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre>\n<p>Save and compile then and then let's move on to creating the states so we can expand on our AllyAIController and actually have it control the AllyCharacter.</p>\n<h2 id=\"making-the-allycharacter-follow-the-playercharacter\"><a href=\"#making-the-allycharacter-follow-the-playercharacter\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a><strong>Making the AllyCharacter Follow the PlayerCharacter</strong></h2>\n<p>So first, we want to make the AllyCharacter follow the PlayerCharacter. While this is not very complex and we won't get into crazy detail there's some things we have to account for:</p>\n<ul>\n<li>We need to define the two states that the AllyCharacter can be in, FOLLOW and LEAD and then we need to create a variable to keep track of the AllyCharacter's current state.</li>\n<li>We need variables for the minimum and maximum distance that the AllyCharacter should be from the PlayerCharacter. This is used to find a random value between the two that denotes how far away the AllyCharacter stands from the PlayerCharacter.</li>\n<li>We need a variable for the maximum distance away the PlayerCharacter can be from the AllyCharacter before the AllyCharacter starts sprinting to catch up to the PlayerCharacter.</li>\n<li>We need to create a timer that will repeat and and check to see if the PlayerCharacter is moving so that we know when to make the AllyCharacter move. This is used to keep constant calls to <code>MoveToActor</code> out of <code>Tick</code> and increase performance/gameplay greatly.</li>\n<li>We also want to create a timer that will track whether we need to sprint or not. This could go in <code>Tick</code> but we want to avoid putting stuff in <code>Tick</code> especially if it's something that doesn't need to be run every frame.</li>\n</ul>\n<p>Let's get into the header file for the AllyCharacter and define the variables we discussed above:</p>\n<p><strong>AllyCharacter.h</strong></p>\n<p>Note that the <code>AllyStates</code> enum goes above the class declaration.</p>\n<pre class=\"language-cpp\"><code class=\"language-cpp\"><span class=\"token macro property\">#<span class=\"token directive keyword\">pragma</span> once</span>\n\n<span class=\"token macro property\">#<span class=\"token directive keyword\">include</span> <span class=\"token string\">\"CoreMinimal.h\"</span></span>\n<span class=\"token macro property\">#<span class=\"token directive keyword\">include</span> <span class=\"token string\">\"GameFramework/Character.h\"</span></span>\n<span class=\"token macro property\">#<span class=\"token directive keyword\">include</span> <span class=\"token string\">\"AllyCharacter.generated.h\"</span></span>\n\n<span class=\"token comment\">/**\n * The states that the AllyCharacter can be in.\n */</span>\n<span class=\"token function\">UENUM</span><span class=\"token punctuation\">(</span>BlueprintType<span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">enum</span> <span class=\"token class-name\">class</span> AllyStates <span class=\"token operator\">:</span> uint8 <span class=\"token punctuation\">{</span>\n\tFOLLOW\t<span class=\"token function\">UMETA</span><span class=\"token punctuation\">(</span>DisplayName <span class=\"token operator\">=</span> <span class=\"token string\">\"FOLLOW\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n\tLEAD\t<span class=\"token function\">UMETA</span><span class=\"token punctuation\">(</span>DisplayName <span class=\"token operator\">=</span> <span class=\"token string\">\"LEAD\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre>\n<p>Then in the <code>public</code> section:</p>\n<pre class=\"language-cpp\"><code class=\"language-cpp\"><span class=\"token comment\">// The current state of the AllyCharacter.</span>\n<span class=\"token function\">UPROPERTY</span><span class=\"token punctuation\">(</span>VisibleAnywhere<span class=\"token punctuation\">,</span> BlueprintReadOnly<span class=\"token punctuation\">)</span>\nAllyStates State <span class=\"token operator\">=</span> AllyStates<span class=\"token operator\">::</span>FOLLOW<span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// The minimum distance the AllyCharacter should be from the PlayerCharacter.</span>\n<span class=\"token function\">UPROPERTY</span><span class=\"token punctuation\">(</span>EditAnywhere<span class=\"token punctuation\">,</span> BlueprintReadWrite<span class=\"token punctuation\">,</span> Category <span class=\"token operator\">=</span> Ally<span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">float</span> MinDistanceFromPlayer <span class=\"token operator\">=</span> <span class=\"token number\">100.f</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// The maximum distance the AllyCharacter should be from the PlayerCharacter.</span>\n<span class=\"token function\">UPROPERTY</span><span class=\"token punctuation\">(</span>EditAnywhere<span class=\"token punctuation\">,</span> BlueprintReadWrite<span class=\"token punctuation\">,</span> Category <span class=\"token operator\">=</span> Ally<span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">float</span> MaxDistanceFromPlayer <span class=\"token operator\">=</span> <span class=\"token number\">500.f</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// The maximum distance the AllyCharacter can be from the PlayerCharacter before</span>\n<span class=\"token comment\">// they start sprinting to catch up to the PlayerCharacter.</span>\n<span class=\"token function\">UPROPERTY</span><span class=\"token punctuation\">(</span>EditAnywhere<span class=\"token punctuation\">,</span> BlueprintReadWrite<span class=\"token punctuation\">,</span> Category <span class=\"token operator\">=</span> Ally<span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">float</span> MaxDistanceFromPlayerBeforeSprint <span class=\"token operator\">=</span> MaxDistanceFromPlayer <span class=\"token operator\">+</span> <span class=\"token number\">100.f</span><span class=\"token punctuation\">;</span></code></pre>\n<p>Now in the AllyAIController we define the timers and the methods to respond to those timers:</p>\n<p><strong>AllyAIController.h</strong></p>\n<pre class=\"language-cpp\"><code class=\"language-cpp\"><span class=\"token keyword\">protected</span><span class=\"token operator\">:</span>\n\t<span class=\"token comment\">// A reference to the AllyCharacter.</span>\n\t<span class=\"token function\">UPROPERTY</span><span class=\"token punctuation\">(</span>VisibleAnywhere<span class=\"token punctuation\">,</span> BlueprintReadOnly<span class=\"token punctuation\">,</span> Category <span class=\"token operator\">=</span> AI<span class=\"token punctuation\">)</span>\n\t<span class=\"token keyword\">class</span> <span class=\"token class-name\">AAllyCharacter</span><span class=\"token operator\">*</span> AllyCharacter<span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">// The repeating timer used to manage the AllyCharacter's sprint state.</span>\n\tFTimerHandle AllySprintTimer<span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">// The repeating timer used to make the AllyCharacter follow the PlayerCharacter.</span>\n\tFTimerHandle AllyFollowTimer<span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">protected</span><span class=\"token operator\">:</span>\n\t<span class=\"token comment\">/**\n\t * Called when the AllyAIController takes over the AllyCharacter.\n\t *\n\t * @param AllyPawn The AllyCharacter pawn.\n\t */</span>\n\t<span class=\"token keyword\">virtual</span> <span class=\"token keyword\">void</span> <span class=\"token function\">OnPossess</span><span class=\"token punctuation\">(</span>APawn<span class=\"token operator\">*</span> AllyPawn<span class=\"token punctuation\">)</span> override<span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">/**\n\t * Called when a move request has been completed.\n\t */</span>\n\t<span class=\"token keyword\">virtual</span> <span class=\"token keyword\">void</span> <span class=\"token function\">OnMoveCompleted</span><span class=\"token punctuation\">(</span>FAIRequestID RequestID<span class=\"token punctuation\">,</span> <span class=\"token keyword\">const</span> FPathFollowingResult<span class=\"token operator\">&amp;</span> Result<span class=\"token punctuation\">)</span> override<span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">/**\n\t * Called to move the AllyCharacter to the PlayerCharacter.\n\t */</span>\n\t<span class=\"token keyword\">void</span> <span class=\"token function\">MoveToPlayerCharacter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">/**\n\t * Called by the `AllyFollowTimer` to check to see if the PlayerCharacter is\n     * is moving or not.\n\t */</span>\n\t<span class=\"token function\">UFUNCTION</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\t<span class=\"token keyword\">void</span> <span class=\"token function\">CheckIfPlayerIsMoving</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">/**\n\t * Called by the `AllySprintTimer` to make the AllyCharacter start or stop sprinting.\n\t */</span>\n\t<span class=\"token function\">UFUNCTION</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\t<span class=\"token keyword\">void</span> <span class=\"token function\">ManageAllySprint</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre>\n<p>And now in the cpp file we have to create the <code>MoveToPlayerCharacter</code>, <code>CheckIfPlayerIsMoving</code> and <code>ManageAllySprint</code> methods. Let's go over each of these methods in detail:</p>\n<p><strong>MoveToPlayerCharacter</strong></p>\n<ul>\n<li>Get a random float in between the <code>MinDistanceFromPlayer</code> and <code>MaxDistanceFromPlayer</code> to pass as the acceptance radius for the <code>MoveToActor</code> call.</li>\n<li>Call <code>MoveToActor</code> to move the AllyCharacter to the PlayerCharacter passing in the float from above as the second parameter.</li>\n</ul>\n<p><strong>BeginPlay</strong></p>\n<ul>\n<li>Here we just call <code>MoveToPlayerCharacter</code> to make the AllyCharacter follow the PlayerCharacter right away.</li>\n</ul>\n<p><strong>OnMoveCompleted</strong></p>\n<ul>\n<li>This method is called anytime a move command has completed which for us is after a call to <code>MoveToPlayerCharacter</code>.</li>\n<li>Check to see if the AllyCharacter is in a FOLLOW state and if so we get the AllyCharacter's velocity.</li>\n<li>If the velocity above is greater than zero, we call <code>MoveToPlayerCharacter</code> to keep the AllyCharacter moving to the PlayerCharacter.</li>\n<li>If the velocity is zero, we set the <code>AllyFollowTimer</code> which on an interval calls <code>CheckIfPlayerIsMoving</code> so see if the PlayerCharacter is moving so the AllyCharacter can move towards them again. This is necessary because after the PlayerCharacter stops and in turn the AllyCharacter stops, <code>OnMoveCompleted</code> will stop being called so we need to set up a timer to keep checking if we need to restart the movement with <code>MoveToPlayerCharacter</code> which in turn will start calling <code>OnMoveCompleted</code> again.</li>\n</ul>\n<p><strong>CheckIfPlayerIsMoving</strong></p>\n<ul>\n<li>Get the velocity of the PlayerCharacter.</li>\n<li>If the velocity is above zero, we want to clear the <code>AllyFollowTimer</code> as we no longer need to check if the PlayerCharacter is moving. We then set the <code>AllyFollowTimer</code> which will repeatedly run the <code>ManageAllySprint</code> method to check if the AllyCharacter is far from the PlayerCharacter and should sprint to catch up. Lastly we call the <code>MoveToPlayCharacter</code> method to move the AllyCharacter to the PlayerCharacter again.</li>\n</ul>\n<p><strong>ManageAllySprint</strong></p>\n<ul>\n<li>Get the distance from the AllyCharacter to the PlayerCharacter.</li>\n<li>If the distance from above is greater than or equal to the <code>MaxDistanceFromPlayerBeforeSprint</code> and the AllyCharacter currently isn't sprinting then we want to set the AllyCharacter to sprint.</li>\n<li>Otherwise if the distance is less than the <code>MaxDistanceFromPlayerBeforeSprint</code> and the AllyCharacter is currently sprinting then we set the AllyCharacter to not sprint.</li>\n</ul>\n<p>So now let's implement this in the AllyAIController cpp file:</p>\n<p><strong>AllyAIController.cpp</strong></p>\n<pre class=\"language-cpp\"><code class=\"language-cpp\"><span class=\"token macro property\">#<span class=\"token directive keyword\">include</span> <span class=\"token string\">\"AllyAIController.h\"</span></span>\n<span class=\"token macro property\">#<span class=\"token directive keyword\">include</span> <span class=\"token string\">\"AllyCharacter.h\"</span></span>\n<span class=\"token macro property\">#<span class=\"token directive keyword\">include</span> <span class=\"token string\">\"../Player/PlayerCharacter.h\"</span></span>\n<span class=\"token macro property\">#<span class=\"token directive keyword\">include</span> <span class=\"token string\">\"Tasks/AITask_MoveTo.h\"</span></span>\n<span class=\"token macro property\">#<span class=\"token directive keyword\">include</span> <span class=\"token string\">\"GameFramework/Character.h\"</span></span>\n<span class=\"token macro property\">#<span class=\"token directive keyword\">include</span> <span class=\"token string\">\"Kismet/GameplayStatics.h\"</span></span>\n<span class=\"token macro property\">#<span class=\"token directive keyword\">include</span> <span class=\"token string\">\"Kismet/KismetMathLibrary.h\"</span></span>\n<span class=\"token macro property\">#<span class=\"token directive keyword\">include</span> <span class=\"token string\">\"Navigation/PathFollowingComponent.h\"</span></span>\n<span class=\"token macro property\">#<span class=\"token directive keyword\">include</span> <span class=\"token string\">\"GameFramework/CharacterMovementComponent.h\"</span></span>\n\n<span class=\"token comment\">/**\n * Sets up the default values for the AllyAIController.\n */</span>\nAAllyAIController<span class=\"token operator\">::</span><span class=\"token function\">AAllyAIController</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n\t<span class=\"token comment\">// Starts the AI logic for this AIController as soon as the AllyCharacter</span>\n\t<span class=\"token comment\">// is taken over so that we can issue commands immediately.</span>\n\tbStartAILogicOnPossess <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">/**\n * Called when the AllyAIController starts.\n */</span>\n<span class=\"token keyword\">void</span> AAllyAIController<span class=\"token operator\">::</span><span class=\"token function\">BeginPlay</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n\tSuper<span class=\"token operator\">::</span><span class=\"token function\">BeginPlay</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">// Move the AllyCharacter to the PlayerCharacter from the start.</span>\n\t<span class=\"token function\">MoveToPlayerCharacter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">/**\n * Called when the AllyAIController takes over the AllyCharacter.\n *\n * @param AllyPawn The AllyCharacter pawn.\n */</span>\n<span class=\"token keyword\">void</span> AAllyAIController<span class=\"token operator\">::</span><span class=\"token function\">OnPossess</span><span class=\"token punctuation\">(</span>APawn<span class=\"token operator\">*</span> AllyPawn<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n\tSuper<span class=\"token operator\">::</span><span class=\"token function\">OnPossess</span><span class=\"token punctuation\">(</span>AllyPawn<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">// Attempt to cast the Pawn that was taken over to an AllyCharacter and if</span>\n\t<span class=\"token comment\">// successful then we assign it to our `AllyCharacter` variable.</span>\n\tAllyCharacter <span class=\"token operator\">=</span> Cast<span class=\"token operator\">&lt;</span>AAllyCharacter<span class=\"token operator\">></span><span class=\"token punctuation\">(</span>AllyPawn<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">/**\n * Called when a move request has been completed.\n */</span>\n<span class=\"token keyword\">void</span> AAllyAIController<span class=\"token operator\">::</span><span class=\"token function\">OnMoveCompleted</span><span class=\"token punctuation\">(</span>FAIRequestID RequestID<span class=\"token punctuation\">,</span> <span class=\"token keyword\">const</span> FPathFollowingResult<span class=\"token operator\">&amp;</span> Result<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n\tSuper<span class=\"token operator\">::</span><span class=\"token function\">OnMoveCompleted</span><span class=\"token punctuation\">(</span>RequestID<span class=\"token punctuation\">,</span> Result<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>AllyCharacter<span class=\"token operator\">-></span>State <span class=\"token operator\">==</span> AllyStates<span class=\"token operator\">::</span>FOLLOW<span class=\"token punctuation\">)</span>\n\t<span class=\"token punctuation\">{</span>\n\t\t<span class=\"token comment\">// Check to see if the AllyCharacter is moving with a simple velocity check.</span>\n\t\t<span class=\"token keyword\">bool</span> bIsAllyCharacterMoving <span class=\"token operator\">=</span> AllyCharacter<span class=\"token operator\">-></span><span class=\"token function\">GetCharacterMovement</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-></span>Velocity<span class=\"token punctuation\">.</span><span class=\"token function\">Size</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">></span> <span class=\"token number\">0.f</span><span class=\"token punctuation\">;</span>\n\n\t\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>bIsAllyCharacterMoving<span class=\"token punctuation\">)</span>\n\t\t<span class=\"token punctuation\">{</span>\n\t\t\t<span class=\"token comment\">// If the AllyCharacter is moving then it means that the PlayerCharacter is still moving</span>\n\t\t\t<span class=\"token comment\">// so we call `MoveToPlayerCharacter` to keep moving towards the PlayerCharacter.</span>\n\t\t\t<span class=\"token function\">MoveToPlayerCharacter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token punctuation\">}</span>\n\t\t<span class=\"token keyword\">else</span>\n\t\t<span class=\"token punctuation\">{</span>\n\t\t\tUWorld<span class=\"token operator\">*</span> World <span class=\"token operator\">=</span> <span class=\"token function\">GetWorld</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>World <span class=\"token operator\">==</span> <span class=\"token keyword\">nullptr</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n\n\t\t\t<span class=\"token comment\">// Otherwise if the AllyCharacter is no longer moving then `OnMoveCompleted` will not run</span>\n\t\t\t<span class=\"token comment\">// again so we need to set up a repeating timer that checks to see if the PlayerCharacter</span>\n\t\t\t<span class=\"token comment\">// has started moving again and if so we cancel this timer and call `MoveToPlayerCharacter`</span>\n\t\t\t<span class=\"token comment\">// which just restarts this whole process.</span>\n\t\t\tWorld<span class=\"token operator\">-></span><span class=\"token function\">GetTimerManager</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">SetTimer</span><span class=\"token punctuation\">(</span>AllyFollowTimer<span class=\"token punctuation\">,</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span> <span class=\"token operator\">&amp;</span>AAllyAIController<span class=\"token operator\">::</span>CheckIfPlayerIsMoving<span class=\"token punctuation\">,</span> <span class=\"token number\">0.05f</span><span class=\"token punctuation\">,</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\tWorld<span class=\"token operator\">-></span><span class=\"token function\">GetTimerManager</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">ClearTimer</span><span class=\"token punctuation\">(</span>AllySprintTimer<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token punctuation\">}</span>\n\t<span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">/**\n * Called to move the AllyCharacter to the PlayerCharacter.\n */</span>\n<span class=\"token keyword\">void</span> AAllyAIController<span class=\"token operator\">::</span><span class=\"token function\">MoveToPlayerCharacter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n\t<span class=\"token comment\">// Return early if the PlayerCharacter hasn't been assigned to the AllyCharacter.</span>\n\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>AllyCharacter<span class=\"token operator\">-></span>PlayerCharacter <span class=\"token operator\">==</span> <span class=\"token keyword\">nullptr</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">// Get a random value between `MinDistanceFromPlayer` and `MaxDistanceFromPlayer` to use</span>\n\t<span class=\"token comment\">// as the second parameter.</span>\n\t<span class=\"token keyword\">float</span> AcceptanceRadius <span class=\"token operator\">=</span> UKismetMathLibrary<span class=\"token operator\">::</span><span class=\"token function\">RandomFloatInRange</span><span class=\"token punctuation\">(</span>AllyCharacter<span class=\"token operator\">-></span>MinDistanceFromPlayer<span class=\"token punctuation\">,</span> AllyCharacter<span class=\"token operator\">-></span>MaxDistanceFromPlayer<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">// Move to the PlayerCharacter within the AcceptanceRadius.</span>\n\t<span class=\"token function\">MoveToActor</span><span class=\"token punctuation\">(</span>AllyCharacter<span class=\"token operator\">-></span>PlayerCharacter<span class=\"token punctuation\">,</span> AcceptanceRadius<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">/**\n * Called by the `AllyFollowTimer` to check to see if the PlayerCharacter is\n * is moving or not.\n */</span>\n<span class=\"token keyword\">void</span> AAllyAIController<span class=\"token operator\">::</span><span class=\"token function\">CheckIfPlayerIsMoving</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n\t<span class=\"token comment\">// Check to see if the PlayerCharacter is moving by a simple velocity check.</span>\n\t<span class=\"token keyword\">bool</span> bIsPlayerCharacterMoving <span class=\"token operator\">=</span> AllyCharacter<span class=\"token operator\">-></span>PlayerCharacter<span class=\"token operator\">-></span><span class=\"token function\">GetCharacterMovement</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-></span>Velocity<span class=\"token punctuation\">.</span><span class=\"token function\">Size</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">></span> <span class=\"token number\">0.f</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>bIsPlayerCharacterMoving<span class=\"token punctuation\">)</span>\n\t<span class=\"token punctuation\">{</span>\n\t\tUWorld<span class=\"token operator\">*</span> World <span class=\"token operator\">=</span> <span class=\"token function\">GetWorld</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>World <span class=\"token operator\">==</span> <span class=\"token keyword\">nullptr</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n\n\t\t<span class=\"token comment\">// Clear the timer as the movement is going to get handled by the `OnMoveCompleted`</span>\n\t\t<span class=\"token comment\">// method until the AllyCharacter stops moving again.</span>\n\t\tWorld<span class=\"token operator\">-></span><span class=\"token function\">GetTimerManager</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">ClearTimer</span><span class=\"token punctuation\">(</span>AllyFollowTimer<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t\t<span class=\"token comment\">// Set the timer that manages the AllyCharacter's movement properties such as walking</span>\n\t\t<span class=\"token comment\">// and sprinting.</span>\n\t\tWorld<span class=\"token operator\">-></span><span class=\"token function\">GetTimerManager</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">SetTimer</span><span class=\"token punctuation\">(</span>AllySprintTimer<span class=\"token punctuation\">,</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span> <span class=\"token operator\">&amp;</span>AAllyAIController<span class=\"token operator\">::</span>ManageAllySprint<span class=\"token punctuation\">,</span> <span class=\"token number\">0.5</span><span class=\"token punctuation\">,</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t\t<span class=\"token comment\">// Call `MoveToPlayerCharacter` to start this process all over again.</span>\n\t\t<span class=\"token function\">MoveToPlayerCharacter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">/**\n * Called by the `AllySprintTimer` to make the AllyCharacter start or stop sprinting.\n */</span>\n<span class=\"token keyword\">void</span> AAllyAIController<span class=\"token operator\">::</span><span class=\"token function\">ManageAllySprint</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n\t<span class=\"token keyword\">float</span> DistanceFromPlayerCharacter <span class=\"token operator\">=</span> AllyCharacter<span class=\"token operator\">-></span><span class=\"token function\">GetDistanceTo</span><span class=\"token punctuation\">(</span>AllyCharacter<span class=\"token operator\">-></span>PlayerCharacter<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\tUCharacterMovementComponent<span class=\"token operator\">*</span> Movement <span class=\"token operator\">=</span> AllyCharacter<span class=\"token operator\">-></span><span class=\"token function\">GetCharacterMovement</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>DistanceFromPlayerCharacter <span class=\"token operator\">>=</span> AllyCharacter<span class=\"token operator\">-></span>MaxDistanceFromPlayerBeforeSprint <span class=\"token operator\">&amp;&amp;</span> <span class=\"token operator\">!</span>AllyCharacter<span class=\"token operator\">-></span>bIsSprinting<span class=\"token punctuation\">)</span>\n\t<span class=\"token punctuation\">{</span>\n\t\t<span class=\"token comment\">// If the AllyCharacter is out of the `MaxDistanceFromPlayerBeforeSprint` value then</span>\n\t\t<span class=\"token comment\">// we set the AllyCharacter to sprint.</span>\n\t\tAllyCharacter<span class=\"token operator\">-></span><span class=\"token function\">SprintStart</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n\t<span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>DistanceFromPlayerCharacter <span class=\"token operator\">&lt;</span> AllyCharacter<span class=\"token operator\">-></span>MaxDistanceFromPlayerBeforeSprint <span class=\"token operator\">&amp;&amp;</span> AllyCharacter<span class=\"token operator\">-></span>bIsSprinting<span class=\"token punctuation\">)</span>\n\t<span class=\"token punctuation\">{</span>\n\t\t<span class=\"token comment\">// If the AllyCharacter is not out of the `MaxDistanceFromPlayerBeforeSprint` value</span>\n\t\t<span class=\"token comment\">// and it is sprinting then we set it back to the walking speed.</span>\n\t\tAllyCharacter<span class=\"token operator\">-></span><span class=\"token function\">SprintStop</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre>\n<p>Keep in mind that above I have a mesh and skeleton loaded and if you don't update these references to your own or copy the ones from the <a href=\"https://github.com/robertcorponoi/unreal-follow-lead-ai\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">repo</a> your editor will crash.</p>\n<p>Ok now save and compile and let's get to testing it out. After compiling head over to your editor and drag out an instance of AllyCharacter onto the level and we'll adjust some settings.</p>\n<p>First, find the Ally tab and in the PlayerCharacter reference select the PlayerCharacter that's on the scene. If you never added the PlayerCharacter to the level then drag out instance of that as well. Last thing we have to do is find the Pawn tab in the AllyCharacter and set the Auto Possess AI option to Placed in World or Spawned and the AI Controller Class to AllyAIController like so:</p>\n<p><img class=\"g-image g-image--lazy g-image--loading\" src=\"data:image/svg+xml,%3csvg fill='none' viewBox='0 0 499 218' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-09ec20b32a6a2626e43ab2dccf784503'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='40'/%3e%3c/filter%3e%3c/defs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-09ec20b32a6a2626e43ab2dccf784503)' width='499' height='218' xlink:href='data:image/png%3bbase64%2ciVBORw0KGgoAAAANSUhEUgAAAEAAAAAcCAYAAADRJblSAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAGL0lEQVRYw82YWU%2bUSxCG%2bT8IgqIIOAKiIDuyi%2bwgoCAQwg0kJIZgomzKjpAIqCBhiaBRhGDiDRcSDT%2bpzjxlatKMIxwnaL6Lml6nu6v6fauqv4jLly/L%2bfPnJTIyUqKioiQ6OlqFvpiYmED5f8Xms1a4a/xLibh48aIqfOvWLUlKSpK4uDiJj4%2bXCxcuhHXwUAbwskQkJyfLvXv3pKKiQrq6ulQ6Ojrkxo0biorY2NiwFsYAXldeDXDlyhVJSEiQc%2bfOCWgAASj9p4oH3zYGwICsy5hXJSIxMVHMCCiPUMc3XLp0ScXqzEPcfubb/62PNaERtMrMzNS2V0UpcPXqVSkqKpKWlha5e/eulJWVSXV1tTQ2Nkp9fb00NzcrTW7fvi2tra3aj9TU1Ehtba3cuXNH%2b5lLOzU1VddcXl6WlZUVSUlJEZ/PJ%2bx17do1T0kEPxw2IyNDSktLJT8/X%2buFhYVqFFfS09N1vKSkRKWgoEBLbjkrK0vn5OXlqcJYt6enR3p7e3UjDGCllyTCDsaB8QHAmDql%2bQSrGzWo21xKowaRA%2bjbelAAsT28KIoAwh/wBtbAn1uFCsDZqFBXV6e3D03oRyorK1W4%2baqqKu3Lzc1V5UHBzs6ObG9vS1pamqLMswbgcEDYlKEOHeB2eXl5QLjN4uJiDZkIhqLMzs5WOuAToAMGhe%2bjo6MyMzMj169f964BDJ7AGwgDa4sIBnWrm6cPRQHq/J/bR3nm2iamvBepEKAA8OYGzeFBBRABCuinDryhA/SgDSqMMg0NDUoXHCUKIy9evJD5%2bXk1iFf9QIACOTk5ynMUQlGUhNcoSokAdTMIQh2l8R82B76jLGtCgWfPnnnOAG5EOkYBgzWQduFvUMfDu9HBxtzIYEkRJchC3A09ZwCjAPEbSHP73ChJDW2cG46P26UfAfI4SYv7oMVyA8YZu3nzpjx//lwmJyf/GAH/wlC2R4ACKN7U1KReHQUwAJQA5ihF%2bAPucL29vV2VZg5KYxzmWnikn2gwMTEh09PTYkY234AEJyRu/982gq3NfscoAJyBOfAF3kDb2gZ167M6Xt8gHyzkArwqCYP4BuqUtEEF4wh1GzOD/E0juMnfsVQYR2jZG/Cmz9p4d5wgN2799NmiKGFi7dXVVU2Gvnz5Iru7u/Lp0yfZ29uTr1%2b/yvfv3%2bXw8FC%2bffsmP378kI8fP8rBwYGiC%2bNjmNP4e2YGoALUHzx4EOA%2bkLZHD9SgnwgBBe7fv6%2bPH6gCtIM3wKA8iN68eSNLS0saDsfHx5USU1NTqixKozxydHSkj6b9/X3p7u5WtBlKTAwpZ24Alw9u3U1k3D/yJ7f9uwNhGIzX2dmpxkIePnwobW1tWrfShJtHeVDFO92Sr%2bAo5PNxPvbyaT0cQ/yCAFdxu1FuACO4b2fG7Wnrbhx8CHNq/f39mgeQDs/Ozurtm2Okn7b1MT42NqZjoGZhYUFevnypwtirV6/8r8te/zni/UZKUeUxwplQAEXx/twK7348PHQA%2bggRAOgzB/ifpLwZEgNubGyooND6%2brrCnMfRhw8fNEOk//Xr1zpna2tL/QO0WVxclLm5OR1Hcea8f78tb9%2bu%2bs8aKxWViQEEhGOEkAjACxO6cHDmqWlbnzk96qfFa0PIwMCA3jDl06dPZXBwUIaHh2VoaEhL%2bhDqT5480ZxhZGQkMA5KEBACIvr6%2bpQGqam%2bYwb4UxqE9AGggMXdkGbhzu23%2bu8eOO7i9kw2AVmhUmz6SK0xMP%2bD95ZBUtJHyWOLvX2%2bZH87/KTpFwTYY8i%2bCFk2hwLAnhIkEB2oM37SG998xdramkKbELi5uanQx9MTBT5//izv3r3T0Egf8ujRIz3U48ePNTHjXFCSPVEcn1JdXeOPBvFSVo5xwosIIcMgCqMsqa9lc25JjsA4B8If8M0gVAh0wyDODwoAbcIgfIbbtHF2VvLtEGPxCY01eURxEdCQ6IAxQB90qa9vkAS/I8wvSAz7mR2SApbRcYBQmZ1B0dqnbc5cYM4HVQyGM6XEgOZcTQiXOFqMbBSw7wr2oGJN%2b1z3E7VnSIHgRdwExM3u3LHfbe4ubp/T3U/sJ4kpF2p996vyz/7wU2b3jP8BkeLKpcu7Gm4AAAAASUVORK5CYII=' /%3e%3c/svg%3e\" width=\"499\" alt=\"Ally Pawn Settings\" data-srcset=\"/assets/static/allycharacter-pawn-settings.2c9df91.107f5a3c479a310b724a02cbd2c3a75e.png 499w\" data-sizes=\"(max-width: 499px) 100vw, 499px\" data-src=\"/assets/static/allycharacter-pawn-settings.2c9df91.107f5a3c479a310b724a02cbd2c3a75e.png\"><noscript><img class=\"g-image g-image--lazy g-image--loaded\" src=\"/assets/static/allycharacter-pawn-settings.2c9df91.107f5a3c479a310b724a02cbd2c3a75e.png\" width=\"499\" alt=\"Ally Pawn Settings\"></noscript></p>\n<p>And finally make sure that you have a nav mesh that covers the bounds of your level so that the AllyCharacter can actually move.</p>\n<p><img class=\"g-image g-image--lazy g-image--loading\" src=\"data:image/svg+xml,%3csvg fill='none' viewBox='0 0 1580 607' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-9a3625eb8a197f9464a8749fe2745aa0'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='40'/%3e%3c/filter%3e%3c/defs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-9a3625eb8a197f9464a8749fe2745aa0)' width='1580' height='607' xlink:href='data:image/png%3bbase64%2ciVBORw0KGgoAAAANSUhEUgAAAEAAAAAZCAYAAACB6CjhAAAACXBIWXMAAA7DAAAOwwHHb6hkAAALN0lEQVRYw71Z%2bVOb1xXV1Elt4y1pJpPpdLLU0%2bm001IntgGBxA4GDA4OdrN4SWrHcQLEGAzG7MgYhPZ9R0K7EAgJs%2b%2bGJH/Y6X3vk5DAkLppyQ9nPvGt95577n33PkRaYxAm6zi0WhP0egu0xhAMlhAsljGYLU6YzQEY6JzJEoHZOgELwWoJw2aNwG6b4HDYoweDXXdMQ9/9DWyKPrjHp2DU22BzBGAabIax6yYcTvrmgwq4bTaYVGroHtbCYbHDaHBAqzbAoHdA1jcMibQYNTV1qK%2bvR2VFBSrKy3Hp0iVUVlYiLy%2bXkAfxPsjNzUVpaSm/PyfnIv87NzcHUqkEIo2WDFITCSofLBoySk0OGuOw68Nwmch4ywzsphk4jdNw0W%2b3Yx4e7wbGfRvw%2bjc5fIEXAoIv4A9ucbDfwnm6J7CNMZMbHmcY44F1jLkX4PauwmnywK6zwDW%2bAvOIHC5XAhZzFMbhUVht00R8DFpdBFr9FPr79KisuoKS8stobmrEzVu30XD9U3z2%2bQ1cqqpBgbQIksJi5EuKXoK4QErP1uBy3ccoKS1HSVkFiukooWdEIwNuKFsVULdroKajtl0JQ68Z%2bg41jJ0aWIZcsD21w95rgL3PCJfSC49vjQhYI%2bfX4WMIbMCfQjCJ5N8%2bctjrXyNCtjFOZHnGV0kFq3C5l%2bH0rMHhXoPVPgercxUm83MYTM%2bhM81DrZmCUhXFqCJMmEBPlwYNn1xDV8s9tDfdRXvzXfS03SN8g9b7N9D41TU8%2bPozPG669RI6Gm%2bil%2b4dfNwIWWcTnj5pwkDHt2i68ylEo6pJqPRxqI0JqAzT0NBRZ56BwTYHE0XbTMbZxpZg96wQluH2rScd3xAcD24iwBB6sYPgzm/hGruHEeEjIryMPC8jYYWUsATn2CIcrkXY7LOw2GYp1YgEUqBOT7ZoGQkRKNWT6O3RoqHhOhnfjA5yvq3xK3LuNu7fqkfznevk/KdoIQw8uouBtgzwv%2b9A1vENZI%2b/xdCTRgx1fofh7mZ0P/waIoUyCrU6SlKLwWBI8ChYrLNk0Dzl5gJcY8tk6DJFboUMFxzwJSOdcjwYTmGLsJ3EloAUGYwIpggiz0skepIkcCUwgulbTAlm%2braRUk5viHObVGSbUj2FwX4DSsurcVFchKtX61F/tQG1V65yWVfV1FIaXEZ5ZRXOX8zbhQs5Ynx0IZfLvqb2Y35/9eU6FJWU8ZQRKUkBamKaMW4wJXgELBR9m2OBR4YZOEbRZwaP8%2bhTNJkzKceSjoYiDBsIR9bpmER4NU3MHhJYCrF3sne7iACuAlIc%2bzZPBaZEfYxSIUokTEE2aEYhFa2S4mKUlJRQUStBGRW28rIylHGUcvDrr4CiwkIUFRUSAfRyjW6KM86YZxGwUvTtzkUeGe78uOA8k3AgMIdgcB7h0CIi4WVEycnJyBo5u4FYdAvx6AvMRDcJ25iLrmEqsoBgZJuub%2b0ogSmIpRFTFKsHY5kqIALMFAQjBUPPUlJLAdLE8FRmhlRSgEIy/OdQVFT00u/Mc5nXGEQqTYxLTW9Myv/A6G8i5I9jipyeDP9AjjMCZim6cYp6FO3aBBQuN0wBHUa9zzDo6US3s5EcDmNyYiOZEoJq/CkS9qrAuchTj6Wg0SykAasDGm0MQzJLkoCiHeP3Q6ZzP3cudV7E2NUy%2bRv3yn%2bJE8Dy1ONlVX8Fk8El9Bkf4YahCJ8bi/GJ/jxqdX9Bte5dSIcvQjz6LiSaLIhVpyBWnsSHShH%2bpS/HNKkkHFkRasO%2bKhBqwU4aEAFCGrA6wAiYxtDTVyPgv4VITS8X8n%2bGCJg9kIAAOe8fi6Os76/IlotwUX4U51XHcEFzDPny46gbrkKp5hzy1a9Dqj4DifYkipVvI3f4GLrMzZidZGmwQgrY2qkF%2bxFgdwhpIKwGCa5OjY4RYD1sAjIUQLnoIEm62LJHOerxriAaWqZl0oScPnJO%2bQbylWfwRUsWbj/Kwj/bj%2bCBJg/1jmzkKo4QAadRMvwOKvrfQ6nsD5CoTuKZRkvvWCMVrFIKvEgT4MuoA0R6igBzBgFaXRzPDo%2bA2C4FWG3zvBg5eAFkBLB1ewGx8Dq%2bG7yHD4eOIF9xmnAKRfIThOOQKo9T5I%2bhgIFSgBFwqfMsCpVvQkJqyFMfR2nfn%2bBxT1M9WCYC1oQO8QAFWH5dBcQyFDDL2bfvUYDfP4cAta%2bXu2hdlb%2bO/NEzECtOIE91HGL1CXL%2bBCdAQkeGAjWRoDrNjwUU/UL1W8hRvoYv5ZcwSe1xKDiX7BDXhaaIFUH30p4aMJOuAYdJAF8FaL3dvwiukHGLCAcXiSQPLnS8hTxlFvLkJ7kCCpSnKBUo%2bkSEhKIuUZ8kh7NI8uS8ioigYihV/Y6OdE3zJpGQhW5jK6ajPyHgn003RAcQoP81iuDPLYNOTsAM5e46Wvraca7/txDLTyNv5AQdCaMUYUoHieoNrgKJjqJtfBOFpjOEUxz5WlLJ6FGIB7Nw/snryP7yKBTDSsQiM/B553mBZanm5Mvgwv%2b8DP4CApjEYkIjRASYrXNCI8T6AOrTx8cTCFKErrSW49wzEUXzDcpzAjkrMTCwZe8o8qna5/Udx0ePjiD73ms4d%2bMUPrr2Di7Uvg9xdTYqrpTi2vXPcfOL%2bxgZ1lM/kSD5LwkF0LO3HX6ebIczG6FDIoB3gqwV3tMJ2qgpcbmeU/7PQ68NIqfp98gZIMceHsHf7v8G/7idheyGM/h79ds4X3kWkuocVNVV4XrDTdz9qhWP24YxIrPBoA7RGPycrwBT0XXEpjYxQW2y3zd/4BLIVwBTgtcmtWaST4bpTvD/TcCuWWBmpw5YHYtwOycQCSTQ2y1DdsGfUVCex%2bfphvpbuHenE52PFBgetMGojcBLRZI5OB3bRCKxhZmZHxGPb2MqtoEIdYKBEBuP1/hozNpqBk8y%2brtmgV0FMHMWMB0OAQqauVXEslAH4jz3BBXQJOiMw%2b%2bJwGKhaVEdxJhrjtpf6gmox49NkbPTW4gRJifXEZ5Yp8FokzvKnU2OwXzN58eNdPfnE3qLVPFzsujvkr8wB7ACqFJPgAVJNnBIBIwq6QM0cqbSIFMFdsccOT1NdWCeUmGRqvYiN1yYDVLT4QZf0/m%2bQGgPko6nN0bSU6CwH7As7Aew4scnwVT0E8n9gEm%2bH8BG9sEB4yERoKAP0EdYrrHlcLcKWC2g4kRLomOMpEoREzrD1fSOUCBjRyi4G75AEv71pPQznE9VfpfgvJWcT0%2bBafkrlMKO0EC/4XAI6JaFIR8NpUngK8I0N0RQAhHhYM3RPDeWGS1Miak5YTVDEQIxO7%2bT19hmSspp184u0AIpbJ7L3kKyN1ko8qY4qXCaj%2bdsI4Q5L5cHMSIPoa9XJxBwwFT3KtiXgKGRCd5p6fQJvh9ntrBosJxkEWI5yio1FazkJqgvsAV/aJvyne36/IBQ5Eea9AgTDD8l8eMO2PVQ5Ad%2bb4Ce4xum1A2yd7HNVdZqu9yrVAeWiZAl%2bvYC2TBHaTBDNsX5CqBSp5dBqVTKwRxKHV812pnPpI6iB809aHnQg9aWPrS1DqC9bRAd7TI87hjCk8fP0PVkGN1dI%2bjplqO3h9A7StEYRX%2bfgmOgX8kxOKBKQplG8hpD6n72LH8Pva%2bH3ttN7%2b/qfEbfGqJvPkXHIxnZMIC2h/1kUy9avu/Gg%2b97cP/rZk5ARUUl3wavqKjY2RJnW97/CWwXiT1TVVWF8vJy/pudF/3xjx8gjfdfxgfv44N98d4vxMvvYt/Y99tJu86eFY5isZj/T4ChtrYWDQ0NqKureyXpSyUSVFfX4JOGa/TsZf4ORsa/Afc1xs9yvRFNAAAAAElFTkSuQmCC' /%3e%3c/svg%3e\" width=\"1580\" alt=\"Navmesh\" data-srcset=\"/assets/static/navmesh.82a2fbd.5d07ee812d864b7c4981d7a1968d650a.png 480w, /assets/static/navmesh.cbab2cf.5d07ee812d864b7c4981d7a1968d650a.png 1024w, /assets/static/navmesh.00bdde2.5d07ee812d864b7c4981d7a1968d650a.png 1580w\" data-sizes=\"(max-width: 1580px) 100vw, 1580px\" data-src=\"/assets/static/navmesh.00bdde2.5d07ee812d864b7c4981d7a1968d650a.png\"><noscript><img class=\"g-image g-image--lazy g-image--loaded\" src=\"/assets/static/navmesh.00bdde2.5d07ee812d864b7c4981d7a1968d650a.png\" width=\"1580\" alt=\"Navmesh\"></noscript></p>\n<p>Now if you have all that set up and press play you sould see the AllyCharacter following the PlayerCharacter and if you sprint as the PlayerCharacter you'll notice that at a certain distance the AllyCharacter will also start to sprint to catch up to you and then it'll go back to walking when it's near the PlayerCharacter again.</p>\n<p>Of course this is pretty simple but it handles fluid AI movement without overlapping logic in <code>Tick</code>.</p>\n<h2 id=\"making-the-allycharacter-lead-the-playercharacter\"><a href=\"#making-the-allycharacter-lead-the-playercharacter\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a><strong>Making the AllyCharacter Lead the PlayerCharacter</strong></h2>\n<p>Now that we have the AllyCharacter following the PlayerCharacter, let's work on having the AllyCharacter lead the PlayerCharacter. We're going to accomplish this by setting up one or more waypoints that the AllyCharacter goes between. We'll also set it up so that if the PlayerCharacter gets too far away from the AllyCharacter then the AllyCharacter will stop and wait for the PlayerCharacter to get closer before proceeding.</p>\n<p>So to get started on this, we need to create the waypoints that the AllyCharacter will use for navigation when leading. These Waypoints will need:</p>\n<ul>\n<li>A <code>UBoxComponent</code> to act as a box collider so that the AllyCharacter knows when it has come to a waypoint.</li>\n<li>A variable that tracks what number waypoint this is. This is needed as the waypoints will be found automatically by the AllyCharacter and they will be sorted by their index.</li>\n</ul>\n<p>So let's get started by creating a new C++ class that has a base parent of Actor and name it WaypointActor and let's get into defining the properties and methods we need in the header file:</p>\n<p><strong>WaypointActor.h</strong></p>\n<pre class=\"language-cpp\"><code class=\"language-cpp\"><span class=\"token macro property\">#<span class=\"token directive keyword\">pragma</span> once</span>\n\n<span class=\"token macro property\">#<span class=\"token directive keyword\">include</span> <span class=\"token string\">\"CoreMinimal.h\"</span></span>\n<span class=\"token macro property\">#<span class=\"token directive keyword\">include</span> <span class=\"token string\">\"GameFramework/Actor.h\"</span></span>\n<span class=\"token macro property\">#<span class=\"token directive keyword\">include</span> <span class=\"token string\">\"WaypointActor.generated.h\"</span></span>\n\n<span class=\"token function\">UCLASS</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">FOLLOWLEADAI_API</span> AWaypointActor <span class=\"token operator\">:</span> <span class=\"token keyword\">public</span> AActor\n<span class=\"token punctuation\">{</span>\n\t<span class=\"token function\">GENERATED_BODY</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\t\n<span class=\"token keyword\">public</span><span class=\"token operator\">:</span>\t\n\t<span class=\"token comment\">// Sets default values for this actor's properties.</span>\n\t<span class=\"token function\">AWaypointActor</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">// The `UBoxComponent` of this WaypointActor that lets the AllyCharacter</span>\n\t<span class=\"token comment\">// know when it has arrived at this WaypointActor.</span>\n\t<span class=\"token function\">UPROPERTY</span><span class=\"token punctuation\">(</span>VisibleAnywhere<span class=\"token punctuation\">,</span> BlueprintReadWrite<span class=\"token punctuation\">)</span>\n\t<span class=\"token keyword\">class</span> <span class=\"token class-name\">UBoxComponent</span><span class=\"token operator\">*</span> WaypointBoxCollider<span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">// The number waypoint that this WaypointActor is. The AllyCharacter will</span>\n\t<span class=\"token comment\">// follow waypoints in order.</span>\n\t<span class=\"token function\">UPROPERTY</span><span class=\"token punctuation\">(</span>EditAnywhere<span class=\"token punctuation\">,</span> BlueprintReadWrite<span class=\"token punctuation\">,</span> Category <span class=\"token operator\">=</span> Waypoint<span class=\"token punctuation\">)</span>\n\tint32 WaypointNumber <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre>\n<p>And in the cpp file we just create the box collider and set its initial extents:</p>\n<p><strong>WaypointActor.cpp</strong></p>\n<pre class=\"language-cpp\"><code class=\"language-cpp\"><span class=\"token macro property\">#<span class=\"token directive keyword\">include</span> <span class=\"token string\">\"WaypointActor.h\"</span></span>\n<span class=\"token macro property\">#<span class=\"token directive keyword\">include</span> <span class=\"token string\">\"Components/BoxComponent.h\"</span></span>\n\n<span class=\"token comment\">/**\n * Sets the default values for the WaypointActor.\n */</span>\nAWaypointActor<span class=\"token operator\">::</span><span class=\"token function\">AWaypointActor</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n\t<span class=\"token comment\">// Create the box collider, set its default extents to something we can see,</span>\n\t<span class=\"token comment\">// and then attach it to the RootComponent.</span>\n\tWaypointBoxCollider <span class=\"token operator\">=</span> CreateDefaultSubobject<span class=\"token operator\">&lt;</span>UBoxComponent<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token function\">TEXT</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"WaypointBoxCollider\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\tWaypointBoxCollider<span class=\"token operator\">-></span><span class=\"token function\">SetBoxExtent</span><span class=\"token punctuation\">(</span><span class=\"token function\">FVector</span><span class=\"token punctuation\">(</span><span class=\"token number\">90.f</span><span class=\"token punctuation\">,</span> <span class=\"token number\">90.f</span><span class=\"token punctuation\">,</span> <span class=\"token number\">90.f</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\tWaypointBoxCollider<span class=\"token operator\">-></span><span class=\"token function\">SetupAttachment</span><span class=\"token punctuation\">(</span>RootComponent<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre>\n<p>So now we'll need to hop back to our AllyCharacter and add some more variables. We'll need:</p>\n<ul>\n<li>A variable for the maximum distance away the AllyCharacter can be from the PlayerCharacter while leading before they stop and wait for the PlayerCharacter to catch up.</li>\n<li>A variable that keeps track of the WaypointActor that the AllyCharacter is currently moving towards.</li>\n<li>A variable that keeps track of the WaypointActor that the AllyCharacter should stop at.</li>\n<li>A boolean that keeps track of whether the AllyCharacter has made it to the current WaypointActor. This is used in instances where the AllyCharacter needs to go through multiple waypoints.</li>\n<li>A map that will be populated in <code>BeginPlay</code> by all of the WaypointActors in the current level.</li>\n<li>A boolean to remember if the AllyCharacter should wait for the PlayerCharacter for the current leading request.</li>\n</ul>\n<p>Let's go ahead and define these in the header:</p>\n<p><strong>AllyCharacter.h</strong></p>\n<pre class=\"language-cpp\"><code class=\"language-cpp\"><span class=\"token comment\">// The maximum distance the PlayerCharacter can be from the AllyCharacter when</span>\n<span class=\"token comment\">// following before the AllyCharacter waits for them to catch up.</span>\n<span class=\"token function\">UPROPERTY</span><span class=\"token punctuation\">(</span>EditAnywhere<span class=\"token punctuation\">,</span> BlueprintReadWrite<span class=\"token punctuation\">,</span> Category <span class=\"token operator\">=</span> Ally<span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">float</span> MaxDistanceFromPlayerWhileLeading <span class=\"token operator\">=</span> <span class=\"token number\">500.f</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// The WaypointActor that the AllyCharacter is currently moving towards.</span>\n<span class=\"token function\">UPROPERTY</span><span class=\"token punctuation\">(</span>VisibleAnywhere<span class=\"token punctuation\">,</span> BlueprintReadOnly<span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">AWaypointActor</span><span class=\"token operator\">*</span> CurrentWaypoint<span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// The WaypointActor that the AllyCharacter is ending at.</span>\n<span class=\"token function\">UPROPERTY</span><span class=\"token punctuation\">(</span>VisibleAnywhere<span class=\"token punctuation\">,</span> BlueprintReadOnly<span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">AWaypointActor</span><span class=\"token operator\">*</span> EndWaypoint<span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// Indicates whether the AllyCharacter has arrived at the WaypointActor marked</span>\n<span class=\"token comment\">// as the `CurrentWaypoint` or not.</span>\n<span class=\"token keyword\">bool</span> bIsAtCurrentWaypoint <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// A map of all of the Waypoints in the current level.</span>\n<span class=\"token function\">UPROPERTY</span><span class=\"token punctuation\">(</span>VisibleAnywhere<span class=\"token punctuation\">,</span> BlueprintReadOnly<span class=\"token punctuation\">)</span>\nTMap<span class=\"token operator\">&lt;</span><span class=\"token keyword\">int</span><span class=\"token punctuation\">,</span> AWaypointActor<span class=\"token operator\">*</span><span class=\"token operator\">></span> Waypoints<span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// Indicates whether the AllyCharacter should wait for the PlayerCharacter when leading.</span>\n<span class=\"token comment\">// This is set by the AllyAIController.</span>\n<span class=\"token keyword\">bool</span> bShouldWaitForPlayerWhenLeading <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span></code></pre>\n<p>And then in the cpp file we'll start off by populating the <code>Waypoints</code> map by getting all of the WaypointActors in the level and then sorting the map by its keys. Lastly we'll add functionality to <code>OnComponentEnterBoxCollider</code> to check whether the AllyCharacter is the LEAD state and what they've collided with is a WaypointActor and if so we set <code>bIsAtCurrentWaypoint</code> to <code>true</code>.</p>\n<p>Also you'll have to include the WaypointActor header in the AllyCharacter cpp file:</p>\n<p><strong>AllyCharacter.cpp</strong></p>\n<pre class=\"language-cpp\"><code class=\"language-cpp\"><span class=\"token macro property\">#<span class=\"token directive keyword\">include</span> <span class=\"token string\">\"AllyCharacter.h\"</span></span>\n<span class=\"token macro property\">#<span class=\"token directive keyword\">include</span> <span class=\"token string\">\"../WaypointActor.h\"</span></span>\n<span class=\"token macro property\">#<span class=\"token directive keyword\">include</span> <span class=\"token string\">\"GameFramework/CharacterMovementComponent.h\"</span></span></code></pre>\n<pre class=\"language-cpp\"><code class=\"language-cpp\"><span class=\"token comment\">/**\n * Called when the AllyCharacter is created.\n */</span>\n<span class=\"token keyword\">void</span> AAllyCharacter<span class=\"token operator\">::</span><span class=\"token function\">BeginPlay</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n\tSuper<span class=\"token operator\">::</span><span class=\"token function\">BeginPlay</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">// Get all of the WaypointActors in the level.</span>\n\tTArray<span class=\"token operator\">&lt;</span>AActor<span class=\"token operator\">*</span><span class=\"token operator\">></span> FoundActors<span class=\"token punctuation\">;</span>\n\tUGameplayStatics<span class=\"token operator\">::</span><span class=\"token function\">GetAllActorsOfClass</span><span class=\"token punctuation\">(</span><span class=\"token function\">GetWorld</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> AWaypointActor<span class=\"token operator\">::</span><span class=\"token function\">StaticClass</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> FoundActors<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">// For each WaypointActor we found we have to try and cast it as a WaypointActor</span>\n\t<span class=\"token comment\">// as they are found as Actors not WaypointActors. If we can successfully cast it</span>\n\t<span class=\"token comment\">// to a WaypointActor then we add it to the WaypointActors map.</span>\n\t<span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span>AActor<span class=\"token operator\">*</span> FoundActor <span class=\"token operator\">:</span> FoundActors<span class=\"token punctuation\">)</span>\n\t<span class=\"token punctuation\">{</span>\n\t\tAWaypointActor<span class=\"token operator\">*</span> Waypoint <span class=\"token operator\">=</span> Cast<span class=\"token operator\">&lt;</span>AWaypointActor<span class=\"token operator\">></span><span class=\"token punctuation\">(</span>FoundActor<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t\t<span class=\"token comment\">// If we can successfully cast the Actor to a WaypointActor then we add it to</span>\n\t\t<span class=\"token comment\">// the map with the WaypointNumber as the key and WaypointActor as the value.</span>\n\t\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>Waypoint <span class=\"token operator\">!=</span> <span class=\"token keyword\">nullptr</span><span class=\"token punctuation\">)</span> Waypoints<span class=\"token punctuation\">.</span><span class=\"token function\">Add</span><span class=\"token punctuation\">(</span>Waypoint<span class=\"token operator\">-></span>WaypointNumber<span class=\"token punctuation\">,</span> Waypoint<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n\n\t<span class=\"token comment\">// After all of the Waypoints have been added to the Waypoints map then we sort the</span>\n\t<span class=\"token comment\">// map by its keys, which are the WaypointNumbers.</span>\n\tWaypoints<span class=\"token punctuation\">.</span><span class=\"token function\">KeySort</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> A<span class=\"token punctuation\">,</span> <span class=\"token keyword\">int</span> B<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> <span class=\"token keyword\">return</span> A <span class=\"token operator\">&lt;</span> B<span class=\"token punctuation\">;</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">/**\n * Called when a component enters the AllyCharacter's box collider.\n */</span>\n<span class=\"token keyword\">void</span> AAllyCharacter<span class=\"token operator\">::</span><span class=\"token function\">OnComponentEnterBoxCollider</span><span class=\"token punctuation\">(</span>UPrimitiveComponent<span class=\"token operator\">*</span> OverlappedComp<span class=\"token punctuation\">,</span> AActor<span class=\"token operator\">*</span> OtherActor<span class=\"token punctuation\">,</span> UPrimitiveComponent<span class=\"token operator\">*</span> OtherComp<span class=\"token punctuation\">,</span> int32 OtherBodyIndex<span class=\"token punctuation\">,</span> <span class=\"token keyword\">bool</span> bFromSweep<span class=\"token punctuation\">,</span> <span class=\"token keyword\">const</span> FHitResult<span class=\"token operator\">&amp;</span> SweepResult<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n\t<span class=\"token comment\">// Return early if anything is null so we can avoid a potential crash.</span>\n\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>OtherActor <span class=\"token operator\">==</span> <span class=\"token keyword\">nullptr</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">||</span> <span class=\"token punctuation\">(</span>OtherActor <span class=\"token operator\">==</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">||</span> <span class=\"token punctuation\">(</span>OtherComp <span class=\"token operator\">==</span> <span class=\"token keyword\">nullptr</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">// Try to cast the `OtherActor` to a WaypointActor.</span>\n\tAWaypointActor<span class=\"token operator\">*</span> Waypoint <span class=\"token operator\">=</span> Cast<span class=\"token operator\">&lt;</span>AWaypointActor<span class=\"token operator\">></span><span class=\"token punctuation\">(</span>OtherActor<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">// If the AllyCharacter is in the LEAD state and we were able to successfully cast the `OtherActor`</span>\n\t<span class=\"token comment\">// to a WaypointActor, then we set `bIsAtCurrentWaypoint` to `true`.</span>\n\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>State <span class=\"token operator\">==</span> AllyStates<span class=\"token operator\">::</span>LEAD <span class=\"token operator\">&amp;&amp;</span> Waypoint <span class=\"token operator\">!=</span> <span class=\"token keyword\">nullptr</span><span class=\"token punctuation\">)</span> bIsAtCurrentWaypoint <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre>\n<p>And that's it for the AllyCharacter for now. There's nothing to test yet so just make sure to save and compile before we move on to next part.</p>\n<p>Now since the PlayerCharacter is going to be the one issuing commands, we have to create the functionality so that the PlayerCharacter can tell the AllyCharacter to lead. This can be implemented anywhere not just the PlayerCharacter but for the purposes of this demo it'll be easier to show since we're just going to tie the lead action to an action input for the demo.</p>\n<p>So let's see what we need to add to the PlayerCharacter:</p>\n<ul>\n<li>A delegate that will be broadcast when we want the AllyCharacter to lead which in our case will be when the \"Lead\" action input is pressed.</li>\n<li>The above delegate is going to have 3 parameters. The <code>WaypointNumber</code> of where the AllyCharacter should start, the <code>WaypointNumber</code> of where the AllyCharacter should end, and whether the AllyCharacter should wait for the PlayerCharacter to be in <code>MaxDistanceFromPlayerWhileLeading</code> range before continuing or not.</li>\n<li>We also need to create a variable that we can use to broadcast the signal.</li>\n<li>Since we're going to ask the AllyCharacter to lead when we press the F key, we need to create a method to respond to the F key being pressed.</li>\n</ul>\n<p>Let's go ahead and define these two things in the PlayerCharacter's header. Note that the delegate goes outside of the class, I put it under the includes.</p>\n<p><strong>PlayerCharacter.h</strong></p>\n<pre class=\"language-cpp\"><code class=\"language-cpp\"><span class=\"token comment\">// Creates a delegate that's used to tell the AllyAIController to make</span>\n<span class=\"token comment\">// the AllyCharacter lead the way.</span>\n<span class=\"token function\">DECLARE_DYNAMIC_MULTICAST_DELEGATE_ThreeParams</span><span class=\"token punctuation\">(</span>FAllyLeadRequest<span class=\"token punctuation\">,</span> int32<span class=\"token punctuation\">,</span> StartWaypoint<span class=\"token punctuation\">,</span> int32<span class=\"token punctuation\">,</span> EndWaypoint<span class=\"token punctuation\">,</span> <span class=\"token keyword\">bool</span><span class=\"token punctuation\">,</span> bShouldWaitForPlayer<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre>\n<pre class=\"language-cpp\"><code class=\"language-cpp\"><span class=\"token comment\">// Broadcast when the PlayerCharacter triggers an object in the level that</span>\n<span class=\"token comment\">// that makes the AllyCharacter switch to the LEAD state or when the PlayerCharacter</span>\n<span class=\"token comment\">// is deemed to be \"lost\".</span>\n<span class=\"token function\">UPROPERTY</span><span class=\"token punctuation\">(</span>BlueprintAssignable<span class=\"token punctuation\">,</span> Category <span class=\"token operator\">=</span> <span class=\"token string\">\"StateEvents\"</span><span class=\"token punctuation\">)</span>\nFAllyLeadRequest OnAllyLeadRequest<span class=\"token punctuation\">;</span></code></pre>\n<p>Down where our other methods are defined:</p>\n<pre class=\"language-cpp\"><code class=\"language-cpp\"><span class=\"token comment\">/**\n * Called when the \"Lead\" action input is pressed.\n */</span>\n<span class=\"token keyword\">void</span> <span class=\"token function\">LeadAction</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre>\n<p>Now in the cpp file we have to create the <code>LeadAction</code> method and register it with the <code>PlayerInputComponent</code>.</p>\n<p><strong>PlayerCharacter.cpp</strong></p>\n<pre class=\"language-cpp\"><code class=\"language-cpp\"><span class=\"token comment\">/**\n * Called to bind functionality to input.\n *\n * @param PlayerInputComponent An Actor component for input bindings.\n */</span>\n<span class=\"token keyword\">void</span> APlayerCharacter<span class=\"token operator\">::</span><span class=\"token function\">SetupPlayerInputComponent</span><span class=\"token punctuation\">(</span>UInputComponent<span class=\"token operator\">*</span> PlayerInputComponent<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n\t<span class=\"token function\">check</span><span class=\"token punctuation\">(</span>PlayerInputComponent<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">// Set up the methods to respond to the PlayerCharacter moving forward, backward,</span>\n\t<span class=\"token comment\">// left, and right.</span>\n\tPlayerInputComponent<span class=\"token operator\">-></span><span class=\"token function\">BindAxis</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"MoveForwardBackward\"</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span> <span class=\"token operator\">&amp;</span>APlayerCharacter<span class=\"token operator\">::</span>MoveForwardBackward<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\tPlayerInputComponent<span class=\"token operator\">-></span><span class=\"token function\">BindAxis</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"MoveLeftRight\"</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span> <span class=\"token operator\">&amp;</span>APlayerCharacter<span class=\"token operator\">::</span>MoveLeftRight<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">// Set the \"TurnLeftRight\" and \"LookUpDown\" axis inputs to control the yaw and pitch</span>\n\t<span class=\"token comment\">// of the camera.</span>\n\tPlayerInputComponent<span class=\"token operator\">-></span><span class=\"token function\">BindAxis</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"TurnLeftRight\"</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span> <span class=\"token operator\">&amp;</span>APlayerCharacter<span class=\"token operator\">::</span>AddControllerYawInput<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\tPlayerInputComponent<span class=\"token operator\">-></span><span class=\"token function\">BindAxis</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"LookUpDown\"</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span> <span class=\"token operator\">&amp;</span>APlayerCharacter<span class=\"token operator\">::</span>AddControllerPitchInput<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">// Set up the methods to respond to the sprint action input being pressed and released.</span>\n\tPlayerInputComponent<span class=\"token operator\">-></span><span class=\"token function\">BindAction</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Sprint\"</span><span class=\"token punctuation\">,</span> IE_Pressed<span class=\"token punctuation\">,</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span> <span class=\"token operator\">&amp;</span>APlayerCharacter<span class=\"token operator\">::</span>SprintStart<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\tPlayerInputComponent<span class=\"token operator\">-></span><span class=\"token function\">BindAction</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Sprint\"</span><span class=\"token punctuation\">,</span> IE_Released<span class=\"token punctuation\">,</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span> <span class=\"token operator\">&amp;</span>APlayerCharacter<span class=\"token operator\">::</span>SprintStop<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">// Set up the method to respond to the AllyLead action input being pressed.</span>\n\tPlayerInputComponent<span class=\"token operator\">-></span><span class=\"token function\">BindAction</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"AllyLead\"</span><span class=\"token punctuation\">,</span> IE_Pressed<span class=\"token punctuation\">,</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span> <span class=\"token operator\">&amp;</span>APlayerCharacter<span class=\"token operator\">::</span>LeadAction<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">/**\n * Called when the \"Lead\" action input is pressed.\n */</span>\n<span class=\"token keyword\">void</span> APlayerCharacter<span class=\"token operator\">::</span><span class=\"token function\">LeadAction</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n\t<span class=\"token comment\">// Make the AllyCharacter lead the PlayerCharacter from the first waypoint to the</span>\n\t<span class=\"token comment\">// second waypoint and waiting for the PlayerCharacter to be in range.</span>\n\tOnAllyLeadRequest<span class=\"token punctuation\">.</span><span class=\"token function\">Broadcast</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre>\n<p>And we're done with the PlayerCharacter and onto the final piece, the AllyAIController. Make sure that the above is saved and compiles and let's move on to that.</p>\n<p>Again our goal is to avoid the use of the <code>Tick</code> method so we're going to need to create a timer that runs the Waypoint movement logic. So with that said let's see what we need for the AllyAIController:</p>\n<ul>\n<li>A method named <code>MakeAllyLead</code> that'll respond to the PlayerCharacter broadcasting the signal indicating that the AllyCharacter should lead from waypoint A to waypoint B.</li>\n<li>A method named <code>MoveToWaypoint</code> that'll check to see if the AllyCharacter needs to wait for the PlayerCharacter and move to the current WaypointActor.</li>\n<li>A timer that will repeat and call the <code>MoveToWaypoint</code> method.</li>\n<li>We need to add on to the <code>OnMoveCompleted</code> method to see if the AllyCharacter is at the ending WaypointActor then it needs to put the AllyCharacter back to the FOLLOW state. If there are still more waypoints to go to then it sets the <code>CurrentWaypoint</code> property of the AllyCharacter to the next WaypointActor so it can walk to the next waypoint.</li>\n</ul>\n<p>Let's go ahead and define the above in the AllyAIController's header file:</p>\n<p><strong>AllyAIController.h</strong></p>\n<pre class=\"language-cpp\"><code class=\"language-cpp\"><span class=\"token comment\">// The repeating timer used to make the AllyCharacter lead the PlayerCharacter.</span>\nFTimerHandle AllyLeadTimer<span class=\"token punctuation\">;</span></code></pre>\n<pre class=\"language-cpp\"><code class=\"language-cpp\"><span class=\"token comment\">/**\n * Called to move the AllyCharacter to its `CurrentWaypoint`.\n */</span>\n<span class=\"token keyword\">void</span> <span class=\"token function\">MoveToWaypoint</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">/**\n * Called when`OnAllyLeadRequest` is broadcast to put the AllyCharacter in the LEAD\n * state and make them move to a waypoint.\n */</span>\n<span class=\"token function\">UFUNCTION</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">void</span> <span class=\"token function\">MakeAllyLead</span><span class=\"token punctuation\">(</span>int32 WaypointA<span class=\"token punctuation\">,</span> int32 WaypointB<span class=\"token punctuation\">,</span> <span class=\"token keyword\">bool</span> bShouldWaitForPlayer<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre>\n<p>and now in the cpp file we create the methods defined above and add the logic we discussed:</p>\n<p><strong>AllyAIController.cpp</strong></p>\n<p>Make sure you have the following includes:</p>\n<pre class=\"language-cpp\"><code class=\"language-cpp\"><span class=\"token macro property\">#<span class=\"token directive keyword\">include</span> <span class=\"token string\">\"AllyCharacter.h\"</span></span>\n<span class=\"token macro property\">#<span class=\"token directive keyword\">include</span> <span class=\"token string\">\"../WaypointActor.h\"</span></span>\n<span class=\"token macro property\">#<span class=\"token directive keyword\">include</span> <span class=\"token string\">\"../Player/PlayerCharacter.h\"</span></span>\n<span class=\"token macro property\">#<span class=\"token directive keyword\">include</span> <span class=\"token string\">\"Tasks/AITask_MoveTo.h\"</span></span>\n<span class=\"token macro property\">#<span class=\"token directive keyword\">include</span> <span class=\"token string\">\"GameFramework/Character.h\"</span></span>\n<span class=\"token macro property\">#<span class=\"token directive keyword\">include</span> <span class=\"token string\">\"Kismet/GameplayStatics.h\"</span></span>\n<span class=\"token macro property\">#<span class=\"token directive keyword\">include</span> <span class=\"token string\">\"Kismet/KismetMathLibrary.h\"</span></span>\n<span class=\"token macro property\">#<span class=\"token directive keyword\">include</span> <span class=\"token string\">\"Navigation/PathFollowingComponent.h\"</span></span>\n<span class=\"token macro property\">#<span class=\"token directive keyword\">include</span> <span class=\"token string\">\"GameFramework/CharacterMovementComponent.h\"</span></span></code></pre>\n<pre class=\"language-cpp\"><code class=\"language-cpp\"><span class=\"token comment\">/**\n * Called when the AllyAIController starts.\n */</span>\n<span class=\"token keyword\">void</span> AAllyAIController<span class=\"token operator\">::</span><span class=\"token function\">BeginPlay</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n\tSuper<span class=\"token operator\">::</span><span class=\"token function\">BeginPlay</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">// Set up the response to the PlayerCharacter's `OnAllyLeadRequest` delegate.</span>\n\tAllyCharacter<span class=\"token operator\">-></span>PlayerCharacter<span class=\"token operator\">-></span>OnAllyLeadRequest<span class=\"token punctuation\">.</span><span class=\"token function\">AddDynamic</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span> <span class=\"token operator\">&amp;</span>AAllyAIController<span class=\"token operator\">::</span>MakeAllyLead<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">// Move the AllyCharacter to the PlayerCharacter from the start.</span>\n\t<span class=\"token function\">MoveToPlayerCharacter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">/**\n * Called when a move request has been completed.\n */</span>\n<span class=\"token keyword\">void</span> AAllyAIController<span class=\"token operator\">::</span><span class=\"token function\">OnMoveCompleted</span><span class=\"token punctuation\">(</span>FAIRequestID RequestID<span class=\"token punctuation\">,</span> <span class=\"token keyword\">const</span> FPathFollowingResult<span class=\"token operator\">&amp;</span> Result<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n\tSuper<span class=\"token operator\">::</span><span class=\"token function\">OnMoveCompleted</span><span class=\"token punctuation\">(</span>RequestID<span class=\"token punctuation\">,</span> Result<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>AllyCharacter<span class=\"token operator\">-></span>State <span class=\"token operator\">==</span> AllyStates<span class=\"token operator\">::</span>FOLLOW<span class=\"token punctuation\">)</span>\n\t<span class=\"token punctuation\">{</span>\n\t\t<span class=\"token comment\">// Check to see if the AllyCharacter is moving with a simple velocity check.</span>\n\t\t<span class=\"token keyword\">bool</span> bIsAllyCharacterMoving <span class=\"token operator\">=</span> AllyCharacter<span class=\"token operator\">-></span><span class=\"token function\">GetCharacterMovement</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-></span>Velocity<span class=\"token punctuation\">.</span><span class=\"token function\">Size</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">></span> <span class=\"token number\">0.f</span><span class=\"token punctuation\">;</span>\n\n\t\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>bIsAllyCharacterMoving<span class=\"token punctuation\">)</span>\n\t\t<span class=\"token punctuation\">{</span>\n\t\t\t<span class=\"token comment\">// If the AllyCharacter is moving then it means that the PlayerCharacter is still moving</span>\n\t\t\t<span class=\"token comment\">// so we call `MoveToPlayerCharacter` to keep moving towards the PlayerCharacter.</span>\n\t\t\t<span class=\"token function\">MoveToPlayerCharacter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token punctuation\">}</span>\n\t\t<span class=\"token keyword\">else</span>\n\t\t<span class=\"token punctuation\">{</span>\n\t\t\tUWorld<span class=\"token operator\">*</span> World <span class=\"token operator\">=</span> <span class=\"token function\">GetWorld</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>World <span class=\"token operator\">==</span> <span class=\"token keyword\">nullptr</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n\n\t\t\t<span class=\"token comment\">// Otherwise if the AllyCharacter is no longer moving then `OnMoveCompleted` will not run</span>\n\t\t\t<span class=\"token comment\">// again so we need to set up a repeating timer that checks to see if the PlayerCharacter</span>\n\t\t\t<span class=\"token comment\">// has started moving again and if so we cancel this timer and call `MoveToPlayerCharacter`</span>\n\t\t\t<span class=\"token comment\">// which just restarts this whole process.</span>\n\t\t\tWorld<span class=\"token operator\">-></span><span class=\"token function\">GetTimerManager</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">SetTimer</span><span class=\"token punctuation\">(</span>AllyFollowTimer<span class=\"token punctuation\">,</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span> <span class=\"token operator\">&amp;</span>AAllyAIController<span class=\"token operator\">::</span>CheckIfPlayerIsMoving<span class=\"token punctuation\">,</span> <span class=\"token number\">0.05f</span><span class=\"token punctuation\">,</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\tWorld<span class=\"token operator\">-></span><span class=\"token function\">GetTimerManager</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">ClearTimer</span><span class=\"token punctuation\">(</span>AllySprintTimer<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token punctuation\">}</span>\n\t<span class=\"token punctuation\">}</span>\n\t<span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>AllyCharacter<span class=\"token operator\">-></span>State <span class=\"token operator\">==</span> AllyStates<span class=\"token operator\">::</span>LEAD<span class=\"token punctuation\">)</span>\n\t<span class=\"token punctuation\">{</span>\n\t\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>AllyCharacter<span class=\"token operator\">-></span>CurrentWaypoint <span class=\"token operator\">==</span> AllyCharacter<span class=\"token operator\">-></span>EndWaypoint <span class=\"token operator\">&amp;&amp;</span> AllyCharacter<span class=\"token operator\">-></span>bIsAtCurrentWaypoint<span class=\"token punctuation\">)</span>\n\t\t<span class=\"token punctuation\">{</span>\n\t\t\t<span class=\"token comment\">// If the AllyCharacter is at the last waypoint then we can clear the lead timer and set</span>\n\t\t\t<span class=\"token comment\">// them back to the FOLLOW state.</span>\n\t\t\t<span class=\"token function\">GetWorld</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-></span><span class=\"token function\">GetTimerManager</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">ClearTimer</span><span class=\"token punctuation\">(</span>AllyLeadTimer<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\tAllyCharacter<span class=\"token operator\">-></span>State <span class=\"token operator\">=</span> AllyStates<span class=\"token operator\">::</span>FOLLOW<span class=\"token punctuation\">;</span>\n\n\t\t\t<span class=\"token comment\">// Set the AllyCharacter to move to the PlayerCharacter again to keep the follow loop going.</span>\n\t\t\t<span class=\"token function\">MoveToPlayerCharacter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token punctuation\">}</span>\n\t\t<span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>AllyCharacter<span class=\"token operator\">-></span>bIsAtCurrentWaypoint<span class=\"token punctuation\">)</span>\n\t\t<span class=\"token punctuation\">{</span>\n\t\t\t<span class=\"token comment\">// Otherwise we set the AllyCharacter to move to the next waypoint.</span>\n\t\t\tAllyCharacter<span class=\"token operator\">-></span>CurrentWaypoint <span class=\"token operator\">=</span> AllyCharacter<span class=\"token operator\">-></span>Waypoints<span class=\"token punctuation\">[</span>AllyCharacter<span class=\"token operator\">-></span>CurrentWaypoint<span class=\"token operator\">-></span>WaypointNumber <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\t\t\tAllyCharacter<span class=\"token operator\">-></span>bIsAtCurrentWaypoint <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token punctuation\">}</span>\n\t<span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">/**\n * Called to move the AllyCharacter to a WaypointActor.\n */</span>\n<span class=\"token keyword\">void</span> AAllyAIController<span class=\"token operator\">::</span><span class=\"token function\">MoveToWaypoint</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n\t<span class=\"token comment\">// Make sure that this is only called when the AllyCharacter is in the</span>\n\t<span class=\"token comment\">// LEAD state.</span>\n\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>AllyCharacter<span class=\"token operator\">-></span>State <span class=\"token operator\">!=</span> AllyStates<span class=\"token operator\">::</span>LEAD<span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">// If `AllyCharacter->bShouldWaitForPlayerWhenLeading` is true then we need to check</span>\n\t<span class=\"token comment\">// to see if the PlayerCharacter is too far from the AllyCharacter and if so then we</span>\n\t<span class=\"token comment\">// stop movement until the PlayerCharacter gets closer. Otherwise we just continue to</span>\n\t<span class=\"token comment\">// the WaypointActor.</span>\n\t<span class=\"token keyword\">float</span> AllyDistanceFromPlayer <span class=\"token operator\">=</span> AllyCharacter<span class=\"token operator\">-></span><span class=\"token function\">GetDistanceTo</span><span class=\"token punctuation\">(</span>AllyCharacter<span class=\"token operator\">-></span>PlayerCharacter<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>AllyCharacter<span class=\"token operator\">-></span>bShouldWaitForPlayerWhenLeading <span class=\"token operator\">&amp;&amp;</span> AllyDistanceFromPlayer <span class=\"token operator\">>=</span> AllyCharacter<span class=\"token operator\">-></span>MaxDistanceFromPlayerWhileLeading<span class=\"token punctuation\">)</span>\n\t<span class=\"token punctuation\">{</span>\n\t\t<span class=\"token function\">StopMovement</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n\t<span class=\"token keyword\">else</span>\n\t<span class=\"token punctuation\">{</span>\n\t\t<span class=\"token function\">MoveToActor</span><span class=\"token punctuation\">(</span>AllyCharacter<span class=\"token operator\">-></span>CurrentWaypoint<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">/**\n * Responds to the `OnAllyLeadRequest` to put the AllyCharacter in the LEAD\n * state and make them move to a waypoint.\n */</span>\n<span class=\"token keyword\">void</span> AAllyAIController<span class=\"token operator\">::</span><span class=\"token function\">MakeAllyLead</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> WaypointA<span class=\"token punctuation\">,</span> <span class=\"token keyword\">int</span> WaypointB<span class=\"token punctuation\">,</span> <span class=\"token keyword\">bool</span> bShouldWaitForPlayer<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n\t<span class=\"token comment\">// Put the AllyCharacter in the LEAD state.</span>\n\tAllyCharacter<span class=\"token operator\">-></span>State <span class=\"token operator\">=</span> AllyStates<span class=\"token operator\">::</span>LEAD<span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">// Clear the AllyFollowTimer if the AllyCharacter was in the FOLLOW state before.</span>\n\t<span class=\"token function\">GetWorld</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-></span><span class=\"token function\">GetTimerManager</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">ClearTimer</span><span class=\"token punctuation\">(</span>AllyFollowTimer<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">// Set the AllyCharcter's `CurrentWaypoint` to `WaypointA` and `EndWaypoint` to `WaypointB`.</span>\n\tAllyCharacter<span class=\"token operator\">-></span>CurrentWaypoint <span class=\"token operator\">=</span> AllyCharacter<span class=\"token operator\">-></span>Waypoints<span class=\"token punctuation\">[</span>WaypointA<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\tAllyCharacter<span class=\"token operator\">-></span>EndWaypoint <span class=\"token operator\">=</span> AllyCharacter<span class=\"token operator\">-></span>Waypoints<span class=\"token punctuation\">[</span>WaypointB<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\n\tAllyCharacter<span class=\"token operator\">-></span>bShouldWaitForPlayerWhenLeading <span class=\"token operator\">=</span> bShouldWaitForPlayer<span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">// Move to the next WaypointActor which could be WaypointA, WaypointB, or a WaypointActor</span>\n\t<span class=\"token comment\">// in between.</span>\n\t<span class=\"token function\">GetWorld</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-></span><span class=\"token function\">GetTimerManager</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">SetTimer</span><span class=\"token punctuation\">(</span>AllyLeadTimer<span class=\"token punctuation\">,</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span> <span class=\"token operator\">&amp;</span>AAllyAIController<span class=\"token operator\">::</span>MoveToWaypoint<span class=\"token punctuation\">,</span> <span class=\"token number\">0.5f</span><span class=\"token punctuation\">,</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre>\n<p>Now save and compile and let's get to the fun part, the testing. Go ahead and drag two WaypointActors onto the scene and extend their box extents out a bit so that they cover a bigger area. Make sure that you give one of them a <code>WaypointNumber</code> of 0 and the other a <code>WaypointNumber</code> of 1. Now if you press play you'll notice the AllyCharacter following you as usual but if you press the input action for \"AllyLead\" (probably F if you followed what I did) then you'll see the AllyCharacter walking towards the first WaypointActor. Now if you don't follow the AllyCharacter then it'll eventually stop because you're out of range and you need to get closer before it continues towards the WaypointActor. After it gets to the first WaypointActor it should start heading for the next one. Finally when the AllyCharacter is done with the waypoints it'll go back to following the PlayerCharacter.</p>\n<p><strong>Note:</strong> If your AllyCharacter is not going towards the WaypointActors then the changes might have not been picked up so the best thing you can do is start fresh by deleting the existing PlayerCharacter and AllyCharacter and drag out new instances of them. Then set the reference to the PlayerCharacter in the AllyCharacter and set the AIController class to AllyAIController class like we did above.</p>\n<h2 id=\"conclusion\"><a href=\"#conclusion\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a><strong>Conclusion</strong></h2>\n<p>Well that's all for this tutorial, I might come back to this in a future tutorial and expand it to show how the AllyAIController can be used to help the PlayerCharacter in combat but this is a good starting template for any projects you might have that need similar functionality. If you would like to see a specific topic for the next article don't hesitate to send me a message and I'll do my best to make it happen. Also make sure to check out the <a href=\"https://github.com/robertcorponoi/unreal-follow-lead-ai\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">repo</a> for an example of everything we created in this tutorial along with animation classes and blueprints.</p>\n"}},{"node":{"title":"Unreal C++ An In-Depth Guide to Creating Interactive Actors","path":"/unreal-c-an-in-depth-guide-to-creating-interactive-actors/","date":"12. August 2020","timeToRead":26,"description":"Learn how to create interactive actors that the player can interact with.","cover_image":{"type":"image","mimeType":"image/png","src":"/assets/static/main.07cc2b7.3accf5496b2b93de4960753ddc04482b.png","size":{"width":860,"height":415},"sizes":"(max-width: 860px) 100vw, 860px","srcset":["/assets/static/main.a67b0b2.3accf5496b2b93de4960753ddc04482b.png 480w","/assets/static/main.07cc2b7.3accf5496b2b93de4960753ddc04482b.png 860w"],"dataUri":"data:image/svg+xml,%3csvg fill='none' viewBox='0 0 860 415' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-b86a1a9b8fc60896e442bb2cbe463cc3'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='10'/%3e%3c/filter%3e%3c/defs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-b86a1a9b8fc60896e442bb2cbe463cc3)' width='860' height='415' xlink:href='data:image/png%3bbase64%2ciVBORw0KGgoAAAANSUhEUgAAAEAAAAAfCAYAAABXscv8AAAACXBIWXMAAA7DAAAOwwHHb6hkAAAQAUlEQVRYw51Z%2b3Pc9XUV00eCwcav%2bIGMZethy9Zz9VhptaunJdnYQG0MuCkMcYFphtCEOA5JaIHGhEza0gTT1GTCwBBjg40s663VrrTa93slrR7G2MTQlsz03zg9936/39XKNtDpD2e%2bq939fj73nHvuvZ/vquDdd0fw3nujOHt2jHDj/XMTOH/eg/MfeHHhwiT6%2bqbQf8mHy5enMTwUwOhIUDE2GoJ7PIwJd4SIYmIial5jcLsFcXg9CUx6ickkpn0p%2bKcNBANpTMtrfxrBYBqxyAxi0TlMTUVw/Pjfore3F/v3H8Cjjx2DxxNEPDaLaCTD%2b1L8ToLvxeHhPsZeUcYRwfhYWOORuMZGgxgZDmB42I%2bRoWnCh%2bHBKQwNTGLwshf9fRPouzCOCx%2bMouDih%2bP46IIbfRc9uPSRF5cvTWKgfwoDl30YGpzGKBeaGA/COxGCzxvB9GQU01NR%2bKdiCEzHEfInEA4kEQ4KUoiG0wYYsCASNhAlyagSnUUyMadIJ7NIxueQIFLJBQo9jN/97m18cL4PfR8N4tf/9gbO/uFDzGaWKMKMImauKXtEQmmEuG%2bI%2bwcZh98XZ2wx%2bBijxOrzhjHlDWGSInrdwsOP8VEfOU1SEC8G%2bydQIMT7%2b0ziJumRIT/GRgJwjwXhcYcw5Qkr8YAvRsJxEibpYAIRbh4JpRhUGvGoIEPMKBLMWookLSjpeJavs8ik5jFD6DW9kEMmlcVC9ioW56/x%2bgnmZj7mWiJYVsWSz9NJa02%2bH5d9Mrq/xCGJCDE2iTE4HSMkZiZrMkwxhIcI4cfE2DSFmMIYhSgQ4oOXxR5icb9mfJwWco%2bF%2bOWwKumfWkleiEeFeFggGc9oZgwrG%2bQls0agRvCpxDyJEPF5fZ1KLPB9IW2Qn80skvCiKcS83pegYMY9hnDLMEWNz3KvGRVeRIiGU4pIKKkJCgUMIQI%2b4XCrCG6KUDBwOYDBgSCGhkKsmzDrO4qxMakr1pjWcZyWEmuJxZK0fYoLE6zdcDCDcGiGmDUxR3tmafUshRDM07aCBUUstrgCcSIRXyTJRRIikgbkb/ksGiUiC7wu6FoCY%2b05RTTC3hCeIeEZjUViktiCfokzryS8URKPsIzD8IxLcgN0OMubvaFgYDCOoeEEhkdTGB1LY2w8g3F3Bu6JGUx4ZuDxGvBOzrKZzbIJzcLnI6bn2MiybGTz8AfmEQgsIBBcRDC0hFB4GeGI4IqB6MeIRK8SH98GV3IICyIfK0KC8BVdNxji%2bkHZR/bjvv6sxiCxTPnmMDklMWbg9abZKFNskkkmMsGExjE6GsMIkzs0FMHgYJhNPcieE0CBEh9Pk/QM3J5ZTHjnSDbLxea56AIXJ/yLmBYEFkl2Cf7gEoMgQgxMggsbgYaFXOwTRTR%2bjTCuMUHiuiJuXr8Oxv3XcuvJ2gLZR/aTfWV/iUVikth8/gVMMd7JqSw5zJHLrCZSEjo6nsLIaBLDI0lN%2bMBQHP0DURQY5M2M34a8EJcNAkHJwjLZkBnQSsIG0XhS8KkikRL8MYdk%2bktgfpaQ15kbfH3D/OxG7t6bhQlHP9E4gqYohiBXKMaSJs0QYx4echJu7olZTbS4fIRuH6IYBWr5CSP7nnwBrMxL1r8k25YA0djKTMcThgCJ5KdfTzwHg2gkRCK%2bLGuYFud1aiLDOp5DgNm1BL6dCKEVIiytFME3Dy9dIfyEp/C1RMgJMGEJwC/KDbcKYIlwGwEsqyfyHXDdFMDAzWSXsUw%2bM3Md77/fp30mxH4ixAUR7qciMBYR9mYBjNK4%2buUusASQsrAEcFsCuG8SYDJfgIVlAYJLK0ogfJsSiMVvEiD16S1Qq6eWLa%2b25/uz2S/wzjsf4OWX/gmR%2bFVOCWaWokvTTM18ZjRPkrxZAKs/3CyA9gUK4PtaAcZvI4CWwPxKAaQLh79agGh%2bs7vFATeQyhgZT2c%2bQ5qk5LX1nlz9ARl5VzE7/99KOMx9rXIKMg4ptf%2bLAIGbBJB%2b5l3RC1YIwCbIOnN/lQOIryoBQSwnQH7Xv5ZDWEYiEaGIHk%2bMSJAUs8NxFeZ7c/NfILvwBQ9a80jwXj8TMNQf1M%2byC3/S7Ie5t0XeEODa/98B2gNSywKsdACbj890AKGjJlcCV1YIEM0bURKMZEzqWTI6M/ufmJ37Lyxe%2bR%2beHrkuT5fpxBW8deb3%2bPc330I2zeNwNIE4T29vnTmHV0/8At8/fBxPPf4cjj32DB%2bIjuLxx5/F6d%2b8x%2bN5RNfLzH6u%2b%2bTHIOSNJnglrwnmjUURYNJogssCpFcK4NZDz5zOTxVg2hyDpgNUgLAlwNU80lfV3tn5P5H0Z5oZccsEDyP9AwH84f0RnP7tObzyD7/Exd%2bfwdj5d3H2zGmcef1XeOf063jjtVM49cJJHNl/ELZdLrRWdqLT2Q1HSzdaXfvhaj0Ae1MXuvY9hB/9%2bFV8eNGrZTBDYcVlStqMS%2b0fWrq9ALdMAVOA3DnAY/YBU4BJXzZ3DpjOlcBSzgEWJNvvnR3B8z86he8%2b%2bzM8euwZ9Bx4BK72g2hh8I0MvrLGAXu9C0898hiefvQYnjx8FEe6utHV0ARXTR1a6x3ocXahvf4gDjqPoLOtF/aWLq5xP9o6DsHh6kFDUzvqGtvgbL0ff/0338W/vP42iaRUdIlB4ppmSU0HF3PkDQHy7C8HI491MLIEkOOvToJMTgBxgZZAvgusMhABzJOYIENbnnzhNRQVV6Cyuhk1NhfszfvQ1NKj5Jsc%2b0hgP/Z1HcTR3oPodjjR3eSA01YPe1UNaitsOPbw0/jZD17CvroePNxxFF09R3hfF1pJvsVFMZo7ud4%2b/n0QrrYDsFHMqppmfu8wfkjhz54fV1cm05/pVUhbyM%2b%2b8LMaoAgwzJMhBUipHdzmJBCVvGYPsPqA/zZlYCE98zle/Md/RW19GzN2SMnWNTJbDW0UoBMOZy%2banT2oZsCdTS7s3V2N4qI92LK1FPes34a77ilEQ20rHj3yBGwd30N9y1/B4WiHs%2b1%2bkr2f9/eoALKGk%2bRl/Xr%2b3djUgXp7O8VoRWNzF44c/Q5efe0/eMyNsgyvszyvqf09k0ZSDQFmNNHCV3irAGKDMfMoLPCYAqxohIFFtdfKE%2bGyAD958Z/V5hKIEG8maWfbQYWDGSwrr8OdqwtRWFiGDRt3YPWaQtx511Z8YxWvd2/H6g0lsLU3oP3bL%2bLog8fhcnSoAEJaiDaQqDipmeQ7KMKD%2bx5Eo7zHPuFkmcm1utaB8r31dMx%2bluJP8fY7A5p9EUJc7J4wHvJUAHGAJYDlgDH3yka4ogxUhIW8E%2bGS2XSWONM/x4mTp7B7Tz3qGyUrHSqEXEWMkl02rNlQTDDjJLp63Q5s3FjM1/dh/bYNWLd1EzYVFWJH9TY4m6pxqLxYG19LxwNq/0bJPglKP2ljT%2bhhKRyqpJuaO7QniMuaHN0UqQO2hlaWoJPJaFYXPnT4Sbzy8zfRx3EaCPI0GbiiAgyPJoyHopGE4QARYfmByCwDaYa%2b5VqyxmFAe8FiTgCZAC/89FfcvENLQLIutV9b50INsZZk7167A3et3Y5Va7bhG8z8WoqwbvN2bCndjA33FmH1%2biKWwr1Ye89W7NqxB67KathtTSpifWOrOsBOJ%2bxjc%2bymKw7WOnGY4rS0GL3GTnfUk3CNrUWdIFcpjSq6cle5TT974snn8Mab57T2ff4lCjGLQT4VFgxTBaMM0rkyMATI5qaBOGE6dyo0YJy4lrTxnPzJL1HFoOzMhCgvTpBalUmws6yBBEuwZj1Jb9yJLdvKUVxmY5Zc2FFcz/dKCRGpCGs2lqG6sRvtdidc27Yo6QZCSuqBx0%2bgm02vl9ntLq1Bd2UjmiiMiCQCSOOVvUWAWpJX8cQVfL2nsgE7SvaidFc1OrtknL7G8TyhIhSIFawysGpEBNBpoL1gbsWx2BLBOHAs8vH1Bv7%2b%2bZdRttum9hPV5SpBiwi1De0or2jS6SDviSittHdb5wMa6LaivdiwqZjuKMS6b5WoeHZmuYH2rm9waTlJI%2b164Ak8/NB34NxZgZrCErTZHCyxVrV9A8tAHFdZ3ZRDtekCG8tQIJ/vqWhA6e4aClGjYn37ie%2bhQOpAfigQEUbzpoE1Dr2WAKYIPj/dEGQ50P7TlgAcYdoDVPXOnBNEiFqOLAlSRpfVHFs4yx2uA/q3BF9YVIW71%2b3ktVrfk9q2meRq6536t5RBj0ySkmqKUAlXo9H9Za9GZr%2bBZWfYvhkVVY1Kdi9dIkJITyjfW4dde2zaKCuq7Py8kf2pxhIgxTJIIv9UaPSCGRVAyyBPAKsZigPiyT/i%2bROnWO9tSqzZuV%2bvIkQV7SgB1NQ5NdsSpDZIiqOZUXHasHV7lZZJ2R573iht0wzLqJMykE7fwXWat%2b9CXUkFmhtdtHuzNlpZ14L8rQ6obdE9JfPVTISQ3k0BpAxKyqr0KmIUDA7HMTgS184oPxuN5U6FhgjWOMy5YHq5H8hkiCU%2bxQ9O/JybtZsC9DLYXiMYEm00D0VCSqCdWgRhYEJw9172iHVFuJfZb2zu1u8a97ZpduUeO99ztfaih4I1lVShScadvVVJVVbbdT0R0si%2bnZln9ukCSUCN2YyrdTo41BWWENuLdosDYhARRsas3waNaXDzyVBcYDTEbK4XWAI89/2XuXiLZr22rlXVr87rAzK/xRlieyElAUt5iGXlu2V7GvQgpZaXz0yIQ%2bT7dmbfweeDbo4%2bB7u6g6SdduO7QlxHLsWW/iMNb09FvWZXiJbztZ5QRQj2oQq%2b3kkR71m7GQUFf4GCCxfjnIdxnYsj%2bgOp1RDT5q/Cs7kHJOMhyXpKXNRykFPX03/3Y60nUVw2k5qTbEgmhfgyenP9Id8ZMuPlM%2bkXFnkhV21z6GvpE9Lp9/N5oI2EWmqb0KC9oV33MAQwIMJK/St51r1V%2b5Lxbdt34%2b7V3yLxb2LVqvVobTuEgrMfprUEjJ/Gk/rTuHUusMrAmghyrLTGopSCuEGeyZ965qQpQEuuC4sVJTtCWJwhryULIpIEbgki5SIwxNlnzPK8eS6EpGdIPe8lmaIijtGSSrV%2bBWGNPFuDHIvbDEgfYALK2PHvo83Xrb8Xf/bnq1Bwx53Ycm8pjj7yNN787QW6PsPH4fMTGOoPU4SkCmA1RGskWv8fsJpi7ohsChCNXcfxp36I4tIq3VQcoCOIQRi2NBxhuUIbY63DdECvusCCiCBkJOtWdhvNLi/Ns2RXrR6YNm4uNmu90ej0FF7PH7xXBClnhy%2b8z8r2X%2bKOO76J3eX1ePa5l3D2nIc85pnkDPouhdkDznkxeCmIATpAXCD9YHh05dng5qZoiSBXOWuLALt0DHYqJGDJvBAQQSrEFXkiyHvSBO2OHqPG81wi4gkZ%2bcwgbow4mQI7S218ftiM1WsL2Tzrc%2bNOal6uxaXV2LipiMQ34c5VG1SAZq7z8iun9f8Ak75F/QdQHxMu5Pv6I/hflcf3R8FLd38AAAAASUVORK5CYII=' /%3e%3c/svg%3e"},"content":"<h2 id=\"overview\"><a href=\"#overview\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a><strong>Overview</strong></h2>\n<p>In this tutorial we're going to go over ways that you can create system for making objects that the player can interact with. We're going to go over a pure C++ way and then we'll also go over how to migrate some of the functionality to Blueprints so that you still get the power of C++ in the complex parts but ability to easily iterate or pass off work for the interaction parts.</p>\n<p>If at any point you get stuck or want to see the example you can clone or download the <a href=\"https://github.com/robertcorponoi/unreal-cpp-an-in-depth-guide-to-creating-interactive-actors\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">repo</a> and launch it in Unreal.</p>\n<h2 id=\"table-of-contents\"><a href=\"#table-of-contents\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a><strong>Table Of Contents</strong></h2>\n<ul>\n<li><a href=\"#getting-started\">Getting Started</a></li>\n<li><a href=\"#player-character\">Player Character</a></li>\n<li><a href=\"#interactive-actor\">Interactive Actor</a></li>\n<li><a href=\"#adding-interactive-objects\">Adding Interactive Objects</a></li>\n<li><a href=\"#implementing-interaction\">Implementing Interaction</a></li>\n<li><a href=\"#multiple-interactiveactors\">Multiple InteractiveActors</a></li>\n</ul>\n<h2 id=\"getting-started\"><a href=\"#getting-started\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a><strong>Getting Started</strong></h2>\n<p>To get started, let's see what we're going to need:</p>\n<ul>\n<li><strong>Player Character</strong> - The PlayerCharacter is going to be the main player of the game is going to be what interacts with the interactive objects. This is mainly going to be a standard third person controller but we're going to add some methods to help it interact with the objects.</li>\n<li><strong>Interactive Actor</strong> - This is going to be the main controller for our interactive objects. All of the interactive pieces will be components of this Actor and this will handle the majority of the functionality.</li>\n</ul>\n<p>And that's it. Other than the above you'll need the meshes that you want to be interactive and what I'm using in the <a href=\"https://github.com/robertcorponoi/unreal-cpp-an-in-depth-guide-to-creating-interactive-actors\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">repo</a> is the <a href=\"https://www.kenney.nl/assets/furniture-kit\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Kenney Furniture Kit</a>. You can also use the material I used to give static meshes an outline to highlight when the player is looking at them. You can find this mesh in the <a href=\"https://github.com/robertcorponoi/unreal-cpp-an-in-depth-guide-to-creating-interactive-actors\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">repo</a> under the Materials folder or you follow the tutorial I used to create it <a href=\"\">here</a>.</p>\n<p>Also if you're using the highlight material make sure that you add a Post Process Volume Actor in the scene and set it to have the highlight as a post process material and also make the bounds infinite. You can see an example of it in the <a href=\"https://github.com/robertcorponoi/unreal-cpp-an-in-depth-guide-to-creating-interactive-actors\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">repo</a> if you've never done it before.</p>\n<h2 id=\"player-character\"><a href=\"#player-character\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a><strong>Player Character</strong></h2>\n<p>As explained in the section above, the PlayerCharacter is just the third person character script from the third person character demo project so if you want to see the script for it either check out the <a href=\"https://github.com/robertcorponoi/unreal-cpp-an-in-depth-guide-to-creating-interactive-actors\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">repo</a> or just copy Unreal's third person character. When we add the bit to interact with objects we'll add a few lines to it but character movement is out of scope for this tutorial.</p>\n<h2 id=\"interactive-actor\"><a href=\"#interactive-actor\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a><strong>Interactive Actor</strong></h2>\n<p>Before we get into the code let's see what we'll need the InteractiveActor to do:</p>\n<ul>\n<li>We need to know all of the meshes that can be interacted with.</li>\n<li>We need a box collider so that we only run repetitive functions when we know the player is in range to interact with the object.</li>\n<li>We need some text to let the player know that they can interact with the object they're looking at.</li>\n<li>We need a timer and a function that will be run by that timer whenever the player is in interaction range.</li>\n</ul>\n<p>So create a new C++ class with a base of Actor and name it <code>InteractiveActor</code>. Let's get into the code and we'll go over it in detail afterwards:</p>\n<p><strong>InteractiveActor.h</strong></p>\n<pre class=\"language-cpp\"><code class=\"language-cpp\"><span class=\"token macro property\">#<span class=\"token directive keyword\">pragma</span> once</span>\n\n<span class=\"token macro property\">#<span class=\"token directive keyword\">include</span> <span class=\"token string\">\"CoreMinimal.h\"</span></span>\n<span class=\"token macro property\">#<span class=\"token directive keyword\">include</span> <span class=\"token string\">\"GameFramework/Actor.h\"</span></span>\n<span class=\"token macro property\">#<span class=\"token directive keyword\">include</span> <span class=\"token string\">\"InteractiveActor.generated.h\"</span></span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">UStaticMeshComponent</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">/**\n * Represents a series of interactive objects that the PlayerCharacter can\n * interact with.\n */</span>\n<span class=\"token function\">UCLASS</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">INTERACTIVEOBJECTS_API</span> AInteractiveActor <span class=\"token operator\">:</span> <span class=\"token keyword\">public</span> AActor\n<span class=\"token punctuation\">{</span>\n\t<span class=\"token function\">GENERATED_BODY</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\t\n<span class=\"token keyword\">public</span><span class=\"token operator\">:</span>\t\n\t<span class=\"token comment\">// Sets default values for this actor's properties.</span>\n\t<span class=\"token function\">AInteractiveActor</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">// The RootComponent of this Actor.</span>\n\t<span class=\"token function\">UPROPERTY</span><span class=\"token punctuation\">(</span>VisibleAnywhere<span class=\"token punctuation\">,</span> BlueprintReadOnly<span class=\"token punctuation\">)</span>\n\t<span class=\"token keyword\">class</span> <span class=\"token class-name\">USceneComponent</span><span class=\"token operator\">*</span> Root<span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">// The BoxComponent used as a collision trigger that lets us know when the</span>\n\t<span class=\"token comment\">// PlayerCharacter is close enough to interact with objects in this Actor.</span>\n\t<span class=\"token function\">UPROPERTY</span><span class=\"token punctuation\">(</span>VisibleAnywhere<span class=\"token punctuation\">,</span> BlueprintReadOnly<span class=\"token punctuation\">)</span>\n\t<span class=\"token keyword\">class</span> <span class=\"token class-name\">UBoxComponent</span><span class=\"token operator\">*</span> BoxCollider<span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">// The TextRenderComponent that appears above this Actor when the PlayerCharacter</span>\n\t<span class=\"token comment\">// is able to interact with a part of it.</span>\n\t<span class=\"token function\">UPROPERTY</span><span class=\"token punctuation\">(</span>VisibleAnywhere<span class=\"token punctuation\">,</span> BlueprintReadWrite<span class=\"token punctuation\">)</span>\n\t<span class=\"token keyword\">class</span> <span class=\"token class-name\">UTextRenderComponent</span><span class=\"token operator\">*</span> NoticeText<span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">// The StaticMeshComponents that the PlayerCharacter can interact with.</span>\n\t<span class=\"token comment\">// If you're only using one interactive object and you don't need the</span>\n\t<span class=\"token comment\">// array then you can omit this as we'll add the interactive objects later.</span>\n\t<span class=\"token function\">UPROPERTY</span><span class=\"token punctuation\">(</span>EditAnywhere<span class=\"token punctuation\">,</span> BlueprintReadWrite<span class=\"token punctuation\">)</span>\n\tTArray<span class=\"token operator\">&lt;</span>UStaticMeshComponent<span class=\"token operator\">*</span><span class=\"token operator\">></span> InteractiveObjects<span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">// The interactive StaticMeshComponent currently being looked at.</span>\n\t<span class=\"token function\">UPROPERTY</span><span class=\"token punctuation\">(</span>VisibleAnywhere<span class=\"token punctuation\">,</span> BlueprintReadOnly<span class=\"token punctuation\">)</span>\n\tUStaticMeshComponent<span class=\"token operator\">*</span> ObjectCurrentlyBeingLookedAt<span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">// Used to create a timer that runs a function every so often to check if</span>\n\t<span class=\"token comment\">// PlayerCharacter is looking at an object that can be interacted with or not.</span>\n\t<span class=\"token function\">UPROPERTY</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\tFTimerHandle PlayerLookTimer<span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">protected</span><span class=\"token operator\">:</span>\n\t<span class=\"token comment\">// Called when the game starts or when spawned.</span>\n\t<span class=\"token keyword\">virtual</span> <span class=\"token keyword\">void</span> <span class=\"token function\">BeginPlay</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> override<span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">public</span><span class=\"token operator\">:</span>\t\n\t<span class=\"token comment\">// Called every frame.</span>\n\t<span class=\"token keyword\">virtual</span> <span class=\"token keyword\">void</span> <span class=\"token function\">Tick</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">float</span> DeltaTime<span class=\"token punctuation\">)</span> override<span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">// Called when the PlayerCharacter enters the BoxCollider's trigger area.</span>\n\t<span class=\"token function\">UFUNCTION</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\t<span class=\"token keyword\">void</span> <span class=\"token function\">OnComponentEnterInteractionArea</span><span class=\"token punctuation\">(</span>UPrimitiveComponent<span class=\"token operator\">*</span> OverlappedComp<span class=\"token punctuation\">,</span> AActor<span class=\"token operator\">*</span> OtherActor<span class=\"token punctuation\">,</span> UPrimitiveComponent<span class=\"token operator\">*</span> OtherComp<span class=\"token punctuation\">,</span> int32 OtherBodyIndex<span class=\"token punctuation\">,</span> <span class=\"token keyword\">bool</span> bFromSweep<span class=\"token punctuation\">,</span> <span class=\"token keyword\">const</span> FHitResult<span class=\"token operator\">&amp;</span> SweepResult<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">// Called when the PlayerCharacter leaves the BoxCollider's trigger area.</span>\n\t<span class=\"token function\">UFUNCTION</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\t<span class=\"token keyword\">void</span> <span class=\"token function\">OnComponentLeaveInteractionArea</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">class</span> <span class=\"token class-name\">UPrimitiveComponent</span><span class=\"token operator\">*</span> OverlappedComp<span class=\"token punctuation\">,</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">AActor</span><span class=\"token operator\">*</span> OtherActor<span class=\"token punctuation\">,</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">UPrimitiveComponent</span><span class=\"token operator\">*</span> OtherComp<span class=\"token punctuation\">,</span> int32 OtherBodyIndex<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">// Called when the PlayerCharacter interacts with an object in this Actor.</span>\n\t<span class=\"token function\">UFUNCTION</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\t<span class=\"token keyword\">void</span> <span class=\"token function\">Interact</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">// Called when the PlayerCharacter has entered the BoxCollider's trigger</span>\n\t<span class=\"token comment\">// area and is looking around for objects to interact with.</span>\n\t<span class=\"token function\">UFUNCTION</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\t<span class=\"token keyword\">void</span> <span class=\"token function\">LookForInteractions</span><span class=\"token punctuation\">(</span>APlayerCharacter<span class=\"token operator\">*</span> PlayerCharacter<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre>\n<p>So in the header file we:</p>\n<ul>\n<li>Declare the base components we'll need. These include a <code>USceneComponent</code> as the Root Component (without this scaling and transforms of other components is tricky) and a <code>UBoxComponent</code> to use as a trigger collision box.</li>\n<li>Define an array to hold all of the objects that can be interact with. This array can be omitted if you only want a single interactive object as we'll add the interactive objects later.</li>\n<li>Define a variable to hold the interactive object the PlayerCharacter is currently looking at, if any.</li>\n<li>Define the timer that manages running the <code>LookForInteractions</code> method on a loop.</li>\n<li>Define two functions <code>OnComponentEnterInteractionArea</code> and <code>OnComponentLeaveInteractionArea</code> that are called when the PlayerCharacter enters and leaves the BoxCollider's trigger area.</li>\n<li>Define the <code>Interact</code> function that handles what happens when the PlayerCharacter presses the action to interact with an interactive object.</li>\n<li>Define the <code>LookForInteractions</code> function that is run on a loop when the PlayerCharacter is inside of the BoxCollider's trigger area.</li>\n</ul>\n<p>That was mostly just definitions so lets get into the cpp file:</p>\n<p><strong>*InteractiveActor.cpp</strong></p>\n<pre class=\"language-cpp\"><code class=\"language-cpp\"><span class=\"token macro property\">#<span class=\"token directive keyword\">include</span> <span class=\"token string\">\"InteractiveActor.h\"</span></span>\n<span class=\"token macro property\">#<span class=\"token directive keyword\">include</span> <span class=\"token string\">\"PlayerCharacter.h\"</span></span>\n<span class=\"token macro property\">#<span class=\"token directive keyword\">include</span> <span class=\"token string\">\"Components/BoxComponent.h\"</span></span>\n<span class=\"token macro property\">#<span class=\"token directive keyword\">include</span> <span class=\"token string\">\"Components/SceneComponent.h\"</span></span>\n<span class=\"token macro property\">#<span class=\"token directive keyword\">include</span> <span class=\"token string\">\"Components/StaticMeshComponent.h\"</span></span>\n<span class=\"token macro property\">#<span class=\"token directive keyword\">include</span> <span class=\"token string\">\"Components/TextRenderComponent.h\"</span></span>\n<span class=\"token macro property\">#<span class=\"token directive keyword\">include</span> <span class=\"token string\">\"Camera/CameraComponent.h\"</span></span>\n\n<span class=\"token comment\">// To help us see what the PlayerCharacter is looking at.</span>\n<span class=\"token macro property\">#<span class=\"token directive keyword\">include</span> <span class=\"token string\">\"DrawDebugHelpers.h\"</span></span>\n\n<span class=\"token comment\">/**\n * Sets default values.\n */</span>\nAInteractiveActor<span class=\"token operator\">::</span><span class=\"token function\">AInteractiveActor</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n \t<span class=\"token comment\">// Set this actor to call Tick() every frame. You can turn this off to improve performance if you don't need it.</span>\n\tPrimaryActorTick<span class=\"token punctuation\">.</span>bCanEverTick <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">// Create the Root and set it as the RootComponent.</span>\n\tRoot <span class=\"token operator\">=</span> CreateDefaultSubobject<span class=\"token operator\">&lt;</span>USceneComponent<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token function\">TEXT</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Root\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token function\">SetRootComponent</span><span class=\"token punctuation\">(</span>Root<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">// Create the BoxComponent and set it to be a collision trigger and then</span>\n\t<span class=\"token comment\">// attach it to the RootComponent.</span>\n\tBoxCollider <span class=\"token operator\">=</span> CreateDefaultSubobject<span class=\"token operator\">&lt;</span>UBoxComponent<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token function\">TEXT</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"BoxCollider\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\tBoxCollider<span class=\"token operator\">-></span><span class=\"token function\">SetGenerateOverlapEvents</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\tBoxCollider<span class=\"token operator\">-></span><span class=\"token function\">SetCollisionProfileName</span><span class=\"token punctuation\">(</span><span class=\"token function\">TEXT</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Trigger\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\tBoxCollider<span class=\"token operator\">-></span><span class=\"token function\">SetupAttachment</span><span class=\"token punctuation\">(</span>Root<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">// Create the TextRenderComponent and add a generic \"Press E to Interact\"</span>\n\t<span class=\"token comment\">// message and set it to be invisible so the PlayerCharacter can't see it</span>\n\t<span class=\"token comment\">// and lastly attach it to the RootComponent.</span>\n\tNoticeText <span class=\"token operator\">=</span> CreateDefaultSubobject<span class=\"token operator\">&lt;</span>UTextRenderComponent<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token function\">TEXT</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"NoticeText\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\tNoticeText<span class=\"token operator\">-></span><span class=\"token function\">SetRelativeLocation</span><span class=\"token punctuation\">(</span><span class=\"token function\">FVector</span><span class=\"token punctuation\">(</span><span class=\"token number\">0.f</span><span class=\"token punctuation\">,</span> <span class=\"token number\">90.f</span><span class=\"token punctuation\">,</span> <span class=\"token number\">80.f</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\tNoticeText<span class=\"token operator\">-></span><span class=\"token function\">SetText</span><span class=\"token punctuation\">(</span>FText<span class=\"token operator\">::</span><span class=\"token function\">FromString</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Press E to Interact\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\tNoticeText<span class=\"token operator\">-></span><span class=\"token function\">SetTextRenderColor</span><span class=\"token punctuation\">(</span>FColor<span class=\"token operator\">::</span>Blue<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\tNoticeText<span class=\"token operator\">-></span><span class=\"token function\">SetVisibility</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\tNoticeText<span class=\"token operator\">-></span><span class=\"token function\">SetupAttachment</span><span class=\"token punctuation\">(</span>Root<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">/**\n * Called when the game starts or when spawned.\n */</span>\n<span class=\"token keyword\">void</span> AInteractiveActor<span class=\"token operator\">::</span><span class=\"token function\">BeginPlay</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n\tSuper<span class=\"token operator\">::</span><span class=\"token function\">BeginPlay</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\n\t<span class=\"token comment\">// Set the methods that are used to respond to when the player enters or</span>\n\t<span class=\"token comment\">// leaves the BoxCollider's trigger area.</span>\n\tBoxCollider<span class=\"token operator\">-></span>OnComponentBeginOverlap<span class=\"token punctuation\">.</span><span class=\"token function\">AddDynamic</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span> <span class=\"token operator\">&amp;</span>AInteractiveActor<span class=\"token operator\">::</span>OnComponentEnterInteractionArea<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\tBoxCollider<span class=\"token operator\">-></span>OnComponentEndOverlap<span class=\"token punctuation\">.</span><span class=\"token function\">AddDynamic</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span> <span class=\"token operator\">&amp;</span>AInteractiveActor<span class=\"token operator\">::</span>OnComponentLeaveInteractionArea<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">/**\n * Called every frame.\n *\n * @param DeltaTime The difference in time between the last frame and this one.\n */</span>\n<span class=\"token keyword\">void</span> AInteractiveActor<span class=\"token operator\">::</span><span class=\"token function\">Tick</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">float</span> DeltaTime<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n\tSuper<span class=\"token operator\">::</span><span class=\"token function\">Tick</span><span class=\"token punctuation\">(</span>DeltaTime<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">/**\n * When a component enters this Actor's BoxCollider trigger area we check to\n * see if that component belonged to the PlayerCharacter and if so we start\n * the timer that runs the method that checks to see what the PlayerCharacter\n * is looking at.\n *\n * @param OverlappedComp\n * @param OtherActor\n * @param OtherComp\n * @param OtherBodyIndex\n * @param bFromSweep\n * @param SweepResult\n */</span>\n<span class=\"token keyword\">void</span> AInteractiveActor<span class=\"token operator\">::</span><span class=\"token function\">OnComponentEnterInteractionArea</span><span class=\"token punctuation\">(</span>UPrimitiveComponent<span class=\"token operator\">*</span> OverlappedComp<span class=\"token punctuation\">,</span> AActor<span class=\"token operator\">*</span> OtherActor<span class=\"token punctuation\">,</span> UPrimitiveComponent<span class=\"token operator\">*</span> OtherComp<span class=\"token punctuation\">,</span> int32 OtherBodyIndex<span class=\"token punctuation\">,</span> <span class=\"token keyword\">bool</span> bFromSweep<span class=\"token punctuation\">,</span> <span class=\"token keyword\">const</span> FHitResult<span class=\"token operator\">&amp;</span> SweepResult<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n\t<span class=\"token comment\">// Return early if anything is null so we can avoid a potential crash.</span>\n\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>OtherActor <span class=\"token operator\">==</span> <span class=\"token keyword\">nullptr</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">||</span> <span class=\"token punctuation\">(</span>OtherActor <span class=\"token operator\">==</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">||</span> <span class=\"token punctuation\">(</span>OtherComp <span class=\"token operator\">==</span> <span class=\"token keyword\">nullptr</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">// Try to cast to `PlayerCharacter` to see if it was the PlayerCharacter</span>\n\t<span class=\"token comment\">// that entered the interaction area. If not we can return early.</span>\n\tAPlayerCharacter<span class=\"token operator\">*</span> PlayerCharacter <span class=\"token operator\">=</span> Cast<span class=\"token operator\">&lt;</span>APlayerCharacter<span class=\"token operator\">></span><span class=\"token punctuation\">(</span>OtherActor<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>PlayerCharacter <span class=\"token operator\">==</span> <span class=\"token keyword\">nullptr</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">// Create a FTimerDelegate so that we can pass the PlayerCharacter object to</span>\n\t<span class=\"token comment\">// our `LookForInteractions` method.</span>\n\tFTimerDelegate PlayerLookTimerDel<span class=\"token punctuation\">;</span>\n\tPlayerLookTimerDel<span class=\"token punctuation\">.</span><span class=\"token function\">BindUFunction</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span> <span class=\"token function\">FName</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"LookForInteractions\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> PlayerCharacter<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">// Set a timer that runs the `LookForInteractions` method every 0.1s which</span>\n\t<span class=\"token comment\">// checks to see if a Player is looking at an object that can be interacted with.</span>\n\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token function\">GetWorld</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n\t<span class=\"token punctuation\">{</span>\n\t\t<span class=\"token function\">GetWorld</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-></span><span class=\"token function\">GetTimerManager</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">SetTimer</span><span class=\"token punctuation\">(</span>PlayerLookTimer<span class=\"token punctuation\">,</span> PlayerLookTimerDel<span class=\"token punctuation\">,</span> <span class=\"token number\">0.1f</span><span class=\"token punctuation\">,</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">/**\n * When a component leaves this Actor's BoxCollider trigger area we check to see\n * if it was the PlayerCharacter and if so we stop the timer and hide the notice text.\n *\n * @param OverlappedComp\n * @param OtherActor\n * @param OtherComp\n * @param OtherBodyIndex\n */</span>\n<span class=\"token keyword\">void</span> AInteractiveActor<span class=\"token operator\">::</span><span class=\"token function\">OnComponentLeaveInteractionArea</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">class</span> <span class=\"token class-name\">UPrimitiveComponent</span><span class=\"token operator\">*</span> OverlappedComp<span class=\"token punctuation\">,</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">AActor</span><span class=\"token operator\">*</span> OtherActor<span class=\"token punctuation\">,</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">UPrimitiveComponent</span><span class=\"token operator\">*</span> OtherComp<span class=\"token punctuation\">,</span> int32 OtherBodyIndex<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n\t<span class=\"token comment\">// Return early if anything is null so we can avoid a potential crash.</span>\n\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>OtherActor <span class=\"token operator\">==</span> <span class=\"token keyword\">nullptr</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">||</span> <span class=\"token punctuation\">(</span>OtherActor <span class=\"token operator\">==</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">||</span> <span class=\"token punctuation\">(</span>OtherComp <span class=\"token operator\">==</span> <span class=\"token keyword\">nullptr</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">// Try to cast to `PlayerCharacter` to see if it was the PlayerCharacter</span>\n\t<span class=\"token comment\">// that left the interaction area. If not we can return early.</span>\n\tAPlayerCharacter<span class=\"token operator\">*</span> PlayerCharacter <span class=\"token operator\">=</span> Cast<span class=\"token operator\">&lt;</span>APlayerCharacter<span class=\"token operator\">></span><span class=\"token punctuation\">(</span>OtherActor<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>PlayerCharacter <span class=\"token operator\">==</span> <span class=\"token keyword\">nullptr</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">// Stop the timer that checks for the player interacting with objects as</span>\n\t<span class=\"token comment\">// the player is no longer in range to do so.</span>\n\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token function\">GetWorld</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n\t<span class=\"token punctuation\">{</span>\n\t\t<span class=\"token function\">GetWorld</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-></span><span class=\"token function\">GetTimerManager</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">ClearTimer</span><span class=\"token punctuation\">(</span>PlayerLookTimer<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">/**\n * Run on a timer when the PlayerCharacter enters the BoxCollider's trigger area\n* and it checks to see if the PlayerCharacter is looking at any objects that can\n* be interacted with by sending a trace from the PlayerCharacter's camera and\n* checking for blocking collisions.\n* \n* @param PlayerCharacter The PlayerCharacter that entered the BoxCollider's bounds.\n */</span>\n<span class=\"token keyword\">void</span> AInteractiveActor<span class=\"token operator\">::</span><span class=\"token function\">LookForInteractions</span><span class=\"token punctuation\">(</span>APlayerCharacter<span class=\"token operator\">*</span> PlayerCharacter<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n\tFHitResult OutHit<span class=\"token punctuation\">;</span>\n\tFCollisionQueryParams CollisionParams<span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">// Set the start of the trace to be the player's camera.</span>\n\tFVector Start <span class=\"token operator\">=</span> PlayerCharacter<span class=\"token operator\">-></span>PlayerCamera<span class=\"token operator\">-></span><span class=\"token function\">GetComponentLocation</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\tFVector ForwardVector <span class=\"token operator\">=</span> PlayerCharacter<span class=\"token operator\">-></span>PlayerCamera<span class=\"token operator\">-></span><span class=\"token function\">GetForwardVector</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">// Set the end of the trace to be 1000.f units from the start in the direction</span>\n\t<span class=\"token comment\">// the player is facing.</span>\n\tFVector End <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>ForwardVector <span class=\"token operator\">*</span> <span class=\"token number\">1000.f</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> Start<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">// DEBUG</span>\n\t<span class=\"token function\">DrawDebugLine</span><span class=\"token punctuation\">(</span><span class=\"token function\">GetWorld</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> Start<span class=\"token punctuation\">,</span> End<span class=\"token punctuation\">,</span> FColor<span class=\"token operator\">::</span>Green<span class=\"token punctuation\">,</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">// If there's no collision or the collision wasn't a blocking collision then</span>\n\t<span class=\"token comment\">// we can return early.</span>\n\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span><span class=\"token function\">GetWorld</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-></span><span class=\"token function\">LineTraceSingleByChannel</span><span class=\"token punctuation\">(</span>OutHit<span class=\"token punctuation\">,</span> Start<span class=\"token punctuation\">,</span> End<span class=\"token punctuation\">,</span> ECC_Visibility<span class=\"token punctuation\">,</span> CollisionParams<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>OutHit<span class=\"token punctuation\">.</span>bBlockingHit<span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">// If there's no component then we also return early because we only deal</span>\n\t<span class=\"token comment\">// with the components of the InteractiveObjects.</span>\n\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>OutHit<span class=\"token punctuation\">.</span><span class=\"token function\">GetComponent</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">==</span> <span class=\"token keyword\">nullptr</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">// Attempt to cast the component to a UStaticMeshComponent and return early</span>\n\t<span class=\"token comment\">// if we can't.</span>\n\tUStaticMeshComponent<span class=\"token operator\">*</span> InteractiveComponentHit <span class=\"token operator\">=</span> Cast<span class=\"token operator\">&lt;</span>UStaticMeshComponent<span class=\"token operator\">></span><span class=\"token punctuation\">(</span>OutHit<span class=\"token punctuation\">.</span><span class=\"token function\">GetComponent</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>InteractiveComponentHit <span class=\"token operator\">==</span> <span class=\"token keyword\">nullptr</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">// ...</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">/**\n * When this Actor is interacted with we...\n */</span>\n<span class=\"token keyword\">void</span> AInteractiveActor<span class=\"token operator\">::</span><span class=\"token function\">Interact</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n\t<span class=\"token comment\">// Nothing here yet.</span>\n<span class=\"token punctuation\">}</span></code></pre>\n<p>Alright that was quite a bit so lets break it down:</p>\n<ul>\n<li>We have to make sure we include all of the header files of the components we forward declared in the header file. We also include <code>DrawDebugHelpers.h</code> so we can see the trace we perform.</li>\n<li>In the constructor we set up the components we defined in the header. This includes the Root Component, the BoxCollider, and the NoticeText and all of their default values.</li>\n<li>In <code>BeginPlay</code> we assign the methods that are meant to respond to a component entering/exiting the BoxCollider's trigger area which are <code>OnComponentEnterInteractionArea</code> and <code>OnComponentLeaveInteractionArea</code>.</li>\n<li>Now in <code>OnComponentEnterInteractionArea</code>, which again is called when a component enters the trigger area, we check to see if it is the PlayerCharacter and if so we bind the <code>LookForInteractions</code> method to run on a timer every 0.1 seconds. We need to use <code>FTimerDelegate</code> since we want to pass a parameter to <code>LookForInteractions</code> which is the PlayerCharacter. The <code>true</code> at the end of <code>SetTimer</code> means that this timer will loop every 0.1 seconds and keep calling <code>LookForInteractions</code> until it is stopped. We also set the NoticeText to be visible.</li>\n<li>In <code>OnComponentLeaveInteractionArea</code>, which is called when a component exits the trigger area, we check again check to see if it is the PlayerCharacter and if so we cancel the timer we set in <code>OnComponentEnterInteractionArea</code> so that <code>LookForInteractions</code> is no longer being called as the PlayerCharacter is no longer in range of any objects they can interact with. We also set the NoticeText to not be visible again.</li>\n<li>In <code>LookForInteractions</code>, which is set to be run on a loop every X seconds once the PlayerCharacter has entered the BoxCollider's trigger area, we send out a trace from the PlayerCharacter's camera and see if it collides with anything. If there's a collision we check to see if that collision is one of the interactive objects in the <code>InteractiveObjects</code> array and if so we don't do anything yet. We'll be adding that functionality in soon.</li>\n<li>Lastly, <code>Interact</code> is going to be called when the PlayerCharacter presses the button to interact with an object but we're not ready to do that yet.</li>\n</ul>\n<p>So that was a bit much but just make sure you get a good understanding of it before moving on. Also make sure that the above compiles for you and lets get to adding interactive objects to our Actor.</p>\n<h2 id=\"adding-interactive-objects\"><a href=\"#adding-interactive-objects\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a><strong>Adding Interactive Objects</strong></h2>\n<p>If you drag out the <code>InteractiveActor</code> onto the scene you'll see...nothing. This is because we haven't added any meshes or anything we can see yet. In this section we're going to add a simple block and smaller block to act as a makeshift lever that our PlayerCharacter is going to interact with to move.</p>\n<p>So back in the <code>InteractiveActor.h</code> script add the following below the definition for the <code>Root</code> component:</p>\n<p><strong>InteractiveActor.h</strong></p>\n<pre class=\"language-cpp\"><code class=\"language-cpp\"><span class=\"token comment\">// The RootComponent of this Actor.</span>\n<span class=\"token function\">UPROPERTY</span><span class=\"token punctuation\">(</span>VisibleAnywhere<span class=\"token punctuation\">,</span> BlueprintReadOnly<span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">USceneComponent</span><span class=\"token operator\">*</span> Root<span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// A non-interactive desk.</span>\n<span class=\"token function\">UPROPERTY</span><span class=\"token punctuation\">(</span>VisibleAnywhere<span class=\"token punctuation\">,</span> BlueprintReadWrite<span class=\"token punctuation\">)</span>\nUStaticMeshComponent<span class=\"token operator\">*</span> Desk<span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// An interactive drawer in the desk that the PlayerCharacter can interact with.</span>\n<span class=\"token function\">UPROPERTY</span><span class=\"token punctuation\">(</span>VisibleAnywhere<span class=\"token punctuation\">,</span> BlueprintReadWrite<span class=\"token punctuation\">)</span>\nUStaticMeshComponent<span class=\"token operator\">*</span> DeskDrawer<span class=\"token punctuation\">;</span></code></pre>\n<p>Now lets setup the meshes in the cpp file and position them so that the drawer is positioned in the correct place in the desk.</p>\n<p><strong>InteractiveActor.cpp</strong></p>\n<pre class=\"language-cpp\"><code class=\"language-cpp\"><span class=\"token comment\">// Load the meshes used for the Desk and Drawer.</span>\n<span class=\"token keyword\">static</span> ConstructorHelpers<span class=\"token operator\">::</span>FObjectFinder<span class=\"token operator\">&lt;</span>UStaticMesh<span class=\"token operator\">></span><span class=\"token function\">DeskMeshAsset</span><span class=\"token punctuation\">(</span><span class=\"token function\">TEXT</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"StaticMesh'/Game/Models/Furniture/Desk/desk_desk.desk_desk'\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">static</span> ConstructorHelpers<span class=\"token operator\">::</span>FObjectFinder<span class=\"token operator\">&lt;</span>UStaticMesh<span class=\"token operator\">></span><span class=\"token function\">DeskDrawerMeshAsset</span><span class=\"token punctuation\">(</span><span class=\"token function\">TEXT</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"StaticMesh'/Game/Models/Furniture/Desk/desk_drawer.desk_drawer'\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// Create the Root and set it as the RootComponent.</span>\nRoot <span class=\"token operator\">=</span> CreateDefaultSubobject<span class=\"token operator\">&lt;</span>USceneComponent<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token function\">TEXT</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Root\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token function\">SetRootComponent</span><span class=\"token punctuation\">(</span>Root<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// Create the BoxComponent and set it to be a collision trigger and then</span>\n<span class=\"token comment\">// attach it to the RootComponent.</span>\nBoxCollider <span class=\"token operator\">=</span> CreateDefaultSubobject<span class=\"token operator\">&lt;</span>UBoxComponent<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token function\">TEXT</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"BoxCollider\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nBoxCollider<span class=\"token operator\">-></span><span class=\"token function\">SetGenerateOverlapEvents</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nBoxCollider<span class=\"token operator\">-></span><span class=\"token function\">SetCollisionProfileName</span><span class=\"token punctuation\">(</span><span class=\"token function\">TEXT</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Trigger\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// Update: Change the box extent and the position so that it extends mostly</span>\n<span class=\"token comment\">// in front of the lever.</span>\nBoxCollider<span class=\"token operator\">-></span><span class=\"token function\">SetRelativeLocation</span><span class=\"token punctuation\">(</span><span class=\"token function\">FVector</span><span class=\"token punctuation\">(</span><span class=\"token number\">0.f</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0.f</span><span class=\"token punctuation\">,</span> <span class=\"token number\">20.f</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nBoxCollider<span class=\"token operator\">-></span><span class=\"token function\">SetBoxExtent</span><span class=\"token punctuation\">(</span><span class=\"token function\">FVector</span><span class=\"token punctuation\">(</span><span class=\"token number\">150.f</span><span class=\"token punctuation\">,</span> <span class=\"token number\">100.f</span><span class=\"token punctuation\">,</span> <span class=\"token number\">80.f</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nBoxCollider<span class=\"token operator\">-></span><span class=\"token function\">SetupAttachment</span><span class=\"token punctuation\">(</span>Root<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// Create the component for the Desk, set its mesh and position and then</span>\n<span class=\"token comment\">// attach it to the Root.</span>\nDesk <span class=\"token operator\">=</span> CreateDefaultSubobject<span class=\"token operator\">&lt;</span>UStaticMeshComponent<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token function\">TEXT</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Desk\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nDesk<span class=\"token operator\">-></span><span class=\"token function\">SetRelativeLocation</span><span class=\"token punctuation\">(</span><span class=\"token function\">FVector</span><span class=\"token punctuation\">(</span><span class=\"token number\">0.f</span><span class=\"token punctuation\">,</span> <span class=\"token number\">110.f</span><span class=\"token punctuation\">,</span> <span class=\"token operator\">-</span><span class=\"token number\">40.f</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nDesk<span class=\"token operator\">-></span><span class=\"token function\">SetRelativeRotation</span><span class=\"token punctuation\">(</span><span class=\"token function\">FRotator</span><span class=\"token punctuation\">(</span><span class=\"token number\">0.f</span><span class=\"token punctuation\">,</span> <span class=\"token number\">90.f</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0.f</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nDesk<span class=\"token operator\">-></span><span class=\"token function\">SetRelativeScale3D</span><span class=\"token punctuation\">(</span><span class=\"token function\">FVector</span><span class=\"token punctuation\">(</span><span class=\"token number\">2.f</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2.f</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2.f</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nDesk<span class=\"token operator\">-></span><span class=\"token function\">SetStaticMesh</span><span class=\"token punctuation\">(</span>DeskMeshAsset<span class=\"token punctuation\">.</span>Object<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nDesk<span class=\"token operator\">-></span><span class=\"token function\">SetupAttachment</span><span class=\"token punctuation\">(</span>Root<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// Create the component for the Drawer, set its mesh and position and</span>\n<span class=\"token comment\">// attach it to the Desk.</span>\nDeskDrawer <span class=\"token operator\">=</span> CreateDefaultSubobject<span class=\"token operator\">&lt;</span>UStaticMeshComponent<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token function\">TEXT</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"DeskDrawer\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nDeskDrawer<span class=\"token operator\">-></span><span class=\"token function\">SetStaticMesh</span><span class=\"token punctuation\">(</span>DeskDrawerMeshAsset<span class=\"token punctuation\">.</span>Object<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nDeskDrawer<span class=\"token operator\">-></span><span class=\"token function\">SetupAttachment</span><span class=\"token punctuation\">(</span>Desk<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre>\n<p><strong>Note:</strong> As mentioned earlier, these assets are from the <a href=\"https://www.kenney.nl/assets/furniture-kit\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Kenney Furniture Kit</a>. I just copied over the desk fbx into a Models folder and it imports both the desk and the desk drawer. These are the same assets used in the <a href=\"https://github.com/robertcorponoi/unreal-cpp-an-in-depth-guide-to-creating-interactive-actors\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">repo</a>.</p>\n<p>The component tree will look something like this (mine looks a bit different as it's a copy from the repo and it has extra elements):</p>\n<p><img class=\"g-image g-image--lazy g-image--loading\" src=\"data:image/svg+xml,%3csvg fill='none' viewBox='0 0 505 222' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-949e0b5d60919cbf13be18a723663837'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='40'/%3e%3c/filter%3e%3c/defs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-949e0b5d60919cbf13be18a723663837)' width='505' height='222' xlink:href='data:image/png%3bbase64%2ciVBORw0KGgoAAAANSUhEUgAAAEAAAAAcCAYAAADRJblSAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAFIUlEQVRYw9WYyVIqWRCG653sCJmUGRUVBAFxKAQUBSeccV64uBu7DQ2NXri4L9C7fhLfKLu%2bpJMmsG/3rrtYZNSZKCrz/Pnnf45TKBTk7u5OZmdnJZ/Py9LSkuRyOVlYWNAnfdqso8%2babDYri4uLUiwWda5cLsvy8vKgz2%2bYn5%2bfH/wmlUpJJpPxnTmHh4fy%2bfmpH318fCwXFxfS6/Xk5uZGut2unJ6eyuXlpdzf3%2bv82dmZjrdaLbm6utJ1t7e30ul0dB3vY%2b319bXs7e3pXLvd1j8jIATPT%2bYkEglJJpP6gXNzc/qRtvvsIm2McfrYMDJsjY2P/pbdp%2b83xwcBiMfjGgCe%2bWJe28lEUqLRqMRiMSFAZjaGTU9PSzqd7q//B7MAkwL/tva/NPsehwb53T3uyvffv8vPH7/IXmdfTk5OFLoYkAfa5%2bfnOn50dKSpQkrMzMxoJEHPcGTpj4M57CIwLZVK4m658u31UarlZXE3NmR1bU1WV1fFdV1ZWVmRWq0m6%2bvrOra1tSUb3hpSBwLFCAZG26%2bQ/5ICwBn4R6MxiYTCkq00pbx3KflCUXJeHqe8AJHvOArLWxUAObQZG%2bYNWzOaPn41Z2pqSjByOhKalFzzVoq9X8VtbMqZVwFIARi%2b0Wgo/GF%2bUqFarcr%2b/r5WBVJhZ2dHx0kNUBIOh8Xe7WdzcPwvm5JQOCI/TUYkEJhUJyKRiD6xUCgkwWBQx1jPC%2bgzzjxt0IRZUP1ugwDA8Di2VPYgvjSr%2bX5wcCDb29tqzWZzQIrGAcyDjN3dXUUDKAAtQIsA8E7fB8B2znY2HPH64aAyJFAmp4G71XOchwMgRRQgFcSUIERKG%2bcDgcDgvX42ByfZSVRbfbMu1bWq1Ft12dzclDWvClABYHsQQR8DDfzOqgNoQBmCFEMB7xsHcyCu9/d3eX5%2b1gC0j9tSP6xr3ceheqPfRubiOI4Cd5wkSKTE09OTvL29yevr68BeXl7GwhwceXx8VP3Os3fVk1qjpozPIYlzAc4TKPQ9fZieMYw%2blYE5jLMBfX778PDgexvoAEzbsbgs5BekddKSUqUk7d32gPBQhKQDfaBOm1QwRJAmIMRSAEEEEdr7/WjOaF2EFBOphMyX5iWRTigB4li9XleH6dMG/pAe5AgXEAj4AU6gMvAbxJLf9YDzt%2bUhOi3ZXFYjhAIEGVQIDg/WZmfpI315kSk/nshrtME4aIEvAYh4QiiTzUi9W5dCqSA7rR3NeRQf9Z48J/fZbcZJC9IDjjAjBcZOCJnph3sIiCajEgwFB2LGhNLwumGIM4fRBhkWAL8H4isCgHomKbV2TRbzi7Kx3tcAVu9pVyoVFTyMUSoRR6YPaPMkdQjO2CBgcCAK9wOQX81LejYtlXJFHTfneUJyVgFwFmJkDHJknjG4YWwCMAxXK1vwAG3IzGQtT0uJYchr5fAI0NZYWoxdCuAAatBtuuIeuFIsF6Xm9g9FCBx2FrMjMWTHpSnEiFok940vRpE1FgGY8o7DCKFY3BNEmbgEQgHJzvUvPxA1lDe747P7Pox8Z274kGFIsCD4NRDO6AcqpENhSaVT8vHbh6pCHOS0B%2bnZjQ95D/HZaREzXmAcvkAg%2bZ0HvihBC0I8EZfOZUfiqbg6jgaw2yGcRAPgJKxPJcB55ows9XTpkeIoCsZDCf5pExMTg3sCIA0h0jaVZzdFdltkZGltv1yK8A0/%2bg5n2IlRM4EzejX2I7PKMLzersv%2bL7NrPLPR7/kD3qYk/ThNlXIAAAAASUVORK5CYII=' /%3e%3c/svg%3e\" width=\"505\" alt=\"Component Overview\" data-srcset=\"/assets/static/component-overview.ef45299.d6c2eb0a818489cf10a145f9708ddc10.png 505w\" data-sizes=\"(max-width: 505px) 100vw, 505px\" data-src=\"/assets/static/component-overview.ef45299.d6c2eb0a818489cf10a145f9708ddc10.png\"><noscript><img class=\"g-image g-image--lazy g-image--loaded\" src=\"/assets/static/component-overview.ef45299.d6c2eb0a818489cf10a145f9708ddc10.png\" width=\"505\" alt=\"Component Overview\"></noscript></p>\n<p>Alright so a bit more than in the header but it's pretty simple. Since we're actually adding things we want to change the extents of the box collider so that we have a decent area in front of the desk where the PlayerCharacter can see that it's interactive. Then we just create the Desk and DeskDrawer meshes and setup their location/position so that the drawer is a part of the desk.</p>\n<p>Now we have to add the DeskDrawer to the <code>InteractiveObjects</code> array. We can do this in the constructor but I prefer do it in <code>BeginPlay</code>:</p>\n<p><strong>InteractiveActor.cpp</strong></p>\n<pre class=\"language-cpp\"><code class=\"language-cpp\"><span class=\"token comment\">/**\n * Called when the game starts or when spawned.\n */</span>\n<span class=\"token keyword\">void</span> AInteractiveActor<span class=\"token operator\">::</span><span class=\"token function\">BeginPlay</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n\tSuper<span class=\"token operator\">::</span><span class=\"token function\">BeginPlay</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\n\t<span class=\"token comment\">// Set the methods that are used to respond to when the player enters or</span>\n\t<span class=\"token comment\">// leaves the BoxCollider's trigger area.</span>\n\tBoxCollider<span class=\"token operator\">-></span>OnComponentBeginOverlap<span class=\"token punctuation\">.</span><span class=\"token function\">AddDynamic</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span> <span class=\"token operator\">&amp;</span>AInteractiveActor<span class=\"token operator\">::</span>OnComponentEnterInteractionArea<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\tBoxCollider<span class=\"token operator\">-></span>OnComponentEndOverlap<span class=\"token punctuation\">.</span><span class=\"token function\">AddDynamic</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span> <span class=\"token operator\">&amp;</span>AInteractiveActor<span class=\"token operator\">::</span>OnComponentLeaveInteractionArea<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">// Add the DeskDrawer to the `InteractiveObjects` array.</span>\n\t<span class=\"token comment\">// If you just have a single interactive object and therefore don't have</span>\n\t<span class=\"token comment\">// an `InteractiveObjects` array you can omit this.</span>\n\tInteractiveObjects<span class=\"token punctuation\">.</span><span class=\"token function\">Add</span><span class=\"token punctuation\">(</span>DeskDrawer<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre>\n<p>At this point you might be wondering why <code>InteractiveObjects</code> is an array if we only add one thing. If you only plan to have 1 item be interactive then you don't need an array and you can just check for that single item as I'll show below. This tutorial shows how to use multiple interactive pieces as that's more complex and is useful in situations like a control panel where you might have multiple buttons and levers and you can check out the <a href=\"https://github.com/robertcorponoi/unreal-cpp-an-in-depth-guide-to-creating-interactive-actors\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">repo</a> for a more complex example.</p>\n<p>Now let's add the functionality that loops through the <code>InteractiveObjects</code> array and looks to see if the Player is looking at any of them. So in the <code>LookForInteractions</code> method, which again runs while the PlayerCharacter is near the <code>InteractiveActor</code>, we can do:</p>\n<pre class=\"language-cpp\"><code class=\"language-cpp\"><span class=\"token comment\">/**\n * Run on a timer when the PlayerCharacter enters the BoxCollider's trigger area\n * and it checks to see if the PlayerCharacter is looking at any objects that can\n * be interacted with by sending a trace from the PlayerCharacter's camera and\n * checking for blocking collisions.\n * \n * @param PlayerCharacter The PlayerCharacter that entered the BoxCollider's bounds.\n */</span>\n<span class=\"token keyword\">void</span> AInteractiveActor<span class=\"token operator\">::</span><span class=\"token function\">LookForInteractions</span><span class=\"token punctuation\">(</span>APlayerCharacter<span class=\"token operator\">*</span> PlayerCharacter<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n\tFHitResult OutHit<span class=\"token punctuation\">;</span>\n\tFCollisionQueryParams CollisionParams<span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">// Set the start of the trace to be the player's camera.</span>\n\tFVector Start <span class=\"token operator\">=</span> PlayerCharacter<span class=\"token operator\">-></span>PlayerCamera<span class=\"token operator\">-></span><span class=\"token function\">GetComponentLocation</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\tFVector ForwardVector <span class=\"token operator\">=</span> PlayerCharacter<span class=\"token operator\">-></span>PlayerCamera<span class=\"token operator\">-></span><span class=\"token function\">GetForwardVector</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">// Set the end of the trace to be 1000.f units from the start in the direction</span>\n\t<span class=\"token comment\">// the player is facing.</span>\n\tFVector End <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>ForwardVector <span class=\"token operator\">*</span> <span class=\"token number\">1000.f</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> Start<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">// DEBUG</span>\n\t<span class=\"token function\">DrawDebugLine</span><span class=\"token punctuation\">(</span><span class=\"token function\">GetWorld</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> Start<span class=\"token punctuation\">,</span> End<span class=\"token punctuation\">,</span> FColor<span class=\"token operator\">::</span>Green<span class=\"token punctuation\">,</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">// If there's no collision or the collision wasn't a blocking collision then</span>\n\t<span class=\"token comment\">// we can return early.</span>\n\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span><span class=\"token function\">GetWorld</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-></span><span class=\"token function\">LineTraceSingleByChannel</span><span class=\"token punctuation\">(</span>OutHit<span class=\"token punctuation\">,</span> Start<span class=\"token punctuation\">,</span> End<span class=\"token punctuation\">,</span> ECC_Visibility<span class=\"token punctuation\">,</span> CollisionParams<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>OutHit<span class=\"token punctuation\">.</span>bBlockingHit<span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">// If there's no component then we also return early because we only deal</span>\n\t<span class=\"token comment\">// with the components of the InteractiveObjects.</span>\n\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>OutHit<span class=\"token punctuation\">.</span><span class=\"token function\">GetComponent</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">==</span> <span class=\"token keyword\">nullptr</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">// Attempt to cast the component to a UStaticMeshComponent and return early</span>\n\t<span class=\"token comment\">// if we can't.</span>\n\tUStaticMeshComponent<span class=\"token operator\">*</span> InteractiveComponentHit <span class=\"token operator\">=</span> Cast<span class=\"token operator\">&lt;</span>UStaticMeshComponent<span class=\"token operator\">></span><span class=\"token punctuation\">(</span>OutHit<span class=\"token punctuation\">.</span><span class=\"token function\">GetComponent</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>InteractiveComponentHit <span class=\"token operator\">==</span> <span class=\"token keyword\">nullptr</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">// If the component that the PlayerCharacter is looking at is not part of the</span>\n\t<span class=\"token comment\">// array of interactive objects then we can return early.</span>\n\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>InteractiveObjects<span class=\"token punctuation\">.</span><span class=\"token function\">Contains</span><span class=\"token punctuation\">(</span>InteractiveComponentHit<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n\t<span class=\"token punctuation\">{</span>\n\t\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>ObjectCurrentlyBeingLookedAt <span class=\"token operator\">!=</span> <span class=\"token keyword\">nullptr</span><span class=\"token punctuation\">)</span>\n\t\t<span class=\"token punctuation\">{</span>\n\t\t\t<span class=\"token comment\">// Set `RenderCustomDepth` to be false so that the object isn't highlighted anymore.</span>\n\t\t\tObjectCurrentlyBeingLookedAt<span class=\"token operator\">-></span><span class=\"token function\">SetRenderCustomDepth</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t\t\t<span class=\"token comment\">// Set the NoticeText to be invisible since the player can no longer interact with</span>\n\t\t\t<span class=\"token comment\">// with this object anymore.</span>\n\t\t\tNoticeText<span class=\"token operator\">-></span><span class=\"token function\">SetVisibility</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token punctuation\">}</span>\n\n\t\t<span class=\"token comment\">// Lastly since the PlayerCharacter is no longer looking at a valid interactive object</span>\n\t\t<span class=\"token comment\">// then we set `ObjectCurrentlyBeingLookedAt` to a nullptr and return.</span>\n\t\tObjectCurrentlyBeingLookedAt <span class=\"token operator\">=</span> <span class=\"token keyword\">nullptr</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n\n\t<span class=\"token comment\">// Loop through all of the objects marked as interactive and if the player</span>\n\t<span class=\"token comment\">// is currently looking at one of them then highlight it and set it as the</span>\n\t<span class=\"token comment\">// new value for `ObjectCurrentlyBeingLookedAt`.</span>\n\t<span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span>UStaticMeshComponent<span class=\"token operator\">*</span> InteractiveObject <span class=\"token operator\">:</span> InteractiveObjects<span class=\"token punctuation\">)</span>\n\t<span class=\"token punctuation\">{</span>\n\t\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>InteractiveObject <span class=\"token operator\">==</span> InteractiveComponentHit<span class=\"token punctuation\">)</span>\n\t\t<span class=\"token punctuation\">{</span>\n\t\t\t<span class=\"token comment\">// Set the `InteractiveComponentHit` to be the new value of `ObjectCurrentlyBeingLookedAt`</span>\n\t\t\t<span class=\"token comment\">// since that's what the PlayerCharacter is currently looking at.</span>\n\t\t\tObjectCurrentlyBeingLookedAt <span class=\"token operator\">=</span> InteractiveComponentHit<span class=\"token punctuation\">;</span>\n\n\t\t\t<span class=\"token comment\">// Set `RenderCustomDepth` to be true so that the highlight is</span>\n\t\t\t<span class=\"token comment\">// added to the object.</span>\n\t\t\tObjectCurrentlyBeingLookedAt<span class=\"token operator\">-></span><span class=\"token function\">SetRenderCustomDepth</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t\t\t<span class=\"token comment\">// Set the NoticeText to be visible so the player knows that they can interact with it.</span>\n\t\t\tNoticeText<span class=\"token operator\">-></span><span class=\"token function\">SetVisibility</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t\t\t<span class=\"token comment\">// Break out of the loop early since we only want to deal with one</span>\n\t\t\t<span class=\"token comment\">// interactive object at a time.</span>\n\t\t\t<span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token punctuation\">}</span>\n\t<span class=\"token punctuation\">}</span>\n\n\t<span class=\"token comment\">// For a single interactive object you could do:</span>\n\t<span class=\"token comment\">// if (InteractiveObject != InteractiveComponentHit)</span>\n\t<span class=\"token comment\">// {</span>\n\t<span class=\"token comment\">//   DeskDrawer->SetRenderCustomDepth(false);</span>\n\t<span class=\"token comment\">//   NoticeText->SetVisibility(false);</span>\n\t<span class=\"token comment\">//   return;</span>\n\t<span class=\"token comment\">// }</span>\n\t<span class=\"token comment\">//</span>\n\t<span class=\"token comment\">// DeskDrawer->SetRenderCustomDepth(true);</span>\n\t<span class=\"token comment\">// NoticeText->SetVisibility(true)</span>\n<span class=\"token punctuation\">}</span></code></pre>\n<p>Now here we added a bit more. The first check is to check if what the PlayerCharacter is currently looking at is in the array of interactive objects and if not we turn off the notice text and highlight for the previous value of <code>ObjectCurrentlyBeingLookedAt</code> if there was one and return early.</p>\n<p>After that we loop through all of the interactive objects to see if the PlayerCharacter is currently looking at one of them and if they are then we set that as the new <code>ObjectCurrentlyBeingLookedAt</code> and we set it to be highlighted.</p>\n<p>If you compile this and drag out the <code>InteractiveActor</code> onto the scene and hit play you'll notice two things. When you get in range of the InteractiveActor's BoxCollider trigger area you'll see the traces being run from the PlayerCharacter's camera to check what the PlayerCharacter is looking at. Now use those traces to help you guide the camera towards the DeskDrawer and when you look at it you should see it highlighted. You should also see the NoticeText pop up and let the PlayerCharacter know they can interact with the DeskDrawer but that doesn't do anything yet until we add it in the next section.</p>\n<h2 id=\"implementing-interaction\"><a href=\"#implementing-interaction\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a><strong>Implementing Interaction</strong></h2>\n<p>So as of right now our PlayerCharacter can get in range of the InteractiveActor we'll see the traces and if they look at an interactive object, like the DeskDrawer, they'll see a highlight around the item letting them know that they can interact with it but now we have to implement the actual interaction. This is going to involve changes to the PlayerCharacter and the InteractiveActor.</p>\n<p><img class=\"g-image g-image--lazy g-image--loading\" src=\"data:image/svg+xml,%3csvg fill='none' viewBox='0 0 562 386' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-4322ff632dd7c023b3c0628a08a0c8de'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='40'/%3e%3c/filter%3e%3c/defs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-4322ff632dd7c023b3c0628a08a0c8de)' width='562' height='386' xlink:href='data:image/png%3bbase64%2ciVBORw0KGgoAAAANSUhEUgAAAEAAAAAsCAYAAADVX77/AAAACXBIWXMAAA7DAAAOwwHHb6hkAAAYVUlEQVRo3p1Z51%2bUZ9bm2/thN8USFbCAhaiAIEgv0svAVKYBM8wMDL0o0kRFDWq6MRpT1iRq1NUoKjZs2DWWrDGaaJqJJdnsbnY3%2b%2b7%2bBdd7znmeGTDRJPt%2buH73M88Mz9zXOde5zrmHgNtf/w23v/HhB3w9HHcexDc/w99/jrs/wZ1h60OhPOvrh2HYXm4LaI9fD%2bErH24z/ir4kvGVD38RfMH4UsHnX36Pz7/4Hp%2bpCPjvyT%2bE8C%2bRvPuTwDwiAI8MxANB%2bNsvBOFhAfirQv4hAfj8wQD8N5n/BfJ3f6MCfiUQv6qCb367Cn4egAdVIAH4r8nf/QXJPwL%2b5z1SET88uiR%2bSync/hUVPDoAj87%2bL5K/%2b9/h/rf/wj3CL5fD33%2b1FG7/UikMD8JvDcD/q%2b5/M4aecenyx7jy4XXcGaaGn2f4bw9gOFFF6n9VMDzTtx9udl8Mq3Uh%2b/mf/bgl%2bA63PvsOAf6HEoZH9MHuoGB4kJggk7l77x%2b4e/8fuHf/n37c//ZHwb1v/4nv//IfXL9xG2vXvYb169%2bgL70v97797l/47s//O4Tv//3A629VDL8WfKdC3vv30OthuM8gtfnAyrt3/0Hcvfcj7f9HBHynPsgP2sifGbRJwff/kdd8n7/0/nf8wB/pAf%2bkQPwdn1G0b1JEb1I0P731LW58eg8f37hLuIOr127j40/u4vCRc3juuZfwwouv4PiJy/jTR7fxwaWbhFu4QOu5Czdw5tzHOHf%2bOs6cvYbTZ67i9NmPcPL0VRw9fhnHBi/j8NGLODhwDgcOncW%2bA2exe%2b8J7Nh5GNvfH8CWbQeweUs/Nr23F%2b9s3I23392NDe/04c0NO7H%2bjT9i3etbsfa1LVi9ZiOefeENrHpuPXpXrsXy3jUIeP2tHfSBbXh13Ra8svY9vLj6XfSuWk9vrkXP8jVY1PMyupe8hM7u59He9SyW0L2lz6zFoqWr0btiLXbv2I097xNo7fvjTsL76Nu2A3t37MSe7Tuw7/2deGP9m1j2zCosWboCWzduwtH%2bfhzs68PA3j04TNeHdu8m9OEwvyYc6d%2bLo/v6ceLQQSxetBK28kZUeFrhcLX4UVbRBIvdC5PFTfD4UWIl0GotrYW9vAHWsjq5tpTWwGyvgclaBb2pAlp9mSDAbK%2bDD9ayBuhLKpFbYENeoR15GjvyBaWyanQO2B2N9OXNsNBnO9p7cP3ccVw/P4iblwZx68oJ3LhwAp98MIRbl0/h3JF%2bvLV%2bHZF/E1dODeCra2fx2YdnCOfwxdXzuH39A3x57SK%2b%2bfQSvrp%2bCbdvXKb1Cu7cvIprH5xBe2cPKmtaUFXTBo93gR9uLwWlgvbjrEOZo5aIemE0u2G2VsJQUkEBqqbAUcDczRS0ZpS7mlDOnyfYyykotkoElFM0GQ73PFkNJR7ojC6Kkpuu3fLaaKYHmpWoOj3zUVE5n7LSgFW9z%2bPTiyfx8fnjOLH3KI7sOoJPLg4Krl84jmvnjuGjM0dx4%2bIp7N99FJtfH8CfTg1icO8RXDk5iI8vnMT5oydwZPcgrp49hQPbB3HpxGlcPnUGV06fxaVTZ3Hj0mXs3LwfuTmLaNP1QrbUQSivVUjYmbSHruvQUN%2bBV15Yh2P7D2Nf334s7Oqlz9bTvquFrFmgqsTqEfUEMFmG1lAhEiklaZU6myTLDF%2bAnBQgs62aPlshX5hfVIoXVz2Pz66cIcLHsKSxH62u3Vi9ZB9WtvXjxe5%2brO7ZS%2bsevLpiD15ZfRDVpf0SlA7vXiys3YO1vQexb%2btRzKvYi47qftRa96KxfC9aXHvxUs8htNPn5lfuwZpnjsFt3kREFBKcaYu9itRYg7raVry0cjWO9w/gzie38MPXd/Dl5Y8w%2bN4uvNrUA08pBYsyzkEosbr9UErHhQCNrhwabTmKDU4h71MCrz5w1nlV1FEhyigsLsMf1q0jiZ8WBbz98kEcIVPauv4QEd%2bHdb19tO7A8wt3YP2K7Ti6qx8bXjhAijiOfVuOYstrAzi4/Rhl/CT2bzuOY7tPYmDnCezbdhIn9p8hZZzH4V1nMbjvPE4PXCAlfISNb79Lm%2bcAVMFC68qWZbh65BR%2b%2bOI2bl%2b6imOb3sf61mew2FiN%2bTllaMt1oMFcDTtJv8zZCFtZrZp5F0xmFyWyAgGF2jIwLBQph3s%2byocRF4jkW6X2tRQkLQWAg1BMgdu9dRM%2b//A81f923L3xNr65vgl3rr%2bLr69twM0PXseti2tw8%2bJ6XB48SJk/QoFi6Q/Q9WG6PoyrZwZw%2bcQh/On0IfKGg/iQcOXUAVwcPIALx/bTuh8fHN8vHnJmYB9OHSB1NLXBRLJvLKnHYm0Tess78BoFYpmlHm15DkFHkQudxW500uqyVKGE1GKxVYlqjES8hFRk4bIgBBiovvWUWZPVS29UPwIkOap/G9Ugg2vRTrW1evkzeOv5FzC4qxsbVy%2bmrPfg1WWL8UJ3l2BVZwf2bpqPlxZ1YGV7J57rWkjoxLMd9B69XtlG99va0dvahmfmL8Cyllb0NM2jcmpBd10DOqvr0F5Vg1Z3FZWJB41lTpRRGVTbG7BI14yF%2bmYi6UV7frmQ7dJ6iLgL7RonOgqdaC6ukEyXsNwl4y7JPq9mCgh7mpggB6CwuJRKoUzKgcuiSOBAkV6B3dEgSnB65glYHQ3eJnTV1KNvQwNtnroCbbiruhpd3iqqXy%2bWVzdjcMMqHN68HovqmtBW6aX6rxF0VtcK%2bLrdW422qmos8FRhvrsS81we%2bmw13a%2bRlQOwwFOJKkel1G67vhKLdbVYqCVQpruIdIemQsDk2widFAC3zgmDVSEvsidwd%2bBVb3JI2wxg4%2bMSELJ%2bwk4UMwzKqjO5VF8YQhm1lWpvi2Srf2MjepobiUw9Wmra0VC3BJ01jejW1%2bG9hfNxY%2bdmbO5dAZepBLW2UlRb7QSbwGuxorLEAg%2b95zIY4dDqUE6oL69Aq4dq2e1Fk9ODFqcLpbYK2Ml/FusoAJTtriIm7VQxFIB2It9GinDQDGDimjcrxBmcfZ3RIWuxvhQBTLZwWOZ98AWDr7k8uPX5sq8ooEUCsLC2Gfs2NeLgliZRwvZ3O/HHzcuw5%2b1m7HrZi741HqytqsPqJuokBgPcRpMQrWDoDQKnTi/ES4uKYS0ohF1TjFq7gwLglSA0O91oKHPAZnfDS3PKUm0lulnumooHyPN1u5r9ej25Pdc5%2bQUPPsrQRO2PpG%2byViqDE63SBYrVjHMrVEzOJVnnWYBhpoGCTdDnATaKLE9W5dSHFzU0YWlzA5a3eKl%2bK7Gk3oVFtQ50uhzoMZRhKT2vu7AcLXozZVYLZ3ExHMNQXqSgTFMEe2EhbAR7oYaUYadSIOlX1lBrrKCAlJOZ1aCBiC8lBbD0O9Xsd/4kAFz/NuJlJPnrjQ4pmxJrlZQxe5lV3T8jwEY3mRz3foHa/8tcQzMAB6RIAuUQiD/oSRklTglAcwXVWV4RLBo9bEVGlNBqIpSmFcATn4WyxByY8nUoKdLLe7o8DYqyC6AhFGTmIz8zD7lzc5FDSIlPQ0ZyBpxGC80DHiwgb%2bAyselNKCDybUVuLNEp8u98iPw5%2b80aB02DbpE6k9cZylUT9EgCeZ5hA%2bSgBAwfenzEfeTZ6DhqRULc6Q%2bAntSRp7EhKiYTXbX1cJhsCJ0ai5mR6YiIzsLcZA0MuTakR2cgJWQ6ipNykJSowfTwdEyYmoigSTF4KiicMBOjA2dg1LgZGDEmDI%2bNCMX//H48xk0Ih8lgRwNNbTVEurdmAd55eQ35Ajk/EV2kVbI/FAAl622EjgIHqk0eFDN5f72zqsvJA5wyKltpHuAgsP8FDGW%2b6cEg0OpQpz8l40Te4KDSqEBahh7jQ2Np8xFUo1Uo01vx%2bMgwjAychegZ6WRSVWjOccCdQqaXYcDG5oXY2dmLtzuWY1ZkBkYFRmHU2Bl%2bjBwznZ4VjnQqla5V69DWtRJ1pga4UyvQpm3Eh%2b8fwCE6zXUbarCIHL%2bbMETeQaZXTuQdooIu8gcbmbeOyLLpcQB41RrKZWXjU%2brfq5RAqZPl3yinq5%2bqwdci2Sd4%2bOE2GRmTjaeCZ1HWIjAmKBK1pQ44DBY8%2bdR0jJ0Yi/gZKaidqycpkovnlVNmqC/nO5XX%2bRYkRGVgzMR4jKFncAAZHISkvAroXd1wtTyHZzf0YevuY1i94i1sXr4O1/oOoLmoFk3ZpZR96vcs%2bUJ2e4dAiBd7JPAdumoYjHx%2bcapk3bRv%2bwNrYbFNgmC0VA6VACuACT8o/0bpBjwBpmcZEBKWSMQjSbrK5keOnUnkzeTuZjw2KgxTpyRgXkEZ6tOL0ZKlx/xsE1pzzSRLO1pzStCSY8Q8oxuBIQkYO2G2%2bpxIBE6KxVxqmVn5LtQX1cBlpY7TtAI9a7diz5GzOH1wEO3GBrRkW5XMq8R5%2bOmmjC/SeQVLKACtBnL%2bsnohyBnm4y%2bbOK880JVQ5n3X7AkB7IhmOztjvbrWiVNyfbBh8KQYl1yMoFDe9BzafDzGTZxD11THwbNhyCuGy2jGSCITPT0FHbklyA5PRF54AmpT8lCdko/KhCxkzoiDN6UACwptRDxS/j44NFGey0gvrsGq17bh5B46MW7ZhePvbkdP14uoaOzFhr6jeOH5t9CYaUZ7Qbl0gEVEdrHeq4ADQOtSWpsMXpK/S6ZVcXzV9ZmPVeaCKln5hCseUEATIM8BD6wErvtCrROzE7QInpxK5pWGidPSMX5qKsZPSaF7SRgzIQ4acnHu4ZMmJ8KbRQNNYjYeHzUN0yZGkhKKsIAyr5udit%2bNnIbUaTHo0ZZiDpnlE2PD6TnJEoTASfGYGpEDi3cx3nx/AKdPf4Cbhwdxb/Ak9m3YhrLqHtjnvwR3Ebk/BaCHvGCJj7yKHlYAreXFNMeQ9Pm3AB7jOYlM2rdyUPxqIEgA8ovsCnk64mpUw4tLKsSksHQETU4h8koAxk9RyDOCaOPjaOMREamIjkrFjLAUNM7VUvaTMT0sAUnT4zA7OIzIJ%2bFZMsq0OVmYFRqDzlwjCuNy8fiYmQiiUggOTZJ1LKmKn5laWIneddswcPICLg0cx7cnT%2bPVVeuRbGyFSd%2bAbiqBHpI5k16ir8YyAquhxUgHHNp3odYmo25BkdXv9j5Fl1iVMw3/tsHlwafbgPwim5DnrHOLy8ozY9rMFIwZHyOEhfw0lfxUBcGTWQHJsuGxkxIwmpQQOiUJlpg0ZEUkSh/WRqdiVvDTiA%2bJQFV6Ng4sW4mc2EwYZyUhYkocniT/CJykkA4KSRRfkNIiIw2PK0bj4jXYdeQMrp2/REfsTciyLoCRfKCb%2bj8HYKlOCUA9HXisNJPoqdXlFVn8Jsfurzc5xeg4%2b7yK9GllZXAXkAD4JJ9JtcsOHxwyh9rULMpunBBXMp/yoAIkCMkqkmTzISRnS2wG2vJLyKWdcCZpkUs%2bkB4Wg9KEPLxkr0NLrgmW6BQ8HTqHAhBOQY6WZ/Dfs7cw2BuC6Jmh4TnQ2OdjY99h9L78DlINTbAV0xhc7Ba3n2ckWVPC8om0QTJOq4mdv0zcnmf9vEKz%2bjuhVxTAYE8zkwr0dKbgIASw/BNSiij6s4k4OXxwNCFKNuard0UBKaoC0hCsloGogDbLQXhqYhxSwlPQnFWCytRidBWWUjDKMJ8Gok7qDF6610Tv6WdnIJBMcOS4cPkeJs8qUDpDLD03CTOTbcgyt2DB0pdRXr8MJVVLkG1thVvjQou2AqU0i%2bhLHJRxImjm9mwT4pzxfI2ignyNlbqXQ/p/IfkOm7xBNT7JPpWBmGBqho4mr9kYHRQlG2KMGT%2bbNpUkZH2SH68qINivgBS/CnwERtBs4EwpliDUpGpQl6ZBLYGvGzOMcKdphfwIyv5o6hocBP47RQXxiq9QGQRTO02jNvfiH7ai/ZlXEJ/jRLapEZk5dhnBNUQ2N9%2boZryUjNvqzzgffDgY7AEciNwCszoNeoQ0y5/buslSJSN%2bQHh0pmyGwdkfTfIfQzKcQI7vI8vXigKGSmKoG6ilQJt/fMwMRJDRVSfnwhaTjok07oYEh8Mem46qpFyET47BY/QZ7v%2bsNg46fxebqaKAGKX8xkchikzT5JoHvbsD0akmzIwvQkPHCmzb2Y/WjqVkYl6VbLkYmpEHG9Xc9NQGfTMAtzuLKnl%2bnwPjC0p2nhEBE8mQRqtZ961jSc5DmaH6nJQgimBfGNrsHHFuli3/jZQOGWdoSBzKibCJap3VNHH8LFiiEmGOnUvPUf5%2bHD1fUU6SXPvUwINVYGg8tGWNWPn6FjQtW4%2boTBciUmiCLPCgffkreHPzThw8cQ7Hz13GO1v7UFnbJoMOtzSeaE2q07PhseStYoBVApZ8DnlUka5UjDKLOlJAyNNzFbJqhlmGEgzKjmSJSPivg6Jks8q1svJIzJsfRRhBg1FiRBYq6fRXEJkg2Q0LjYOOOwOZbMgUnh1ipXyU2k%2bS7/U9bwSpY2acBoUVi6F1dSI2w0Lvx2Hi9DQUOrrRsWItpkWmIT3PCldtO15%2bfRMa5i2WYzwf2qS%2biSifcH1u7zM8XjkIfMzXGZ1E3iA%2bEeAjHkjEpa6HbYiz6idOgRglpaIGhAPgAwXBF4C0WdlU9zrUZhtEAfHTk9GabYEzVSf1HSjzQ5yfPAdijEhfMUY%2bI0wIS8akafF0vgjD70eEyGBlr12MN7YfQBFtPiYugw5kRTK/MDnu92xyRjXjJaQIyb5qfL7sc82LB9C5hgPAXhHgy4SS/SSRtZDl7D4QBCI//FpVhbJxNQBB0YidkYbFNAc46Ej8BJ0bosOS0JVnQX5MDkZR2YwjBQh5KgEuB/YSXkeKMUaJQY6g0%2bGY4EhRxAg6KP3uyVAUW2uw5eAZLHp2LZmhXo64LGUmzWcWH0khXeKRX7mZLP%2bgoww/lZL9EluNrDzzcLsMkOzLIJIoZvcUyZ8J%2bYj7WuPDrpUyUEqAMZoUEEIe0EgjcAoNU78fG4FpITGoTMrDVCqFUfS3SsdIVMlT0CkQ7Dkc3JFqOSmBmClB4deTw%2bKQQTNEfdezqG5dSgSUfp9TUCLm5/ufn02td/YBDoSv1/P7nHW%2b5vf5t06%2bLiAFBbAkfdnnTXEAfFkVsmJQyvVo9Xq0/364uDbf42yNJhMMpEmuNC6baj8Wj3EAaLXF5WA83R/DCpioGGEwtVRf4Pn7mbQSxCg1oBFy70n2hah0ce30TK0YF7u/mBkFge9rSdrKYa5GGXPl0OOVo7zSATwUNLf8pCY/%2bZEC%2bH0e%2bQP8m5iiSlHNgI%2bgr%2baVa6UkFOKREgjJFMufNhxEk11hFJkgDVYTJ0bjccrgzCnxaCMDNMzJlS7BAQhUVeDzAV4l8GqAfeT9yqL7U2ckiWmZ7VVCvoBGeP51h6950OH/VbLMTdZqCQBL3/e/DiZt9GWfSPPK6uBzT0CQ2uoUKc7xb4Az69uQj%2bxIlnvgUHn4g0Xr4089jcnUwlx0iPKkaBBCkn%2bCnjGT5oLGdA0KoufS30YNa6nx8p3%2bdkj35fnqd/v3wXugQD5Jh6ew8FRkkLnm0bSnDD4WCYDB7JKf6TgAHAjuADqp/Tol%2b6r5Se0blFLgMhAFyHSnGpJickOkR6mtbuS4SLXuZw2Znlxz65opxsX3nqTXc8i9jdFpMlA9QffCpyZibpjS6wPVQ4%2b0QnWq5PqXa%2bpA/u/l5/Iz/SarKI7vhUyLg3KAsyObyHNLK6Cenp1X4jc%2bzric/uhaMi4/gngl43qzRxTAB0CZBHkzQWoWuN58Ne6Tn1L7kWJ2fHgRUKsaOyFazg%2bBhHEk9%2bAQPj0mYtLUJERRpqbPykTo0yky3UXOzsG0iEw5YTJhn/Gy4oYbIf/AopCfKeT9ZqiWAV%2bz2hJptOaJjhXAk2AujcA83Rlk3K2kw1Gl/LjDKmAF%2bEyQ4QsQB4M/GxAek4cZUdmELDwdkSa1No0QMTsL4dEZmDErDbPj8xCbmI9ZMZmYQ2tyuk7W%2bOQCpGcZkZapQxQddTm7s%2bYUQEv1lUbnAZ7v%2bbkxiRo5MI1T5S9K4LlDrf9x9HccCA4I/7bo6zJ8zVnnoDxB15wgViUnIDYhV8qA639utl4OPvyDrULMo/y7j7KsNSr/4crX2JRzBL3PyuFJkFUUYLDwyagKGTkmIZSQUihIz9JTrVlFbjkUXb4u0pXJyq%2bL5WFl8rCcAgsNLkSIPKDYQPVY4qUzQzImkwIiYwuJYKK0SJ/X8OCj/ACizB1ijlSCrEY2Q1mDlVWUQfcmkLpCnk6Te6Np3khI06sSd/qPuso/dxzSGeZm6zA3Syenwex8E1LSC4m0VQ5MyWmF5B0m4mLG/wE9Q8SDaRYP3wAAAABJRU5ErkJggg==' /%3e%3c/svg%3e\" width=\"562\" alt=\"Highlighted Object\" data-srcset=\"/assets/static/highlighted-object.ebd9f33.f1915bcacda483750905f47420e62088.png 562w\" data-sizes=\"(max-width: 562px) 100vw, 562px\" data-src=\"/assets/static/highlighted-object.ebd9f33.f1915bcacda483750905f47420e62088.png\"><noscript><img class=\"g-image g-image--lazy g-image--loaded\" src=\"/assets/static/highlighted-object.ebd9f33.f1915bcacda483750905f47420e62088.png\" width=\"562\" alt=\"Highlighted Object\"></noscript></p>\n<p>First lets get into what we have to add to the PlayerCharacter as it's pretty minimal.</p>\n<ul>\n<li>We need to add a variable that is populated by the InteractiveActor the PlayerCharacter is looking at.</li>\n<li>We need to add an <code>Interact</code> method that is called when the interact action key is pressed.</li>\n</ul>\n<p><strong>PlayerCharacter.h</strong></p>\n<p>Where your other properties are declared:</p>\n<pre class=\"language-cpp\"><code class=\"language-cpp\"><span class=\"token comment\">// The InteractiveActor that the PlayerCharacter is nearby.</span>\n<span class=\"token function\">UPROPERTY</span><span class=\"token punctuation\">(</span>VisibleAnywhere<span class=\"token punctuation\">,</span> BlueprintReadOnly<span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">AInteractiveActor</span><span class=\"token operator\">*</span> InteractionArea<span class=\"token punctuation\">;</span></code></pre>\n<p>and then later down where you declare the methods:</p>\n<pre class=\"language-cpp\"><code class=\"language-cpp\"><span class=\"token comment\">// Called when the \"Interact\" action is used.</span>\n<span class=\"token keyword\">void</span> <span class=\"token function\">Interact</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre>\n<p>Now in the cpp file we have to bind the action to the method and declare it like so:</p>\n<p><strong>PlayerCharacter.cpp</strong></p>\n<pre class=\"language-cpp\"><code class=\"language-cpp\"><span class=\"token comment\">/**\n * Called to bind functionality to input.\n *\n * @param PlayerInputComponent An Actor component that enables us to bind axis events and action inputs to methods.\n */</span>\n<span class=\"token keyword\">void</span> APlayerCharacter<span class=\"token operator\">::</span><span class=\"token function\">SetupPlayerInputComponent</span><span class=\"token punctuation\">(</span>UInputComponent<span class=\"token operator\">*</span> PlayerInputComponent<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n\tSuper<span class=\"token operator\">::</span><span class=\"token function\">SetupPlayerInputComponent</span><span class=\"token punctuation\">(</span>PlayerInputComponent<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">// When the mouse is moved we turn the player.</span>\n\tPlayerInputComponent<span class=\"token operator\">-></span><span class=\"token function\">BindAxis</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Turn\"</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span> <span class=\"token operator\">&amp;</span>APlayerCharacter<span class=\"token operator\">::</span>AddControllerYawInput<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\tPlayerInputComponent<span class=\"token operator\">-></span><span class=\"token function\">BindAxis</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"LookUpDown\"</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span> <span class=\"token operator\">&amp;</span>APlayerCharacter<span class=\"token operator\">::</span>AddControllerPitchInput<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">// When the \"Move_ForwardBack\" or \"Move_LeftRight\" axis is used we call the methods to make</span>\n\t<span class=\"token comment\">// that happen.</span>\n\tPlayerInputComponent<span class=\"token operator\">-></span><span class=\"token function\">BindAxis</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Move_ForwardBack\"</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span> <span class=\"token operator\">&amp;</span>APlayerCharacter<span class=\"token operator\">::</span>MoveForwardBack<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\tPlayerInputComponent<span class=\"token operator\">-></span><span class=\"token function\">BindAxis</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Move_LeftRight\"</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span> <span class=\"token operator\">&amp;</span>APlayerCharacter<span class=\"token operator\">::</span>MoveLeftRight<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">// When the \"Interact\" action is used we call the `Interact` method.</span>\n\tPlayerInputComponent<span class=\"token operator\">-></span><span class=\"token function\">BindAction</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Interact\"</span><span class=\"token punctuation\">,</span> IE_Pressed<span class=\"token punctuation\">,</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span> <span class=\"token operator\">&amp;</span>APlayerCharacter<span class=\"token operator\">::</span>Interact<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">/**\n * When the player presses the interact action button we check to see\n * if `InteractionArea` is populated. If it's not populated then we return\n * as there's nothing to interact with otherwise we call that InteractiveActor's\n * `Interact` method.\n */</span>\n<span class=\"token keyword\">void</span> APlayerCharacter<span class=\"token operator\">::</span><span class=\"token function\">Interact</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>InteractionArea <span class=\"token operator\">==</span> <span class=\"token keyword\">nullptr</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n\tInteractionArea<span class=\"token operator\">-></span><span class=\"token function\">Interact</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre>\n<p>So all we did above was use <code>BindAction</code> to bind the interact button being pressed with the <code>Interact</code> method being run. Note that mine also contains the bindings for turning and moving and if you used a different Character script yours might look slightly different but it doesn't matter as long as the interaction action is bound.</p>\n<p>Below that we declare the <code>Interact</code> method which checks to make sure we're near an <code>InteractiveActor</code> and if so we run that <code>InteractiveActor</code>s <code>Interact</code> method.</p>\n<p>So now we head on over to InteractiveActor where we have to do the following:</p>\n<ul>\n<li>Set the <code>InteractionArea</code> property of the PlayerCharacter when they are in the BoxCollider's trigger area.</li>\n<li>Define what should happen when the PlayerCharacter calls this InteractiveActor's <code>Interact</code> method.</li>\n</ul>\n<p>All of this takes place in the InteractiveActor.cpp file.</p>\n<p><strong>InteractiveActor.cpp</strong></p>\n<pre class=\"language-cpp\"><code class=\"language-cpp\"><span class=\"token comment\">/**\n * When a component enters this Actor's BoxCollider trigger area we check to\n * see if that component belonged to the PlayerCharacter and if so we start\n * the timer that runs the method that checks to see what the PlayerCharacter\n * is looking at.\n *\n * @param OverlappedComp\n * @param OtherActor\n * @param OtherComp\n * @param OtherBodyIndex\n * @param bFromSweep\n * @param SweepResult\n */</span>\n<span class=\"token keyword\">void</span> AInteractiveActor<span class=\"token operator\">::</span><span class=\"token function\">OnComponentEnterInteractionArea</span><span class=\"token punctuation\">(</span>UPrimitiveComponent<span class=\"token operator\">*</span> OverlappedComp<span class=\"token punctuation\">,</span> AActor<span class=\"token operator\">*</span> OtherActor<span class=\"token punctuation\">,</span> UPrimitiveComponent<span class=\"token operator\">*</span> OtherComp<span class=\"token punctuation\">,</span> int32 OtherBodyIndex<span class=\"token punctuation\">,</span> <span class=\"token keyword\">bool</span> bFromSweep<span class=\"token punctuation\">,</span> <span class=\"token keyword\">const</span> FHitResult<span class=\"token operator\">&amp;</span> SweepResult<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n\t<span class=\"token comment\">// Return early if anything is null so we can avoid a potential crash.</span>\n\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>OtherActor <span class=\"token operator\">==</span> <span class=\"token keyword\">nullptr</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">||</span> <span class=\"token punctuation\">(</span>OtherActor <span class=\"token operator\">==</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">||</span> <span class=\"token punctuation\">(</span>OtherComp <span class=\"token operator\">==</span> <span class=\"token keyword\">nullptr</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">// Try to cast to `PlayerCharacter` to see if it was the PlayerCharacter</span>\n\t<span class=\"token comment\">// that entered the interaction area. If not we can return early.</span>\n\tAPlayerCharacter<span class=\"token operator\">*</span> PlayerCharacter <span class=\"token operator\">=</span> Cast<span class=\"token operator\">&lt;</span>APlayerCharacter<span class=\"token operator\">></span><span class=\"token punctuation\">(</span>OtherActor<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>PlayerCharacter <span class=\"token operator\">==</span> <span class=\"token keyword\">nullptr</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">// Set this InteractiveActor to be the value of the PlayerCharacter's</span>\n\t<span class=\"token comment\">// `InteractionArea` so if they press the interact button we know they want</span>\n\t<span class=\"token comment\">// to interact with an interactive object in this InteractiveActor.</span>\n\tPlayerCharacter<span class=\"token operator\">-></span>InteractionArea <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">// Create a FTimerDelegate so that we can pass the PlayerCharacter object to</span>\n\t<span class=\"token comment\">// our `LookForInteractions` method.</span>\n\tFTimerDelegate PlayerLookTimerDel<span class=\"token punctuation\">;</span>\n\tPlayerLookTimerDel<span class=\"token punctuation\">.</span><span class=\"token function\">BindUFunction</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span> <span class=\"token function\">FName</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"LookForInteractions\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> PlayerCharacter<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">// Set a timer that runs the `LookForInteractions` method every 0.1s which</span>\n\t<span class=\"token comment\">// checks to see if a Player is looking at an object that can be interacted with.</span>\n\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token function\">GetWorld</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n\t<span class=\"token punctuation\">{</span>\n\t\t<span class=\"token function\">GetWorld</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-></span><span class=\"token function\">GetTimerManager</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">SetTimer</span><span class=\"token punctuation\">(</span>PlayerLookTimer<span class=\"token punctuation\">,</span> PlayerLookTimerDel<span class=\"token punctuation\">,</span> <span class=\"token number\">0.1f</span><span class=\"token punctuation\">,</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">/**\n * When a component leaves this Actor's BoxCollider trigger area we check to see\n * if it was the PlayerCharacter and if so we stop the timer and hide the notice text.\n *\n * @param OverlappedComp\n * @param OtherActor\n * @param OtherComp\n * @param OtherBodyIndex\n */</span>\n<span class=\"token keyword\">void</span> AInteractiveActor<span class=\"token operator\">::</span><span class=\"token function\">OnComponentLeaveInteractionArea</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">class</span> <span class=\"token class-name\">UPrimitiveComponent</span><span class=\"token operator\">*</span> OverlappedComp<span class=\"token punctuation\">,</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">AActor</span><span class=\"token operator\">*</span> OtherActor<span class=\"token punctuation\">,</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">UPrimitiveComponent</span><span class=\"token operator\">*</span> OtherComp<span class=\"token punctuation\">,</span> int32 OtherBodyIndex<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n\t<span class=\"token comment\">// Return early if anything is null so we can avoid a potential crash.</span>\n\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>OtherActor <span class=\"token operator\">==</span> <span class=\"token keyword\">nullptr</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">||</span> <span class=\"token punctuation\">(</span>OtherActor <span class=\"token operator\">==</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">||</span> <span class=\"token punctuation\">(</span>OtherComp <span class=\"token operator\">==</span> <span class=\"token keyword\">nullptr</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">// Try to cast to `PlayerCharacter` to see if it was the PlayerCharacter</span>\n\t<span class=\"token comment\">// that left the interaction area. If not we can return early.</span>\n\tAPlayerCharacter<span class=\"token operator\">*</span> PlayerCharacter <span class=\"token operator\">=</span> Cast<span class=\"token operator\">&lt;</span>APlayerCharacter<span class=\"token operator\">></span><span class=\"token punctuation\">(</span>OtherActor<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>PlayerCharacter <span class=\"token operator\">==</span> <span class=\"token keyword\">nullptr</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">// Set the InteractionArea of the PlayerCharacter to be a nullptr so that</span>\n\t<span class=\"token comment\">// they can't interact with this InteractiveActor when not in range.</span>\n\tPlayerCharacter<span class=\"token operator\">-></span>InteractionArea <span class=\"token operator\">=</span> <span class=\"token keyword\">nullptr</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">// Stop the timer that checks for the player interacting with objects as</span>\n\t<span class=\"token comment\">// the player is no longer in range to do so.</span>\n\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token function\">GetWorld</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n\t<span class=\"token punctuation\">{</span>\n\t\t<span class=\"token function\">GetWorld</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-></span><span class=\"token function\">GetTimerManager</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">ClearTimer</span><span class=\"token punctuation\">(</span>PlayerLookTimer<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre>\n<p>So what we did above was just set and remove the <code>InteractionArea</code> for the PlayerCharacter when they enter and leave the BoxCollider trigger area of this InteractiveActor.</p>\n<p>Now finally to the <code>Interact</code> method. This part is highly customizable and we'll go about a couple different ways to do this. Since we're having the PlayerCharacter interact with a drawer we'll just have its Y position change to simulate it being opened.</p>\n<pre class=\"language-cpp\"><code class=\"language-cpp\"><span class=\"token comment\">/**\n * When this Actor is interacted with we check to see what object it is and\n * perform the interaction for that object.\n */</span>\n<span class=\"token keyword\">void</span> AInteractiveActor<span class=\"token operator\">::</span><span class=\"token function\">Interact</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>ObjectCurrentlyBeingLookedAt <span class=\"token operator\">==</span> <span class=\"token keyword\">nullptr</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">// If you only want 1 interactive object per InteractiveActor or you want to do the</span>\n\t<span class=\"token comment\">// same thing for every interactive object you can you can just check to see if</span>\n\t<span class=\"token comment\">// `ObjectCurrentlyBeingLookedAt` is null or not and if not you can do the interaction</span>\n\t<span class=\"token comment\">// logic like so:</span>\n\t<span class=\"token comment\">// FVector CurrentLocation = ObjectCurrentlyBeingLookedAt->GetRelativeLocation();</span>\n\t<span class=\"token comment\">// ObjectCurrentlyBeingLookedAt->SetRelativeLocation(FVector(CurrentLocation.X, -20.0f, CurrentLocation.Z));</span>\n\n\t<span class=\"token comment\">// Otherwise if you have multiple interactive objects you can check their name</span>\n\t<span class=\"token comment\">// and perform a different action for each one.</span>\n\tFString InteractiveComponentName <span class=\"token operator\">=</span> ObjectCurrentlyBeingLookedAt<span class=\"token operator\">-></span><span class=\"token function\">GetName</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>InteractiveComponentName <span class=\"token operator\">==</span> <span class=\"token function\">FString</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"DeskDrawer\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n\t<span class=\"token punctuation\">{</span>\n\t\t<span class=\"token comment\">// If the PlayerCharacter is interacting with the desk drawer then we want to</span>\n\t\t<span class=\"token comment\">// move the desk drawer to that it looks like it was opened.</span>\n\t\tFVector CurrentLocation <span class=\"token operator\">=</span> ObjectCurrentlyBeingLookedAt<span class=\"token operator\">-></span><span class=\"token function\">GetRelativeLocation</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\tObjectCurrentlyBeingLookedAt<span class=\"token operator\">-></span><span class=\"token function\">SetRelativeLocation</span><span class=\"token punctuation\">(</span><span class=\"token function\">FVector</span><span class=\"token punctuation\">(</span>CurrentLocation<span class=\"token punctuation\">.</span>X<span class=\"token punctuation\">,</span> <span class=\"token operator\">-</span><span class=\"token number\">20.0f</span><span class=\"token punctuation\">,</span> CurrentLocation<span class=\"token punctuation\">.</span>Z<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre>\n<p>In the example above I included a snippet that shows how to implement this if you only plan on having 1 interactive object per <code>InteractiveActor</code> or if you want to do the same thing for every interactive object. If you're using an array of interactive objects then you want to take the second approach and check to see what the name of it is if you want to do a different action for each object.</p>\n<p><strong>Note:</strong> Make sure you set an action in the Input map marked as \"Interact\"</p>\n<p>So now if you compile this and hit play and you go to desk and look at the drawer it will be highlighted like before but now if you press the button you set for interact you'll see the desk drawer being opened.</p>\n<p><img class=\"g-image g-image--lazy g-image--loading\" src=\"data:image/svg+xml,%3csvg fill='none' viewBox='0 0 573 390' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-5f447820ee3f988d9f06013181520196'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='40'/%3e%3c/filter%3e%3c/defs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-5f447820ee3f988d9f06013181520196)' width='573' height='390' xlink:href='data:image/png%3bbase64%2ciVBORw0KGgoAAAANSUhEUgAAAEAAAAAsCAYAAADVX77/AAAACXBIWXMAAA7DAAAOwwHHb6hkAAAalElEQVRo3q1Z51sV97bmL7jPPSliAwWNNYkNRSxRQaWJSC8bNhvYnU0vmy5NEAN2MaIxRrFE0aixm1iCXbGgKFiwG2Ny7un3fnzvWmtmtnrPeZ775XxYzwwzs2fmfde73rV%2bg9vT538ExzOJ//rnePF%2bPP83htxTnqO8w9NnHL/jCcdTJfgYX/fi5Z/w8tWf8eqXv%2bDV67/il1//hte//h2v3/wdL%2bkYX/eo71f09L7Eza4%2bdJy/hRu3HtG1f5NzD%2bnco8dv3kbfGznm9paAfz9wBaBCroB7/jbkuAaMAPxCoF4zqDcKqF/f/EOCzz0mInrvv8LtO09w7fp9nO24icPHzmN3%2bwls/vZ7rG3ZjiVLW1Bc1ois3MUw25xINebB7ijFps3tuN39VEhjQh8%2bei3gFRJUAv4/8P8yNGDPlay9C4rBa9n65de/4tff/o7ffv9vvPn9H3jzGwP7u4B9/vLPkoXuu8/QeeMBzl%2b8gxM/Xsa%2bA6fwDQFbteZbNCz7CpVVy1FYXI%2bMrHJY7CWwZVbA6ignoCUwWp2uSDPlIyUtmyILhvRsJBsciNdZYM8sw5at%2b9F977lC6JPf8ICIeE8B78Wzt3JUQgH3/B0pcsYYyG8E6vc//o%2bAe/3mb3L8BZ1nhvmBN249xLkLXQTsEvbt/wlb2w6g5asdaGxqRXXtalTVrkFZ5XLkF9XDkVMFe1aFAGRwKWk50KcymBzKaC7SzXkSRksBbI4yun6xEtmVRE6F/JYJ4ms50sz5dG0hDLSfZMhGvrNeVNNDanrx6i/oIyLcWBYKuD/Ji7/S5EjgOFuSOdqyhJ4TeL7%2b/sNfpL4Y2PGTlyRjO3cfIznux%2bp1bVjWvAnNKzehrmEtCksa5WUZjIGCM8Sgkg0cmQQuF5aMUgJdjpyCGopaZOcr26y8ajpXLIDfC2shTBRWuq/JWkSk5FP28wQ0k8XPMBhzYKJS4HtrkWYuhD4tF0X0TvsOnMa9nhdwYyNh8H2Usd4HVGfdT3Dpyj2cOtOJHw53YNee4y5gi2tWoaCoXthmptNMBfSwXCQmZ8h%2bBmXCRJmra1iFnbt2YPuOHSgoXkIPLxN5MvB0elGrvQhZOWUoLKpC5eIGrFy5HutbvqFMchbLJawZJRIM0GQrkuxqwc9R9qkkMpSMs%2bzfDX1qpkIwnTPKPYolzPTeBmM%2bEZWP3II6uC1dtgEVVSuQV7gEuYX1xH4dPaCKMlIJc0Y5/bhEQJntpSSjLCQk2ZGodyCBQHPwflIKPSw1m2qtHNm5VVjWtAbfbNmCDa2bsHrVemz86hvs2LoD3%2b/eg5NHjuDCmdO4dfUSHnR34emDHrzou49fXzzBnu/apXY1qaeZctXIE2Nj4C7w9CxWDW9ZCSz1FPqtPi1Lal%2bLpJQMISLNXCBJYsWlUHAykui4W2SsEdHxFsQkWJFuYaYXU/CDFktNZuZWixR5nx9ituQjh7JXWlKNupqlWNW8Gps3bMSe7dtx/OABXPjpJLZva0PL%2bg1Ys7aFwP6Ilw/u4GlvF148vEtxD88f3CPgFPfv4QkHkfDkYS/evHyG3bvaFaWQrDUiUlUi0rn2GbSqBN7n8rI6SkUJXPMpQmCBKI5Bp9M7K1FESsmHLoWMMckq5sgEuWmZjKfMskQyxIgqXaE9ZHfbDgJ3HJdPn8CtC2fRc%2b0C%2bm5fxZM7nXhMwdu%2b29fwpLsT35H0V65agxUrVuPHo4fQ130dvbeu4X7XdTy4cxOP7nbh0b3bFN1CAKvg2aNePCMl/PH1c%2bzd004gMonwPJcC0sxKsBK4/JgMBplK51g1HCz9JALI56xU8yx3RfpOKQMOxQdyiAArdHo73HSqfFPS6UZGlkieGAUfY8knUzbidDYc2duO5/duoPf6Jdy/cQk9nRdxj0iQ4H3tb9reuXIO7bv24MzxIwT%2bCh4SMX13r%2bPxvZt40tOFPgL/7GE3Xj9TlPDica8Q0Nfbi947vbjf/RDV5Xswf249KZDanqPclXmbKnmt7qVLqK0vgTKb6XAimWSfoM%2bQ1sgEMHBWAAcTwFuDkXFmw83i4BtWSLaZGQabkGwXY0ukm3CdxCRY0Lp2PR51XUE3gWOgPZ0X8ODmRSJDAd9z/SKRc5Guof1bV/FTRyeuXLmFa2cv4W7nVdy4cBW3r3bi3o2buNpxA3u%2bvYz2bZexqv4C1jdfwMqG89jaehlVRWfQXHcO2zd2oap8F5We0vcz1LrXap%2bDJc%2bZT%2bJap2y2rtmIB9fo/qc6sKymiQixiUoYMJOhEZDK84IkPA9uViGgXB7CmddMjsErBucQAqoXL8GjW5dx99p5Ac9gr3ecx53LF6gELuFhl0LElVPncHTvTzhy8DTad3TAaf8R965fwbKKM2goPY11jT/j9OGraKo%2bi3VfnsOm1RfwTcslHDtwA50X7%2bHK%2bR70dvfh2eMn%2bPPvr7Br1z5pYa6ap6GGg1XApZlM/T2DusqPB47idc8DvL7/EF3HzmBdVg1SGAepQQBTchkL42Ji2ANiEkyaAjQCWAFW8QMmgpWgox%2bwKnIoE7cvnhXwD29dwIUT51BqP4l650l8vfwUKjJPYEnREZTYDiJLvx8NzsP4%2bUgHGkpO4T4p4ujeSzi0%2bzKunL2Bxz3d5AP38JKk/%2bppL36heNJ7G71dV9F1pQPnTx7FkT3fYfemTWhtXg5HllYC5S5P4rCQ%2ba1oXo%2b7l67ht4d9eN7dg5Obd2OZLh/FuhxlQlSlz9lOJDyxBDqOwMcmmhETb1IUwCRwr2ZZMKO8TTUVyI/ZSNhh%2bSX4xe5fZ9mfw7ljP6Oh%2bCRO7D2DLatPo6XhBG0PYmfrIRzadQQXfzyLx3dvUP1fpyCDvHsND7ou4ebF03Kfnw7uw8Htbdi5YQM2NTVjXd0SLC%2bvRH1BEWqy81CVlYPFjiykpVilhi3qTCCOTtJPoj5fTu26%2b9RFvHnUh0edt7CnYT2WxGWjPjEXDjPJ3UVAoUv%2bXNKxCWbEEQFRsWlsglkidc56mrTByn8K7r08mh5ubyenvyLyf3DzMh5QSbzovYZHty9RZzhGpBzA6R/24af9e3D20F4c3tmGvZs3om3tGrQ2LsPamjqsrKxCc2k5GouKUZ9fiLq8Aona3HzUUFQR%2bApHNhZnZaOC9q00CXKbUwapTCXSaMAhj6pLLMZSXRnaqluw2dmI2phMyn4eylKofao1n64SwOC1YIPnVrgoKgVusYlWkT1v%2baSNAFszlZJQolwMiOX0zfpW9F47R3V%2bHGeo5/%2bwfQe%2ba92IzctXYG1tLWWxAmtqi2ifQBEYLWollKyW2TNQZLYgx5AKe6IOtoREFBjNVE4OKqNslBP4Ujtll/4ucuSKzG2OEkpEmYy4LFt%2b%2bWJdIRoTy1AXX0zAc1Efn42lSXloSMyBhVScbnO%2bB54VzVuZAnkgoi1jJgJsUuNxKgH2f0EAm46ZjKisoBzramrQVFaMTcsKsH1NHna2ZKN9Yza%2b/yYbJ3c6cffoWry8uQVbV1agIM2CbL0eGQTUEhcHU0w0jNHRSI%2bKQlpUJPSLIqBbuAi2xCQ4zVYCn4XKzBxRQInFhmybMs9n0/jd9NVOfPf9cbR83YZCKoeGOAZbTOFEIwPX5WIZSb8kiUgieTNZWsY1%2bStEFEqJc7DyXQQwG3zSJsOPAv7d%2bdtGkZ1RgErKylcNBTjRXoBVVTYsKzFRZo0oNKehgVjdbKvDTyu/QuehLynLBphiY5EWGw99dBziF8UgYkEUguYtxKxZoRj72XSMHOOHuNgU5KaZUGK1E3iFgPy0dFiMmUgyOhEcn4eolCJYCxrR1LobrZUr0BBlRWNCtmRci6VEQjonM8mCeCKB611pecpcI52NjJDdPy7RgvBIvVICHNzqmABRgEMZNtgAlempAHq6SXoqv2AuSTwPW9YVQR9lgVlnglFnhpFkWZmYiSUxDtRGZOLommLYzSmYNiMC4yfOwYixMzBkuC8GDpmEfoPG46MBn%2bGD/mPp7/EIi0iG0WBBYboJZRkOIiIDuQYj8nLLEEagkjOqUVregLhkB2Jj7aiJycCyhCwsjc9ygW9MyEE51b6OQMsymiJVlTpPfez%2bMfFGcX82PyYhPDJFGYV54uMZQLoAMcXTIQ9C3Arjk2zSNhKSbdAR2GKrA0vys3BkVwVK8sqRqrPDTlNZfhbVIjG8QkfmFGHBnrpKlDn1%2bHAggR7qI6D7e0zAAM9JEkzEAM%2bJ%2bHjg5xjvE0DZscKSakQpZb0gMgdba1vw8Eon6vIbUFWzFodOduDrHXtRQyXZRMAbmYB3FLCUIoucP5Vqnqc/1%2bSntkBu51Gx6Yr7x6WLlyyKMtAckFGmzAEyCeYSUyQfkhEDl6B9HQ0T80MSMHz0TJJxAsptmTiwtYj6/G60fLkCG8kEt9Hip6WuCaYZYTBMDkRTgQWNtYlCgPeoL4iEye/FgCE%2bQoT74PF0zaeklBDYYzPhjChASWQRzu06jKsHf0RxeC4OrNuGvW37sLXte6zNrsbS6AyFgEQmgMyPsl%2bfQgs1/irkWgARGWr9sxJ4n/Fw5pmI6DgjFkWrBAgJ6iTI5RDvyrxVVk/BYUnwGOaL/%2bj3GWbPDEFVZh6WlifjwJYarKqswLrqQhzZ2YqbF/ZjeZkO6xcn4PbJpTi7%2b0skRpjhNWo2/d5PAT1EBa%2bGu8dEjBw%2bDcWOGmxpakO9pR6FYTm4uPswTrcdQMY8Ow6v34m/PO7DsY3bqbwsivwpGhKUEmhKKkRVejGBVGYXBqwAz1eHoHwhgLdsfKwALoOI6FS4mZkArvn/QwBv2TTCIgzwGjlDXvzjwRPhO3kuanMKYEmORtt6A9Y0pqBthQ2HV5fiq0Ibmq0WbM4rwv6KZdhXSgMOdRDvkbPgOWIWBnv7ERHT4TGc/OCTL%2bBB8cmoOTCmUbk0bcO6747iRMc17N9xBJcPn8ato6dRtJAGIl0xbtJ4u7t2lYsADfyy5EIs1xfBSWaZwp/ASAUKAU5qd7wkVgngjze05eCSj4hJlRAFmN9TgMUFPjw6DcPHzEJ/Aj/Iy5cImIAxn86knp6LyOBFZGo%2b8BoxHTF%2bC1G90IKq8AyUL7BhcbgNNZF2VC8yoSIiFXFBCfhw0ERSwhx4j54L7zFz4TU6AJ6fzMK4qZEIN1YhTV%2bCWudyFFa1oGnz9zjy81X00GzfvuE7ZC7IRFkUyT2e/CfaRi3QITX/pb4QzXonlqc4YdbTqjYtx0UAAxfpmwpdZsjBGHnVm6DnNY6ZFGAvfYeAPOkGvAaIjDVh9LgAuHtSzRJ4VkA/ImDIsCkotdGCKTwG/9l/HMaMmknjpxUlofGoDE8i0HoiIBk1i1KQERBB9WqEMzIdfxg4Hh6kAO8x8zB0lL%2bQ4DF8Jj7zpVkgsxE/HDqFp9duoOvkWWxZvwNFFWtR3rQFh85ewcGjHSilTFcuMKA2mtofy56y3kytsTm5CLl66v0JRnF7Tfba4JOiyl8Z75VvgjwIJafmyL7iAeqSOJkOMCvR8WZ8OnE%2bZX4KBg%2bbhkHeHH6y9aC/HckGpETG4yOPSfh05DRUhungN2oqJpIiKkLj6O8k2KnPDyKHD/xsBprpxWZPDRUVDB0520WCBP09O8yKJet24dSlm%2bi5fRevbtzCw46LaN%2byF7nFy7F47U7UrNgGZ7hRFNBMGW8mAlj69ngq2WQrmVq6fA9gd9cyzuMwE8BqYMBMQrysdjNI/mmyJhAP0L758QX8%2bdhvVjTVrD/JlKRKL8svzPtDRsyWuk2JpKmOhpuPPKcgasYiVBHg8aP84D9lHgzTgmCbHY6qmEQ4aMCZPGYGqul8sj8pZuAEIZDvpRHgOeILInk6hn8ehDhTBTaRD1zqpJVh5028unYd98%2beRz6REOlogpXG36U0Byw3FAv4LJ0DEbGpSCTgkVTPTADXNQ9ACuBcGfJcgKkFLozQSwcIW5REiTbCLZFqh52Rvwsyc8FUt15jAuE9dj6GfRokWy/JWIC8sAfVrZ9vIGZMJYV4T0fwlBBkBYQjc6EeS/R2%2bAylljZsAsLH%2b%2bF4fSPW5ZTCQNfO/NwfH5KJDhw6RWqfSWVC5Z5kil6j/TFmWiIWJDlRsvRr7Dvegc7OLjztvIH9W/ciLL0WJkMZmqj3s/wzkzMRFa/09USaUXhm4eGH55hU9bMXT3vc6znTvJXhhxZArBIevsQDWO6RMenS7/2DdAQ4UABr4L3HKAR4qbIdMnIOBn8yG4OGfYFBVMNjyQNssxagJsqIkjByVh9/zPt0KqJ85tKkZkMLqao0NAHjRvjhY/KTAZ4%2bknFNAXw/JmDkhBCM809FUf0GAv8zctkMN7bj6q1utH69B6EGWpVGUf%2bnWcGW5EBSuvL/BW2B89b93/Z9VkF0vEkAszJ4n6c/VsACUoB8EOGvwiyROfNipVUpmQ9WpM8ESAQq5aCG8vJz5HovChNJviLMQOaXhuoIE0oX6NEYY0XZghQCn4KkmeFioP2JgP6e3P9JBZR9r9Hz5B58P/YXLxqYZgYmoHBxE6qaNmB6iBHZlWthdq5AjKUWXxY1YHFeFVJtRfJtgCc8nvq4dI3alus%2bPU/qPkV1/UgafJgAHoBYATwDuAjggWfO/FgZVFjewz8LxlBqUYoCAl0loKmBX1YjwYvKYiDX7/CpMM6JgDMoDmXUDbLofsYvwlAcHI%2bCoHgMoVH4YzLM/hQDqATcaTuIVTBSuReXhGKwUzHJdz4MtA7R5y3DpLkGzAwzIyKtAlZnE3YfO43DHVewYdteqe907QOniRXwlgAGzQbIps6jcAKtITjrETT5hVMpMBkLxAOIgLn0gl4jZ0q78ySD8xrzVgEK8EBXWTAx3mODxA/kxSWLAVTbkzDMyweO2Qug9wvAII9x%2bNh9DFJ8/ZEXFINhRNCHA8fJPMGdZaCXn5QBx0DqLv1pIvxo0ASM91uA%2bnXforX9BALiCvH5zDhMD89GUUMrAkKTMJ98Jo5MOstZJ%2b2OwRrUtqf1fd7XExE8CCVRCWgdgL1hIcmfx99F0UxAsmKCHjSGMvgBQ33F4Tnz0qffAe4lPqAQI5nXTJHAs5G5E6hPKHuZc%2bMIcBy8vSZi2NBJsM6OREFIEkbRJNmfQHOmxQDpvvxblj%2brgYlxp3VBYBwtyIrWYJHBSdfMphXjGIyflYj6De3IdNbCb3qQuDcvzN6VP3cxaXdq/Su9XwHOBPBXL54BeMDjbsA%2bwATwSOzGD%2beMcH0OJlNTDDBY6nMoT22UcQbPLz2EwDNBck66QoDImH83kBY1%2bSF6lJMXeHv7YhhF9aI0OAJ1dP9pYnaiGLWMhkqLnS/Esyp4TTCUPGD05IU0Ok/DH0hBf%2bg3Bp5EXu3abdi87zhNb3ZydpO8OK9YlbrPly3LnsuAl%2b0Mlqc9Psb7TAAPP8rnv0wiMVm6AHuDG7%2bAOxsTK0AImE9AA97JeICqBPVvzjqBYQAiYSaPstiPtrovImAPiCJAvAT2JUVEIcQnkM5NJ6XMUn43in9PClOVxr4j5siTJt9n0DhaM/iKafajttnfYzxiU3OxYc9x5JQ1ypo%2bQnq%2bTQByhlnuWv1L1i1OmWrly4/8OyxbCGAvYMK48zEBshbQapKlyJn0Vs1PiFBflLcew7%2bQ82xWXLf9VOny1p1e9gMPH/hPmIeEaQvEE/rRkBTvF4L5kwLJKGcorY%2bHKTY%2bUUGASm6QKEBUQInQtv1IEbz4%2bnzSXERzH6eXjqLgcZdXcfxdkDPIZsfZ1kogOTVXCOCBjkEzETr50p0vBLA/8JZHfvkewA9zF3eeKs7MPsBSFbD0t/ZyfF7J1BRVMVNd0mUD8yZ3t86JoYVRKI3Iyvn46WEomB%2bPKWPnYBDNDlwuniPmuAjQDJWf9R4BQu4UIddr5HQEhibKpMf/y2PwbF7cvdjR2dwYpKz61Blf6p5Ai/xpy2aoAdfLOMwfgXJohM6A22DKjqc64vL%2bAK%2bp8iLuqiy5NBiMBlqpWV85rxDniw/I4YdRq8udG4uE6QvhPpQV4oO4qSGwzgqnBRO1OZI6q0gDPVQts/dUwM9US1IjgO/DC7FJU4NJ/mbJOptgJK/nydCYCAaWTvWfJONvvgBPJI8wqPXPx7glMmC%2bJirOJGUQQQOgm2ZGXtTnuR657pgExRsmqwpQjFJAS8eY6lIGX%2b9O8QHJ3n/cHIROnIt%2b7AE0JvuPD8CEUUTq8FnSLYaowJlwxV/muogYxOTzMz18XM91EcHPoGOjaZyeFxwnZcDZ5w82UdTfwyMNSrtTTU%2bvrml4Gozj/3DJRxCT/IaJC6QFG3sAh5vUNwHnl2AVaA/m0EArbeptD9fqX7l2slz7Ia38hpCUR9BMP5B8QjoDlZDnSHV8Vg3WlXmeI%2bi4ZrT8Hm8NeariLe94Am8/pCX16HH%2bkr1wme3NLlC8hI9nk%2bOPoCRx/q7B14UsTJQJkAefkIU6mQSDFsTLlo%2b5Ka0uUEjgLGjANOal/tWyeFv/Sllo55kEfuEBRA4bHmeawTGhLoK591PGFbIDXW2Qj4kiPgsRkt41V36OUgaT1Oco58aO90doeBK1NLsMNcoHHAdi5fO%2bRUAvjNSLy/N1TFBwWIJknK9nBfCqMJQIcdP6M7s9v9zH/PVWJcAFjsuCZf9Ofb5rhPylSBumtMxKRxmrAOX7K9s5igeMnvseKUNlrpgrv1HIVruL%2bmxRIP39Eb%2bbkDIZ08lwU2gYSqC%2bLoMQ1TkbHquCQfOYy5Nf8IIEIYCzH0agOevzQ2JFOXydm6dKAA85bIL9Ndb5we/4AJuRlmV3yZDPe56gtK5JLjBDOLMyJNF4LaD5u0KArCf4uEaEnB%2bjEqGSwEDdh7wtPS4pLr1PfUIxclwwvZcfZs/XyQDEbY/Njo1Q2h7Vf3BYomSaBx7OdCSZJYNmBbAygmi9wudYCaoJaiUw3cW8llkGqmXeXev7nH3OlEqKu6oUvm6Q2lWGk6Q/%2bTwIYyeFYrxvOKbOisb0AJ1MmvwsJmTIKH%2bXHzBwPsYJYZIHU/nwvWR2oOOfTw5F8MJUIiCIymwm5oUaxOiYAO4A7Paa%2bXFJsAKYiBAKzjaXAG%2b5/ucFx6gK0OF/AQETv59LwN48AAAAAElFTkSuQmCC' /%3e%3c/svg%3e\" width=\"573\" alt=\"Desk Drawer Open\" data-srcset=\"/assets/static/desk-drawer-open.794a8e9.4007a5bdcc1220971e8d179d461b5b88.png 573w\" data-sizes=\"(max-width: 573px) 100vw, 573px\" data-src=\"/assets/static/desk-drawer-open.794a8e9.4007a5bdcc1220971e8d179d461b5b88.png\"><noscript><img class=\"g-image g-image--lazy g-image--loaded\" src=\"/assets/static/desk-drawer-open.794a8e9.4007a5bdcc1220971e8d179d461b5b88.png\" width=\"573\" alt=\"Desk Drawer Open\"></noscript></p>\n<h2 id=\"multiple-interactiveactors\"><a href=\"#multiple-interactiveactors\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a><strong>Multiple InteractiveActors</strong></h2>\n<p>This current setup works great if you just have a specialized InteractiveActor but what if you want more? Like if you want an interactive desk and a dresser and a control panel? This can be solved by script or Blueprints and we'll go over how to do that next.</p>\n<p>If you want to keep a pure C++ solution then we can achieve multiple InteractiveActors by making InteractiveActor generic like so:</p>\n<ul>\n<li>Remove the Desk and DeskDrawer meshes from the header and cpp file as they are unique to each InteractiveActor.</li>\n<li>Changing the definition of the <code>Interact</code> method to be virtual.</li>\n<li>Removing most of the functionality of the <code>Interact</code> method.</li>\n</ul>\n<p><strong>InteractiveActor.h</strong></p>\n<p>Removing the following lines:</p>\n<pre class=\"language-cpp\"><code class=\"language-cpp\"><span class=\"token comment\">// A non-interactive desk.</span>\n<span class=\"token function\">UPROPERTY</span><span class=\"token punctuation\">(</span>VisibleAnywhere<span class=\"token punctuation\">,</span> BlueprintReadWrite<span class=\"token punctuation\">)</span>\nUStaticMeshComponent<span class=\"token operator\">*</span> Desk<span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// An interactive drawer in the desk that the PlayerCharacter can interact with.</span>\n<span class=\"token function\">UPROPERTY</span><span class=\"token punctuation\">(</span>VisibleAnywhere<span class=\"token punctuation\">,</span> BlueprintReadWrite<span class=\"token punctuation\">)</span>\nUStaticMeshComponent<span class=\"token operator\">*</span> DeskDrawer<span class=\"token punctuation\">;</span></code></pre>\n<p>Change the following lines:</p>\n<pre class=\"language-cpp\"><code class=\"language-cpp\"><span class=\"token comment\">// Change this:</span>\n<span class=\"token function\">UFUNCTION</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">void</span> <span class=\"token function\">Interact</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// To this:</span>\n<span class=\"token function\">UFUNCTION</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">virtual</span> <span class=\"token keyword\">void</span> <span class=\"token function\">Interact</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre>\n<p><strong>InteractiveActor.cpp</strong></p>\n<p>Remove anything about Desk and DeskDrawer from the constructor:</p>\n<pre class=\"language-cpp\"><code class=\"language-cpp\">AInteractiveActor<span class=\"token operator\">::</span><span class=\"token function\">AInteractiveActor</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n \t<span class=\"token comment\">// Set this actor to call Tick() every frame. You can turn this off to improve performance if you don't need it.</span>\n\tPrimaryActorTick<span class=\"token punctuation\">.</span>bCanEverTick <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">// Create the Root and set it as the RootComponent.</span>\n\tRoot <span class=\"token operator\">=</span> CreateDefaultSubobject<span class=\"token operator\">&lt;</span>USceneComponent<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token function\">TEXT</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Root\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token function\">SetRootComponent</span><span class=\"token punctuation\">(</span>Root<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">// Create the BoxComponent and set it to be a collision trigger and then</span>\n\t<span class=\"token comment\">// attach it to the RootComponent.</span>\n\tBoxCollider <span class=\"token operator\">=</span> CreateDefaultSubobject<span class=\"token operator\">&lt;</span>UBoxComponent<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token function\">TEXT</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"BoxCollider\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\tBoxCollider<span class=\"token operator\">-></span><span class=\"token function\">SetGenerateOverlapEvents</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\tBoxCollider<span class=\"token operator\">-></span><span class=\"token function\">SetCollisionProfileName</span><span class=\"token punctuation\">(</span><span class=\"token function\">TEXT</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Trigger\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\tBoxCollider<span class=\"token operator\">-></span><span class=\"token function\">SetRelativeLocation</span><span class=\"token punctuation\">(</span><span class=\"token function\">FVector</span><span class=\"token punctuation\">(</span><span class=\"token number\">0.f</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0.f</span><span class=\"token punctuation\">,</span> <span class=\"token number\">20.f</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\tBoxCollider<span class=\"token operator\">-></span><span class=\"token function\">SetBoxExtent</span><span class=\"token punctuation\">(</span><span class=\"token function\">FVector</span><span class=\"token punctuation\">(</span><span class=\"token number\">150.f</span><span class=\"token punctuation\">,</span> <span class=\"token number\">100.f</span><span class=\"token punctuation\">,</span> <span class=\"token number\">80.f</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\tBoxCollider<span class=\"token operator\">-></span><span class=\"token function\">SetupAttachment</span><span class=\"token punctuation\">(</span>Root<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">// Create the TextRenderComponent and add a generic \"Press E to Interact\"</span>\n\t<span class=\"token comment\">// message and set it to be invisible so the PlayerCharacter can't see it</span>\n\t<span class=\"token comment\">// and lastly attach it to the RootComponent.</span>\n\tNoticeText <span class=\"token operator\">=</span> CreateDefaultSubobject<span class=\"token operator\">&lt;</span>UTextRenderComponent<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token function\">TEXT</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"NoticeText\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\tNoticeText<span class=\"token operator\">-></span><span class=\"token function\">SetRelativeLocation</span><span class=\"token punctuation\">(</span><span class=\"token function\">FVector</span><span class=\"token punctuation\">(</span><span class=\"token number\">0.f</span><span class=\"token punctuation\">,</span> <span class=\"token number\">90.f</span><span class=\"token punctuation\">,</span> <span class=\"token number\">80.f</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\tNoticeText<span class=\"token operator\">-></span><span class=\"token function\">SetText</span><span class=\"token punctuation\">(</span>FText<span class=\"token operator\">::</span><span class=\"token function\">FromString</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Press E to Interact\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\tNoticeText<span class=\"token operator\">-></span><span class=\"token function\">SetTextRenderColor</span><span class=\"token punctuation\">(</span>FColor<span class=\"token operator\">::</span>Blue<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\tNoticeText<span class=\"token operator\">-></span><span class=\"token function\">SetVisibility</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\tNoticeText<span class=\"token operator\">-></span><span class=\"token function\">SetupAttachment</span><span class=\"token punctuation\">(</span>Root<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre>\n<p>Remove any items added to the array in <code>BeginPlay</code>:</p>\n<pre class=\"language-cpp\"><code class=\"language-cpp\"><span class=\"token comment\">// Remove any items being added to the array in `BeginPlay` so it looks like this.</span>\n<span class=\"token keyword\">void</span> AInteractiveActor<span class=\"token operator\">::</span><span class=\"token function\">BeginPlay</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n\tSuper<span class=\"token operator\">::</span><span class=\"token function\">BeginPlay</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\n\t<span class=\"token comment\">// Set the methods that are used to respond to when the player enters or</span>\n\t<span class=\"token comment\">// leaves the BoxCollider's trigger area.</span>\n\tBoxCollider<span class=\"token operator\">-></span>OnComponentBeginOverlap<span class=\"token punctuation\">.</span><span class=\"token function\">AddDynamic</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span> <span class=\"token operator\">&amp;</span>AInteractiveActor<span class=\"token operator\">::</span>OnComponentEnterInteractionArea<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\tBoxCollider<span class=\"token operator\">-></span>OnComponentEndOverlap<span class=\"token punctuation\">.</span><span class=\"token function\">AddDynamic</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span> <span class=\"token operator\">&amp;</span>AInteractiveActor<span class=\"token operator\">::</span>OnComponentLeaveInteractionArea<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre>\n<p>Remove everything in <code>Interact</code>:</p>\n<pre class=\"language-cpp\"><code class=\"language-cpp\"><span class=\"token comment\">// Modify this method to remove everything.</span>\n<span class=\"token keyword\">void</span> AInteractiveActor<span class=\"token operator\">::</span><span class=\"token function\">Interact</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n<span class=\"token punctuation\">}</span></code></pre>\n<p>By making the <code>Interact</code> method virtual we can override it in the next script we create.</p>\n<p>Now go back to Unreal and right click the <code>InteractiveActor</code> script and choose \"Create C++ Class Derived from InteractiveActor\" and name it \"InteractiveActor_Desk\".</p>\n<p>In the header file for this we're going to add the Desk and DeskDrawer mesh definitions and also the <code>BeginPlay</code> and <code>Interact</code> overrides so we can add the Drawer to the <code>InteractiveObjects</code> array and then respond to what happens when it's interacted with.</p>\n<p><strong>InteractiveActor_Desk.h</strong></p>\n<pre class=\"language-cpp\"><code class=\"language-cpp\"><span class=\"token macro property\">#<span class=\"token directive keyword\">pragma</span> once</span>\n\n<span class=\"token macro property\">#<span class=\"token directive keyword\">include</span> <span class=\"token string\">\"CoreMinimal.h\"</span></span>\n<span class=\"token macro property\">#<span class=\"token directive keyword\">include</span> <span class=\"token string\">\"InteractiveActor.h\"</span></span>\n<span class=\"token macro property\">#<span class=\"token directive keyword\">include</span> <span class=\"token string\">\"InteractiveActor_Desk.generated.h\"</span></span>\n\n<span class=\"token comment\">/**\n * Creates an interactive desk with a drawer.\n */</span>\n<span class=\"token function\">UCLASS</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">INTERACTIVEOBJECTS_API</span> AInteractiveActor_Desk <span class=\"token operator\">:</span> <span class=\"token keyword\">public</span> AInteractiveActor\n<span class=\"token punctuation\">{</span>\n\t<span class=\"token function\">GENERATED_BODY</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\t\n<span class=\"token keyword\">public</span><span class=\"token operator\">:</span>\n\t<span class=\"token comment\">// Sets up the default values.</span>\n\t<span class=\"token function\">AInteractiveActor_Desk</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">// A non-interactive desk.</span>\n\t<span class=\"token function\">UPROPERTY</span><span class=\"token punctuation\">(</span>VisibleAnywhere<span class=\"token punctuation\">,</span> BlueprintReadWrite<span class=\"token punctuation\">)</span>\n\tUStaticMeshComponent<span class=\"token operator\">*</span> Desk<span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">// An interactive drawer in the desk that the PlayerCharacter can interact with.</span>\n\t<span class=\"token function\">UPROPERTY</span><span class=\"token punctuation\">(</span>VisibleAnywhere<span class=\"token punctuation\">,</span> BlueprintReadWrite<span class=\"token punctuation\">)</span>\n\tUStaticMeshComponent<span class=\"token operator\">*</span> DeskDrawer<span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">protected</span><span class=\"token operator\">:</span>\n\t<span class=\"token comment\">// Called when the game starts or when spawned.</span>\n\t<span class=\"token keyword\">virtual</span> <span class=\"token keyword\">void</span> <span class=\"token function\">BeginPlay</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> override<span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">public</span><span class=\"token operator\">:</span>\n\t<span class=\"token comment\">// Called when the PlayerCharacter interacts with an object in this Actor.</span>\n\t<span class=\"token keyword\">virtual</span> <span class=\"token keyword\">void</span> <span class=\"token function\">Interact</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> override<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre>\n<p>The above should look familiar as it's mostly what we had in the <code>InteractiveActor</code> base script and this is just specialized for the desk.</p>\n<p><strong>InteractiveActor_Desk.cpp</strong></p>\n<pre class=\"language-cpp\"><code class=\"language-cpp\"><span class=\"token macro property\">#<span class=\"token directive keyword\">include</span> <span class=\"token string\">\"InteractiveActor_Desk.h\"</span></span>\n\n<span class=\"token comment\">/**\n * Sets default values.\n */</span>\nAInteractiveActor_Desk<span class=\"token operator\">::</span><span class=\"token function\">AInteractiveActor_Desk</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n\t<span class=\"token comment\">// Load the meshes used for the Desk and Drawer.</span>\n\t<span class=\"token keyword\">static</span> ConstructorHelpers<span class=\"token operator\">::</span>FObjectFinder<span class=\"token operator\">&lt;</span>UStaticMesh<span class=\"token operator\">></span><span class=\"token function\">DeskMeshAsset</span><span class=\"token punctuation\">(</span><span class=\"token function\">TEXT</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"StaticMesh'/Game/Models/Furniture/Desk/desk_desk.desk_desk'\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">static</span> ConstructorHelpers<span class=\"token operator\">::</span>FObjectFinder<span class=\"token operator\">&lt;</span>UStaticMesh<span class=\"token operator\">></span><span class=\"token function\">DeskDrawerMeshAsset</span><span class=\"token punctuation\">(</span><span class=\"token function\">TEXT</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"StaticMesh'/Game/Models/Furniture/Desk/desk_drawer.desk_drawer'\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">// Create the component for the Desk, set its mesh and position and then</span>\n\t<span class=\"token comment\">// attach it to the Root.</span>\n\tDesk <span class=\"token operator\">=</span> CreateDefaultSubobject<span class=\"token operator\">&lt;</span>UStaticMeshComponent<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token function\">TEXT</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Desk\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\tDesk<span class=\"token operator\">-></span><span class=\"token function\">SetRelativeLocation</span><span class=\"token punctuation\">(</span><span class=\"token function\">FVector</span><span class=\"token punctuation\">(</span><span class=\"token number\">0.f</span><span class=\"token punctuation\">,</span> <span class=\"token number\">110.f</span><span class=\"token punctuation\">,</span> <span class=\"token operator\">-</span><span class=\"token number\">40.f</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\tDesk<span class=\"token operator\">-></span><span class=\"token function\">SetRelativeRotation</span><span class=\"token punctuation\">(</span><span class=\"token function\">FRotator</span><span class=\"token punctuation\">(</span><span class=\"token number\">0.f</span><span class=\"token punctuation\">,</span> <span class=\"token number\">90.f</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0.f</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\tDesk<span class=\"token operator\">-></span><span class=\"token function\">SetRelativeScale3D</span><span class=\"token punctuation\">(</span><span class=\"token function\">FVector</span><span class=\"token punctuation\">(</span><span class=\"token number\">2.f</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2.f</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2.f</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\tDesk<span class=\"token operator\">-></span><span class=\"token function\">SetStaticMesh</span><span class=\"token punctuation\">(</span>DeskMeshAsset<span class=\"token punctuation\">.</span>Object<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\tDesk<span class=\"token operator\">-></span><span class=\"token function\">SetupAttachment</span><span class=\"token punctuation\">(</span>Root<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">// Create the component for the Drawer, set its mesh and position and</span>\n\t<span class=\"token comment\">// attach it to the Desk.</span>\n\tDeskDrawer <span class=\"token operator\">=</span> CreateDefaultSubobject<span class=\"token operator\">&lt;</span>UStaticMeshComponent<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token function\">TEXT</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"DeskDrawer\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\tDeskDrawer<span class=\"token operator\">-></span><span class=\"token function\">SetStaticMesh</span><span class=\"token punctuation\">(</span>DeskDrawerMeshAsset<span class=\"token punctuation\">.</span>Object<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\tDeskDrawer<span class=\"token operator\">-></span><span class=\"token function\">SetupAttachment</span><span class=\"token punctuation\">(</span>Desk<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">/**\n * Called when the game starts or when spawned.\n */</span>\n<span class=\"token keyword\">void</span> AInteractiveActor_Desk<span class=\"token operator\">::</span><span class=\"token function\">BeginPlay</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n\tSuper<span class=\"token operator\">::</span><span class=\"token function\">BeginPlay</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">// Add the DeskDrawer to the `InteractiveObjects` array.</span>\n\tInteractiveObjects<span class=\"token punctuation\">.</span><span class=\"token function\">Add</span><span class=\"token punctuation\">(</span>DeskDrawer<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">/**\n * When this Actor is interacted with we check to see what object it is and\n * perform the interaction for that object.\n */</span>\n<span class=\"token keyword\">void</span> AInteractiveActor_Desk<span class=\"token operator\">::</span><span class=\"token function\">Interact</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n\tSuper<span class=\"token operator\">::</span><span class=\"token function\">Interact</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>ObjectCurrentlyBeingLookedAt <span class=\"token operator\">==</span> <span class=\"token keyword\">nullptr</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">// Otherwise if you have multiple interactive objects you can check their name</span>\n\t<span class=\"token comment\">// and perform a different action for each one.</span>\n\tFString InteractiveComponentName <span class=\"token operator\">=</span> ObjectCurrentlyBeingLookedAt<span class=\"token operator\">-></span><span class=\"token function\">GetName</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>InteractiveComponentName <span class=\"token operator\">==</span> <span class=\"token function\">FString</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"DeskDrawer\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n\t<span class=\"token punctuation\">{</span>\n\t\t<span class=\"token comment\">// If the PlayerCharacter is interacting with the desk drawer then we want to</span>\n\t\t<span class=\"token comment\">// move the desk drawer to that it looks like it was opened.</span>\n\t\tFVector CurrentLocation <span class=\"token operator\">=</span> ObjectCurrentlyBeingLookedAt<span class=\"token operator\">-></span><span class=\"token function\">GetRelativeLocation</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\tObjectCurrentlyBeingLookedAt<span class=\"token operator\">-></span><span class=\"token function\">SetRelativeLocation</span><span class=\"token punctuation\">(</span><span class=\"token function\">FVector</span><span class=\"token punctuation\">(</span>CurrentLocation<span class=\"token punctuation\">.</span>X<span class=\"token punctuation\">,</span> <span class=\"token operator\">-</span><span class=\"token number\">20.0f</span><span class=\"token punctuation\">,</span> CurrentLocation<span class=\"token punctuation\">.</span>Z<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre>\n<p>This should also look familiar, we just moved the Desk and Drawer mesh stuff from <code>InteractiveActor</code> to here. In the <code>BeginPlay</code> we we add the DeskDrawer to the <code>InteractiveObjects</code> array like we did in the other script. The contents of <code>Interact</code> are also the same as before but moved here.</p>\n<p>If you compile and drag out an instance of this script onto the scene and hit play it'll behave the same as before but now you can create as many InteractiveActors as you wish and they can all behave differently.</p>\n<p>You can also override the <code>OnComponentLookedAt</code> and <code>OnComponentLookedAwayFrom</code> if you would like to have different behaviors for those.</p>\n<p>You can also choose to create Blueprints off the base class or even add delegates to know when the PlayerCharacter is looking at or away from the interactive items.</p>\n<h2 id=\"conclusion\"><a href=\"#conclusion\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a><strong>Conclusion</strong></h2>\n<p>Now that you have a working interactive object sample try to expand on it maybe by adding delegates or creating Blueprints based off of the InteractiveActor script. Don't forget to check out the <a href=\"https://github.com/robertcorponoi/unreal-cpp-an-in-depth-guide-to-creating-interactive-actors\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">repo</a> at any point if you get lost or need to see a working example at any time.</p>\n"}},{"node":{"title":"Unreal C++ Creating a Patrol AI With Hearing Sense","path":"/unreal-c-creating-a-patrol-ai-with-hearing-sense/","date":"6. August 2020","timeToRead":22,"description":"Learn how to create a patrol AI that responds to sound","cover_image":{"type":"image","mimeType":"image/png","src":"/assets/static/testing.07cc2b7.7a3f36bec56885f4d37e9a6597d6a813.png","size":{"width":860,"height":380},"sizes":"(max-width: 860px) 100vw, 860px","srcset":["/assets/static/testing.a67b0b2.7a3f36bec56885f4d37e9a6597d6a813.png 480w","/assets/static/testing.07cc2b7.7a3f36bec56885f4d37e9a6597d6a813.png 860w"],"dataUri":"data:image/svg+xml,%3csvg fill='none' viewBox='0 0 860 380' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-5ae1a365ddc8207087ee4aae6c7c5d2f'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='10'/%3e%3c/filter%3e%3c/defs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-5ae1a365ddc8207087ee4aae6c7c5d2f)' width='860' height='380' xlink:href='data:image/png%3bbase64%2ciVBORw0KGgoAAAANSUhEUgAAAEAAAAAcCAYAAADRJblSAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAU/UlEQVRYw01Y91dUWbr173gza82sng4GJBZUjlQBRSgoMihBBHNAMKGioiICIkFEW1BBEUVAGwmmabTVtpPabQJEcs6gbU/PTPe8/fa5Zb/3fvjWuXXvperu/e29z3dZ8O3Tp2j75iEePX2MZ6/b8bj9GX7seIUXXZ3ofNODrq4%2bvO7qR9ebIbx%2bM4w3PaM8P4b2rjG8fC3WCXR2T%2bJN/zT6hmbROzSHju4JPH7Wg5u3H6Li3BUcOFyEnXsOY/uuQ9h/MA8lJ04jJ78EXz34AeMTbzE4NIXhkWmMjE5jdHRGWsXnoeFpXpvGwJDjeHTU8bm3fwp9A1MYGJxC/6BjHRgS5ybR0/%2bh%2bibRzXrD6uzhM/ZM8rkm8bp3Ci86RhAWvR6Llmqx4Muer3Cl7yoae1pwpfcqLvfV4%2b8993BtoAkve9rxurMHT398iZ%2bePcer9k6S0Yv%2b/iE%2b4DgfdApDI6Po6R3B02dduH33e1y41ISC4gpk7M3Fpi27sW7jDmzdmYVdmTnYsfswCcjH8bJyZOcW496DxxgjAQLc0MgMxsZmMD4%2bizFRY4KIGf7OjOP68Ix0T/8gCRgQYEn4oIMcUX3S%2bRn0sLrZjB6S1N0nakIioqtnDK862cTuEbxs7yUBa7HYWY8FHa%2b70UdA/f3D0vr6dS96uvvRyc6/ePUYb7rrMDDQzGuN6B%2b4xQ7cZDWhvaMG33xXi6aWo6isPorC47uwffchbNm%2bH%2bk7srBt1wFsy8gi6IPIyMzGnv15XHOQmZWHE6fO4lBOIR48fIyZmZ8xOTmLqak5TE3OYWLCQcDo2CyGR2cl0EMjsxgYnpVAD42SsNF36KfS%2bgYJtneCDSDI3nE%2b85CkVNGQru5BdPcM8vkH8OLlazx73sHV0cCXr14jNHIVlrgYseBVexd6egZ4Yx/6%2bgYJdJhAuzE42IqhoWaCvc4vusovqMM3357CtcajqKpOR9HxVALKIOCDSGeHhby3ZeRi647D2LU3j8Bzkbo1G1u2ZSNt%2b2GkbjuAtRt3IillE3aQnMNUwP2H32Nu7j0JmMP09Dymp%2bYxMTlPW8xRAYIEqoKE9PWP4fTZS6iovIwbtx/g4TdP0d7ZK4Hr6htG99AYbTGM5y86WR3ofN3DRvZIYH961o4fHj8n6C7pc0/voHSfLTQJTq4mLGjvfMOTA1L3R0bH%2baOUT%2b8oBDH37t9B682DuHBxI/IKEpGVvQ1H8otw%2bEguP29BfmEaKwOlJ1NxtHAN8o%2btZGeTse9AEjL2xBFoNDZstmPtBiti4oKg1ofBVWaCp9IP2zMO4v6Db/l7kyR5lICnMDIySbWNsgEjrFHmzyA6Xnaxs7383hIUFJ3CqYpqnCyvxpnzl3Guug5Pyk7jZUYmnrQ9lMjopGVftXeThF508FiQ8eZNP5s4IBEgVkGSzb4CTm4kQHRddP/HZy8pyR9wqbYcZadSUVi8hj%2bahpzcHHY7F8WlefRuKXLzy5DNh9l/KAWHjoQjNiEJ0cujEGS3wRoYAIvVCoPZh2WGj78ZZj8/WFh6kz%2bBB8JD7gcXmRnWoDi03XvIbk9JmTI4NMKH6yP5w3zQl/j%2b8RncvpSDpuPpaGs9wVxZi%2bLj6/B5xXZWNk5/vhWFZYdwIdqImzpvnD5agqqaOly9eh23brfh/v1HePL0Gbv/FI%2bf/ET5d0iEvKa1nz1v5/Mm0ALMgPIz1QR2Bjl5JQRcxLDKwu692wlyN/bsXYd1GzYjetlGemY1gsNWEuQyBNjiYfLxh9HHAlfPAFYgZIoQeKrs8FKHQq62SyVThrCCeU58DoFKL875w83TzPsDSHYjvT9D9Q2y48K/lPWbPvRSka/aX%2bB6XhHq0/ej7VIdjhTkU2FHcaaqEqcrTmNn%2bRVsOXsVxQWFOLb3MHKOlbFZxVK4HskvJqYKXLrSiL%2b3PcC33z3FM1qhvaOb9YakPENgSAJDUIcFIrBEMu/YRS9vP4BVa1exIrAsIY7ds0Op9eYD%2b8FD4Qc3Lx8e%2b8LVw8xOBrBskGuCpFJobVBobJS5HSqdXTrnpQ7kaiNwgteFQG0Ilb7HhTbwUPjjfHUD5mbfcXubov/p%2bdFJ5s6oZInhiRmczirAWrUVN%2bqbcaToJHOjCCVlZ6nQSoQWN0F59DZyPq9FfhHB51GdRx11tPAEySqlQoupnNMM3Spcqb%2bOtrsPqYqXtN53VOByLBYKMPvEIDAgAf7W5bAFJUGrMcHH4gKTUQkPd8rW0x8KBQGykwqlDV6qQHixi16qAAIMYGcdBEifeU2hDZaIEOeVPFbpQ6HUOQgQCvDk37p4GCUCyiurMTQ2gNYvb%2bBCbS0/V%2bHUmfOoqKjBlcoGlGbnYENQDMqPliM3Kx%2bH846hsOQUykrLELWvAoGZJcgprUDesVM4KhSQfxzZRwqRRzvkFxwnYSUk45RU2zL2oeFakxSCT54%2bpwXiaQEDFixS6bDQpMVikw6LvbVYajVjoc6ERQY9XP2McDNRAb5muPuy%2b5S8jAHmqbASoE0qAVqmdIAX4ETJeN1D7svVTzoW5CgklQRjqZteKvE3p8%2bdR/dgF8ovlSPvXCZqvj6C2q%2bzUFOThMb8fXh4thD3ygvRlkfQG7Io7wKUFJdi7dGLCCmtQxRtYMpvwc7cz3GssAx5hSe5HZ9GARWQRwLyCoQSTkqVujUTjU23OFdM4MefOhAQHM8Q5DbobtPCeZkKTnaSEKXGkmg1FvnJ8VmYDItiFVgSoYFzqAFLIw1YEqORgAkCBDABQqyeXN153sPL9wN4PwcBLC%2bl47pDHTYJvJObDu6878LFBkp/jlvuGHeBcQbiACbmWtDxqAoNB7fiUmYqc2AHLmaux/UDB3BgWxYSU7ZgZUk5Yi62QJ/XDPmOMwg5UIVVa7YhafU2Xk%2bjfddjecIGxCWlYvmKVCQkb%2bE2nUYFVFMBr1FzpR5671A4e3hjgSXQApO/L9xVLKUv3JQWLHYjEe4auHgZ4e7Ozrv5wN3NTzp2ZYILoAKwJzv7R/1hAQFe3CNX/58ihB3ENWEFNy8Llrrr%2bfdWnK26zKGHI2svZ5CBAfT2PeIEV4dbp3JRk5eJCxl7cOPIEVRkr8W5Q2uQGrkWAWEmRDCznFYVQbMmD57RGVDvKIfGL07KGJ05CkpaTecdCbN/AnwCkhBgT4a3XyBS0/dyC71JlZxkiIc5FOAUbIHHevp8TRBXdm2TBc6RRixJVMMpWQcvnaNzci1BSMHmKA920E0iguHo6SOVOBbEuMq8paR387TAncEpgk9GJQgChAKWuGjgxvuqLtRjdmYew0PjGB4YZ/h9jfZnDWgtKcC392%2bgJGMlylIjUHIsGqWFy3GBighNYO5sLYXP/s8RnFsB68qt0GdeQFDyPso6GcGRG%2bFrS4I1JBmBYatZa%2bATFA%2bFSoGVmxJRWHkMRWezYbKGOAgIiwzH2vVbkLRyO2WzCfYw%2bpXeVmmCoTHaoTaxjKESu1pTuMSwluxqTRE8Fy6VxhjBgAsjQDvJCmEoBlMVgVKXXUmSkNoSV71Uny6Rs7ywiMflVRcwPjuGjv6XeD74A7qma9FatQ/1FTvQOd6I0yXrkLXFCa1fLUNDowXntyYicdsmxOZmYE3RAaQcO4TorAPwPlgH24pdnO7WEHgKwS0j6ERHBa6ANSIGK/I8saFChiNfq1HWboAxzAInFw5CcrWREvVjd/2hFEGl9ueDWyTvanVh3BUIkvu4mt3TeodBYwqXyBDbnSgNj0W6Kz6kvEh9jTFcKkGSzjuKpEVLxOktMVSSjaSYoTRGoaAhA9//Wog7k3vROr0ZD39JRsvlWNx%2bEo2279Yib0MKDq%2bOR03xZlytD0VGdCj8YvfBbX0xFu%2bshsuWcmizGmDaWQFL8EpKPg4G31joLBEkIQZGazRnlXg2cRnMKQbsbVXgi7dG1E1ZYIn2wRJnEvBnlSf%2bHOyCj4Ld8XGUBz5ersTHAWqGIMMvyohF8WosXKGBU4SZpBAsOy7AKvUO4GKfV7LbKuFxccxzSl2wo6RtMIRkhEmeNHDL9eAu4uJl4kPFIu%2bLZDz6LQ1336bh/vt03J3fjhtfrsDjoVC0nt6LbyuO4%2bvKQnx/7jj2rd6AFI6v1tXZUGwqwtLtZ%2bG1qxLm47dh3lsFrYXKNJNwX7HaSX4UZOoImCODseGkCeXtWoL3xtU5My6NeUNtU%2bBvn8qxIKVMg6hUSiY0Ft72KPhGaRCb4oKAaBkC45chYuNqhKREIzxZjvgkHQJCbHyVXMdkTeMYvJmJuwny2LVwWrYOMm%2bSo3aEnaOCpa1PbaBSjKESEXJtIP1vhsoUjfwv1uO73/fj7twefPV%2bN%2b5N7MbnBzej6Voazh9eidLNK3BuYzpy4lbi%2bKo9yI3fiMCgFXCLSof7lpPwXF8A2Z4L8IpOg0LPucMoBjM7nGX%2b0IeZkX7OiJohb9z53R%2btvwThi9kgNM774zIJ8LS64U9/ccWCWkqiZtwXmdd1CF3PFxWVF2QyOXR6HUwWO/zoJz//MBjN9I1Fz05aYfTl8GRPhCWAxFlj4RUYBxmDxpOA3cVWKAYlSQ0OW4gQFVOhIELMEa5ybz4sCWhcRwIy0Ta/Ffd%2b3oK2mTRUlG3E5RP7cGljAUfcFE55IShdsRP1u/KREZEMHy13lqR9UGwshHr1IWiza2lhbr0KGxa6WqAJ1RO4BrWjBnz5Hx/ceO%2bHxlk/XJ%2bzonEuGE1v7WiYDoR3pJ80qi8o7XNGaf8SnJl0QtnwQuy65QT/zS74ROaBjz7VcFw08oHNLEqXI7GbSH0muFgFUA%2bWglugUuWYCt0Vjm1Q7AbSKCyNw2JaDJTsIMbgpTIDFIZIHLm6Co/%2bvQdtQgFvqYCft%2bLO1HrU3VyDkvAtuNa0Gk3DYShZtgGHlq%2bGQc8BTGuFftUBqGLSoEvcAXP6cSzx8och2oSMGjMaJv1x979DcPN9KJpmQ9A0L0AH4vo8FTATglu/BWPdCQaghx9VE8yXoRF3nBmV4dyoHOfHlah9p8SV9woUPZch8ZgM8iANPnM2SoHhLucMr/SW5gWZyiqNwp4shZC6ziF10W3HtucvzQdi/ePYk2Qs4RC02E0DOQP2YF0i7v66Ac3TCWidi0XTTBhafw3Gtb4wFCWmIH0nQy/JguywBMR42/FfH3MwczJjceQeOKfkcHqNhyGzErsbonF9NgD3/hOOmz9HoHk2Ai3zrLc8nreTgABcm7Hi9u9W7KrX4SMXvsBxh1KwIQvOjCpxdkyDc2NaVI3pUTVqxPkxE2rnGBi/mnB2SIP0y0qYEtT4xEWNjz/T8e2Pb3NqH5a/xKJCZyM4f8dL0QcyhPzFbiGyQMwPAryoxa5aLHRR8m9DkdcaiW%2bwHDffRuLGfBRJiMCNd3a0jkThwvZ9KKuJQWGbFaUp6ThWkoDVxTIs3%2bEFw3ob3DkVbq4OhankBJrfxePOL3YJeCuBt74V4MPR/NZG8FZ23opb//bH0Qd6fMb5ZaFHMAnw%2bYMALc6O6kkAwY8bqAIjLkyYUD3ujeoxM2qnLfjiH1znDDh8T42QbRyT5V74eJGBcvaB0hAkBZCXhuOwwsehDI1D9kq9YxcQZEhDFNUh7OPkoScZIUjODsaZVzY0Tgej7Tc7vvpPCNoQhFtdyShO2Isrj5bhznwIChJ3oenOBtyGJxWiQsOMAQU/puHmP2zYczcLDRMxJM5K0DZWEItkvA1lMfRmA3Hz1wBUdBjgarHgUzc7FvH13YWDm1wnWcCLBGglAirH2P1xEwkgeNbFSRNqJo24SGIuT%2blx7b2OZKhR%2bkKOhHwPuFg88NfPVJzszNIcIfzpqfGXyBAqkKZHteOtUZwTOSC2waUyo7QbuKgisETLmSLCF7F7/ehhCyo6zWh8noiWjHP44uvVqH9DD%2b88g%2ba7m9H43ogWArr9PpISXyWl%2bZ3369nxBIIWBASygj90P4K2CEfr%2b3DUjgfAO8EGJ0UcXHXRXMNJgK/UFBLgwQyQ0wZaEqChCtQkQU0S1KieVJMENWqmtLgkakKHy5MGXHunR/O/dDg/rEbaRRk0MTJ8tFSFv33Gt0l3AzxoDy%2btgwgxAv%2bRFwK0GLIWu2lpAQaa9zJ4WlLgouGrqWIFFsoj8SltEhQTiYbd%2bbj2IgaNI8G4kpmDlo5E3PynFTfehlDmawh6OWpG1Qy6VJ5bTdA%2brFCH72mppjmSMB%2bO6%2b9sCN1qg7MqGXKfJMiMK%2bCuj6cF/P8gQEUCNB9UoEDluJwkKHB%2bQkkVCAI0VIGGBOgkFdRO61A7ZUAtlXGVtmj5lxENb3XI/lKOgM3cOdw98Ke/emKRs47dNlMRQhWBUlgKayx05qC1xFPKDC8OQ14%2bKyH3TYTevh5K37VwNcVhV2U46kp2oXmMgKZDcPn4TrSMhuLGL4EEHsQiET8H4Oq0kd2NpfzjJLk7Qo/g58Ok7t/6lx1Jef5wUiZB4bsSHsZEgk%2bAuy5O2tFkKn8SMKxBxYggQPfBBmoHAeMqqkD1QQVakuBQwWUBftqAK9N6lglXaJN6erKFgdnyTyNOvlQjPlcJN18t/kJFfLJYyx8zkAShiiAs5fGnS2WOENVHw0WbREkmwsO0lvNEPPZdt%2bKr32PR8mAbbrCLrawbT1LROstwfCcIED4P%2bCD3IFxk88RW1/I2Wuq4AN84E8HhJxRplb5YqlnBzifD3ZAgdd/DwEFKu5zDkmMrX3CaMq4Y0X5QgU7Kgapx3QcVkIAJjcMGEgF6EqCTVCDA17EDdQRfP2NB/bQfBww/NL8PxK3fgylPX2yrMcKw3ISPnA346ydqOHuauAvoOYG5S8Q4c/fwjo9CwqEQHGqOwNkOG39Lhbpx%2bnw%2bgcMLAb8LxYN/rMOtdzEEGfIh4cOkjt/gtfpJO65MiPsiCD6SoReOOwzUQzf94WYiaBNl770Cnt7JcNNR%2bto4EhCHpR7i/5kWLPh8WAVhA0GCQwWCBAMJMH5QAa0wKUjQ/T8rUHqi%2b9Nmgg9gKttYgbjKgLo6E0wibLjOLt36jcMH19x7ZgSl6rFQYYCT3gXWNQuRXqlA2RM/yjgQd/4djC9/Y9d%2bjaZ3Q3BtnNvXZBi/x5cvLt5ongzFrbm4//W41G2S0czvFt2vHvEhWSEsO20SgeM/cEDzDSf4Vex%2bCrvvkL7MtJJrIlzUsXwV9uZbqgn/A7%2bZVphGWaelAAAAAElFTkSuQmCC' /%3e%3c/svg%3e"},"content":"<h2 id=\"overview\"><a href=\"#overview\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a><strong>Overview</strong></h2>\n<p>So as a warning this tutorial is going to be lengthy but in depth. There will be a table of contents after this so if you want to skip the setup or skip to a certain section then you are more than welcome to do so. We will cover setting up a patrolling AI character with waypoints and then we'll get into detecting the player.</p>\n<p>Also make sure to check out the <a href=\"https://github.com/robertcorponoi/unreal-cpp-patrol-ai-with-hearing\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">repo</a> for everything that was talked about in this tutorial plus more.</p>\n<p>Also also note that while all of the scripts will call <code>Tick</code> to make them consistent, we are going to do all this without writing any code in <code>Tick</code> so you can feel free to disable this in some components using <code>PrimaryActorTick.bCanEverTick = false;</code> in whatever script you want to disable it in.</p>\n<p>Last note will be that some of the assets are set up as C++ scripts but later we create Blueprints off of them. These assets (PlayerCharacter, PatrolCharacter, etc) have Blueprints just for the sake of the tutorial (easier to position the mesh, etc) but they can easily be ditched and converted to C++ as the Blueprints are maily used for positioning components and more easily adjusting test variable values.</p>\n<h2 id=\"table-of-contents\"><a href=\"#table-of-contents\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a><strong>Table Of Contents</strong></h2>\n<ul>\n<li><a href=\"#getting-started\">Getting Started</a></li>\n<li><a href=\"#player-character\">Player Character</a></li>\n<li><a href=\"#waypoints\">Waypoints</a></li>\n<li><a href=\"#patrol-character\">Patrol Character</a></li>\n<li><a href=\"#back-to-waypoints\">Back To Waypoints</a></li>\n<li><a href=\"#patrol-ai-controller\">Patrol AI Controller</a></li>\n<li><a href=\"#making-the-player-emit-sound\">Making the Player Emit Sound</a></li>\n<li><a href=\"#testing-the-hearing-sense\">Testing the Hearing Sense</a></li>\n<li><a href=\"#conclusion\">Conclusion</a></li>\n</ul>\n<h2 id=\"getting-started\"><a href=\"#getting-started\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a><strong>Getting Started</strong></h2>\n<p>To get started, let's see what we're going to need:</p>\n<ul>\n<li><strong>Player Character</strong> - The PlayerCharacter is going to be the main player and what the PatrolCharacter is going to interact with. We won't really cover the PlayerCharacter in here because it's just some basic moving and crouching which you can find in other tutorials but if you want to copy what I'm using then you're more than welcome to do so from the <a href=\"https://github.com/robertcorponoi/unreal-cpp-patrol-ai-with-hearing\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">repo</a>.</li>\n<li><strong>Waypoint</strong> - Waypoints are going to be basic Actors that are going to be used as triggers to tell the PatrolCharacter where the patrol zones are.</li>\n<li><strong>Patrol Character</strong> - The PatrolCharacter is going to hold variables for different movement speeds and is going to keep track of the Waypoints it needs to patrol.</li>\n<li><strong>Patrol AI Controller</strong> - This is going to be the PatrolCharacter's AIController and is going to define how the PatrolCharacter responds to the PlayerCharacter through a hearing sense.</li>\n</ul>\n<h2 id=\"player-character\"><a href=\"#player-character\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a><strong>Player Character</strong></h2>\n<p>As we talked about in the <a href=\"#getting-started\">Getting Started</a> section, the PlayerCharacter is really just a basic Character instance with some movement methods defined. Feel free to check out the one used in this tutorial in the <a href=\"https://github.com/robertcorponoi/unreal-cpp-patrol-ai-with-hearing\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">repo</a>.</p>\n<h2 id=\"waypoints\"><a href=\"#waypoints\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a><strong>Waypoints</strong></h2>\n<p>Let's start this off by creating the Waypoints that the PatrolCharacter will patrol between. Before we get into the code, let's see what we need the Waypoints to do:</p>\n<ul>\n<li>We need to give the Waypoint a <code>UBoxComponent</code> so that we can create a trigger for when the PatrolCharacter reaches the Waypoint.</li>\n</ul>\n<p>That's about it for Waypoints. As mentioned before the Waypoints are just for the trigger so go ahead and create a new C++ script with a base parent of <code>Actor</code> and name it <code>Waypoint</code>.</p>\n<p><strong>Waypoint.h</strong></p>\n<pre class=\"language-cpp\"><code class=\"language-cpp\"><span class=\"token macro property\">#<span class=\"token directive keyword\">pragma</span> once</span>\n\n<span class=\"token macro property\">#<span class=\"token directive keyword\">include</span> <span class=\"token string\">\"CoreMinimal.h\"</span></span>\n<span class=\"token macro property\">#<span class=\"token directive keyword\">include</span> <span class=\"token string\">\"GameFramework/Actor.h\"</span></span>\n<span class=\"token macro property\">#<span class=\"token directive keyword\">include</span> <span class=\"token string\">\"Waypoint.generated.h\"</span></span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">APatrolCharacter</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">/**\n * Waypoints define the areas that PatrolCharacters patrol and they also update\n * the next waypoint for the PatrolCharacter to go to once the PatrolCharacter\n * has reached a waypoint.\n */</span>\n<span class=\"token function\">UCLASS</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">PATROLAITUTORIAL_API</span> AWaypoint <span class=\"token operator\">:</span> <span class=\"token keyword\">public</span> AActor\n<span class=\"token punctuation\">{</span>\n\t<span class=\"token function\">GENERATED_BODY</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\t\n<span class=\"token keyword\">public</span><span class=\"token operator\">:</span>\t\n\t<span class=\"token comment\">// Sets default values for this actor's properties.</span>\n\t<span class=\"token function\">AWaypoint</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">// The BoxComponent of this Waypoint which is used as a collision trigger to</span>\n\t<span class=\"token comment\">// know when the PatrolCharacter has entered it.</span>\n\t<span class=\"token function\">UPROPERTY</span><span class=\"token punctuation\">(</span>VisibleAnywhere<span class=\"token punctuation\">,</span> BlueprintReadWrite<span class=\"token punctuation\">)</span>\n\t<span class=\"token keyword\">class</span> <span class=\"token class-name\">UBoxComponent</span><span class=\"token operator\">*</span> BoxComponent<span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">// Called when another component triggers this Waypoints collision and it</span>\n\t<span class=\"token comment\">// lets us handle the PatrolCharacter arriving to this Waypoint.</span>\n\t<span class=\"token function\">UFUNCTION</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\t<span class=\"token keyword\">void</span> <span class=\"token function\">OnWaypointBeginOverlap</span><span class=\"token punctuation\">(</span>UPrimitiveComponent<span class=\"token operator\">*</span> OverlappedComp<span class=\"token punctuation\">,</span> AActor<span class=\"token operator\">*</span> OtherActor<span class=\"token punctuation\">,</span> UPrimitiveComponent<span class=\"token operator\">*</span> OtherComp<span class=\"token punctuation\">,</span> int32 OtherBodyIndex<span class=\"token punctuation\">,</span> <span class=\"token keyword\">bool</span> bFromSweep<span class=\"token punctuation\">,</span> <span class=\"token keyword\">const</span> FHitResult<span class=\"token operator\">&amp;</span> SweepResult<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">protected</span><span class=\"token operator\">:</span>\n\t<span class=\"token comment\">// Called when the game starts or when spawned.</span>\n\t<span class=\"token keyword\">virtual</span> <span class=\"token keyword\">void</span> <span class=\"token function\">BeginPlay</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> override<span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">public</span><span class=\"token operator\">:</span>\t\n\t<span class=\"token comment\">// Called every frame.</span>\n\t<span class=\"token keyword\">virtual</span> <span class=\"token keyword\">void</span> <span class=\"token function\">Tick</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">float</span> DeltaTime<span class=\"token punctuation\">)</span> override<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre>\n<p><strong>Waypoint.cpp</strong></p>\n<pre class=\"language-cpp\"><code class=\"language-cpp\"><span class=\"token macro property\">#<span class=\"token directive keyword\">include</span> <span class=\"token string\">\"Waypoint.h\"</span></span>\n<span class=\"token macro property\">#<span class=\"token directive keyword\">include</span> <span class=\"token string\">\"Components/BoxComponent.h\"</span></span>\n\n<span class=\"token comment\">/**\n * Sets the default values for the Waypoint. In our case it sets up the BoxComponent\n * and sets it to be a collision trigger.\n */</span>\nAWaypoint<span class=\"token operator\">::</span><span class=\"token function\">AWaypoint</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n \t<span class=\"token comment\">// Set this actor to call Tick() every frame.  You can turn this off to improve performance if you don't need it.</span>\n\tPrimaryActorTick<span class=\"token punctuation\">.</span>bCanEverTick <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">// Create the BoxComponent, set it to be a collision trigger, define the method</span>\n\t<span class=\"token comment\">// to call when an actor enters the collision zone, and add it to the RootComponent.</span>\n\tBoxComponent <span class=\"token operator\">=</span> CreateDefaultSubobject<span class=\"token operator\">&lt;</span>UBoxComponent<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token function\">TEXT</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Box Component\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\tBoxComponent<span class=\"token operator\">-></span><span class=\"token function\">SetGenerateOverlapEvents</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\tBoxComponent<span class=\"token operator\">-></span><span class=\"token function\">SetCollisionProfileName</span><span class=\"token punctuation\">(</span><span class=\"token function\">TEXT</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Trigger\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\tBoxComponent<span class=\"token operator\">-></span>OnComponentBeginOverlap<span class=\"token punctuation\">.</span><span class=\"token function\">AddDynamic</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span> <span class=\"token operator\">&amp;</span>AWaypoint<span class=\"token operator\">::</span>OnWaypointBeginOverlap<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\tBoxComponent<span class=\"token operator\">-></span><span class=\"token function\">SetupAttachment</span><span class=\"token punctuation\">(</span>RootComponent<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">/**\n * Called when the game starts or when spawned\n */</span>\n<span class=\"token keyword\">void</span> AWaypoint<span class=\"token operator\">::</span><span class=\"token function\">BeginPlay</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n\tSuper<span class=\"token operator\">::</span><span class=\"token function\">BeginPlay</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">/**\n * Called every frame.\n *\n * @param DeltaTime The time between the previous Tick and the current one.\n */</span>\n<span class=\"token keyword\">void</span> AWaypoint<span class=\"token operator\">::</span><span class=\"token function\">Tick</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">float</span> DeltaTime<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n\tSuper<span class=\"token operator\">::</span><span class=\"token function\">Tick</span><span class=\"token punctuation\">(</span>DeltaTime<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">/**\n * When a component first enters the BoxCollider's collision area we try to\n * cast it to our PatrolCharacter and then set a timer so that the PatrolCharacter\n * can run its looking animation. Lastly we set the PatrolCharacter to move on to\n * the next Waypoint.\n *\n * @param OverlappedComp\n * @param OtherActor\n * @param OtherComp\n * @param OtherBodyIndex\n * @param bFromSweep\n * @param SweepResult\n */</span>\n<span class=\"token keyword\">void</span> AWaypoint<span class=\"token operator\">::</span><span class=\"token function\">OnWaypointBeginOverlap</span><span class=\"token punctuation\">(</span>UPrimitiveComponent<span class=\"token operator\">*</span> OverlappedComp<span class=\"token punctuation\">,</span> AActor<span class=\"token operator\">*</span> OtherActor<span class=\"token punctuation\">,</span> UPrimitiveComponent<span class=\"token operator\">*</span> OtherComp<span class=\"token punctuation\">,</span> int32 OtherBodyIndex<span class=\"token punctuation\">,</span> <span class=\"token keyword\">bool</span> bFromSweep<span class=\"token punctuation\">,</span> <span class=\"token keyword\">const</span> FHitResult<span class=\"token operator\">&amp;</span> SweepResult<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n\t<span class=\"token comment\">// Return if anything is null so we can avoid a potential crash.</span>\n\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>OtherActor <span class=\"token operator\">==</span> <span class=\"token keyword\">nullptr</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">||</span> <span class=\"token punctuation\">(</span>OtherActor <span class=\"token operator\">==</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">||</span> <span class=\"token punctuation\">(</span>OtherComp <span class=\"token operator\">==</span> <span class=\"token keyword\">nullptr</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre>\n<p>As you can see all we did was add a <code>UBoxComponent</code> and make it a trigger and se the <code>OnWaypointBeginOverlap</code> so we can do something when an Actor enters the trigger area. We'll add the functionality for this after we define the PatrolCharacter.</p>\n<p>At this point I created a Blueprint based off of this class so I could adjust the extents of the <code>UBoxComponent</code> and see it visually but you can easily do this in the constructor of the Waypoint if you wish.</p>\n<p><img class=\"g-image g-image--lazy g-image--loading\" src=\"data:image/svg+xml,%3csvg fill='none' viewBox='0 0 467 96' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-fbb71fc93452af0ffcc490a5ed665f89'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='40'/%3e%3c/filter%3e%3c/defs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-fbb71fc93452af0ffcc490a5ed665f89)' width='467' height='96' xlink:href='data:image/png%3bbase64%2ciVBORw0KGgoAAAANSUhEUgAAAEAAAAANCAYAAAAZr2hsAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAD2klEQVRIx71V10qjQRTO49iNRqPRWGJZO1iS2LtmrehDiGD2UhTsCBYEEVdRBMuNotgvrFgfQEXwBb7Nd3Yn/Ptji%2bt68TEzZ87MnPOdMobg4GCEh4cjLCwMISEhCAoKkpFygnLu%2bwqeMxqNHzr7lTDQWYKL7OxsOJ1OJCUlISUlBcnJySLnfmhoqM8ggR8595UwBAQEID4%2bHrW1taiurkZLSwva29vR0dGB1tZWWCwWIYDR9AWKAGaCL%2bBZX/U/eoYwqBIwmUwioLNUes5xX9llOfn7%2b4Mkc1TgWg8lpz3vPePn54fAwEDvOwRlb73DN4zGPxnAhdlsRkxMDKKiomSuRi0oi42NfTd4H0ksLCyEw%2bFAcXGxoKioCHa7HQUFBX%2bBe/n5%2bVJ2SqekpETmvEOvT5SWliIrKwvp6emix/KlTM31%2bg6HU95hiZvNFrFTSoD1npubK0oVFRXIy8vzGsXLFFgq70FiYqIQVl5ejrm5OWxvb2N6ehozMzOyPjg4wMnJCY6Pj3F0dISzszMsLCxgamoKfX19WFxcxM7ODsbGxkSfa%2brqwfsmJiYwNDSE9fV1rK2tYWRkBPPz81hdXZV7eT91T09PsbGxjtnZn%2bjs7EC%2b3eQhIh4GphANTktLE6fr6uqEBM7ZE%2bhETU2NkBEXFycOcnwNCQkJiIyMRGVlJVZWVsQIOkLDlpeXcX5%2bjpubG1xfX8t4dXXlMWwWW1tb4gydJ0GTk5PiPJ25vLz0gmf29/e9jg4MDGBvbw%2bbm5sYHx/H0tKSx9kN0bu4uBDc3t4Kybu7u3C7f%2bBbuhE2m/V3CURHR4vhTFvOmbqcM/U5VzKtk4oIffSVzGq1Ckgg05KklpWVCVRaa0E9ks5srKqqEvIaGhrgcrlQX18vwdCCQWlsbPSmOvUYPJ6hPuf6M5S5XN%2bRmZnp8ccqdhrYQOgco8baYDaoOb9Fjgo8wD2to89lAOW8MycnB93d3YLe3l5JT0Z4eHhY5mpU8tHRUYlmV1eXvM1mrO1LWlDGLOM7hOpVlGn7lv4MwdpXtnsJ4ILNiky2tbVJE2JU%2bBUSzc3NIuc3SR0S8VwGqB4QEREhekxFpirr/unpCXd3d7i/v/fi4eFBRsofHx%2blVA4PD9HU1CTG2mw2eeszobVVCFAlwE0%2bSAe4Zgpzrgd1XusBKgPYofv7%2bwWMLKM8ODgoUHNmBvfVuqenRzKD2cM73tNz/gVCAFNCpb/WSUXGSyS8BUWE%2bhL1oJz9IDU1VVKUa9rCgKhg/G8IAXwsIyNDfoLPBP9n3vsSuO92u6XpsfmxOWn3Ptue5/ALTy5I0ifrnsYAAAAASUVORK5CYII=' /%3e%3c/svg%3e\" width=\"467\" alt=\"Box Extents\" data-srcset=\"/assets/static/box-extents.ada1d13.ee444c8ad32f023134d4e1073fca0c8a.png 467w\" data-sizes=\"(max-width: 467px) 100vw, 467px\" data-src=\"/assets/static/box-extents.ada1d13.ee444c8ad32f023134d4e1073fca0c8a.png\"><noscript><img class=\"g-image g-image--lazy g-image--loaded\" src=\"/assets/static/box-extents.ada1d13.ee444c8ad32f023134d4e1073fca0c8a.png\" width=\"467\" alt=\"Box Extents\"></noscript></p>\n<p>Make sure this compiles and then let's move on to the PatrolCharacter.</p>\n<h2 id=\"patrol-character\"><a href=\"#patrol-character\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a><strong>Patrol Character</strong></h2>\n<p>Now we need to create the PatrolCharacter. It's going to be fairly simple as movement is going to be handled by the AIController but the PatrolCharacter does need to have a mini state machine.</p>\n<p>Again, before we get into the code, let's see what we need the PatrolCharacter to do:</p>\n<ul>\n<li>We need to be able to switch between two states: Patrol and Chase.</li>\n<li>We need to hold a reference to the array of Waypoints that this PatrolCharacter needs to patrol.</li>\n<li>We want some variables that hold some customizable properties like walk speeds, delays, etc.</li>\n</ul>\n<p>Let's create a new C++ script that has a base parent of Character and name it PatrolCharacter.</p>\n<p><strong>PatrolCharacter.h</strong></p>\n<pre class=\"language-cpp\"><code class=\"language-cpp\"><span class=\"token macro property\">#<span class=\"token directive keyword\">pragma</span> once</span>\n\n<span class=\"token macro property\">#<span class=\"token directive keyword\">include</span> <span class=\"token string\">\"CoreMinimal.h\"</span></span>\n<span class=\"token macro property\">#<span class=\"token directive keyword\">include</span> <span class=\"token string\">\"GameFramework/Character.h\"</span></span>\n<span class=\"token macro property\">#<span class=\"token directive keyword\">include</span> <span class=\"token string\">\"PatrolCharacter.generated.h\"</span></span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">AWaypoint</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">/**\n * The modes that the PatrolCharacter can be in. \n * PATROL - The PatrolCharacter is patrolling between Waypoints.\n * CHASE - The PatrolCharacter is chasing the PlayerCharacter.\n */</span>\n<span class=\"token function\">UENUM</span><span class=\"token punctuation\">(</span>BlueprintType<span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">enum</span> <span class=\"token class-name\">class</span> PatrolMode <span class=\"token operator\">:</span> uint8\n<span class=\"token punctuation\">{</span>\n\tPATROL <span class=\"token function\">UMETA</span><span class=\"token punctuation\">(</span>DisplayName <span class=\"token operator\">=</span> <span class=\"token string\">\"PATROL\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n\tCHASE <span class=\"token function\">UMETA</span><span class=\"token punctuation\">(</span>DisplayName <span class=\"token operator\">=</span> <span class=\"token string\">\"CHASE\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">/**\n * A Character that patrols around a set of Waypoints and keeps\n * an eye out for the PlayerCharacter.\n */</span>\n<span class=\"token function\">UCLASS</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">PATROLAITUTORIAL_API</span> APatrolCharacter <span class=\"token operator\">:</span> <span class=\"token keyword\">public</span> ACharacter\n<span class=\"token punctuation\">{</span>\n\t<span class=\"token function\">GENERATED_BODY</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">public</span><span class=\"token operator\">:</span>\n\t<span class=\"token comment\">// Sets default values for this character's properties.</span>\n\t<span class=\"token function\">APatrolCharacter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">// We start the game assuming we can't see the player and so we</span>\n\t<span class=\"token comment\">// are in Patrol mode.</span>\n\t<span class=\"token function\">UPROPERTY</span><span class=\"token punctuation\">(</span>VisibleAnywhere<span class=\"token punctuation\">,</span> BlueprintReadWrite<span class=\"token punctuation\">)</span>\n\tPatrolMode Mode <span class=\"token operator\">=</span> PatrolMode<span class=\"token operator\">::</span>PATROL<span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">// The speed at which the PatrolCharacter walks between Waypoints.</span>\n\t<span class=\"token function\">UPROPERTY</span><span class=\"token punctuation\">(</span>EditAnywhere<span class=\"token punctuation\">,</span> BlueprintReadWrite<span class=\"token punctuation\">)</span>\n\t<span class=\"token keyword\">float</span> PatrolSpeed <span class=\"token operator\">=</span> <span class=\"token number\">100.0f</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">// The speed at which the PatrolCharacter chases the PlayerCharacter.</span>\n\t<span class=\"token function\">UPROPERTY</span><span class=\"token punctuation\">(</span>EditAnywhere<span class=\"token punctuation\">,</span> BlueprintReadWrite<span class=\"token punctuation\">)</span>\n\t<span class=\"token keyword\">float</span> ChaseSpeed <span class=\"token operator\">=</span> <span class=\"token number\">500.0f</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">// The Waypoints that the should be patrolled.</span>\n\t<span class=\"token function\">UPROPERTY</span><span class=\"token punctuation\">(</span>EditAnywhere<span class=\"token punctuation\">,</span> BlueprintReadWrite<span class=\"token punctuation\">)</span>\n\tTArray<span class=\"token operator\">&lt;</span>AWaypoint<span class=\"token operator\">*</span><span class=\"token operator\">></span> Waypoints<span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">// The index of the Waypoint in `Waypoints` to go towards.</span>\n\t<span class=\"token function\">UPROPERTY</span><span class=\"token punctuation\">(</span>VisibleAnywhere<span class=\"token punctuation\">,</span> BlueprintReadWrite<span class=\"token punctuation\">)</span>\n\tint32 CurrentWaypointIndex <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">// The distance away the PatrolCharacter can be from the Waypoint before </span>\n\t<span class=\"token comment\">// it registers the PatrolCharacter as being arrived at the Waypoint.</span>\n\t<span class=\"token function\">UPROPERTY</span><span class=\"token punctuation\">(</span>EditAnywhere<span class=\"token punctuation\">,</span> BlueprintReadWrite<span class=\"token punctuation\">)</span>\n\t<span class=\"token keyword\">float</span> DistanceBeforeArrivedAtWaypoint <span class=\"token operator\">=</span> <span class=\"token number\">5.0f</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">// The amount of time, in seconds, that the PatrolCharacter should wait</span>\n\t<span class=\"token comment\">// at a Waypoint before moving on to the next one.</span>\n\t<span class=\"token function\">UPROPERTY</span><span class=\"token punctuation\">(</span>EditAnywhere<span class=\"token punctuation\">,</span> BlueprintReadWrite<span class=\"token punctuation\">)</span>\n\t<span class=\"token keyword\">float</span> WaypointDelay <span class=\"token operator\">=</span> <span class=\"token number\">5.0f</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">// The distance away the PatrolCharacter can be from the PlayerCharacter</span>\n\t<span class=\"token comment\">// before it stops chasing.</span>\n\t<span class=\"token function\">UPROPERTY</span><span class=\"token punctuation\">(</span>EditAnywhere<span class=\"token punctuation\">,</span> BlueprintReadWrite<span class=\"token punctuation\">)</span>\n\t<span class=\"token keyword\">float</span> DistanceBeforeArrivedAtPlayer <span class=\"token operator\">=</span> <span class=\"token number\">100.0f</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">// Indicates whether this PatrolCharacter is currently at a Waypoint or</span>\n\t<span class=\"token comment\">// not. This is used by the animation Blueprint to decide if the Looking</span>\n\t<span class=\"token comment\">// or Walking animation should be played.</span>\n\t<span class=\"token function\">UPROPERTY</span><span class=\"token punctuation\">(</span>VisibleAnywhere<span class=\"token punctuation\">,</span> BlueprintReadWrite<span class=\"token punctuation\">)</span>\n\t<span class=\"token keyword\">bool</span> bIsAtWaypoint <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">protected</span><span class=\"token operator\">:</span>\n\t<span class=\"token comment\">// Called when the game starts or when spawned.</span>\n\t<span class=\"token keyword\">virtual</span> <span class=\"token keyword\">void</span> <span class=\"token function\">BeginPlay</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> override<span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">public</span><span class=\"token operator\">:</span>\t\n\t<span class=\"token comment\">// Called every frame.</span>\n\t<span class=\"token keyword\">virtual</span> <span class=\"token keyword\">void</span> <span class=\"token function\">Tick</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">float</span> DeltaTime<span class=\"token punctuation\">)</span> override<span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">// Called to bind functionality to input.</span>\n\t<span class=\"token keyword\">virtual</span> <span class=\"token keyword\">void</span> <span class=\"token function\">SetupPlayerInputComponent</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">class</span> <span class=\"token class-name\">UInputComponent</span><span class=\"token operator\">*</span> PlayerInputComponent<span class=\"token punctuation\">)</span> override<span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">// Called to change the PatrolCharacter's settings to patrol mode.</span>\n\t<span class=\"token keyword\">void</span> <span class=\"token function\">SetPatrolMode</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">// Called to change the PatrolCharacter's settings to chase mode.</span>\n\t<span class=\"token keyword\">void</span> <span class=\"token function\">SetChaseMode</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre>\n<p><strong>PatrolCharacter.cpp</strong></p>\n<pre class=\"language-cpp\"><code class=\"language-cpp\"><span class=\"token macro property\">#<span class=\"token directive keyword\">include</span> <span class=\"token string\">\"PatrolCharacter.h\"</span></span>\n<span class=\"token macro property\">#<span class=\"token directive keyword\">include</span> <span class=\"token string\">\"GameFramework/CharacterMovementComponent.h\"</span></span>\n\n<span class=\"token comment\">/**\n * Sets the default values for the PatrolCharacter. In our case we don't do much\n * here except set up rotation and orientation so that the PatrolCharacter faces\n * the direction they're walking.\n */</span>\nAPatrolCharacter<span class=\"token operator\">::</span><span class=\"token function\">APatrolCharacter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n \t<span class=\"token comment\">// Set this character to call Tick() every frame.  You can turn this off to improve performance if you don't need it.</span>\n\tPrimaryActorTick<span class=\"token punctuation\">.</span>bCanEverTick <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">// Helps orient the PatrolCharacter so that when it walks it doesn't face the</span>\n\t<span class=\"token comment\">// Waypoint but instead the direction that it's walking.</span>\n\tbUseControllerRotationPitch <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n\tbUseControllerRotationYaw <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n\tbUseControllerRotationRoll <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token function\">GetCharacterMovement</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-></span>bOrientRotationToMovement <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">// Set the default rotation rate and the max walking speed.</span>\n\t<span class=\"token function\">GetCharacterMovement</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-></span>RotationRate <span class=\"token operator\">=</span> <span class=\"token function\">FRotator</span><span class=\"token punctuation\">(</span><span class=\"token number\">0.0f</span><span class=\"token punctuation\">,</span> <span class=\"token number\">200.0f</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0.0f</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token function\">SetPatrolMode</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">/**\n * Called when the game starts or when spawned\n */</span>\n<span class=\"token keyword\">void</span> APatrolCharacter<span class=\"token operator\">::</span><span class=\"token function\">BeginPlay</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n\tSuper<span class=\"token operator\">::</span><span class=\"token function\">BeginPlay</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">/**\n * Called every frame.\n *\n * @param DeltaTime The time between the previous Tick and the current one.\n */</span>\n<span class=\"token keyword\">void</span> APatrolCharacter<span class=\"token operator\">::</span><span class=\"token function\">Tick</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">float</span> DeltaTime<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n\tSuper<span class=\"token operator\">::</span><span class=\"token function\">Tick</span><span class=\"token punctuation\">(</span>DeltaTime<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">/**\n * Called to bind functionality to input.\n *\n * @param PlayerInputComponent An Actor component that enables us to bind axis events and action inputs to methods.\n */</span>\n<span class=\"token keyword\">void</span> APatrolCharacter<span class=\"token operator\">::</span><span class=\"token function\">SetupPlayerInputComponent</span><span class=\"token punctuation\">(</span>UInputComponent<span class=\"token operator\">*</span> PlayerInputComponent<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n\tSuper<span class=\"token operator\">::</span><span class=\"token function\">SetupPlayerInputComponent</span><span class=\"token punctuation\">(</span>PlayerInputComponent<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">/**\n * Used by the `PatrolAIController` to set the properties of the PatrolCharacter to\n * the values they should be when the PatrolCharacter is patrolling Waypoints.\n */</span>\n<span class=\"token keyword\">void</span> APatrolCharacter<span class=\"token operator\">::</span><span class=\"token function\">SetPatrolMode</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n\t<span class=\"token function\">GetCharacterMovement</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-></span>MaxWalkSpeed <span class=\"token operator\">=</span> PatrolSpeed<span class=\"token punctuation\">;</span>\n\tMode <span class=\"token operator\">=</span> PatrolMode<span class=\"token operator\">::</span>PATROL<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">/**\n * Used by the `PatrolAIController` to set the properties of the PatrolCharacter to\n * the values they should be when the PatrolCharacter is chasing the PlayerCharacter.\n */</span>\n<span class=\"token keyword\">void</span> APatrolCharacter<span class=\"token operator\">::</span><span class=\"token function\">SetChaseMode</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n\t<span class=\"token comment\">// Set this to false so that the looking animation doesn't play while chasing</span>\n\t<span class=\"token comment\">// the PlayerCharacter.</span>\n\tbIsAtWaypoint <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token function\">GetCharacterMovement</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">==</span> <span class=\"token keyword\">nullptr</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token function\">GetCharacterMovement</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-></span>MaxWalkSpeed <span class=\"token operator\">=</span> ChaseSpeed<span class=\"token punctuation\">;</span>\n\tMode <span class=\"token operator\">=</span> PatrolMode<span class=\"token operator\">::</span>CHASE<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre>\n<p>So the code is mostly self-documenting but let's look into it a bit. In the header we:</p>\n<ul>\n<li>Create an enum for our mini state machine with our two states: Patrol and Chase.</li>\n<li>We need have a variable that lets us keep track of our current mode.</li>\n<li>Below that we have a couple variables that define the speed that the PatrolCharacter should walk at in each mode.</li>\n<li>Then we define an array of Waypoints that holds the Waypoints that should be patrolled between. Below that we have a variable that keeps track of what Waypoint in the array that we are currently moving towards.</li>\n<li>Below those are some variables that let you define how far away you can be from the Waypoint or PlayerCharacter before the AIController says that the move is complete. This let's you get closer or further to the PlayerCharacter or Waypoint depending on the values you provide.</li>\n<li>The two functions we have at the bottom let us switch between the two modes available.</li>\n</ul>\n<p>In the cpp file we:</p>\n<ul>\n<li>Set the controller rotation values to false so that the PatrolCharacter faces the direction they're going. Otherwise it would always face the direction of the Waypoint which is weird.</li>\n<li>We also have the functions that switch between modes. You're free to add anything else you want to these methods to differentiate how the PatrolCharacter acts in each mode but make sure that you leave the last line in each since that switches the <code>Mode</code> variable.</li>\n</ul>\n<p>At this point I created a Blueprint based off of this class so I could visually set the mesh and later the Waypoints. Again this is just for convenience and you can easily hardcode it all.</p>\n<p>Save and compile and lets move on to the AIController.</p>\n<h2 id=\"back-to-waypoints\"><a href=\"#back-to-waypoints\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a><strong>Back to Waypoints</strong></h2>\n<p>Actually now that we've defined the PatrolCharacter, we can finish up the Waypoint script.</p>\n<p>In our cpp script we need to add the following includes:</p>\n<pre class=\"language-cpp\"><code class=\"language-cpp\"><span class=\"token macro property\">#<span class=\"token directive keyword\">include</span> <span class=\"token string\">\"PatrolCharacter.h\"</span></span></code></pre>\n<p>and then in the <code>OnWaypointBeginOverlap</code> we need to see if the Actor that triggered this is a PatrolCharacter and if it is then we set the PatrolCharacter's  <code>bIsAtWaypoint</code> variable to <code>true</code>.</p>\n<pre class=\"language-cpp\"><code class=\"language-cpp\"><span class=\"token keyword\">void</span> AWaypoint<span class=\"token operator\">::</span><span class=\"token function\">OnWaypointBeginOverlap</span><span class=\"token punctuation\">(</span>UPrimitiveComponent<span class=\"token operator\">*</span> OverlappedComp<span class=\"token punctuation\">,</span> AActor<span class=\"token operator\">*</span> OtherActor<span class=\"token punctuation\">,</span> UPrimitiveComponent<span class=\"token operator\">*</span> OtherComp<span class=\"token punctuation\">,</span> int32 OtherBodyIndex<span class=\"token punctuation\">,</span> <span class=\"token keyword\">bool</span> bFromSweep<span class=\"token punctuation\">,</span> <span class=\"token keyword\">const</span> FHitResult<span class=\"token operator\">&amp;</span> SweepResult<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n\t<span class=\"token comment\">// Return if anything is null so we can avoid a potential crash.</span>\n\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>OtherActor <span class=\"token operator\">==</span> <span class=\"token keyword\">nullptr</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">||</span> <span class=\"token punctuation\">(</span>OtherActor <span class=\"token operator\">==</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">||</span> <span class=\"token punctuation\">(</span>OtherComp <span class=\"token operator\">==</span> <span class=\"token keyword\">nullptr</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">// Try to cast the `OtherActor` to our PatrolCharacter because we only</span>\n\t<span class=\"token comment\">// want to work with the PatrolCharacter.</span>\n\tAPatrolCharacter<span class=\"token operator\">*</span> PatrolCharacter <span class=\"token operator\">=</span> Cast<span class=\"token operator\">&lt;</span>APatrolCharacter<span class=\"token operator\">></span><span class=\"token punctuation\">(</span>OtherActor<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>PatrolCharacter <span class=\"token operator\">==</span> <span class=\"token keyword\">nullptr</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">// Set the PatrolCharacter to be at the Waypoint so that it can play its looking around animation and then</span>\n\t<span class=\"token comment\">// call the `AfterWaypointTimer` method when the timer is finished.</span>\n\tPatrolCharacter<span class=\"token operator\">-></span>bIsAtWaypoint <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre>\n<p>Ok now save and compile this and now lets actually get into the AIController.</p>\n<h2 id=\"patrol-ai-controller\"><a href=\"#patrol-ai-controller\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a><strong>Patrol AI Controller</strong></h2>\n<p>Now it's time for the fun part, making the AIController that'll respond to hearing the player.</p>\n<p>Before we get into the code lets see what the AIController with hearing sense is going to need to be able to do:</p>\n<ul>\n<li>Define a radius and max age for the hearing sense. This relates to how far away the PatrolCharacter can hear sounds and after a sound is heard how long until the PatrolCharacter forgets about it.</li>\n<li>Always move the PatrolCharacter to the next Waypoint unless the PlayerCharacter is detected and in that case we move towards the PlayerCharacter for as long as we can hear them.</li>\n</ul>\n<p>This is a pretty big simplification of it but let's get into the code as it's easier when you see it. Create a new C++ script with a base parent of <code>AIController</code> named PatrolAIController and lets get into it.</p>\n<p><strong>PatrolAIController.h</strong></p>\n<pre class=\"language-cpp\"><code class=\"language-cpp\"><span class=\"token macro property\">#<span class=\"token directive keyword\">pragma</span> once</span>\n\n<span class=\"token macro property\">#<span class=\"token directive keyword\">include</span> <span class=\"token string\">\"CoreMinimal.h\"</span></span>\n<span class=\"token macro property\">#<span class=\"token directive keyword\">include</span> <span class=\"token string\">\"AIController.h\"</span></span>\n<span class=\"token macro property\">#<span class=\"token directive keyword\">include</span> <span class=\"token string\">\"Perception/AIPerceptionTypes.h\"</span></span>\n<span class=\"token macro property\">#<span class=\"token directive keyword\">include</span> <span class=\"token string\">\"PatrolAIController.generated.h\"</span></span>\n\n<span class=\"token comment\">/**\n * Configures the senses of the PatrolCharacter and responds to sensing the PlayerCharacter\n * set as the target in the PatrolCharacter instance.\n */</span>\n<span class=\"token function\">UCLASS</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">PATROLAITUTORIAL_API</span> APatrolAIController <span class=\"token operator\">:</span> <span class=\"token keyword\">public</span> AAIController\n<span class=\"token punctuation\">{</span>\n\t<span class=\"token function\">GENERATED_BODY</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">public</span><span class=\"token operator\">:</span>\n\t<span class=\"token comment\">// Sets default values for this AI Controller's properties.</span>\n\t<span class=\"token function\">APatrolAIController</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">// Called when the game starts or when spawned.</span>\n\t<span class=\"token keyword\">virtual</span> <span class=\"token keyword\">void</span> <span class=\"token function\">BeginPlay</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> override<span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">// Called when the AIController is taken over.</span>\n\t<span class=\"token keyword\">virtual</span> <span class=\"token keyword\">void</span> <span class=\"token function\">OnPossess</span><span class=\"token punctuation\">(</span>APawn<span class=\"token operator\">*</span> Pawn<span class=\"token punctuation\">)</span> override<span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">// Called every frame.</span>\n\t<span class=\"token keyword\">virtual</span> <span class=\"token keyword\">void</span> <span class=\"token function\">Tick</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">float</span> DeltaSeconds<span class=\"token punctuation\">)</span> override<span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">// Called to get the control's rotation.</span>\n\t<span class=\"token keyword\">virtual</span> FRotator <span class=\"token function\">GetControlRotation</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">const</span> override<span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">// Called when a move request has been completed. This can be</span>\n\t<span class=\"token comment\">// a move request to a Waypoint or to the PlayerCharacter.</span>\n\t<span class=\"token keyword\">virtual</span> <span class=\"token keyword\">void</span> <span class=\"token function\">OnMoveCompleted</span><span class=\"token punctuation\">(</span>FAIRequestID RequestID<span class=\"token punctuation\">,</span> <span class=\"token keyword\">const</span> FPathFollowingResult<span class=\"token operator\">&amp;</span> Result<span class=\"token punctuation\">)</span> override<span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">// Gets called when the perception component updates. This is</span>\n\t<span class=\"token comment\">// where check to see if the PlayerCharacter was detected.</span>\n\t<span class=\"token function\">UFUNCTION</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\t<span class=\"token keyword\">void</span> <span class=\"token function\">OnPawnDetected</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> TArray<span class=\"token operator\">&lt;</span>AActor<span class=\"token operator\">*</span><span class=\"token operator\">></span><span class=\"token operator\">&amp;</span> DetectedPawns<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">// Moves the PatrolCharacter to the next Waypoint.</span>\n\t<span class=\"token function\">UFUNCTION</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\t<span class=\"token keyword\">void</span> <span class=\"token function\">MoveToWaypoint</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">// The TimerHandle used to delay the setting of the waypoint giving the</span>\n\t<span class=\"token comment\">// PatrolCharacter time to perform a looking animation.</span>\n\t<span class=\"token function\">UPROPERTY</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\tFTimerHandle TimerHandle<span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">// The position to move to. This can be different than the PlayerCharacter's</span>\n\t<span class=\"token comment\">// position if a distraction was used.</span>\n\t<span class=\"token function\">UPROPERTY</span><span class=\"token punctuation\">(</span>VisibleAnywhere<span class=\"token punctuation\">,</span> BlueprintReadWrite<span class=\"token punctuation\">)</span>\n\tFVector PositionToMoveTo<span class=\"token punctuation\">;</span>\n\n\t<span class=\"token function\">UPROPERTY</span><span class=\"token punctuation\">(</span>VisibleAnywhere<span class=\"token punctuation\">,</span> BlueprintReadWrite<span class=\"token punctuation\">)</span>\n\t<span class=\"token keyword\">class</span> <span class=\"token class-name\">APatrolCharacter</span><span class=\"token operator\">*</span> PatrolCharacter<span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">// A reference to the hearing perception component.</span>\n\t<span class=\"token function\">UPROPERTY</span><span class=\"token punctuation\">(</span>VisibleAnywhere<span class=\"token punctuation\">,</span> BlueprintReadWrite<span class=\"token punctuation\">,</span> Category <span class=\"token operator\">=</span> AI<span class=\"token punctuation\">)</span>\n\t<span class=\"token keyword\">class</span> <span class=\"token class-name\">UAISenseConfig_Hearing</span><span class=\"token operator\">*</span> HearingConfig<span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">// The range at which the PatrolCharacter can hear the PlayerCharacter.</span>\n\t<span class=\"token function\">UPROPERTY</span><span class=\"token punctuation\">(</span>VisibleAnywhere<span class=\"token punctuation\">,</span> BlueprintReadWrite<span class=\"token punctuation\">,</span> Category <span class=\"token operator\">=</span> AI<span class=\"token punctuation\">)</span>\n\t<span class=\"token keyword\">float</span> AIHearingRange <span class=\"token operator\">=</span> <span class=\"token number\">1000.0f</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">// The amount of time after the PlayerCharacter has been heard that the</span>\n\t<span class=\"token comment\">// PatrolCharacter will forget they heard the PlayerCharacter.</span>\n\t<span class=\"token function\">UPROPERTY</span><span class=\"token punctuation\">(</span>VisibleAnywhere<span class=\"token punctuation\">,</span> BlueprintReadWrite<span class=\"token punctuation\">,</span> Category <span class=\"token operator\">=</span> AI<span class=\"token punctuation\">)</span>\n\t<span class=\"token keyword\">float</span> AIHearingMaxAge <span class=\"token operator\">=</span> <span class=\"token number\">5.0f</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">// Indicates whether the PatrolCharacter will be able to listen at the</span>\n\t<span class=\"token comment\">// start of the game or whether it will be enabled later manually.</span>\n\t<span class=\"token function\">UPROPERTY</span><span class=\"token punctuation\">(</span>VisibleAnywhere<span class=\"token punctuation\">,</span> BlueprintReadWrite<span class=\"token punctuation\">,</span> Category <span class=\"token operator\">=</span> AI<span class=\"token punctuation\">)</span>\n\t<span class=\"token keyword\">bool</span> bAIHearingStartsEnabled <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">// Indicates whether the PatrolCharacter has seen the PlayerCharacter or not.</span>\n\t<span class=\"token function\">UPROPERTY</span><span class=\"token punctuation\">(</span>VisibleAnywhere<span class=\"token punctuation\">,</span> BlueprintReadWrite<span class=\"token punctuation\">,</span> Category <span class=\"token operator\">=</span> AI<span class=\"token punctuation\">)</span>\n\t<span class=\"token keyword\">bool</span> bIsPlayerDetected <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">// If the PatrolCharacter has seen the PlayerCharacter then this is populated with how</span>\n\t<span class=\"token comment\">// far away the PlayerCharacter is from the PatrolCharacter.</span>\n\t<span class=\"token function\">UPROPERTY</span><span class=\"token punctuation\">(</span>VisibleAnywhere<span class=\"token punctuation\">,</span> BlueprintReadWrite<span class=\"token punctuation\">,</span> Category <span class=\"token operator\">=</span> AI<span class=\"token punctuation\">)</span>\n\t<span class=\"token keyword\">float</span> DistanceToPlayer <span class=\"token operator\">=</span> <span class=\"token number\">0.0f</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre>\n<p>Let's go over this before we get into the cpp file:</p>\n<ul>\n<li>We have to add the <code>#include \"Perception/AIPerceptionTypes.h\"</code> as it's a struct and we can't forward declare that like we can with classes.</li>\n<li>We override the virtual methods provided with the <code>AIController</code> with the most important one being <code>OnPawnDetected</code> which will let us know when the PlayerCharacter has been sensed.</li>\n<li>We have a <code>FTimerHandle</code> because we're going to need to set a timer in between Waypoints to give the PatrolCharacter time to \"look around\". In the <a href=\"https://github.com/robertcorponoi/unreal-cpp-patrol-ai-with-hearing\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">repo</a> you can see that this is where I play the \"Looking Around\" animation for the PatrolCharacter.</li>\n<li>We need a reference to the PatrolCharacter so we can easily issue commands.</li>\n<li>We set up the <code>UAISenseConfig_Hearing</code> and it's default settings, the range and age which we talked about previously.</li>\n<li>We have a few helper variables such as <code>PositionToMoveTo</code> and <code>bIsPlayerDetected</code>.</li>\n</ul>\n<p>Ok hopefully that's a bit more clear so let's move on to the cpp file:</p>\n<pre class=\"language-cpp\"><code class=\"language-cpp\"><span class=\"token macro property\">#<span class=\"token directive keyword\">include</span> <span class=\"token string\">\"PatrolAIController.h\"</span></span>\n<span class=\"token macro property\">#<span class=\"token directive keyword\">include</span> <span class=\"token string\">\"Waypoint.h\"</span></span>\n<span class=\"token macro property\">#<span class=\"token directive keyword\">include</span> <span class=\"token string\">\"PatrolCharacter.h\"</span></span>\n<span class=\"token macro property\">#<span class=\"token directive keyword\">include</span> <span class=\"token string\">\"PlayerCharacter.h\"</span></span>\n<span class=\"token macro property\">#<span class=\"token directive keyword\">include</span> <span class=\"token string\">\"Tasks/AITask_MoveTo.h\"</span></span>\n<span class=\"token macro property\">#<span class=\"token directive keyword\">include</span> <span class=\"token string\">\"Kismet/GameplayStatics.h\"</span></span>\n<span class=\"token macro property\">#<span class=\"token directive keyword\">include</span> <span class=\"token string\">\"Kismet/KismetMathLibrary.h\"</span></span>\n<span class=\"token macro property\">#<span class=\"token directive keyword\">include</span> <span class=\"token string\">\"Perception/AISenseConfig_Hearing.h\"</span></span>\n<span class=\"token macro property\">#<span class=\"token directive keyword\">include</span> <span class=\"token string\">\"Perception/AIPerceptionComponent.h\"</span></span>\n<span class=\"token macro property\">#<span class=\"token directive keyword\">include</span> <span class=\"token string\">\"Navigation/PathFollowingComponent.h\"</span></span>\n\n<span class=\"token comment\">/**\n * Sets the default values for the PatrolAIController. In our case we create the necessary\n * perception components and setup the dominant sense.\n */</span>\nAPatrolAIController<span class=\"token operator\">::</span><span class=\"token function\">APatrolAIController</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n\t<span class=\"token comment\">// We need this AIController to run its Tick method.</span>\n\tPrimaryActorTick<span class=\"token punctuation\">.</span>bCanEverTick <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">// Create the hearing sense, and a AIPerceptionComponent and </span>\n\t<span class=\"token comment\">// set it as the default perception component of the AIController.</span>\n\tHearingConfig <span class=\"token operator\">=</span> CreateDefaultSubobject<span class=\"token operator\">&lt;</span>UAISenseConfig_Hearing<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token function\">TEXT</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Hearing Config\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token function\">SetPerceptionComponent</span><span class=\"token punctuation\">(</span><span class=\"token operator\">*</span>CreateDefaultSubobject<span class=\"token operator\">&lt;</span>UAIPerceptionComponent<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token function\">TEXT</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Perception Component\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\tHearingConfig<span class=\"token operator\">-></span>HearingRange <span class=\"token operator\">=</span> AIHearingRange<span class=\"token punctuation\">;</span>\n\tHearingConfig<span class=\"token operator\">-></span>LoSHearingRange <span class=\"token operator\">=</span> AIHearingRange<span class=\"token punctuation\">;</span>\n\tHearingConfig<span class=\"token operator\">-></span><span class=\"token function\">SetMaxAge</span><span class=\"token punctuation\">(</span>AIHearingMaxAge<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">// Set the hearing sense to detect everything. This should be changed to fit your needs</span>\n\t<span class=\"token comment\">// but it makes it easiest for the tutorial.</span>\n\tHearingConfig<span class=\"token operator\">-></span>DetectionByAffiliation<span class=\"token punctuation\">.</span>bDetectEnemies <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n\tHearingConfig<span class=\"token operator\">-></span>DetectionByAffiliation<span class=\"token punctuation\">.</span>bDetectFriendlies <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n\tHearingConfig<span class=\"token operator\">-></span>DetectionByAffiliation<span class=\"token punctuation\">.</span>bDetectNeutrals <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">// Set hearing as the dominant sense.</span>\n\t<span class=\"token function\">GetPerceptionComponent</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-></span><span class=\"token function\">SetDominantSense</span><span class=\"token punctuation\">(</span><span class=\"token operator\">*</span>HearingConfig<span class=\"token operator\">-></span><span class=\"token function\">GetSenseImplementation</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token function\">GetPerceptionComponent</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-></span><span class=\"token function\">ConfigureSense</span><span class=\"token punctuation\">(</span><span class=\"token operator\">*</span>HearingConfig<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">/**\n * Called when the game starts or when spawned\n */</span>\n<span class=\"token keyword\">void</span> APatrolAIController<span class=\"token operator\">::</span><span class=\"token function\">BeginPlay</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n\tSuper<span class=\"token operator\">::</span><span class=\"token function\">BeginPlay</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">// Set the method to respond when the perception component updates.</span>\n\t<span class=\"token function\">GetPerceptionComponent</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-></span>OnPerceptionUpdated<span class=\"token punctuation\">.</span><span class=\"token function\">AddDynamic</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span> <span class=\"token operator\">&amp;</span>APatrolAIController<span class=\"token operator\">::</span>OnPawnDetected<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">// Set the reference to the PatrolCharacter.</span>\n\tPatrolCharacter <span class=\"token operator\">=</span> Cast<span class=\"token operator\">&lt;</span>APatrolCharacter<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token function\">GetPawn</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">// Set the Waypoint index to the last Waypoint because the `MoveToWaypoint` method</span>\n\t<span class=\"token comment\">// of the PatrolAIController will increment by 1 on the first update so by setting</span>\n\t<span class=\"token comment\">// it to the last index we end up at the first.</span>\n\tPatrolCharacter<span class=\"token operator\">-></span>CurrentWaypointIndex <span class=\"token operator\">=</span> PatrolCharacter<span class=\"token operator\">-></span>Waypoints<span class=\"token punctuation\">.</span><span class=\"token function\">Num</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">// Tell the PatrolCharacter to start moving to a Waypoint.</span>\n\t<span class=\"token function\">MoveToWaypoint</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">/**\n * Called when the AIController is taken over.\n *\n * @param PatrolPawn The pawn that was taken over.\n */</span>\n<span class=\"token keyword\">void</span> APatrolAIController<span class=\"token operator\">::</span><span class=\"token function\">OnPossess</span><span class=\"token punctuation\">(</span>APawn<span class=\"token operator\">*</span> PatrolPawn<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n\tSuper<span class=\"token operator\">::</span><span class=\"token function\">OnPossess</span><span class=\"token punctuation\">(</span>PatrolPawn<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">/**\n * Called every frame.\n *\n * @param DeltaTime The time between the previous Tick and the current one.\n */</span>\n<span class=\"token keyword\">void</span> APatrolAIController<span class=\"token operator\">::</span><span class=\"token function\">Tick</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">float</span> DeltaSeconds<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n\tSuper<span class=\"token operator\">::</span><span class=\"token function\">Tick</span><span class=\"token punctuation\">(</span>DeltaSeconds<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">/**\n * Returns a zero rotator if GetPawn is null and the Actor rotation yaw\n * otherwise.\n */</span>\nFRotator APatrolAIController<span class=\"token operator\">::</span><span class=\"token function\">GetControlRotation</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">const</span>\n<span class=\"token punctuation\">{</span>\n\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token function\">GetPawn</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">==</span> <span class=\"token keyword\">nullptr</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span> <span class=\"token function\">FRotator</span><span class=\"token punctuation\">(</span><span class=\"token number\">0.0f</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0.0f</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0.0f</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token keyword\">return</span> <span class=\"token function\">FRotator</span><span class=\"token punctuation\">(</span><span class=\"token number\">0.0f</span><span class=\"token punctuation\">,</span> <span class=\"token function\">GetPawn</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-></span><span class=\"token function\">GetActorRotation</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>Yaw<span class=\"token punctuation\">,</span> <span class=\"token number\">0.0f</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">/**\n * When the PatrolCharacter's perception detects a Pawn we check to see if\n * it is the PlayerCharacter and update the `bIsPlayerDetected` variable accordingly.\n *\n * @param DetectedPawns - The Pawns that the AIController has detected in its radius.\n */</span>\n<span class=\"token keyword\">void</span> APatrolAIController<span class=\"token operator\">::</span><span class=\"token function\">OnPawnDetected</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> TArray<span class=\"token operator\">&lt;</span>AActor<span class=\"token operator\">*</span><span class=\"token operator\">></span><span class=\"token operator\">&amp;</span> DetectedPawns<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n\t<span class=\"token comment\">// Since `DetectedPawns` is an array of pawns that have been detected we</span>\n\t<span class=\"token comment\">// need to loop through and see if any of those are our PlayerController.</span>\n\t<span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span>AActor<span class=\"token operator\">*</span> DetectedPawn <span class=\"token operator\">:</span> DetectedPawns<span class=\"token punctuation\">)</span>\n\t<span class=\"token punctuation\">{</span>\n\t\t<span class=\"token comment\">// Get the data from the latest hearing sensed.</span>\n\t\t<span class=\"token comment\">// FAISenseID HearingSenseID = UAISense::GetSenseID&lt;UAISense_Hearing>();</span>\n\t\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>HearingConfig<span class=\"token operator\">-></span><span class=\"token function\">GetSenseID</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">IsValid</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token keyword\">const</span> FActorPerceptionInfo<span class=\"token operator\">*</span> HeardPerceptionInfo <span class=\"token operator\">=</span> <span class=\"token function\">GetPerceptionComponent</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-></span><span class=\"token function\">GetFreshestTrace</span><span class=\"token punctuation\">(</span>HearingConfig<span class=\"token operator\">-></span><span class=\"token function\">GetSenseID</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t\t<span class=\"token comment\">// If the sense isn't active anymore then we return early. This happens when</span>\n\t\t<span class=\"token comment\">// the max age is hit for a heard event.</span>\n\t\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>HeardPerceptionInfo<span class=\"token operator\">-></span><span class=\"token function\">IsSenseActive</span><span class=\"token punctuation\">(</span>HearingConfig<span class=\"token operator\">-></span><span class=\"token function\">GetSenseID</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n\t\t<span class=\"token punctuation\">{</span>\n\t\t\t<span class=\"token comment\">// The hearing sense has been lost so we return the PatrolCharacter back</span>\n\t\t\t<span class=\"token comment\">// to patrolling Waypoints.</span>\n\t\t\t<span class=\"token function\">MoveToWaypoint</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t<span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token punctuation\">}</span>\n\n\t\t<span class=\"token comment\">// Attempt to cast the current Pawn to our PlayerCharacter and return early</span>\n\t\t<span class=\"token comment\">// if it's not since we only care about the PlayerCharacter.</span>\n\t\tAPlayerCharacter<span class=\"token operator\">*</span> PlayerCharacter <span class=\"token operator\">=</span> Cast<span class=\"token operator\">&lt;</span>APlayerCharacter<span class=\"token operator\">></span><span class=\"token punctuation\">(</span>DetectedPawn<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>PlayerCharacter <span class=\"token operator\">==</span> <span class=\"token keyword\">nullptr</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n\t\t\n\t\t<span class=\"token comment\">// At this point we can safely assume that the PlayerCharacter has been detected</span>\n\t\t<span class=\"token comment\">// and we can get the distance away they are from the PatrolCharacter.</span>\n\t\tbIsPlayerDetected <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n\t\tDistanceToPlayer <span class=\"token operator\">=</span> <span class=\"token function\">GetPawn</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-></span><span class=\"token function\">GetDistanceTo</span><span class=\"token punctuation\">(</span>PlayerCharacter<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t\t<span class=\"token comment\">// Instead of just moving towards the PlayerCharacter we want to get the position that</span>\n\t\t<span class=\"token comment\">// the hearing event happened at. This is helpful if you're implementing a distraction</span>\n\t\t<span class=\"token comment\">// hearing event and don't want to create another Actor just for a distraction.</span>\n\t\tPositionToMoveTo <span class=\"token operator\">=</span> HeardPerceptionInfo<span class=\"token operator\">-></span><span class=\"token function\">GetStimulusLocation</span><span class=\"token punctuation\">(</span>HearingConfig<span class=\"token operator\">-></span><span class=\"token function\">GetSenseID</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t\tPatrolCharacter<span class=\"token operator\">-></span><span class=\"token function\">SetChaseMode</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t\t<span class=\"token comment\">// Finally we move to the location found above. If the location keeps moving, like if</span>\n\t\t<span class=\"token comment\">// the sound is the PlayerCharacter's footsteps, then this will keep moving to the new</span>\n\t\t<span class=\"token comment\">// location.</span>\n\t\t<span class=\"token function\">MoveToLocation</span><span class=\"token punctuation\">(</span>PositionToMoveTo<span class=\"token punctuation\">,</span> PatrolCharacter<span class=\"token operator\">-></span>DistanceBeforeArrivedAtPlayer<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t\t<span class=\"token comment\">// DEBUG</span>\n\t\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>GEngine<span class=\"token punctuation\">)</span>\n\t\t<span class=\"token punctuation\">{</span>\n\t\t\tGEngine<span class=\"token operator\">-></span><span class=\"token function\">AddOnScreenDebugMessage</span><span class=\"token punctuation\">(</span><span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">10.0</span><span class=\"token punctuation\">,</span> FColor<span class=\"token operator\">::</span>Green<span class=\"token punctuation\">,</span> FString<span class=\"token operator\">::</span><span class=\"token function\">Printf</span><span class=\"token punctuation\">(</span><span class=\"token function\">TEXT</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Investigating Sound At Location: %s For %f seconds\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token operator\">*</span>PositionToMoveTo<span class=\"token punctuation\">.</span><span class=\"token function\">ToString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> AIHearingMaxAge<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token punctuation\">}</span>\n\t<span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">/**\n * When a `MoveToLocation` or `MoveToActor` action has completed this method is fired\n * and we either move to another Waypoint or we chase the PlayerCharacter.\n *\n * @param RequestID The Move Request ID for the move that was completed.\n * @param Result\n */</span>\n<span class=\"token keyword\">void</span> APatrolAIController<span class=\"token operator\">::</span><span class=\"token function\">OnMoveCompleted</span><span class=\"token punctuation\">(</span>FAIRequestID RequestID<span class=\"token punctuation\">,</span> <span class=\"token keyword\">const</span> FPathFollowingResult<span class=\"token operator\">&amp;</span> Result<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n\tSuper<span class=\"token operator\">::</span><span class=\"token function\">OnMoveCompleted</span><span class=\"token punctuation\">(</span>RequestID<span class=\"token punctuation\">,</span> Result<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\n\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>PatrolCharacter<span class=\"token operator\">-></span>Mode <span class=\"token operator\">==</span> PatrolMode<span class=\"token operator\">::</span>PATROL<span class=\"token punctuation\">)</span>\n\t<span class=\"token punctuation\">{</span>\n\t\t<span class=\"token comment\">// DEBUG</span>\n\t\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>GEngine<span class=\"token punctuation\">)</span>\n\t\t<span class=\"token punctuation\">{</span>\n\t\t\tGEngine<span class=\"token operator\">-></span><span class=\"token function\">AddOnScreenDebugMessage</span><span class=\"token punctuation\">(</span><span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">10.0</span><span class=\"token punctuation\">,</span> FColor<span class=\"token operator\">::</span>Green<span class=\"token punctuation\">,</span> FString<span class=\"token operator\">::</span><span class=\"token function\">Printf</span><span class=\"token punctuation\">(</span><span class=\"token function\">TEXT</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Patrol At Waypoint: %s For %f seconds\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token operator\">*</span><span class=\"token function\">GetNameSafe</span><span class=\"token punctuation\">(</span>PatrolCharacter<span class=\"token operator\">-></span>Waypoints<span class=\"token punctuation\">[</span>PatrolCharacter<span class=\"token operator\">-></span>CurrentWaypointIndex<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> PatrolCharacter<span class=\"token operator\">-></span>WaypointDelay<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token punctuation\">}</span>\n\n\t\t<span class=\"token comment\">// The PatrolCharacter is in Patrol mode so we wait at the current Waypoint</span>\n\t\t<span class=\"token comment\">// for 5 seconds and then we call `MoveToWaypoint` to move to the next Waypoint.</span>\n\t\t<span class=\"token function\">GetWorld</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-></span><span class=\"token function\">GetTimerManager</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">SetTimer</span><span class=\"token punctuation\">(</span>TimerHandle<span class=\"token punctuation\">,</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span> <span class=\"token operator\">&amp;</span>APatrolAIController<span class=\"token operator\">::</span>MoveToWaypoint<span class=\"token punctuation\">,</span> PatrolCharacter<span class=\"token operator\">-></span>WaypointDelay<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">/**\n * Moves the PatrolCharacter to the next Waypoint on its list.\n */</span>\n<span class=\"token keyword\">void</span> APatrolAIController<span class=\"token operator\">::</span><span class=\"token function\">MoveToWaypoint</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n\t<span class=\"token comment\">// Check to see if the PatrolCharacter was in a chase previous to this being</span>\n\t<span class=\"token comment\">// called. If they were then change back to patrol mode and we don't increment</span>\n\t<span class=\"token comment\">// the Waypoint index because chances are they didn't make it to the Waypoint</span>\n\t<span class=\"token comment\">// before being interrupted so we don't want them to skip a Waypoint.</span>\n\t<span class=\"token comment\">//</span>\n\t<span class=\"token comment\">// If they were not in a chase then we increment the Waypoint index so they can</span>\n\t<span class=\"token comment\">// go to the next Waypoint.</span>\n\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>PatrolCharacter<span class=\"token operator\">-></span>Mode <span class=\"token operator\">==</span> PatrolMode<span class=\"token operator\">::</span>CHASE<span class=\"token punctuation\">)</span> \n\t<span class=\"token punctuation\">{</span>\n\t\t<span class=\"token comment\">// Since the PatrolCharacter was previously chasing the PlayerCharacter we</span>\n\t\t<span class=\"token comment\">// can assume that they didn't make it to their Waypoint. To compensate for</span>\n\t\t<span class=\"token comment\">// this we set the Waypoint index back by 1.</span>\n\t\tPatrolCharacter<span class=\"token operator\">-></span><span class=\"token function\">SetPatrolMode</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n\t<span class=\"token keyword\">else</span>\n\t<span class=\"token punctuation\">{</span>\n\t\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>PatrolCharacter<span class=\"token operator\">-></span>CurrentWaypointIndex <span class=\"token operator\">==</span> PatrolCharacter<span class=\"token operator\">-></span>Waypoints<span class=\"token punctuation\">.</span><span class=\"token function\">Num</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\n\t\t<span class=\"token punctuation\">{</span>\n\t\t\t<span class=\"token comment\">// The PatrolCharacter is at the last Waypoint in the Waypoints array so we send</span>\n\t\t\t<span class=\"token comment\">// them back to the first Waypoint.</span>\n\t\t\tPatrolCharacter<span class=\"token operator\">-></span>CurrentWaypointIndex <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token punctuation\">}</span>\n\t\t<span class=\"token keyword\">else</span>\n\t\t<span class=\"token punctuation\">{</span>\n\t\t\t<span class=\"token comment\">// There's still more Waypoints the PatrolCharacter hasn't patrolled yet so we</span>\n\t\t\t<span class=\"token comment\">// send the PatrolCharacter to the next Waypoint in the Waypoints array.</span>\n\t\t\tPatrolCharacter<span class=\"token operator\">-></span>CurrentWaypointIndex<span class=\"token operator\">++</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token punctuation\">}</span>\n\t<span class=\"token punctuation\">}</span>\n\n\t<span class=\"token comment\">// The Waypoint exists, the PatrolCharacter is not currently waiting at a Waypoint,</span>\n\t<span class=\"token comment\">// and the PlayerCharacter has not been detected so we move towards a Waypoint.</span>\n\t<span class=\"token function\">MoveToActor</span><span class=\"token punctuation\">(</span>PatrolCharacter<span class=\"token operator\">-></span>Waypoints<span class=\"token punctuation\">[</span>PatrolCharacter<span class=\"token operator\">-></span>CurrentWaypointIndex<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> PatrolCharacter<span class=\"token operator\">-></span>DistanceBeforeArrivedAtWaypoint<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">// DEBUG</span>\n\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>GEngine<span class=\"token punctuation\">)</span>\n\t<span class=\"token punctuation\">{</span>\n\t\tGEngine<span class=\"token operator\">-></span><span class=\"token function\">AddOnScreenDebugMessage</span><span class=\"token punctuation\">(</span><span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">10.0</span><span class=\"token punctuation\">,</span> FColor<span class=\"token operator\">::</span>Green<span class=\"token punctuation\">,</span> FString<span class=\"token operator\">::</span><span class=\"token function\">Printf</span><span class=\"token punctuation\">(</span><span class=\"token function\">TEXT</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Patrol moving To Waypoint: %s\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token operator\">*</span><span class=\"token function\">GetNameSafe</span><span class=\"token punctuation\">(</span>PatrolCharacter<span class=\"token operator\">-></span>Waypoints<span class=\"token punctuation\">[</span>PatrolCharacter<span class=\"token operator\">-></span>CurrentWaypointIndex<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> PatrolCharacter<span class=\"token operator\">-></span>CurrentWaypointIndex<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n\n\tPatrolCharacter<span class=\"token operator\">-></span>bIsAtWaypoint <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre>\n<p>Ok that was quite a lot so lets break it down:</p>\n<ul>\n<li>In the constructor we create the hearsing sense, set it's settings from the <code>AIHearingRange</code> and <code>AIHearingMaxAge</code> variables and then set it so that it'll detect everyone. Lastly we set it as the dominant sense for the <code>AIController</code>.</li>\n<li>In <code>BeginPlay</code>, we set the method that responds to <code>OnPerceptionUpdated</code> which is our <code>OnPawnDetected</code> method. We then get the reference to the PatrolCharacter that the <code>AIController</code> is attached to and set the Waypoint index to the last Waypoint. We do this because when we call <code>MoveToWaypoint</code> right below it, it increments the Waypoint index by 1 and by default it would have the PatrolCharacter walk to the second Waypoint first. This way when it increments the Waypoint index it will go to the first Waypoint first.</li>\n<li>In <code>OnPawnDetected</code> is where all the magic happens. Since <code>DetectedPawns</code> is an array we need to loop through each element and get the hearing info. There's also a chance that the sense is inactive which means that the PlayerCharacter is no longer detected or the heard sound has reached its max age and expired. In this case we assume that the PatrolCharacter can no longer hear the PlayerCharacter and so we call <code>MoveToWaypoint</code> to make them patrol again. Otherwise if the sense is active we cast the detected pawn into our PlayerCharacter and set the PatrolCharacter to chase after the PlayerCharacter by continuously moving to the PlayerCharacter's latest noise location.</li>\n<li>The <code>OnMoveCompleted</code> method gets called every time a move command has finished. This means anytime that the PatrolCharacter has reached a Waypoint or has reached the location of the noise this method will be called. We don't really care about when the PatrolCharacter has reached the Player as that's always handled by <code>OnPawnDetected</code> but we do care about patrolling. If the PatrolCharacter has just finished moving to a Waypoint, which in the code we know by whether or not they're in Patrol mode, then we set a timer with a delay so that the PatrolCharacter can \"Look Around\". In the <a href=\"https://github.com/robertcorponoi/unreal-cpp-patrol-ai-with-hearing\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">repo</a> I use this time to perform a \"Looking Around\" animation.</li>\n</ul>\n<p>Next I created a Blueprint based off of this class so that I could easily mess around with the hearing radius and max age values which again you don't have to do but what you do have to do is assign this <code>AIController</code> to your PatrolCharacter.</p>\n<p>So in the PatrolCharacter Blueprint (or script) you have to change the Pawn settings so that:</p>\n<ul>\n<li><strong>Auto Possess AI</strong> - Placed in World or Spawned</li>\n<li><strong>AI Controller Class</strong> - PatrolAIController (Blueprint or script).</li>\n</ul>\n<p><img class=\"g-image g-image--lazy g-image--loading\" src=\"data:image/svg+xml,%3csvg fill='none' viewBox='0 0 465 232' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-7bc9408785d0d170e1b8b176a604cb2f'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='40'/%3e%3c/filter%3e%3c/defs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-7bc9408785d0d170e1b8b176a604cb2f)' width='465' height='232' xlink:href='data:image/png%3bbase64%2ciVBORw0KGgoAAAANSUhEUgAAAEAAAAAgCAYAAACinX6EAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAHL0lEQVRo3tWZWU8VSxDHz8cxiisg6zkgLuCCCyAqiLghiDuiAmqMuCBIjAsucY9K0ERRXFHU6JsJJia%2bmfDgNyn5lfkfh4k397KEzH2odHV1z0x31b%2bW7omlpqZabm6uZWdnO%2bXk5CRJsrFQZmbmuJ6fLIrNnDnTpk6daikpKTZjxgybMmWK07Rp07zP%2bFho%2bvTpY352MinGJpcuXWpbtmyx%2bvp627Fjh%2b3cudMqKystIyPDlTBr1qxRkxQwlmcnkxwB5eXltnDhQkskErZmzRpbtWqVLVq0yHCPsCX/hgpkYTmIkgKCc6JGsdmzZ/siaSEWrk2npaVZenq603/l1Z8zZ46/j3ehyLlz50aSYgSrZcuW2ZIlS2zFihXOFxcX28qVK52XjBY5PGPwEHJcSHLQs3z5cissLLRt27bZqVOnbO3atY4ovrF48eJIUSwrK8sZFt3Y2Gj79%2b/3eEAsaGhosL1793pMOHjwoB06dMjHkDFGv6mpyfbs2ePxo66uzscOHDjgMeTs2bP27ds327Vrl82bNy%2baCgABLKyoqMiVgBWxqKyLZZGLGGO%2b5tIKHbyDMVBATKmoqLDdu3dbSUmJI4DxqFEMf8U6BEByP4igLojH454n4YN1gcbCdQJ93sE4SuU9fIDNz58/38fy8vIiRzGCFhtikfjs5s2bPSts2LDBNm3aZFu3brWqqiqHN8QY83CF2tpa2759u23cuNHWrVvnGQQ5MpTS2tpqX758cRmK5oN8K0rkCsA6%2bfn5VlZW5htUQFy9erW3QJox%2bowBd/psGBk8MmBeWlpq69evdwSgoIsXL/o4fRTAt6JErgAWBnSVzoAwRRA8qUI8cxlTCtF8eOSQ5rFhUCCX4mNoPJIKgCEOkK7wWVkYHisT7ARxxghuWJ4%2bPAgBKTwPgpiL0sgcT58%2bTVaVkUUATEFBgfs7/s3mWTR9YgFUU1OTHAPi%2bDUxQXGD%2bSiDZ4gdoOLw4cP25s0bfz7SCpALKHoLumyCFmIDkE56komH5AbqA3kFvsi7AAslbZENQIOKI/rkdOVNxhYsWOAtfXjNIQiKR1FkBypBXIh%2b1DbvCiBoYRk2Asyp6vBhqj%2bqO6o4IE0q3Ldvn8Oe6E7FqD7ugAvwrKpBYgWb//r1q7sJyCDOkG3%2bjYKomTQX4IOyLovQBGRQkMfKVIhsCJ6Wd2iDzKEwompEMbgXBy4ORRySIB2cgqRxlDVZLjNCAUpxtLolUhpUalTVB3IUF1QdquXFPAdyjh8/bqdPn/ZzQXt7u3V0dHh74sSJEUTR1NbWZufOnXMkTpbLJGMAlgTKRHGiOZGb6K4sgD/jBmQBuYWqRSwetBYowJLXr1%2b33t5ee/LkiT179szu3Lljjx8/dvr%2b/bsNDQ3Zjx8/nH7%2b/Gn9/f1O9%2b7dc0QEkRimiULHiDoA3weyqvgIgihD%2bZ0W6ANtNk86RCE8G4z0IIr3njx50jdz%2bfJlu3DhgtOVK1fs2rVr1tfXZ69evbKXL186kS57enpcOWfOnHGE6X0iIezP5uPjzjAj0iBwlgsorQnmQRcQH0x3wcXC65iNolCqCKWhVBSqUlqkwgolC0lBAmm0v5XB4W38aEgqACJ9Ka2R0rjUwLoKfhB95GF4hhFAQAMBgvyLFy/s%2bfPn7g5YH5d4%2bPChV4oQcuYwRv/t27eOCrkFaGHO%2b/fvrampeXjz6cMoxXDjRIDSIJvn7A7h%2b/g88YCTHamNlvSHlUh/KEhH4LAiUAAx4NKlS%2b73uMDt27ftxo0bdvfuXbt//74rgODIGG7CeHd3t8txk6tXr/rzjMtt4FFKW1u7JfJSraqagm34nJGXCLnGGBCgNCcEqDgKooIWBCjt/U3zUgCuRB1x/vx5RwJRnpbaACITEPWR0UqO/5M5jh075mPKIJ2dndbV1eWKwDC4YX7%2bn%2b8pJojicfXHUAoHy2GVvGGZLkfCvq%2bWd1EMEQPIHiJlFeKBZPAKqgRiZRhQyEGLd7IGUKXLGV2%2b0LIH1sOms7MTyc3/bkeRBQhMuhDldKeTIXJkuu6CkBML/gkBvBcrf/jwwWE7MDBg7969s9evX7uvf/z40fvQ58%2bfPT58%2bvTJBgcH3RXIDPj%2bo0ePHE24IK6H8vkuKCDIogTQUlFROfzdLCstyx1uR4kA1QH4ONEYC1C%2bqhbg4/TZOBYC2shIi%2bE4EHSBo0eP2oMHD5LwxR3wYy5J8GuKHiB98%2bZNVxZ%2bz%2baPHDniLfGC2ECc4mTJHHjWQLmNIlDArVu3PE5lZmZYWXnWsDFzR%2b8CLFyXF6oCw/8INSZ5MC8HiRcD2erqaleCbo%2bhlpYWb5E1Nzcnecm5mWaz8FgWo8g9FbB1XpDy%2bZbz8YRnhVFfiSmlBc/rYX60Z3ldsKqUDrd/44NzdOPEO7QGrTPsduO5Z3AFhC0%2bEYTFaFXBjYcmcl1higX/303kT8f/y8/RX5QRvyutmoVNAAAAAElFTkSuQmCC' /%3e%3c/svg%3e\" width=\"465\" alt=\"Patrol Character Settings\" data-srcset=\"/assets/static/patrol-character-settings.12b3014.08e30215fef674cda370c730f0795ff2.png 465w\" data-sizes=\"(max-width: 465px) 100vw, 465px\" data-src=\"/assets/static/patrol-character-settings.12b3014.08e30215fef674cda370c730f0795ff2.png\"><noscript><img class=\"g-image g-image--lazy g-image--loaded\" src=\"/assets/static/patrol-character-settings.12b3014.08e30215fef674cda370c730f0795ff2.png\" width=\"465\" alt=\"Patrol Character Settings\"></noscript></p>\n<p>Save and compile this and let's move on.</p>\n<h2 id=\"making-the-player-emit-sound\"><a href=\"#making-the-player-emit-sound\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a><strong>Making the Player Emit Sound</strong></h2>\n<p>If you attempted to set up a level now you would see that the PatrolCharacter doesn't react to the PlayerCharacter. This is because the PlayerCharacter needs a <code>UPawnNoiseEmitter</code> component to be able to make noise that the PatrolAIController can hear.</p>\n<p>In your PlayerCharacter header file you need to add:</p>\n<pre class=\"language-cpp\"><code class=\"language-cpp\"><span class=\"token comment\">// The NoiseEmitterComponent.</span>\n<span class=\"token function\">UPROPERTY</span><span class=\"token punctuation\">(</span>VisibleAnywhere<span class=\"token punctuation\">,</span> BlueprintReadWrite<span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">UPawnNoiseEmitterComponent</span><span class=\"token operator\">*</span> PlayerNoiseEmitter<span class=\"token punctuation\">;</span></code></pre>\n<p>and then in the cpp file you need to set it up in the constructor:</p>\n<pre class=\"language-cpp\"><code class=\"language-cpp\"><span class=\"token comment\">// Create a NoiseEmitterComponent so that we can make noise and have the</span>\n<span class=\"token comment\">// PatrolCharacter respond to it.</span>\nPlayerNoiseEmitter <span class=\"token operator\">=</span> CreateDefaultSubobject<span class=\"token operator\">&lt;</span>UPawnNoiseEmitterComponent<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token function\">TEXT</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Noise Emitter\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nPlayerNoiseEmitter<span class=\"token operator\">-></span><span class=\"token function\">SetAutoActivate</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre>\n<p>Also make sure that in the cpp file you have the includes for it:</p>\n<pre class=\"language-cpp\"><code class=\"language-cpp\"><span class=\"token macro property\">#<span class=\"token directive keyword\">include</span> <span class=\"token string\">\"Components/PawnNoiseEmitterComponent.h\"</span></span></code></pre>\n<p>Now whenever you want to make noise, you can call:</p>\n<pre class=\"language-cpp\"><code class=\"language-cpp\">PlayerNoiseEmitter<span class=\"token operator\">-></span><span class=\"token function\">MakeNoise</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1.0f</span><span class=\"token punctuation\">,</span> <span class=\"token function\">GetActorLocation</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre>\n<p>Which will make noise at the current location. The middle parameter, <code>1.0f</code>, is used to determine the loudness of the noise and can be a value between 0.0 and 1.0. For a reference of how loudness works if your <code>AIHearingRadius</code> is set to <code>1000.0f</code> and you make a noise with a loudness of <code>0.5f</code> then the PatrolCharacter will only hear if you're within a <code>500.0f</code> radius.</p>\n<p>For the demo I would set the above to happen when an action key is pressed so you can observe the PatrolCharacter walking to a spot where you made noise at. Afterwards you can include it in your character's walking to simulate the PatrolCharacter hearing footsteps.</p>\n<h2 id=\"testing-the-hearing-sense\"><a href=\"#testing-the-hearing-sense\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a><strong>Testing The Hearing Sense</strong></h2>\n<p>Go ahead and make a decently sized scene and drag out like 3 or 4 Waypoints onto the level. Make sure that the box extends of these Waypoints is a decent size that can capture the PatrolCharacter. Then drag out your PatrolCharacter and in the details assign these Waypoints in any order to the Waypoints array. Also make sure that your PlayerCharacter is set as the default pawn so it'll spawn when the game starts and make sure they're not near the enemy so that you can observe the enemy patrolling to the Waypoint. Lastly make sure that your level has a nav mesh so that the PatrolCharacter can actually walk around.</p>\n<p>If you set it up correctly and play then you'll notice the PatrolCharacter moving towards the Waypoints one by one and if you go near the PatrolCharacter and make a noise then they'll immediately stop patrolling and go investigate the noise. Once the noise has expired (after the <code>AIHearingMaxAge</code> has been reached) then they'll go back to patrolling the Waypoint that they were on the way to before they got interrupted.</p>\n<p>As a challenge you can try having another Actor emit a noise such as simulating a rock being thrown, just follow the same instructions as what we did with the PlayerCharacter and make noise at a specific location. You can even modify the last parameter in the make noise we used above to make the noise at another location but be aware that it's in relation to the PlayerCharacter so you'll have to add/subtract from the PlayerCharacter's location.</p>\n<p><img class=\"g-image g-image--lazy g-image--loading\" src=\"data:image/svg+xml,%3csvg fill='none' viewBox='0 0 876 387' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-5ae1a365ddc8207087ee4aae6c7c5d2f'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='40'/%3e%3c/filter%3e%3c/defs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-5ae1a365ddc8207087ee4aae6c7c5d2f)' width='876' height='387' xlink:href='data:image/png%3bbase64%2ciVBORw0KGgoAAAANSUhEUgAAAEAAAAAcCAYAAADRJblSAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAU/UlEQVRYw01Y91dUWbr173gza82sng4GJBZUjlQBRSgoMihBBHNAMKGioiICIkFEW1BBEUVAGwmmabTVtpPabQJEcs6gbU/PTPe8/fa5Zb/3fvjWuXXvperu/e29z3dZ8O3Tp2j75iEePX2MZ6/b8bj9GX7seIUXXZ3ofNODrq4%2bvO7qR9ebIbx%2bM4w3PaM8P4b2rjG8fC3WCXR2T%2bJN/zT6hmbROzSHju4JPH7Wg5u3H6Li3BUcOFyEnXsOY/uuQ9h/MA8lJ04jJ78EXz34AeMTbzE4NIXhkWmMjE5jdHRGWsXnoeFpXpvGwJDjeHTU8bm3fwp9A1MYGJxC/6BjHRgS5ybR0/%2bh%2bibRzXrD6uzhM/ZM8rkm8bp3Ci86RhAWvR6Llmqx4Muer3Cl7yoae1pwpfcqLvfV4%2b8993BtoAkve9rxurMHT398iZ%2bePcer9k6S0Yv%2b/iE%2b4DgfdApDI6Po6R3B02dduH33e1y41ISC4gpk7M3Fpi27sW7jDmzdmYVdmTnYsfswCcjH8bJyZOcW496DxxgjAQLc0MgMxsZmMD4%2bizFRY4KIGf7OjOP68Ix0T/8gCRgQYEn4oIMcUX3S%2bRn0sLrZjB6S1N0nakIioqtnDK862cTuEbxs7yUBa7HYWY8FHa%2b70UdA/f3D0vr6dS96uvvRyc6/ePUYb7rrMDDQzGuN6B%2b4xQ7cZDWhvaMG33xXi6aWo6isPorC47uwffchbNm%2bH%2bk7srBt1wFsy8gi6IPIyMzGnv15XHOQmZWHE6fO4lBOIR48fIyZmZ8xOTmLqak5TE3OYWLCQcDo2CyGR2cl0EMjsxgYnpVAD42SsNF36KfS%2bgYJtneCDSDI3nE%2b85CkVNGQru5BdPcM8vkH8OLlazx73sHV0cCXr14jNHIVlrgYseBVexd6egZ4Yx/6%2bgYJdJhAuzE42IqhoWaCvc4vusovqMM3357CtcajqKpOR9HxVALKIOCDSGeHhby3ZeRi647D2LU3j8Bzkbo1G1u2ZSNt%2b2GkbjuAtRt3IillE3aQnMNUwP2H32Nu7j0JmMP09Dymp%2bYxMTlPW8xRAYIEqoKE9PWP4fTZS6iovIwbtx/g4TdP0d7ZK4Hr6htG99AYbTGM5y86WR3ofN3DRvZIYH961o4fHj8n6C7pc0/voHSfLTQJTq4mLGjvfMOTA1L3R0bH%2baOUT%2b8oBDH37t9B682DuHBxI/IKEpGVvQ1H8otw%2bEguP29BfmEaKwOlJ1NxtHAN8o%2btZGeTse9AEjL2xBFoNDZstmPtBiti4oKg1ofBVWaCp9IP2zMO4v6Db/l7kyR5lICnMDIySbWNsgEjrFHmzyA6Xnaxs7383hIUFJ3CqYpqnCyvxpnzl3Guug5Pyk7jZUYmnrQ9lMjopGVftXeThF508FiQ8eZNP5s4IBEgVkGSzb4CTm4kQHRddP/HZy8pyR9wqbYcZadSUVi8hj%2bahpzcHHY7F8WlefRuKXLzy5DNh9l/KAWHjoQjNiEJ0cujEGS3wRoYAIvVCoPZh2WGj78ZZj8/WFh6kz%2bBB8JD7gcXmRnWoDi03XvIbk9JmTI4NMKH6yP5w3zQl/j%2b8RncvpSDpuPpaGs9wVxZi%2bLj6/B5xXZWNk5/vhWFZYdwIdqImzpvnD5agqqaOly9eh23brfh/v1HePL0Gbv/FI%2bf/ET5d0iEvKa1nz1v5/Mm0ALMgPIz1QR2Bjl5JQRcxLDKwu692wlyN/bsXYd1GzYjetlGemY1gsNWEuQyBNjiYfLxh9HHAlfPAFYgZIoQeKrs8FKHQq62SyVThrCCeU58DoFKL875w83TzPsDSHYjvT9D9Q2y48K/lPWbPvRSka/aX%2bB6XhHq0/ej7VIdjhTkU2FHcaaqEqcrTmNn%2bRVsOXsVxQWFOLb3MHKOlbFZxVK4HskvJqYKXLrSiL%2b3PcC33z3FM1qhvaOb9YakPENgSAJDUIcFIrBEMu/YRS9vP4BVa1exIrAsIY7ds0Op9eYD%2b8FD4Qc3Lx8e%2b8LVw8xOBrBskGuCpFJobVBobJS5HSqdXTrnpQ7kaiNwgteFQG0Ilb7HhTbwUPjjfHUD5mbfcXubov/p%2bdFJ5s6oZInhiRmczirAWrUVN%2bqbcaToJHOjCCVlZ6nQSoQWN0F59DZyPq9FfhHB51GdRx11tPAEySqlQoupnNMM3Spcqb%2bOtrsPqYqXtN53VOByLBYKMPvEIDAgAf7W5bAFJUGrMcHH4gKTUQkPd8rW0x8KBQGykwqlDV6qQHixi16qAAIMYGcdBEifeU2hDZaIEOeVPFbpQ6HUOQgQCvDk37p4GCUCyiurMTQ2gNYvb%2bBCbS0/V%2bHUmfOoqKjBlcoGlGbnYENQDMqPliM3Kx%2bH846hsOQUykrLELWvAoGZJcgprUDesVM4KhSQfxzZRwqRRzvkFxwnYSUk45RU2zL2oeFakxSCT54%2bpwXiaQEDFixS6bDQpMVikw6LvbVYajVjoc6ERQY9XP2McDNRAb5muPuy%2b5S8jAHmqbASoE0qAVqmdIAX4ETJeN1D7svVTzoW5CgklQRjqZteKvE3p8%2bdR/dgF8ovlSPvXCZqvj6C2q%2bzUFOThMb8fXh4thD3ygvRlkfQG7Io7wKUFJdi7dGLCCmtQxRtYMpvwc7cz3GssAx5hSe5HZ9GARWQRwLyCoQSTkqVujUTjU23OFdM4MefOhAQHM8Q5DbobtPCeZkKTnaSEKXGkmg1FvnJ8VmYDItiFVgSoYFzqAFLIw1YEqORgAkCBDABQqyeXN153sPL9wN4PwcBLC%2bl47pDHTYJvJObDu6878LFBkp/jlvuGHeBcQbiACbmWtDxqAoNB7fiUmYqc2AHLmaux/UDB3BgWxYSU7ZgZUk5Yi62QJ/XDPmOMwg5UIVVa7YhafU2Xk%2bjfddjecIGxCWlYvmKVCQkb%2bE2nUYFVFMBr1FzpR5671A4e3hjgSXQApO/L9xVLKUv3JQWLHYjEe4auHgZ4e7Ozrv5wN3NTzp2ZYILoAKwJzv7R/1hAQFe3CNX/58ihB3ENWEFNy8Llrrr%2bfdWnK26zKGHI2svZ5CBAfT2PeIEV4dbp3JRk5eJCxl7cOPIEVRkr8W5Q2uQGrkWAWEmRDCznFYVQbMmD57RGVDvKIfGL07KGJ05CkpaTecdCbN/AnwCkhBgT4a3XyBS0/dyC71JlZxkiIc5FOAUbIHHevp8TRBXdm2TBc6RRixJVMMpWQcvnaNzci1BSMHmKA920E0iguHo6SOVOBbEuMq8paR387TAncEpgk9GJQgChAKWuGjgxvuqLtRjdmYew0PjGB4YZ/h9jfZnDWgtKcC392%2bgJGMlylIjUHIsGqWFy3GBighNYO5sLYXP/s8RnFsB68qt0GdeQFDyPso6GcGRG%2bFrS4I1JBmBYatZa%2bATFA%2bFSoGVmxJRWHkMRWezYbKGOAgIiwzH2vVbkLRyO2WzCfYw%2bpXeVmmCoTHaoTaxjKESu1pTuMSwluxqTRE8Fy6VxhjBgAsjQDvJCmEoBlMVgVKXXUmSkNoSV71Uny6Rs7ywiMflVRcwPjuGjv6XeD74A7qma9FatQ/1FTvQOd6I0yXrkLXFCa1fLUNDowXntyYicdsmxOZmYE3RAaQcO4TorAPwPlgH24pdnO7WEHgKwS0j6ERHBa6ANSIGK/I8saFChiNfq1HWboAxzAInFw5CcrWREvVjd/2hFEGl9ueDWyTvanVh3BUIkvu4mt3TeodBYwqXyBDbnSgNj0W6Kz6kvEh9jTFcKkGSzjuKpEVLxOktMVSSjaSYoTRGoaAhA9//Wog7k3vROr0ZD39JRsvlWNx%2bEo2279Yib0MKDq%2bOR03xZlytD0VGdCj8YvfBbX0xFu%2bshsuWcmizGmDaWQFL8EpKPg4G31joLBEkIQZGazRnlXg2cRnMKQbsbVXgi7dG1E1ZYIn2wRJnEvBnlSf%2bHOyCj4Ld8XGUBz5ersTHAWqGIMMvyohF8WosXKGBU4SZpBAsOy7AKvUO4GKfV7LbKuFxccxzSl2wo6RtMIRkhEmeNHDL9eAu4uJl4kPFIu%2bLZDz6LQ1336bh/vt03J3fjhtfrsDjoVC0nt6LbyuO4%2bvKQnx/7jj2rd6AFI6v1tXZUGwqwtLtZ%2bG1qxLm47dh3lsFrYXKNJNwX7HaSX4UZOoImCODseGkCeXtWoL3xtU5My6NeUNtU%2bBvn8qxIKVMg6hUSiY0Ft72KPhGaRCb4oKAaBkC45chYuNqhKREIzxZjvgkHQJCbHyVXMdkTeMYvJmJuwny2LVwWrYOMm%2bSo3aEnaOCpa1PbaBSjKESEXJtIP1vhsoUjfwv1uO73/fj7twefPV%2bN%2b5N7MbnBzej6Voazh9eidLNK3BuYzpy4lbi%2bKo9yI3fiMCgFXCLSof7lpPwXF8A2Z4L8IpOg0LPucMoBjM7nGX%2b0IeZkX7OiJohb9z53R%2btvwThi9kgNM774zIJ8LS64U9/ccWCWkqiZtwXmdd1CF3PFxWVF2QyOXR6HUwWO/zoJz//MBjN9I1Fz05aYfTl8GRPhCWAxFlj4RUYBxmDxpOA3cVWKAYlSQ0OW4gQFVOhIELMEa5ybz4sCWhcRwIy0Ta/Ffd%2b3oK2mTRUlG3E5RP7cGljAUfcFE55IShdsRP1u/KREZEMHy13lqR9UGwshHr1IWiza2lhbr0KGxa6WqAJ1RO4BrWjBnz5Hx/ceO%2bHxlk/XJ%2bzonEuGE1v7WiYDoR3pJ80qi8o7XNGaf8SnJl0QtnwQuy65QT/zS74ROaBjz7VcFw08oHNLEqXI7GbSH0muFgFUA%2bWglugUuWYCt0Vjm1Q7AbSKCyNw2JaDJTsIMbgpTIDFIZIHLm6Co/%2bvQdtQgFvqYCft%2bLO1HrU3VyDkvAtuNa0Gk3DYShZtgGHlq%2bGQc8BTGuFftUBqGLSoEvcAXP6cSzx8och2oSMGjMaJv1x979DcPN9KJpmQ9A0L0AH4vo8FTATglu/BWPdCQaghx9VE8yXoRF3nBmV4dyoHOfHlah9p8SV9woUPZch8ZgM8iANPnM2SoHhLucMr/SW5gWZyiqNwp4shZC6ziF10W3HtucvzQdi/ePYk2Qs4RC02E0DOQP2YF0i7v66Ac3TCWidi0XTTBhafw3Gtb4wFCWmIH0nQy/JguywBMR42/FfH3MwczJjceQeOKfkcHqNhyGzErsbonF9NgD3/hOOmz9HoHk2Ai3zrLc8nreTgABcm7Hi9u9W7KrX4SMXvsBxh1KwIQvOjCpxdkyDc2NaVI3pUTVqxPkxE2rnGBi/mnB2SIP0y0qYEtT4xEWNjz/T8e2Pb3NqH5a/xKJCZyM4f8dL0QcyhPzFbiGyQMwPAryoxa5aLHRR8m9DkdcaiW%2bwHDffRuLGfBRJiMCNd3a0jkThwvZ9KKuJQWGbFaUp6ThWkoDVxTIs3%2bEFw3ob3DkVbq4OhankBJrfxePOL3YJeCuBt74V4MPR/NZG8FZ23opb//bH0Qd6fMb5ZaFHMAnw%2bYMALc6O6kkAwY8bqAIjLkyYUD3ujeoxM2qnLfjiH1znDDh8T42QbRyT5V74eJGBcvaB0hAkBZCXhuOwwsehDI1D9kq9YxcQZEhDFNUh7OPkoScZIUjODsaZVzY0Tgej7Tc7vvpPCNoQhFtdyShO2Isrj5bhznwIChJ3oenOBtyGJxWiQsOMAQU/puHmP2zYczcLDRMxJM5K0DZWEItkvA1lMfRmA3Hz1wBUdBjgarHgUzc7FvH13YWDm1wnWcCLBGglAirH2P1xEwkgeNbFSRNqJo24SGIuT%2blx7b2OZKhR%2bkKOhHwPuFg88NfPVJzszNIcIfzpqfGXyBAqkKZHteOtUZwTOSC2waUyo7QbuKgisETLmSLCF7F7/ehhCyo6zWh8noiWjHP44uvVqH9DD%2b88g%2ba7m9H43ogWArr9PpISXyWl%2bZ3369nxBIIWBASygj90P4K2CEfr%2b3DUjgfAO8EGJ0UcXHXRXMNJgK/UFBLgwQyQ0wZaEqChCtQkQU0S1KieVJMENWqmtLgkakKHy5MGXHunR/O/dDg/rEbaRRk0MTJ8tFSFv33Gt0l3AzxoDy%2btgwgxAv%2bRFwK0GLIWu2lpAQaa9zJ4WlLgouGrqWIFFsoj8SltEhQTiYbd%2bbj2IgaNI8G4kpmDlo5E3PynFTfehlDmawh6OWpG1Qy6VJ5bTdA%2brFCH72mppjmSMB%2bO6%2b9sCN1qg7MqGXKfJMiMK%2bCuj6cF/P8gQEUCNB9UoEDluJwkKHB%2bQkkVCAI0VIGGBOgkFdRO61A7ZUAtlXGVtmj5lxENb3XI/lKOgM3cOdw98Ke/emKRs47dNlMRQhWBUlgKayx05qC1xFPKDC8OQ14%2bKyH3TYTevh5K37VwNcVhV2U46kp2oXmMgKZDcPn4TrSMhuLGL4EEHsQiET8H4Oq0kd2NpfzjJLk7Qo/g58Ok7t/6lx1Jef5wUiZB4bsSHsZEgk%2bAuy5O2tFkKn8SMKxBxYggQPfBBmoHAeMqqkD1QQVakuBQwWUBftqAK9N6lglXaJN6erKFgdnyTyNOvlQjPlcJN18t/kJFfLJYyx8zkAShiiAs5fGnS2WOENVHw0WbREkmwsO0lvNEPPZdt%2bKr32PR8mAbbrCLrawbT1LROstwfCcIED4P%2bCD3IFxk88RW1/I2Wuq4AN84E8HhJxRplb5YqlnBzifD3ZAgdd/DwEFKu5zDkmMrX3CaMq4Y0X5QgU7Kgapx3QcVkIAJjcMGEgF6EqCTVCDA17EDdQRfP2NB/bQfBww/NL8PxK3fgylPX2yrMcKw3ISPnA346ydqOHuauAvoOYG5S8Q4c/fwjo9CwqEQHGqOwNkOG39Lhbpx%2bnw%2bgcMLAb8LxYN/rMOtdzEEGfIh4cOkjt/gtfpJO65MiPsiCD6SoReOOwzUQzf94WYiaBNl770Cnt7JcNNR%2bto4EhCHpR7i/5kWLPh8WAVhA0GCQwWCBAMJMH5QAa0wKUjQ/T8rUHqi%2b9Nmgg9gKttYgbjKgLo6E0wibLjOLt36jcMH19x7ZgSl6rFQYYCT3gXWNQuRXqlA2RM/yjgQd/4djC9/Y9d%2bjaZ3Q3BtnNvXZBi/x5cvLt5ongzFrbm4//W41G2S0czvFt2vHvEhWSEsO20SgeM/cEDzDSf4Vex%2bCrvvkL7MtJJrIlzUsXwV9uZbqgn/A7%2bZVphGWaelAAAAAElFTkSuQmCC' /%3e%3c/svg%3e\" width=\"876\" alt=\"Testing\" data-srcset=\"/assets/static/testing.82a2fbd.7a3f36bec56885f4d37e9a6597d6a813.png 480w, /assets/static/testing.3acc6db.7a3f36bec56885f4d37e9a6597d6a813.png 876w\" data-sizes=\"(max-width: 876px) 100vw, 876px\" data-src=\"/assets/static/testing.3acc6db.7a3f36bec56885f4d37e9a6597d6a813.png\"><noscript><img class=\"g-image g-image--lazy g-image--loaded\" src=\"/assets/static/testing.3acc6db.7a3f36bec56885f4d37e9a6597d6a813.png\" width=\"876\" alt=\"Testing\"></noscript></p>\n<h2 id=\"conclusion\"><a href=\"#conclusion\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a><strong>Conclusion</strong></h2>\n<p>Hopefully that cleared up questions anyone had on how to make an AI respond to sound and more importantly respond to sound without the use of the intensive checks in the <code>Tick</code> method. Also make sure to check out the <a href=\"https://github.com/robertcorponoi/unreal-cpp-patrol-ai-with-hearing\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">repo</a> for a full sample.</p>\n"}}]}}},"context":{}}