{"hash":"93b0f6f9f59da46b21d55fac1c76260fc0c2459f","data":{"tag":{"title":"godot","belongsTo":{"edges":[{"node":{"title":"Creating a Loot System","path":"/creating-a-loot-system/","date":"24. July 2020","timeToRead":25,"description":"Learn how to easily create a loot system for enemies and chests.","cover_image":{"type":"image","mimeType":"image/png","src":"/assets/static/chest.c521340.dec358a6bf7cb7fed011d4e39cb34716.png","size":{"width":850,"height":604},"sizes":"(max-width: 850px) 100vw, 850px","srcset":["/assets/static/chest.a67b0b2.dec358a6bf7cb7fed011d4e39cb34716.png 480w","/assets/static/chest.c521340.dec358a6bf7cb7fed011d4e39cb34716.png 850w"],"dataUri":"data:image/svg+xml,%3csvg fill='none' viewBox='0 0 850 604' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-40af2268e2dfe4871592795e26ffcc9d'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='10'/%3e%3c/filter%3e%3c/defs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-40af2268e2dfe4871592795e26ffcc9d)' width='850' height='604' xlink:href='data:image/png%3bbase64%2ciVBORw0KGgoAAAANSUhEUgAAAEAAAAAtCAYAAAAeA21aAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAJaElEQVRo3u2X%2bVMVVxbH%2b3/JhH15G29hExUQtyDiHmURgQfIFozLjGilBjURoqKSMZXJ1ERTxgVxi4JixklMohNnfpjRGsQddSTqVCaymKmo%2bc45t2%2b/1930AzUVmSr94VP33HNvn3O%2bp7vv66fsvdAHA133saerT6K3CVrfLbg/lC4juwx8b2B3Vz8%2b6foXcVvY5vVdpusNsS%2bEQq3PUK%2bsf2%2bXSSPRKlH2dd9Ha3fQoRHcfD%2bAGtDUlCHN6RumSI0BIV40gOyR9/eFEGgUyzcvWK9RaIBuFda9j/YpbTRp44mZC9wYgscnaI5guAYZ7soA3dnbRK%2bwn%2bQaozij0FZLVA1mXW0B%2bgTK/ot92N8dpG0IFs2RqM2xblKr%2bdXSFd0q7vptuqO9wjYLCnn3pDA9VnXpBWroNQrNxAFCOXixHxoHDMiN3SM1SGXfMI3SP1UqLPo20SvsoH/kGG3D1BBKpF6XXu8hbsDhS33QOKSHFg8KQjVI1ySLRg33RO3vHqDXq1fAdlsIYZYxQwgzi9MEHjLpCurtFyhHLvdDz6eXjBwOELpRVs0yc4CKF4h9g2i72Et8K2whxrAeOo6WbyRhZh1mnUclSseVAWi0C/rRflnlqIkhzbJo2NDGcdH3cYRjX3sg7MPijt0WsH2o%2b3uKN4CjVx/QvE9Fd32oHEcuhxamoWlpl/o6TCidVwegcdzEMeZKkA4L2vVctm5e542H2PP3O/jozHV0XP8vjvc8RnvPd8R/cKznETpvPkTruX9jxzc30H71B3Rc%2b2GoACEitJCOK8ZaBRaaOk0of7o2CD2fWXDi2gBOXDXSacFxqyZS0R8easeKDw%2bitnkHNu/Yjq2f7MHmnWTv/Bhbdu7Ce7t2Y3XL%2b6h67wCaPt6L/X%2b9hBM91Ci6diQBnaa6RK2EWYNZ50nm%2biCUL3oeIMggPmeuG/mzBSfNyKDBJAM42UN388Jd1K9ZgaqNH6GuqQUrVi7GsvoaLJeodhWWv7UM1S2tqF5dj9%2b3HcCpXuCzq/3Ggq8NzWtV2%2bcWsDaVoN5ThPL1zQcQ3DDyVQi%2b1NNj5JSOLyjpV7d%2bxLHzt7C0vg7ljX9AZUMTlv2mSsyX1r8hUe0lK2lP0x9RUb8aLTt24My3P1GMAYo1aIhrzqnVEqrer60gvaclytlbD6Dnm2H4y80n58yNQZztfYgT52%2biss6PkjXbULaqAdV1JahaUo6qulKJH9VLyshXgZJ1H6Bo6a%2bx6YP38bc7P%2bH0jQGceYqcos6b1rWfDYFy/t5jnL/3CGK8%2byho83g3aJ%2b7q9tzV87laMU/7jzEP78DTl%2b%2bh/IaP%2ba9sRr5NUtQUrYAJRVF8NdUwF9bgdJqak55AYrLF2L%2bm7/FvFI/frd9O%2bjTgGL8aIip1XEuUKe%2bxscW9er26NYC%2bwnl7Q1b8M7GLeCxcVOLtDeL%2bXqai3Vpr2tqFmvr3pWjnL/9rrQDY7MY16zfiLWNzah9sxZFpfNRXFYgGrCoshx5KzdhQX0z8pc3kD9frC3y5wt7dcM6rOXrGzeKGGIkGtZvIP8mYa9t3CTgPFouzt/wzgZR33qphWlsbsGGLdvI3kr%2brWLUUGbPmom5c2ZjZu50zJ45QzBrxgzMoPnMGblyJB/5p%2bdMQ25OjvDnTMumeQ5yp%2bcIH895L%2b9R13ichuypryG/8HX4KxeitKIQpeUksnoxFqzaQrSgYPka8hWoa5LcXIqXnS2un5atxuI8HJdzcR5eY5/ISbZWL69z/axL882ZPUvVRcybO0fYvMZzZdLkKdDImjgJEydNpnEyjVOQMWEiMjWyJol5emaWGDMyVTudxvEZWRiXPgFjx2cG4Dn708ZlYNbcmSirLKJHvVCILVlcJJqwiCiu9JOvkF4LVTzvyaQ6tBiBmOnqOD5DjcujyJ%2bhkiFqUWtLpzWul3Vw7ROkzZo0H4%2bTp0yFkpQyFt6kMfAlp8GXkgYvjTz3JqXBI/2a7U5MFTaPCb5UuLwpcHqSVchmn1iT6%2byLd/owJWcqNYDEleWRwHwiD6Vl8yULpC9fPB2LSheIXHZ3koghsMjn8mn5xgRq4lHUHtCg2j6JpicpdSySx4wTKBzMIQU4PSlBWybjQmwJKvGuRMS5fIhzqvDcRut2txqD7TjyxdIaw3ZUvBsT6bEsrS1HUWUpvf/%2bkBRX%2bVFQVgwH5Y5xeA1xOL9d1KPWJGpxBmtR98h9tK7X4XCrNjfQod0w1k1%2bhS%2bMl0Vz0mjG7kGUHpsHkTZ1jLZ7ESMTxhJs855IscctR7mf9oZF25E%2buxgFb23D/JXNdPBttmblZuSt2op5y5sQ50lFRFyCLq4W2y18MQ6fyK01m2vW9kbZTLUTvM7atLo1zfHULIXvUCQRZUGkbi2GxMRyYoJtsU5FcqE8ansjtTkLoPmrUQ5kZOeiuG4JCquqsbC6JiRFNbXIr6ikApMQHusyxQvGj9DFjybBsQ61NnEDuQGilgRLXXpNvFfxxnvBeASeAF6bF4n2RCQ6EuElEu0%2bsccd51ER%2b7zDQzFc0QmYOjELi6sL4a/IQ1lFvo48g12%2bmH4hSl5HojNJ5BgxfrwnUA/PfVQjk%2bRQ6/bZgjUHdEm9mmYljDqpEc7d4ceGHymCbfYZ9%2biIGwF%2bAuhOOujAGpdFvwiZE5A2geCTfDKd6NmvCVv4aG0sjSnjMxBhcwdzjZhDxVxjhHwFNS0812vRrlXE4yDfqxjtXSKfloAftwiaB4hzG%2bfDIa8Noya8Eu3ErySvRDoR4bQjIjFN2AG/HAM5nyaXqcZA/fHquSTOLnkW8DkRITUq2gESoRMdbhJtnj8N5mv5IAunAmM9LsSmjqN3XfWNdN2z5jM/MeoN9wYOfCWU6J8rPDQJQnQMNSCGvkHCY3%2bJHE/WDPYpz0f06DRgJF3iFXg%2boodrgPs55h7aEOX5J9c3gM6AmATDgfm8Gb0GuB2ISR5DP0WJJN41KuJHsQH0s5tgR0xSKsJtKaPbgBE/NH4BwugJiKYGRCelIMyWTD4nRqMOcQjq/7w8KdqHU7T25%2bkpUD%2b2fLB5XYinv6VRrjT6b8F/WJ4t3s9F4S%2bkp0L34fQsqB9C9AeGzoDYZHoF7Cn0cfIivQLx6iugnQFhdAaE0xkQHucenVdg1H4F/l8OwVFtAL8CdAi%2bmA3g7wCfD%2bGOsS9qA5z0NUi2K/0Fb4Az/eUT8LIBLxvwsgEvGzBaDfgf0OTBFGlzKt4AAAAASUVORK5CYII=' /%3e%3c/svg%3e"},"content":"<h2 id=\"getting-started\"><a href=\"#getting-started\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Getting Started</h2>\n<p>If you're making a game that involves the player killing and looting enemies or looting chests then you're probably wondering of a good way to create a loot system for it. There's a couple approaches to this. You could of course just have an array of items that the enemy or chest drops but the problem with that everything has the same weight. Imagine that you wanted a monster to drop some coins and maybe a piece of armor but there's varying levels of armor. You want the boss to drop a low level piece of armor most of the time you want to give the player something to work towards if they want to so ever so often you want a monster to drop a higher level piece of armor. In order to accomplish this you'll need to create a loot table with weighted options but it's actually easier than it looks and it can be done in two parts. The completed project can be found on my GitHub at <a href=\"https://github.com/robertcorponoi/godot-loot-system\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">robertcorponoi/godot-loot-system</a>. Also this article was inspired by <a href=\"https://www.codeproject.com/Articles/420046/Loot-Tables-Random-Maps-and-Monsters-Part-I\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">this</a> so check it out to see a slightly different approach (in C#).</p>\n<p><strong>Note:</strong> While this article covers how to do it in Godot, this can be easily ported to any other engine as its just 2 simple classes.</p>\n<h2 id=\"part-1---the-items\"><a href=\"#part-1---the-items\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Part 1 - The Items</h2>\n<p>The first things we need to do is create the class for the items that go in the loot tables. For this, we need to decide what basic properties all of our items will need and it can be boiled down to the following:</p>\n<ul>\n<li><strong>probability</strong>: The single most important part of our item is the probability. This is just a number, any number you wish. A probability of 1 is very low and chances are the item won't be rolled often while a probability of 100 me\nans that item will probably be rolled more often. An important thing to note is that this is not a percentage so don't think of it that way. Probability can be 5 or 4500, it's all relative to the probabilities of the other items on the loot table.</li>\n<li><strong>is_unique</strong>: This is used to indicates whether an item is unique or not. If an item is unique then it cannot be rolled twice. For example, if you have a piece of rare armor on your drop table you don't want it to be able to be rolled twice while on the other hand you might a drop of leather boots to drop more than once.</li>\n<li><strong>always_drop</strong>: This indicates whether the item should always be rolled. For example, your monster might drop bones and that would be a drop that always happens.</li>\n<li><strong>is_enabled</strong>: This indicates whether the item is currently able to be rolled or not. This enables you to enable/disable drops whenever you wish.</li>\n<li><strong>item</strong>: The data of the item to put on the loot table. Since there's so many ways to represent the data in your game it all gets set in this property in any way you wish. I personally prefer using a dictionary with the name and stats of the item but you could also just change <code>item</code> to <code>id</code> and use and id that you can check against a database when it's rolled.</li>\n</ul>\n<p>Now that we have our item's properties, let's put them in a <code>LootItem</code> class in a new script named <code>loot_item.gd</code>:</p>\n<pre class=\"language-gdscript\"><code class=\"language-gdscript\"><span class=\"token keyword\">extends</span> <span class=\"token class-name\">Resource</span>\n\n<span class=\"token comment\"># A LootItem defines an item that goes on a DropTable and it contains an item's</span>\n<span class=\"token comment\"># properties and it's chance of being hit along with other variables that define</span>\n<span class=\"token comment\"># how often it gets hit.</span>\n<span class=\"token keyword\">class_name</span> <span class=\"token class-name\">LootItem</span>\n\n<span class=\"token comment\"># The data that represents the properties of this item.</span>\n<span class=\"token keyword\">var</span> item\n<span class=\"token comment\"># The probability that this item will be selected.</span>\n<span class=\"token keyword\">var</span> probability<span class=\"token punctuation\">:</span> <span class=\"token class-name\">int</span>\n<span class=\"token comment\"># Indicates whether this item is unique or not. A unique item will only drop</span>\n<span class=\"token comment\"># once per roll.</span>\n<span class=\"token keyword\">var</span> is_unique<span class=\"token punctuation\">:</span> <span class=\"token class-name\">bool</span>\n<span class=\"token comment\"># Indicates whether this item should drop every time or not.</span>\n<span class=\"token keyword\">var</span> should_drop_always<span class=\"token punctuation\">:</span> <span class=\"token class-name\">bool</span>\n<span class=\"token comment\"># Indicates whether this item is eligible to be rolled or not.</span>\n<span class=\"token keyword\">var</span> is_enabled<span class=\"token punctuation\">:</span> <span class=\"token class-name\">bool</span>\n\n<span class=\"token comment\"># To create a LootItem we need the item's data, its probability, whether it's</span>\n<span class=\"token comment\"># unique or not, if it should always be rolled, and whether it's currently</span>\n<span class=\"token comment\"># enabled or not.</span>\n<span class=\"token comment\">#</span>\n<span class=\"token comment\"># Arguments:</span>\n<span class=\"token comment\">#</span>\n<span class=\"token comment\"># `u_item` - The data that represents the properties of this item.</span>\n<span class=\"token comment\"># `u_probability` - The probability that this item will be selected.</span>\n<span class=\"token comment\"># `unique` - Indicates whether this item is unique or not. A unique item will only drop once per roll.</span>\n<span class=\"token comment\"># `always` - Indicates whether this item should drop every time or not.</span>\n<span class=\"token comment\"># `enabled` - Indicates whether this item is eligible to be rolled or not.</span>\n<span class=\"token keyword\">func</span> <span class=\"token function\">_init</span><span class=\"token punctuation\">(</span>u_item<span class=\"token punctuation\">,</span> u_probability<span class=\"token punctuation\">:</span> <span class=\"token class-name\">int</span><span class=\"token punctuation\">,</span> unique<span class=\"token punctuation\">:</span> <span class=\"token class-name\">bool</span> <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span> always_drop<span class=\"token punctuation\">:</span> <span class=\"token class-name\">bool</span> <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span> enabled<span class=\"token punctuation\">:</span> <span class=\"token class-name\">bool</span> <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n\titem <span class=\"token operator\">=</span> u_item\n\tprobability <span class=\"token operator\">=</span> u_probability\n\tis_unique <span class=\"token operator\">=</span> unique\n\tshould_drop_always <span class=\"token operator\">=</span> always_drop\n\tis_enabled <span class=\"token operator\">=</span> enabled</code></pre>\n<p>Just like that, the first part is done. Notice how there's nothing fancy in the <code>LootItem</code> class, it's just a collection of properties that the loot table will use to decide if this item is rolled or not.</p>\n<h2 id=\"part-2---the-table\"><a href=\"#part-2---the-table\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Part 2 - The Table</h2>\n<p>The loot table is what's going to be rolled and will decide which items should be rolled. Let's see what properties we'll need out of our loot tables:</p>\n<ul>\n<li><strong>name</strong>: While this isn't necessary it's nice to give some context to our table (kind of like the item is defined by its item property).</li>\n<li><strong>num_of_items_to_roll</strong>: This is the most important part of the table, this lets the table know how many items that it should roll for.</li>\n<li><strong>table_contents</strong>: This is where all of the items in the table are stored.</li>\n<li><strong>unique_drops</strong>: We need to keep track of which unique drops have been rolled because we do not want a unique drop to be rolled twice.</li>\n</ul>\n<p>Alright that's all of the basic properties of the table to let's set up the basic properties and constructor in a class named <code>LootTable</code> in a file named <code>loot_table.gd</code>:</p>\n<pre class=\"language-gdscript\"><code class=\"language-gdscript\"><span class=\"token keyword\">extends</span> <span class=\"token class-name\">Resource</span>\n\n<span class=\"token comment\"># A LootTable defines a table that holds one or more LootItems and it</span>\n<span class=\"token comment\"># can roll to return one or more items.</span>\n<span class=\"token keyword\">class_name</span> <span class=\"token class-name\">LootTable</span>\n\n<span class=\"token comment\"># The name of this loot table.</span>\n<span class=\"token keyword\">var</span> name<span class=\"token punctuation\">:</span> <span class=\"token class-name\">String</span>\n<span class=\"token comment\"># Indicates the amount of items that will be rolled off this table.</span>\n<span class=\"token keyword\">var</span> num_of_items_to_roll<span class=\"token punctuation\">:</span> <span class=\"token class-name\">int</span>\n<span class=\"token comment\"># The LootItems in this table.</span>\n<span class=\"token keyword\">var</span> table_contents<span class=\"token punctuation\">:</span> <span class=\"token class-name\">Array</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>\n<span class=\"token comment\"># Any unique drops are added here when they are hit so that they cannot drop a</span>\n<span class=\"token comment\"># second time.</span>\n<span class=\"token keyword\">var</span> unique_drops<span class=\"token punctuation\">:</span> <span class=\"token class-name\">Array</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>\n\n<span class=\"token comment\"># To create a new table we need to provide it with a name and specify the amount</span>\n<span class=\"token comment\"># of items within it.</span>\n<span class=\"token comment\">#</span>\n<span class=\"token comment\"># Arguments:</span>\n<span class=\"token comment\">#</span>\n<span class=\"token comment\"># `u_name` - The name of this table.</span>\n<span class=\"token comment\"># `num_items` - The amount of items that this table should roll for.</span>\n<span class=\"token keyword\">func</span> <span class=\"token function\">_init</span><span class=\"token punctuation\">(</span>u_name<span class=\"token punctuation\">,</span> num_of_items<span class=\"token punctuation\">:</span> <span class=\"token class-name\">int</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n\tname <span class=\"token operator\">=</span> u_name\n\tnum_of_items_to_roll <span class=\"token operator\">=</span> num_of_items</code></pre>\n<p>Simple enough so far right? Well now we need to create a method to add <code>LootItem</code>s to the <code>table_contents</code> array:</p>\n<pre class=\"language-gdscript\"><code class=\"language-gdscript\"><span class=\"token comment\"># Adds an item onto this table.</span>\n<span class=\"token comment\">#</span>\n<span class=\"token comment\"># Arguments:</span>\n<span class=\"token comment\">#</span>\n<span class=\"token comment\"># `item` - The LootItem to add to this table.</span>\n<span class=\"token keyword\">func</span> <span class=\"token function\">add_item</span><span class=\"token punctuation\">(</span>item<span class=\"token punctuation\">:</span> <span class=\"token class-name\">LootItem</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n\ttable_contents<span class=\"token punctuation\">.</span><span class=\"token function\">append</span><span class=\"token punctuation\">(</span>item<span class=\"token punctuation\">)</span></code></pre>\n<p>All we do above is add an item to the loot table which is really just adding an item to the end of the <code>table_contents</code> array.</p>\n<p>Now that the user can add items to the table, let's get into the more complicated part, rolling for items. Here's an overview of what we need to do when we roll for items:</p>\n<ol>\n<li>We need to create an array to keep track of the items that have been rolled and we need to reset our <code>unique_drops</code> array in case it contains data from previous rolls.</li>\n<li>We need to check the table for items that have <code>should_drop_always</code> set to <code>true</code>. This is because these items need to always drop so we don't need to roll for them.</li>\n<li>Get a count of the amount of items we need to roll for. This isn't just the flat out <code>num_of_items_to_roll</code> because of the step above. We need to get the amount of items to roll for after the always drops have been found. For example, let's say that you have your table set to roll for 4 items. However, in your table, there's 2 items that are set to always. In the step above we set these items aside and now the number of items to roll for is 2 not 4.</li>\n<li>Now's the fun part, we have to do some looping. The first loop is going to run as many times as we have items left to drop. Then inside it we loop through each item and check to see if it's enabled and that it doesn't already exist in the <code>unique_drops</code> array. After we get a list of the items that are eligible to be rolled for, we calculate the <code>hit_probability</code> which is going to be a random number from 0 to the total probability of each item in the list of items that can be rolled. We then loop over all of the items that can be rolled for and keep a running tally of probability while we check to see if the <code>hit_probability</code> value is less than this running value. Let's take this and expand on it to make sure that you fully understand it.</li>\n</ol>\n<p>Let's say that for example you have the following 4 items in your loot table:</p>\n<table>\n<thead>\n<tr>\n<th><strong>Item</strong></th>\n<th><strong>Probability</strong></th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>Sword</td>\n<td>10</td>\n</tr>\n<tr>\n<td>Shield</td>\n<td>5</td>\n</tr>\n<tr>\n<td>Bow</td>\n<td>15</td>\n</tr>\n<tr>\n<td>Boots</td>\n<td>30</td>\n</tr>\n</tbody>\n</table>\n<p>These 4 items have a combined probability of 60. If you run a random number generator to get 2 values from 0 to 60 you might get something like: 42 and 15.</p>\n<p>Now we loop through each of these items and keep a running tally on their probability while checking to see if the hit value is less than this running tally.</p>\n<p>Let's go through the loop:</p>\n<table>\n<thead>\n<tr>\n<th><strong>Loop Item</strong></th>\n<th><strong>Running Probability Tally</strong></th>\n<th><strong>Hit Probability</strong></th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>Sword</td>\n<td>10</td>\n<td>42</td>\n</tr>\n<tr>\n<td>Shield</td>\n<td>15</td>\n<td>42</td>\n</tr>\n<tr>\n<td>Bow</td>\n<td>30</td>\n<td>42</td>\n</tr>\n<tr>\n<td>Boots</td>\n<td>60</td>\n<td>42</td>\n</tr>\n</tbody>\n</table>\n<p>Now if we're checking if <code>hit_probability &#x3C; running_probability_tally</code> we'll check:</p>\n<ol>\n<li><code>42 &#x3C; 10</code> - <code>false</code></li>\n<li><code>42 &#x3C; 15</code> - <code>false</code></li>\n<li><code>42 &#x3C; 30</code> - <code>false</code></li>\n<li><code>42 &#x3C; 60</code> - <code>true</code></li>\n</ol>\n<p>This means that we'll get boots as a drop! Let's run through this again with the other random value, 15.</p>\n<ol>\n<li><code>15 &#x3C; 10</code> - <code>false</code></li>\n<li><code>15 &#x3C; 15</code> - <code>false</code></li>\n<li><code>15 &#x3C; 30</code> - <code>true</code></li>\n</ol>\n<p>Now we get a bow as our drop.</p>\n<p>Let's get into the code and see how it's done now that we got the theory set up. Let's add a new method below our constructor:</p>\n<pre class=\"language-gdscript\"><code class=\"language-gdscript\"><span class=\"token comment\"># Adds a table within this table. This is the same as adding an item but for</span>\n<span class=\"token comment\"># naming sake it exists as its own method.</span>\n<span class=\"token keyword\">func</span> <span class=\"token function\">add_table</span><span class=\"token punctuation\">(</span>table<span class=\"token punctuation\">:</span> <span class=\"token class-name\">LootTable</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n\ttable_contents<span class=\"token punctuation\">.</span><span class=\"token function\">append</span><span class=\"token punctuation\">(</span>table<span class=\"token punctuation\">)</span>\n\n<span class=\"token comment\"># Rolls the table (and any nested tables) for LootItems and adds the rolled</span>\n<span class=\"token comment\"># items into the `results` array.</span>\n<span class=\"token keyword\">func</span> <span class=\"token function\">roll_table</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n\t<span class=\"token comment\"># The list of items that have been rolled. We also reset the unique_drops</span>\n\t<span class=\"token comment\"># array in case it was populated from previous rolls.</span>\n\t<span class=\"token keyword\">var</span> rolled_items<span class=\"token punctuation\">:</span> <span class=\"token class-name\">Array</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>\n\tunique_items <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>\n\t\n\t<span class=\"token comment\"># First we look for items that are always hit. These items are always</span>\n\t<span class=\"token comment\"># returned and there is a chance that we can break the `count` limit if the</span>\n\t<span class=\"token comment\"># number of always items is greater than the number of items to roll for.</span>\n\t<span class=\"token keyword\">var</span> num_of_items_always_rolled<span class=\"token punctuation\">:</span> <span class=\"token class-name\">int</span> <span class=\"token operator\">=</span> <span class=\"token number\">0</span>\n\t<span class=\"token keyword\">for</span> loot <span class=\"token keyword\">in</span> table_contents<span class=\"token punctuation\">:</span>\n\t\t<span class=\"token keyword\">if</span> loot<span class=\"token punctuation\">.</span>should_drop_always <span class=\"token keyword\">and</span> loot<span class=\"token punctuation\">.</span>is_enabled<span class=\"token punctuation\">:</span>\n\t\t\t<span class=\"token function\">add_to_rolled_items</span><span class=\"token punctuation\">(</span>rolled_items<span class=\"token punctuation\">,</span> loot<span class=\"token punctuation\">)</span>\n\t\t\tnum_of_items_always_rolled <span class=\"token operator\">+=</span> <span class=\"token number\">1</span>\n\t\n\t<span class=\"token comment\"># Now after we got all of the always items, we have to see how many more</span>\n\t<span class=\"token comment\"># items we can roll for.</span>\n\t<span class=\"token keyword\">var</span> real_drop_count<span class=\"token punctuation\">:</span> <span class=\"token class-name\">int</span> <span class=\"token operator\">=</span> num_of_items_to_roll <span class=\"token operator\">-</span> num_of_items_always_rolled\n\t\n\t<span class=\"token comment\"># Roll for more items if we still can.</span>\n\t<span class=\"token keyword\">if</span> real_drop_count <span class=\"token operator\">></span> <span class=\"token number\">0</span><span class=\"token punctuation\">:</span>\n\t\t<span class=\"token keyword\">for</span> _i <span class=\"token keyword\">in</span> <span class=\"token function\">range</span><span class=\"token punctuation\">(</span>real_drop_count<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n\t\t\t<span class=\"token comment\"># Find the items in the table that are eligible to be rolled and</span>\n\t\t\t<span class=\"token comment\"># were not rolled earlier.</span>\n\t\t\t<span class=\"token keyword\">var</span> loot_that_can_be_rolled<span class=\"token punctuation\">:</span> <span class=\"token class-name\">Array</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>\n\t\t\t<span class=\"token keyword\">var</span> total_probability <span class=\"token operator\">=</span> <span class=\"token number\">0</span>\n\t\t\t<span class=\"token keyword\">for</span> table_content <span class=\"token keyword\">in</span> table_contents<span class=\"token punctuation\">:</span>\n\t\t\t\t<span class=\"token keyword\">if</span> table_content<span class=\"token punctuation\">.</span>is_enabled <span class=\"token keyword\">and</span> <span class=\"token keyword\">not</span> table_content<span class=\"token punctuation\">.</span>should_drop_always<span class=\"token punctuation\">:</span> \n\t\t\t\t\tloot_that_can_be_rolled<span class=\"token punctuation\">.</span><span class=\"token function\">append</span><span class=\"token punctuation\">(</span>table_content<span class=\"token punctuation\">)</span>\n\t\t\t\t\ttotal_probability <span class=\"token operator\">+=</span> table_content<span class=\"token punctuation\">.</span>probability\n\t\t\t\n\t\t\t<span class=\"token comment\"># We calculate the the number that we'll compare to the probability</span>\n\t\t\t<span class=\"token comment\"># of the items to decide what item is rolled by picking a random</span>\n\t\t\t<span class=\"token comment\"># float from 0.0 to the total probability of all the items that can be rolled.</span>\n\t\t\t<span class=\"token keyword\">var</span> hit_value<span class=\"token punctuation\">:</span> <span class=\"token class-name\">float</span> <span class=\"token operator\">=</span> <span class=\"token function\">rand_range</span><span class=\"token punctuation\">(</span><span class=\"token number\">0.0</span><span class=\"token punctuation\">,</span> total_probability<span class=\"token punctuation\">)</span>\n\t\t\t\n\t\t\t<span class=\"token comment\"># Now we have to go through the list of items that can be rolled and increase</span>\n\t\t\t<span class=\"token comment\"># the probability until we find an item that meets the hit_value.</span>\n\t\t\t<span class=\"token keyword\">var</span> running_value<span class=\"token punctuation\">:</span> <span class=\"token class-name\">int</span> <span class=\"token operator\">=</span> <span class=\"token number\">0</span>\n\t\t\t<span class=\"token keyword\">for</span> loot <span class=\"token keyword\">in</span> loot_that_can_be_rolled<span class=\"token punctuation\">:</span>\n\t\t\t\trunning_value <span class=\"token operator\">+=</span> loot<span class=\"token punctuation\">.</span>probability\n\t\t\t\t<span class=\"token keyword\">if</span> hit_value <span class=\"token operator\">&lt;</span> running_value<span class=\"token punctuation\">:</span>\n\t\t\t\t\t<span class=\"token function\">add_to_rolled_items</span><span class=\"token punctuation\">(</span>rolled_items<span class=\"token punctuation\">,</span> loot<span class=\"token punctuation\">)</span>\n\t\t\t\t\t<span class=\"token keyword\">break</span>\n\t\n\t<span class=\"token comment\"># Finally we return the results of the roll.</span>\n\t<span class=\"token keyword\">return</span> rolled_items</code></pre>\n<p>Everything above is what we covered before but you'll notice something missing, what's <code>add_to_rolled_items</code>? This is the method that checks if the item is unique and if so checks the unique items array to see if this item already exists there. Otherwise it adds it to the <code>rolled_items</code> array. You're probably wondering why this method is even separate but we'll add some more advanced functionality later.</p>\n<pre class=\"language-gdscript\"><code class=\"language-gdscript\"><span class=\"token comment\"># Since we can nest tables we need to perform some checks before we just add</span>\n<span class=\"token comment\"># items to the results.</span>\n<span class=\"token comment\">#</span>\n<span class=\"token comment\"># Arguments:</span>\n<span class=\"token comment\">#</span>\n<span class=\"token comment\"># `rolled_items` - The array to append the loot to.</span>\n<span class=\"token comment\"># `loot` - The LootItem to check.</span>\n<span class=\"token keyword\">func</span> <span class=\"token function\">add_to_rolled_items</span><span class=\"token punctuation\">(</span>rolled_items<span class=\"token punctuation\">:</span> <span class=\"token class-name\">Array</span><span class=\"token punctuation\">,</span> loot<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n\t<span class=\"token comment\"># First we only want to proceed if them is not unique or if it is unique it</span>\n\t<span class=\"token comment\"># cannot exist in the unique_drops array.</span>\n\t<span class=\"token keyword\">if</span> <span class=\"token keyword\">not</span> loot<span class=\"token punctuation\">.</span>is_unique <span class=\"token keyword\">or</span> <span class=\"token keyword\">not</span> unique_items<span class=\"token punctuation\">.</span><span class=\"token function\">has</span><span class=\"token punctuation\">(</span>loot<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n\t\t<span class=\"token comment\"># If this is a new unique drop then we add it to the unique drops array.</span>\n\t\t<span class=\"token keyword\">if</span> loot<span class=\"token punctuation\">.</span>is_unique<span class=\"token punctuation\">:</span> unique_items<span class=\"token punctuation\">.</span><span class=\"token function\">append</span><span class=\"token punctuation\">(</span>loot<span class=\"token punctuation\">)</span>\n\t\t\n\t\t<span class=\"token comment\"># We add the item to the results array and emit the signal for when an </span>\n\t\t<span class=\"token comment\"># item has been hit.</span>\n\t\tadd_to_rolled_items<span class=\"token punctuation\">.</span><span class=\"token function\">append</span><span class=\"token punctuation\">(</span>loot<span class=\"token punctuation\">)</span></code></pre>\n<p>That's all for the current functionality. With everything we've covered we can create loot items and add them to a loot table and roll for items, which is what we'll do next.</p>\n<h2 id=\"lets-roll\"><a href=\"#lets-roll\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Let's Roll!</h2>\n<p>Alright now that we have the scaffolding let's make a demo. Create a new script named <code>main.gd</code> and let's get started. Here's what we have to do:</p>\n<ol>\n<li>Create an instance of a <code>LootTable</code>.</li>\n<li>Create instances of <code>LootItem</code> for all of the items we want to add to the table created in step 1.</li>\n<li>Roll for items!</li>\n</ol>\n<p>Pretty simple right? Let's get it in code:</p>\n<pre class=\"language-gdscript\"><code class=\"language-gdscript\"><span class=\"token keyword\">extends</span> <span class=\"token class-name\">Node</span>\n\n<span class=\"token comment\"># Run this on ready so we can see the results right away.</span>\n<span class=\"token keyword\">func</span> <span class=\"token function\">_ready</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n\t<span class=\"token comment\"># We need to call `randomize()` so that we don't get the same results every # # time because random isn't really random.</span>\n\t<span class=\"token function\">randomize</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> \n\n\t<span class=\"token comment\"># Create a loot table named \"Boss\" that's meant to roll 3 items at a time.</span>\n\t<span class=\"token keyword\">var</span> boss_loot_table<span class=\"token punctuation\">:</span> <span class=\"token class-name\">LootTable</span> <span class=\"token operator\">=</span> LootTable<span class=\"token punctuation\">.</span><span class=\"token function\">new</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Boss\"</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">)</span>\n\n\t<span class=\"token comment\"># Define various items and create LootItem instances of them with the item</span>\n\t<span class=\"token comment\"># data as the first parameter.</span>\n\t<span class=\"token comment\"># None of the items are unique or set to drop always for simplicity.</span>\n\t<span class=\"token keyword\">var</span> sword<span class=\"token punctuation\">:</span> <span class=\"token class-name\">Dictionary</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n\t\t<span class=\"token string\">\"name\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"Sword\"</span><span class=\"token punctuation\">,</span>\n\t\t<span class=\"token string\">\"attack\"</span><span class=\"token punctuation\">:</span> <span class=\"token number\">5</span><span class=\"token punctuation\">,</span>\n\t\t<span class=\"token string\">\"defence\"</span><span class=\"token punctuation\">:</span> <span class=\"token number\">3</span>\n\t<span class=\"token punctuation\">}</span>\n\t<span class=\"token keyword\">var</span> sword_loot_item<span class=\"token punctuation\">:</span> <span class=\"token class-name\">LootItem</span> <span class=\"token operator\">=</span> LootItem<span class=\"token punctuation\">.</span><span class=\"token function\">new</span><span class=\"token punctuation\">(</span>sword<span class=\"token punctuation\">,</span> <span class=\"token number\">10</span><span class=\"token punctuation\">,</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span>\n\t\n\t<span class=\"token keyword\">var</span> shield<span class=\"token punctuation\">:</span> <span class=\"token class-name\">Dictionary</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n\t\t<span class=\"token string\">\"name\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"Shield\"</span><span class=\"token punctuation\">,</span>\n\t\t<span class=\"token string\">\"attack\"</span><span class=\"token punctuation\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span>\n\t\t<span class=\"token string\">\"defence\"</span><span class=\"token punctuation\">:</span> <span class=\"token number\">5</span>\n\t<span class=\"token punctuation\">}</span>\n\t<span class=\"token keyword\">var</span> shield_loot_item<span class=\"token punctuation\">:</span> <span class=\"token class-name\">LootItem</span> <span class=\"token operator\">=</span> LootItem<span class=\"token punctuation\">.</span><span class=\"token function\">new</span><span class=\"token punctuation\">(</span>shield<span class=\"token punctuation\">,</span> <span class=\"token number\">10</span><span class=\"token punctuation\">,</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span>\n\t\n\t<span class=\"token keyword\">var</span> bow<span class=\"token punctuation\">:</span> <span class=\"token class-name\">Dictionary</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n\t\t<span class=\"token string\">\"name\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"Bow\"</span><span class=\"token punctuation\">,</span>\n\t\t<span class=\"token string\">\"attack\"</span><span class=\"token punctuation\">:</span> <span class=\"token number\">5</span><span class=\"token punctuation\">,</span>\n\t\t<span class=\"token string\">\"defence\"</span><span class=\"token punctuation\">:</span> <span class=\"token number\">1</span>\n\t<span class=\"token punctuation\">}</span>\n\t<span class=\"token keyword\">var</span> bow_loot_item<span class=\"token punctuation\">:</span> <span class=\"token class-name\">LootItem</span> <span class=\"token operator\">=</span> LootItem<span class=\"token punctuation\">.</span><span class=\"token function\">new</span><span class=\"token punctuation\">(</span>bow<span class=\"token punctuation\">,</span> <span class=\"token number\">10</span><span class=\"token punctuation\">,</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span>\n\t\n\t<span class=\"token keyword\">var</span> staff<span class=\"token punctuation\">:</span> <span class=\"token class-name\">Dictionary</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n\t\t<span class=\"token string\">\"name\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"Staff\"</span><span class=\"token punctuation\">,</span>\n\t\t<span class=\"token string\">\"attack\"</span><span class=\"token punctuation\">:</span> <span class=\"token number\">7</span><span class=\"token punctuation\">,</span>\n\t\t<span class=\"token string\">\"defence\"</span><span class=\"token punctuation\">:</span> <span class=\"token number\">2</span>\n\t<span class=\"token punctuation\">}</span>\n\t<span class=\"token keyword\">var</span> staff_loot_item<span class=\"token punctuation\">:</span> <span class=\"token class-name\">LootItem</span> <span class=\"token operator\">=</span> LootItem<span class=\"token punctuation\">.</span><span class=\"token function\">new</span><span class=\"token punctuation\">(</span>staff<span class=\"token punctuation\">,</span> <span class=\"token number\">10</span><span class=\"token punctuation\">,</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span>\n\t\n\t<span class=\"token keyword\">var</span> helmet<span class=\"token punctuation\">:</span> <span class=\"token class-name\">Dictionary</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n\t\t<span class=\"token string\">\"name\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"Helmet\"</span><span class=\"token punctuation\">,</span>\n\t\t<span class=\"token string\">\"attack\"</span><span class=\"token punctuation\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span>\n\t\t<span class=\"token string\">\"defence\"</span><span class=\"token punctuation\">:</span> <span class=\"token number\">7</span>\n\t<span class=\"token punctuation\">}</span>\n\t<span class=\"token keyword\">var</span> helmet_loot_item<span class=\"token punctuation\">:</span> <span class=\"token class-name\">LootItem</span> <span class=\"token operator\">=</span> LootItem<span class=\"token punctuation\">.</span><span class=\"token function\">new</span><span class=\"token punctuation\">(</span>helmet<span class=\"token punctuation\">,</span> <span class=\"token number\">10</span><span class=\"token punctuation\">,</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span>\n\n\t<span class=\"token comment\"># Add the created items 3</span>\n\tboss_loot_table<span class=\"token punctuation\">.</span><span class=\"token function\">add_item</span><span class=\"token punctuation\">(</span>sword_loot_item<span class=\"token punctuation\">)</span>\n\tboss_loot_table<span class=\"token punctuation\">.</span><span class=\"token function\">add_item</span><span class=\"token punctuation\">(</span>shield_loot_item<span class=\"token punctuation\">)</span>\n\tboss_loot_table<span class=\"token punctuation\">.</span><span class=\"token function\">add_item</span><span class=\"token punctuation\">(</span>bow_loot_item<span class=\"token punctuation\">)</span>\n\tboss_loot_table<span class=\"token punctuation\">.</span><span class=\"token function\">add_item</span><span class=\"token punctuation\">(</span>staff_loot_item<span class=\"token punctuation\">)</span>\n\tboss_loot_table<span class=\"token punctuation\">.</span><span class=\"token function\">add_item</span><span class=\"token punctuation\">(</span>helmet_loot_item<span class=\"token punctuation\">)</span>\n\n\t<span class=\"token comment\"># Roll for items.</span>\n\t<span class=\"token keyword\">var</span> roll_results<span class=\"token punctuation\">:</span> <span class=\"token class-name\">Array</span> <span class=\"token operator\">=</span> boss_loot_table<span class=\"token punctuation\">.</span><span class=\"token function\">roll_table</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n\t<span class=\"token comment\"># Go through each of the rolled items and print out what we got.</span>\n\t<span class=\"token keyword\">for</span> rolled_item <span class=\"token keyword\">in</span> roll_results<span class=\"token punctuation\">:</span>\n\t\t<span class=\"token function\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Rolled: \"</span><span class=\"token punctuation\">,</span> rolled_item<span class=\"token punctuation\">.</span>item<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">)</span></code></pre>\n<p>The results of running the above should be something like:</p>\n<ul>\n<li>Helmet</li>\n<li>Bow</li>\n<li>Shield</li>\n</ul>\n<p>Of course, you'll get different results than me and you'll get different results each time you run it (unless you take out <code>randomize</code>, <code>randomize</code> guarantees we get a different number each time from <code>rand_range</code>).</p>\n<h2 id=\"whats-next\"><a href=\"#whats-next\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>What's Next?</h2>\n<p>The current setup works just fine for a table with items but what if you wanted to nest tables in tables?</p>\n<p>This might sound strange at first but think about it. Imagine you have a table that has super rare loot but you want people to maybe get lucky and roll this table when they kill a monster. You don't want to put the monster's drops on it because it only has super rare items. The solution is to create a table with a low probability and set it as an item of the monster table. This makes it so that when the monster table is rolled, the super rare table has a chance of being rolled instead of one of the items of the monster.</p>\n<p>Here's a simple diagram to illustrate it:</p>\n<p><img class=\"g-image g-image--lazy g-image--loading\" src=\"data:image/svg+xml,%3csvg fill='none' viewBox='0 0 1123 554' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-a4199fa5a489fb291b4449196edc2d22'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='40'/%3e%3c/filter%3e%3c/defs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-a4199fa5a489fb291b4449196edc2d22)' width='1123' height='554' xlink:href='data:image/png%3bbase64%2ciVBORw0KGgoAAAANSUhEUgAAAEAAAAAgCAYAAACinX6EAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAFA0lEQVRo3uWZ%2b1MjNwzH%2bf//mbY/tDDD9Eh79EjI3AH36HAc4Q2BkHcIEB5R/dmrUsXYu9k0hA7dGY0fK9mWLH0t7y48Pj4KpM9wOJTX9qATOlJqXWnh4eEh6by/v5dOpyPtdjspu91uQtRtW/ti77PaeeV9/mnmv76%2bHjPCmAFQnOfy8lL29/el0WhIrVZL2q%2bB0AW9UJzNRmlKpcQDeFC81%2bvJa3xOT09HOx4MATVAq9VK6jZeZkn%2b42PPcxBznJycxEPAGoD4nzUQqpKrq7/L8vKylMtlWVpclK/b21IsluSnH36UUqkkN7eDmc6t41DiAb5RtD7CgHq9/mwewNPvXzkDd6TngKnpjH1zc5NQs9lMgErB%2bDkID7C7/r/DgLOzsycGeBICIObR0ZFcXV0loaCkx4rtm4Ss3DTyk4w7CS9evbe3l40Bt7e3o%2bOPcIAYhCPk8PAwGUj7ITwGCrUpz8/PZWdnJ5FjTH1veWLyobaGKGthTXnWo9gWNYC%2bCIEQMaoD5Hnu7u6kWq3OHFRZC2uaJhOMhoA9jmzdPx5DCO/zT2KANLmsh7WwpmlOo1QMAADBABYNaFBeXFxIpVJJYog6fUrHx8cjJOeY0X6VBXm33VGHnPZB8JKicvowhh0zRnY9rIU1%2besJ8Wsd3tQQUBAkblkYSoEJWto6JTwMDMhozLHjlic0xmAwSJRnYeTnGJz5LY9POpYdE0Le74vJHxwcZN8FcCsWl8cV4Uf5fr8/sRzzYWhkAN15p8KpecAILZOYHUp5vShrLlsje9v6%2bCl5Z/kxgM0fNK4/bm1KoVCQd6t/yKaTs/GOF2AAdlBdM5Y8dTotWVl5I6X1snz58tmF1Ff58L4sm1uf5O1vBfn1TUG%2bfdvNTKUnToX9TLDdakr1/OLvI6g9pqQqbj1H32FI3BwXrzearv8fpXBLFLcG8DNPbeMtdReaKIC31GqEaVXana6cuV09chjC2hh6aC47sbtAMBWeNhNESQ0BlJn0YT71AHDnxW%2bDFgNAVxYHwCkhDNk%2beOAla9TkxEdl5bV9yIH88OIJu7u7Y3K8Zy54qMdQPTY%2b6/Dng0dB0H4P0HLBnokgJkoBUIqylD7xHgV0EIvSyhNqa6kXH0Vz7Qcf8CgU4VSxc1p5v0%2bJTbF8Wmcsu/NjeYB1DRuPeTKsaZKS2Byh08HnjbXZ7bTEK/hN0AcOQiLEPKu2D0I%2b8uOBodPBtv3UXYnwsX2%2bwaMgaC2CAWyfnpexVNJ/n9W28syF20O4Kf1git7f9Z19Tz917bM8XJLsO63rpqbeBf6NAUJJRoxfrY%2brc1vEbVFYiaMT0GI3tQ9AAzB1h0mxAUorB2EAvw8%2b%2bm0oRDFgHiGgmMGRm%2bcYBNA0NFAqz5OaCL2kAVQhnpqrk%2bR0yC7ddZdQAAwHzo19bMAT%2bMSGZ2g%2bAn2XuZSuG7vj%2bhuNuguBu9E3wdTvATb7st/nLHMahXhj8moAi/bbf36WpaUll96uyLu1olT2KrL4y89Sb7afGADFUW59veRS7hXZeP8h%2bbC6sbHhyvL3srgmxWLRZY29hD%2b27rmDoBrXGmCSY9emzrh03hCIguBLhoB%2bMGHONEKOq7fyA5IokSWnBLD%2bpzCAkiOKnVG015Rb0VvbSvpdUkHQl7G8tg2velomBugZO688IJS0hP4i2aRHL2%2bT8Of6JjjPPCD0kzLLgDGePAYPtf8CL%2bcrkczavHoAAAAASUVORK5CYII=' /%3e%3c/svg%3e\" width=\"1123\" alt=\"Nested Tables\" data-srcset=\"/assets/static/nested-tables.82a2fbd.ef0bd9158f1ea3144ac343f58dc0e79e.png 480w, /assets/static/nested-tables.df6d994.ef0bd9158f1ea3144ac343f58dc0e79e.png 1123w\" data-sizes=\"(max-width: 1123px) 100vw, 1123px\" data-src=\"/assets/static/nested-tables.df6d994.ef0bd9158f1ea3144ac343f58dc0e79e.png\"><noscript><img class=\"g-image g-image--lazy g-image--loaded\" src=\"/assets/static/nested-tables.df6d994.ef0bd9158f1ea3144ac343f58dc0e79e.png\" width=\"1123\" alt=\"Nested Tables\"></noscript></p>\n<p>You can see that when you roll the monster table you have a chance to get a sword, a shield, or a drop off the rare loot table with the chances being what probabilities you choose to set.</p>\n<p>So, at this point you might be asking how we can implement it? Well it's actually pretty simple, so let's take it one step at a time:</p>\n<ol>\n<li>Copy over the properties from <code>LootItem</code>. The <code>LootTable</code> class now needs its own <code>probability</code>, <code>is_unique</code>, <code>should_drop_always</code>, and <code>is_enabled</code> properties:</li>\n</ol>\n<pre class=\"language-gdscript\"><code class=\"language-gdscript\"><span class=\"token comment\"># The probability that this table will be hit. This is used when this table is</span>\n<span class=\"token comment\"># nested within another table.</span>\n<span class=\"token keyword\">var</span> probability<span class=\"token punctuation\">:</span> <span class=\"token class-name\">int</span>\n<span class=\"token comment\"># Indicates whether this table is unique or not. This is used if the table is</span>\n<span class=\"token comment\"># nested in another and if it is unique it will only be rolled once.</span>\n<span class=\"token keyword\">var</span> is_unique<span class=\"token punctuation\">:</span> <span class=\"token class-name\">bool</span>\n<span class=\"token comment\"># Indicates whether this table should be rolled every time or not. This is used</span>\n<span class=\"token comment\"># when the table is nested within another table.</span>\n<span class=\"token keyword\">var</span> should_drop_always<span class=\"token punctuation\">:</span> <span class=\"token class-name\">bool</span>\n<span class=\"token comment\"># Indicates whether this table should be rolled for drops or not. This is used</span>\n<span class=\"token comment\"># when the table is nested within another table.</span>\n<span class=\"token keyword\">var</span> is_enabled<span class=\"token punctuation\">:</span> <span class=\"token class-name\">bool</span></code></pre>\n<ol start=\"2\">\n<li>Add the properties to the constructor like in <code>LootItem</code>:</li>\n</ol>\n<pre class=\"language-gdscript\"><code class=\"language-gdscript\"><span class=\"token comment\"># To create a new table we need to provide it with a name. If we want to nest</span>\n<span class=\"token comment\"># this table then we'll seed to provide the probability, whether its unique,</span>\n<span class=\"token comment\"># whether it should always roll, and whether it's currently enabled or not.</span>\n<span class=\"token comment\">#</span>\n<span class=\"token comment\"># Arguments:</span>\n<span class=\"token comment\">#</span>\n<span class=\"token comment\"># `u_name` - The name of this table.</span>\n<span class=\"token comment\"># `u_probability` - The probability that this table will be hit. This is used when this table is nested within another table.</span>\n<span class=\"token comment\"># `unique` - Indicates whether this table is unique or not. This is used if the table is nested in another and if it is unique it will only be rolled once.</span>\n<span class=\"token comment\"># `always_drop` - Indicates whether this table should be rolled every time or not. This is used when the table is nested within another table.</span>\n<span class=\"token comment\"># `enabled` - Indicates whether this table should be rolled for drops or not. This is used when the table is nested within another table .</span>\n<span class=\"token keyword\">func</span> <span class=\"token function\">_init</span><span class=\"token punctuation\">(</span>u_name<span class=\"token punctuation\">,</span> num_of_items<span class=\"token punctuation\">:</span> <span class=\"token class-name\">int</span><span class=\"token punctuation\">,</span> u_probability<span class=\"token punctuation\">:</span> <span class=\"token class-name\">int</span> <span class=\"token operator\">=</span> <span class=\"token number\">10</span><span class=\"token punctuation\">,</span> unique<span class=\"token punctuation\">:</span> <span class=\"token class-name\">bool</span> <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span> always_drop<span class=\"token punctuation\">:</span> <span class=\"token class-name\">bool</span> <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span> enabled<span class=\"token punctuation\">:</span> <span class=\"token class-name\">bool</span> <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n\tname <span class=\"token operator\">=</span> u_name\n\tnum_of_items_to_roll <span class=\"token operator\">=</span> num_of_items\n\tprobability <span class=\"token operator\">=</span> u_probability\n\tis_unique <span class=\"token operator\">=</span> unique\n\tshould_drop_always <span class=\"token operator\">=</span> always_drop\n\tis_enabled <span class=\"token operator\">=</span> enabled</code></pre>\n<ol start=\"3\">\n<li>Optionally create a method that does the same thing as <code>add_item</code> but named <code>add_table</code> to be more verbose and easy to read in the code later.</li>\n</ol>\n<pre class=\"language-gdscript\"><code class=\"language-gdscript\"><span class=\"token comment\"># Adds a table within this table. This is the same as adding an item but for</span>\n<span class=\"token comment\"># naming sake it exists as its own method.</span>\n<span class=\"token keyword\">func</span> <span class=\"token function\">add_table</span><span class=\"token punctuation\">(</span>table<span class=\"token punctuation\">:</span> <span class=\"token class-name\">LootTable</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n\ttable_contents<span class=\"token punctuation\">.</span><span class=\"token function\">append</span><span class=\"token punctuation\">(</span>table<span class=\"token punctuation\">)</span></code></pre>\n<ol start=\"3\">\n<li>Modify the <code>add_to_rolled_items</code> method to handle tables recursively by checking if the item that's rolled is a table (by having the <code>roll_table</code> method) and if so we call that table's <code>roll_table</code> method and add the rolled item/s to ours.</li>\n</ol>\n<pre class=\"language-gdscript\"><code class=\"language-gdscript\"><span class=\"token comment\"># Since we can nest tables we need to perform some checks before we just add</span>\n<span class=\"token comment\"># items to the results.</span>\n<span class=\"token comment\">#</span>\n<span class=\"token comment\"># Arguments:</span>\n<span class=\"token comment\">#</span>\n<span class=\"token comment\"># `rolled_items` - The array to append the loot to.</span>\n<span class=\"token comment\"># `loot` - The LootItem or LootTable to check.</span>\n<span class=\"token keyword\">func</span> <span class=\"token function\">add_to_rolled_items</span><span class=\"token punctuation\">(</span>rolled_items<span class=\"token punctuation\">:</span> <span class=\"token class-name\">Array</span><span class=\"token punctuation\">,</span> loot<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n\t<span class=\"token comment\"># First we only want to proceed if them is not unique or if it is unique it</span>\n\t<span class=\"token comment\"># cannot exist in the unique_drops array.</span>\n\t<span class=\"token keyword\">if</span> <span class=\"token keyword\">not</span> loot<span class=\"token punctuation\">.</span>is_unique <span class=\"token keyword\">or</span> <span class=\"token keyword\">not</span> unique_items<span class=\"token punctuation\">.</span><span class=\"token function\">has</span><span class=\"token punctuation\">(</span>loot<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n\t\t<span class=\"token comment\"># If this is a new unique drop then we add it to the unique drops array.</span>\n\t\t<span class=\"token keyword\">if</span> loot<span class=\"token punctuation\">.</span>is_unique<span class=\"token punctuation\">:</span> unique_items<span class=\"token punctuation\">.</span><span class=\"token function\">append</span><span class=\"token punctuation\">(</span>loot<span class=\"token punctuation\">)</span>\n\t\t\n\t\t<span class=\"token comment\"># Since we could be rolling a table we want to keep the loot to add in</span>\n\t\t<span class=\"token comment\"># an array so we can loop through and emit signals without extra work.</span>\n\t\t<span class=\"token keyword\">var</span> items_to_add <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>loot<span class=\"token punctuation\">]</span>\n\t\t\n\t\t<span class=\"token comment\"># If the item has a `roll_table` method then it is a LootTable and </span>\n\t\t<span class=\"token comment\"># we need to call `roll_table` recursively and add the results to </span>\n\t\t<span class=\"token comment\"># the array.</span>\n\t\t<span class=\"token keyword\">if</span> loot<span class=\"token punctuation\">.</span><span class=\"token function\">has_method</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"roll_table\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span> items_to_add <span class=\"token operator\">=</span> loot<span class=\"token punctuation\">.</span><span class=\"token function\">roll_table</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\t\t\n\t\t<span class=\"token comment\"># For each item rolled we add it to the `rolled_items` array and emit</span>\n\t\t<span class=\"token comment\"># the hit signal.</span>\n\t\t<span class=\"token keyword\">for</span> loot_item <span class=\"token keyword\">in</span> items_to_add<span class=\"token punctuation\">:</span>\n\t\t\trolled_items<span class=\"token punctuation\">.</span><span class=\"token function\">append</span><span class=\"token punctuation\">(</span>loot_item<span class=\"token punctuation\">)</span>\n\t\t\tloot<span class=\"token punctuation\">.</span><span class=\"token function\">emit_signal</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"hit\"</span><span class=\"token punctuation\">)</span></code></pre>\n<p>That's all for nesting tables, the full <code>LootTable</code> class with nested table support can be found below:</p>\n<pre class=\"language-gdscript\"><code class=\"language-gdscript\"><span class=\"token keyword\">extends</span> <span class=\"token class-name\">Resource</span>\n\n<span class=\"token comment\"># A LootTable defines a table that holds one or more LootItems/LootTables and it</span>\n<span class=\"token comment\"># can roll to return one or more items.</span>\n<span class=\"token keyword\">class_name</span> <span class=\"token class-name\">LootTable</span>\n\n<span class=\"token comment\"># The name of this loot table.</span>\n<span class=\"token keyword\">var</span> name<span class=\"token punctuation\">:</span> <span class=\"token class-name\">String</span>\n\n<span class=\"token comment\"># The probability that this table will be hit. This is used when this table is</span>\n<span class=\"token comment\"># nested within another table.</span>\n<span class=\"token keyword\">var</span> probability<span class=\"token punctuation\">:</span> <span class=\"token class-name\">int</span>\n<span class=\"token comment\"># Indicates whether this table is unique or not. This is used if the table is</span>\n<span class=\"token comment\"># nested in another and if it is unique it will only be rolled once.</span>\n<span class=\"token keyword\">var</span> is_unique<span class=\"token punctuation\">:</span> <span class=\"token class-name\">bool</span>\n<span class=\"token comment\"># Indicates whether this table should be rolled every time or not. This is used</span>\n<span class=\"token comment\"># when the table is nested within another table.</span>\n<span class=\"token keyword\">var</span> should_drop_always<span class=\"token punctuation\">:</span> <span class=\"token class-name\">bool</span>\n<span class=\"token comment\"># Indicates whether this table should be rolled for drops or not. This is used</span>\n<span class=\"token comment\"># when the table is nested within another table.</span>\n<span class=\"token keyword\">var</span> is_enabled<span class=\"token punctuation\">:</span> <span class=\"token class-name\">bool</span>\n\n<span class=\"token comment\"># Indicates the amount of items that will be rolled off this table.</span>\n<span class=\"token keyword\">var</span> num_of_items_to_roll<span class=\"token punctuation\">:</span> <span class=\"token class-name\">int</span>\n<span class=\"token comment\"># The LootItems in this table.</span>\n<span class=\"token keyword\">var</span> table_contents<span class=\"token punctuation\">:</span> <span class=\"token class-name\">Array</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>\n<span class=\"token comment\"># Any unique items are added here when they are hit so that they cannot drop a</span>\n<span class=\"token comment\"># second time.</span>\n<span class=\"token keyword\">var</span> unique_items<span class=\"token punctuation\">:</span> <span class=\"token class-name\">Array</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>\n\n<span class=\"token comment\"># To create a new table we need to provide it with a name. If we want to nest</span>\n<span class=\"token comment\"># this table then we'll seed to provide the probability, whether its unique,</span>\n<span class=\"token comment\"># whether it should always roll, and whether it's currently enabled or not.</span>\n<span class=\"token comment\">#</span>\n<span class=\"token comment\"># Arguments:</span>\n<span class=\"token comment\">#</span>\n<span class=\"token comment\"># `u_name` - The name of this table.</span>\n<span class=\"token comment\"># `u_probability` - The probability that this table will be hit. This is used when this table is nested within another table.</span>\n<span class=\"token comment\"># `unique` - Indicates whether this table is unique or not. This is used if the table is nested in another and if it is unique it will only be rolled once.</span>\n<span class=\"token comment\"># `always_drop` - Indicates whether this table should be rolled every time or not. This is used when the table is nested within another table.</span>\n<span class=\"token comment\"># `enabled` - Indicates whether this table should be rolled for drops or not. This is used when the table is nested within another table .</span>\n<span class=\"token keyword\">func</span> <span class=\"token function\">_init</span><span class=\"token punctuation\">(</span>u_name<span class=\"token punctuation\">,</span> num_of_items<span class=\"token punctuation\">:</span> <span class=\"token class-name\">int</span><span class=\"token punctuation\">,</span> u_probability<span class=\"token punctuation\">:</span> <span class=\"token class-name\">int</span> <span class=\"token operator\">=</span> <span class=\"token number\">10</span><span class=\"token punctuation\">,</span> unique<span class=\"token punctuation\">:</span> <span class=\"token class-name\">bool</span> <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span> always_drop<span class=\"token punctuation\">:</span> <span class=\"token class-name\">bool</span> <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span> enabled<span class=\"token punctuation\">:</span> <span class=\"token class-name\">bool</span> <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n\tname <span class=\"token operator\">=</span> u_name\n\tnum_of_items_to_roll <span class=\"token operator\">=</span> num_of_items\n\tprobability <span class=\"token operator\">=</span> u_probability\n\tis_unique <span class=\"token operator\">=</span> unique\n\tshould_drop_always <span class=\"token operator\">=</span> always_drop\n\tis_enabled <span class=\"token operator\">=</span> enabled\n\n<span class=\"token comment\"># Adds an item onto this table.</span>\n<span class=\"token comment\">#</span>\n<span class=\"token comment\"># Arguments:</span>\n<span class=\"token comment\">#</span>\n<span class=\"token comment\"># `item` - The LootItem to add to this table.</span>\n<span class=\"token keyword\">func</span> <span class=\"token function\">add_item</span><span class=\"token punctuation\">(</span>item<span class=\"token punctuation\">:</span> <span class=\"token class-name\">LootItem</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n\ttable_contents<span class=\"token punctuation\">.</span><span class=\"token function\">append</span><span class=\"token punctuation\">(</span>item<span class=\"token punctuation\">)</span>\n\n<span class=\"token comment\"># Adds a table within this table. This is the same as adding an item but for</span>\n<span class=\"token comment\"># naming sake it exists as its own method.</span>\n<span class=\"token keyword\">func</span> <span class=\"token function\">add_table</span><span class=\"token punctuation\">(</span>table<span class=\"token punctuation\">:</span> <span class=\"token class-name\">LootTable</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n\ttable_contents<span class=\"token punctuation\">.</span><span class=\"token function\">append</span><span class=\"token punctuation\">(</span>table<span class=\"token punctuation\">)</span>\n\n<span class=\"token comment\"># Rolls the table (and any nested tables) for LootItems and adds the rolled</span>\n<span class=\"token comment\"># items into the `results` array.</span>\n<span class=\"token keyword\">func</span> <span class=\"token function\">roll_table</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n\t<span class=\"token comment\"># The list of items that have been rolled. We also reset the unique_drops</span>\n\t<span class=\"token comment\"># array in case it was populated from previous rolls.</span>\n\t<span class=\"token keyword\">var</span> rolled_items<span class=\"token punctuation\">:</span> <span class=\"token class-name\">Array</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>\n\tunique_items <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>\n\t\n\t<span class=\"token comment\"># For each table or item added we now emit the pre-roll signal.</span>\n\t<span class=\"token keyword\">for</span> loot <span class=\"token keyword\">in</span> table_contents<span class=\"token punctuation\">:</span> loot<span class=\"token punctuation\">.</span><span class=\"token function\">emit_signal</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"pre_roll\"</span><span class=\"token punctuation\">)</span>\n\t\n\t<span class=\"token comment\"># First we look for items that are always hit. These items are always</span>\n\t<span class=\"token comment\"># returned and there is a chance that we can break the `count` limit if the</span>\n\t<span class=\"token comment\"># number of always items is greater than the number of items to roll for.</span>\n\t<span class=\"token keyword\">var</span> num_of_items_always_rolled<span class=\"token punctuation\">:</span> <span class=\"token class-name\">int</span> <span class=\"token operator\">=</span> <span class=\"token number\">0</span>\n\t<span class=\"token keyword\">for</span> loot <span class=\"token keyword\">in</span> table_contents<span class=\"token punctuation\">:</span>\n\t\t<span class=\"token keyword\">if</span> loot<span class=\"token punctuation\">.</span>should_drop_always <span class=\"token keyword\">and</span> loot<span class=\"token punctuation\">.</span>is_enabled<span class=\"token punctuation\">:</span>\n\t\t\t<span class=\"token function\">add_to_rolled_items</span><span class=\"token punctuation\">(</span>rolled_items<span class=\"token punctuation\">,</span> loot<span class=\"token punctuation\">)</span>\n\t\t\tnum_of_items_always_rolled <span class=\"token operator\">+=</span> <span class=\"token number\">1</span>\n\t\n\t<span class=\"token comment\"># Now after we got all of the always items, we have to see how many more</span>\n\t<span class=\"token comment\"># items we can roll for.</span>\n\t<span class=\"token keyword\">var</span> real_drop_count<span class=\"token punctuation\">:</span> <span class=\"token class-name\">int</span> <span class=\"token operator\">=</span> num_of_items_to_roll <span class=\"token operator\">-</span> num_of_items_always_rolled\n\t\n\t<span class=\"token comment\"># Roll for more items if we still can.</span>\n\t<span class=\"token keyword\">if</span> real_drop_count <span class=\"token operator\">></span> <span class=\"token number\">0</span><span class=\"token punctuation\">:</span>\n\t\t<span class=\"token keyword\">for</span> _i <span class=\"token keyword\">in</span> <span class=\"token function\">range</span><span class=\"token punctuation\">(</span>real_drop_count<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n\t\t\t<span class=\"token comment\"># Find the items in the table that are eligible to be rolled and</span>\n\t\t\t<span class=\"token comment\"># were not rolled earlier.</span>\n\t\t\t<span class=\"token keyword\">var</span> loot_that_can_be_rolled<span class=\"token punctuation\">:</span> <span class=\"token class-name\">Array</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>\n\t\t\t<span class=\"token keyword\">var</span> total_probability <span class=\"token operator\">=</span> <span class=\"token number\">0</span>\n\t\t\t<span class=\"token keyword\">for</span> table_content <span class=\"token keyword\">in</span> table_contents<span class=\"token punctuation\">:</span>\n\t\t\t\t<span class=\"token keyword\">if</span> table_content<span class=\"token punctuation\">.</span>is_enabled <span class=\"token keyword\">and</span> <span class=\"token keyword\">not</span> table_content<span class=\"token punctuation\">.</span>should_drop_always<span class=\"token punctuation\">:</span> \n\t\t\t\t\tloot_that_can_be_rolled<span class=\"token punctuation\">.</span><span class=\"token function\">append</span><span class=\"token punctuation\">(</span>table_content<span class=\"token punctuation\">)</span>\n\t\t\t\t\ttotal_probability <span class=\"token operator\">+=</span> table_content<span class=\"token punctuation\">.</span>probability\n\t\t\t\n\t\t\t<span class=\"token comment\"># We calculate the the number that we'll compare to the probability</span>\n\t\t\t<span class=\"token comment\"># of the items to decide what item is rolled by picking a random</span>\n\t\t\t<span class=\"token comment\"># float from 0.0 to the total probability of all the items that can be rolled.</span>\n\t\t\t<span class=\"token keyword\">var</span> hit_value<span class=\"token punctuation\">:</span> <span class=\"token class-name\">float</span> <span class=\"token operator\">=</span> <span class=\"token function\">rand_range</span><span class=\"token punctuation\">(</span><span class=\"token number\">0.0</span><span class=\"token punctuation\">,</span> total_probability<span class=\"token punctuation\">)</span>\n\t\t\t\n\t\t\t<span class=\"token comment\"># Now we have to go through the list of items that can be rolled and increase</span>\n\t\t\t<span class=\"token comment\"># the probability until we find an item that meets the hit_value.</span>\n\t\t\t<span class=\"token keyword\">var</span> running_value<span class=\"token punctuation\">:</span> <span class=\"token class-name\">int</span> <span class=\"token operator\">=</span> <span class=\"token number\">0</span>\n\t\t\t<span class=\"token keyword\">for</span> loot <span class=\"token keyword\">in</span> loot_that_can_be_rolled<span class=\"token punctuation\">:</span>\n\t\t\t\trunning_value <span class=\"token operator\">+=</span> loot<span class=\"token punctuation\">.</span>probability\n\t\t\t\t<span class=\"token keyword\">if</span> hit_value <span class=\"token operator\">&lt;</span> running_value<span class=\"token punctuation\">:</span>\n\t\t\t\t\t<span class=\"token function\">add_to_rolled_items</span><span class=\"token punctuation\">(</span>rolled_items<span class=\"token punctuation\">,</span> loot<span class=\"token punctuation\">)</span>\n\t\t\t\t\t<span class=\"token keyword\">break</span>\n\t\n\t<span class=\"token comment\"># Now for each item we rolled we dispatch the post roll signal.</span>\n\t<span class=\"token keyword\">for</span> o <span class=\"token keyword\">in</span> rolled_items<span class=\"token punctuation\">:</span> o<span class=\"token punctuation\">.</span><span class=\"token function\">emit_signal</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"post_roll\"</span><span class=\"token punctuation\">)</span>\n\t\n\t<span class=\"token comment\"># Finally we return the results of the roll.</span>\n\t<span class=\"token keyword\">return</span> rolled_items\n\n<span class=\"token comment\"># Since we can nest tables we need to perform some checks before we just add</span>\n<span class=\"token comment\"># items to the results.</span>\n<span class=\"token comment\">#</span>\n<span class=\"token comment\"># Arguments:</span>\n<span class=\"token comment\">#</span>\n<span class=\"token comment\"># `rolled_items` - The array to append the loot to.</span>\n<span class=\"token comment\"># `loot` - The LootItem or LootTable to check.</span>\n<span class=\"token keyword\">func</span> <span class=\"token function\">add_to_rolled_items</span><span class=\"token punctuation\">(</span>rolled_items<span class=\"token punctuation\">:</span> <span class=\"token class-name\">Array</span><span class=\"token punctuation\">,</span> loot<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n\t<span class=\"token comment\"># First we only want to proceed if them is not unique or if it is unique it</span>\n\t<span class=\"token comment\"># cannot exist in the unique_drops array.</span>\n\t<span class=\"token keyword\">if</span> <span class=\"token keyword\">not</span> loot<span class=\"token punctuation\">.</span>is_unique <span class=\"token keyword\">or</span> <span class=\"token keyword\">not</span> unique_items<span class=\"token punctuation\">.</span><span class=\"token function\">has</span><span class=\"token punctuation\">(</span>loot<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n\t\t<span class=\"token comment\"># If this is a new unique drop then we add it to the unique drops array.</span>\n\t\t<span class=\"token keyword\">if</span> loot<span class=\"token punctuation\">.</span>is_unique<span class=\"token punctuation\">:</span> unique_items<span class=\"token punctuation\">.</span><span class=\"token function\">append</span><span class=\"token punctuation\">(</span>loot<span class=\"token punctuation\">)</span>\n\t\t\n\t\t<span class=\"token comment\"># Since we could be rolling a table we want to keep the loot to add in</span>\n\t\t<span class=\"token comment\"># an array so we can loop through and emit signals without extra work.</span>\n\t\t<span class=\"token keyword\">var</span> items_to_add <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>loot<span class=\"token punctuation\">]</span>\n\t\t\n\t\t<span class=\"token comment\"># If the item has a `roll_table` method then it is a LootTable and </span>\n\t\t<span class=\"token comment\"># we need to call `roll_table` recursively and add the results to </span>\n\t\t<span class=\"token comment\"># the array.</span>\n\t\t<span class=\"token keyword\">if</span> loot<span class=\"token punctuation\">.</span><span class=\"token function\">has_method</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"roll_table\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span> items_to_add <span class=\"token operator\">=</span> loot<span class=\"token punctuation\">.</span><span class=\"token function\">roll_table</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\t\t\n\t\t<span class=\"token comment\"># For each item rolled we add it to the `rolled_items` array and emit</span>\n\t\t<span class=\"token comment\"># the hit signal.</span>\n\t\t<span class=\"token keyword\">for</span> loot_item <span class=\"token keyword\">in</span> items_to_add<span class=\"token punctuation\">:</span>\n\t\t\trolled_items<span class=\"token punctuation\">.</span><span class=\"token function\">append</span><span class=\"token punctuation\">(</span>loot_item<span class=\"token punctuation\">)</span>\n\t\t\tloot<span class=\"token punctuation\">.</span><span class=\"token function\">emit_signal</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"hit\"</span><span class=\"token punctuation\">)</span></code></pre>\n<p>Now let's modify our <code>main.gd</code> so we can test this out:</p>\n<ol>\n<li>Let's start out by creating a couple <code>LootTables</code> that will be nested in our Boss table. We'll give the Common table a 3x greater chance to be hit than the Rare drop table.</li>\n</ol>\n<pre class=\"language-gdscript\"><code class=\"language-gdscript\">\t<span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>\n\t<span class=\"token comment\"># Create our nested tables and add them to the Boss table.</span>\n\t<span class=\"token keyword\">var</span> common_drop_table<span class=\"token punctuation\">:</span> <span class=\"token class-name\">LootTable</span> <span class=\"token operator\">=</span> LootTable<span class=\"token punctuation\">.</span><span class=\"token function\">new</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Common\"</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">30</span><span class=\"token punctuation\">,</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span>\n\t<span class=\"token keyword\">var</span> rare_drop_table<span class=\"token punctuation\">:</span> <span class=\"token class-name\">LootTable</span> <span class=\"token operator\">=</span> LootTable<span class=\"token punctuation\">.</span><span class=\"token function\">new</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Rare\"</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">10</span><span class=\"token punctuation\">,</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span>\n\t\n\tboss_loot_table<span class=\"token punctuation\">.</span><span class=\"token function\">add_table</span><span class=\"token punctuation\">(</span>common_drop_table<span class=\"token punctuation\">)</span>\n\tboss_loot_table<span class=\"token punctuation\">.</span><span class=\"token function\">add_table</span><span class=\"token punctuation\">(</span>rare_drop_table<span class=\"token punctuation\">)</span>\n\t<span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span></code></pre>\n<ol start=\"2\">\n<li>Instead of adding the items directly to the Boss table, let's split them up onto the two sub-tables.</li>\n</ol>\n<pre class=\"language-gdscript\"><code class=\"language-gdscript\">    <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>\n\tcommon_drop_table<span class=\"token punctuation\">.</span><span class=\"token function\">add_item</span><span class=\"token punctuation\">(</span>sword_loot_item<span class=\"token punctuation\">)</span>\n\tcommon_drop_table<span class=\"token punctuation\">.</span><span class=\"token function\">add_item</span><span class=\"token punctuation\">(</span>shield_loot_item<span class=\"token punctuation\">)</span>\n\tcommon_drop_table<span class=\"token punctuation\">.</span><span class=\"token function\">add_item</span><span class=\"token punctuation\">(</span>bow_loot_item<span class=\"token punctuation\">)</span>\n\trare_drop_table<span class=\"token punctuation\">.</span><span class=\"token function\">add_item</span><span class=\"token punctuation\">(</span>staff_loot_item<span class=\"token punctuation\">)</span>\n\trare_drop_table<span class=\"token punctuation\">.</span><span class=\"token function\">add_item</span><span class=\"token punctuation\">(</span>helmet_loot_item<span class=\"token punctuation\">)</span>\n\trare_drop_table<span class=\"token punctuation\">.</span><span class=\"token function\">add_item</span><span class=\"token punctuation\">(</span>platebody_loot_item<span class=\"token punctuation\">)</span>\n\t<span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span></code></pre>\n<ol start=\"3\">\n<li>Now we press play and see the results of the roll! In my demo I set the Boss table to drop 2 items and my 2 ended up being:</li>\n</ol>\n<ul>\n<li>Staff</li>\n<li>\n<p>Bow</p>\n<p>Now this time we actually hit the rare drop table, but in another roll I got:</p>\n</li>\n<li>Bow</li>\n<li>\n<p>Sword</p>\n<p>So that time I hit the common table for both items.</p>\n</li>\n</ul>\n<h2 id=\"bonus\"><a href=\"#bonus\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Bonus!</h2>\n<p>In the article that gave me the inspiration for this, the author implements events for the loot items and table and I figured it may be useful to someone so here's a bonus section for it. So an event based system in Godot would involve signals and we're going to create a custom signal that will get emitted when an item on the drop table is it or even when a table within a table is hit. One example of when this could be useful is in a multiplayer game if you want to notify every player when someone gets a super rare drop.</p>\n<p>So this is actually pretty easy. To do this, open up your <code>loot_item</code> class and add the <code>hit</code> signal below the variables.</p>\n<pre class=\"language-gdscript\"><code class=\"language-gdscript\"><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>\n<span class=\"token keyword\">var</span> is_enabled<span class=\"token punctuation\">:</span> <span class=\"token class-name\">bool</span>\n\n<span class=\"token comment\"># The signal that gets emitted when this item is hit on the drop table.</span>\n<span class=\"token keyword\">signal</span> hit\n<span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span></code></pre>\n<p>Now in the <code>loot_table</code> class, we want to go down to our <code>add_to_rolled_items</code> method and right below where we append the the item to the <code>rolled_items</code> array and emit the signal like so:</p>\n<pre class=\"language-gdscript\"><code class=\"language-gdscript\"><span class=\"token comment\"># For each item rolled we add it to the `rolled_items` array and emit</span>\n<span class=\"token comment\"># the hit signal.</span>\n<span class=\"token keyword\">for</span> loot_item <span class=\"token keyword\">in</span> items_to_add<span class=\"token punctuation\">:</span>\n\trolled_items<span class=\"token punctuation\">.</span><span class=\"token function\">append</span><span class=\"token punctuation\">(</span>loot_item<span class=\"token punctuation\">)</span>\n\tloot<span class=\"token punctuation\">.</span><span class=\"token function\">emit_signal</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"hit\"</span><span class=\"token punctuation\">)</span></code></pre>\n<p>Finally, head over to the <code>main.gd</code> file we created to test our loot system and add a signal to one of the items (I picked the shield) like so:</p>\n<pre class=\"language-gdscript\"><code class=\"language-gdscript\"><span class=\"token keyword\">var</span> shield<span class=\"token punctuation\">:</span> <span class=\"token class-name\">Dictionary</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n\t<span class=\"token string\">\"name\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"Shield\"</span><span class=\"token punctuation\">,</span>\n\t<span class=\"token string\">\"attack\"</span><span class=\"token punctuation\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span>\n\t<span class=\"token string\">\"defence\"</span><span class=\"token punctuation\">:</span> <span class=\"token number\">5</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">var</span> shield_loot_item<span class=\"token punctuation\">:</span> <span class=\"token class-name\">LootItem</span> <span class=\"token operator\">=</span> LootItem<span class=\"token punctuation\">.</span><span class=\"token function\">new</span><span class=\"token punctuation\">(</span>shield<span class=\"token punctuation\">,</span> <span class=\"token number\">10</span><span class=\"token punctuation\">,</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token comment\"># Connect the shield's hit signal to a function named \"_on_shield_rolled\".</span>\nshield_loot_item<span class=\"token punctuation\">.</span><span class=\"token function\">connect</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"hit\"</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">self</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"_on_shield_rolled\"</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token comment\"># This function is going to print to the console when we roll the shield.</span>\n<span class=\"token keyword\">func</span> <span class=\"token function\">_on_shield_rolled</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n\t<span class=\"token function\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"We rolled a shield!\"</span><span class=\"token punctuation\">)</span></code></pre>\n<p>Just make sure you have a function in the <code>main.gd</code> file that you can attach the function to as shown above whenever you roll the shield you should see that message print to the console.</p>\n<p>Of course this means that if you have nested tables then the signal will be emitted twice because the sub table will roll it and then the main table also will so the signal gets emitted twice so you can change the <code>emit_signal</code> to also include the table object like so:</p>\n<pre class=\"language-gdscript\"><code class=\"language-gdscript\"><span class=\"token comment\"># For each item rolled we add it to the `rolled_items` array and emit</span>\n<span class=\"token comment\"># the hit signal.</span>\n<span class=\"token keyword\">for</span> loot_item <span class=\"token keyword\">in</span> items_to_add<span class=\"token punctuation\">:</span>\n\trolled_items<span class=\"token punctuation\">.</span><span class=\"token function\">append</span><span class=\"token punctuation\">(</span>loot_item<span class=\"token punctuation\">)</span>\n\tloot<span class=\"token punctuation\">.</span><span class=\"token function\">emit_signal</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"hit\"</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">self</span><span class=\"token punctuation\">)</span></code></pre>\n<p>Then, in your <code>_on_shield_rolled</code> function you can check to see if the main boss table rolled it like so:</p>\n<pre class=\"language-gdscript\"><code class=\"language-gdscript\"><span class=\"token comment\"># This function is going to print to the console when we roll the shield.</span>\n<span class=\"token keyword\">func</span> <span class=\"token function\">_on_shield_rolled</span><span class=\"token punctuation\">(</span>table<span class=\"token punctuation\">:</span> <span class=\"token class-name\">LootTable</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n\t<span class=\"token keyword\">if</span> table<span class=\"token punctuation\">.</span>name <span class=\"token operator\">==</span> <span class=\"token string\">\"Boss\"</span><span class=\"token punctuation\">:</span> <span class=\"token function\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"We rolled a shield!\"</span><span class=\"token punctuation\">)</span></code></pre>\n<p>There's other ways this could be handled but I'll leave that as a challenge to you, the above gets you 95% of the way there.</p>\n<h2 id=\"conclusion\"><a href=\"#conclusion\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Conclusion</h2>\n<p> Now that you have the basic workings of a loot system, the challenge for you is to figure out how to best implement it in your game. You could for example not provide any item definitions when creating items but instead just provide an id of an item that links to an id of a resource somewhere else like a database. Also since the loot items and tables are resources you could make your items into resources in Godot (sword.tres, shield.tres, etc) and on another class you could ask for an export of items/tables so you don't have to do it by code. I might expand on these concepts in a later tutorial but for now let me know if you have any questions and I'll gladly answer them!</p>\n"}},{"node":{"title":"Shadertoy to Godot - Night Vision Screen Shaders","path":"/shadertoy-to-godot-night-vision-screen-shaders/","date":"8. July 2020","timeToRead":18,"description":"Converting night vision shaders from Shadertoy to Godot to be used as screen shaders","cover_image":{"type":"image","mimeType":"image/png","src":"/assets/static/night-vision-grainy.07cc2b7.2cd1dc3af9be86c655682d93eded84c4.png","size":{"width":860,"height":435},"sizes":"(max-width: 860px) 100vw, 860px","srcset":["/assets/static/night-vision-grainy.a67b0b2.2cd1dc3af9be86c655682d93eded84c4.png 480w","/assets/static/night-vision-grainy.07cc2b7.2cd1dc3af9be86c655682d93eded84c4.png 860w"],"dataUri":"data:image/svg+xml,%3csvg fill='none' viewBox='0 0 860 435' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-510fb6af4a9deb9fccee7563678d6f4a'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='10'/%3e%3c/filter%3e%3c/defs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-510fb6af4a9deb9fccee7563678d6f4a)' width='860' height='435' xlink:href='data:image/png%3bbase64%2ciVBORw0KGgoAAAANSUhEUgAAAEAAAAAgCAYAAACinX6EAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAMeUlEQVRo3s1Y%2bXedVRV9md%2bQvOS9JC/Te2mSTnRM0zZpm07Y2mpbOkHFagUEKqgMLSWmLZW2tDigSxfOA06gIlRQQCpYpEAFa6WAiiz8b65n73Pu/e4L6fJX31pnffe703fPvvvsc%2b9LNS5pcel1BZfd1umaP97t8reWXetd/a5tctAVTsx0xS/Ndu3fmOs6vzffdf5wget8ZIEr/WKR6/rVYtf1%2bLDr%2brU8nxhW%2b81wVbn7zBLX/aTYbxPrwvtTYk%2bPaN3vRpL2M/Z8SsuYR8cMqz0RGb77S7PHFrvSo4tc6ScLuc6O78xzHQ9f5dq/OscVT85ybYcHXeuBGS6/v%2bya9/a47PaSS68vuKaRFpdqWpbnS3a7APDJHpe/rczOhfuGOLj963M5IZwv/WyhfvjxyMEz6kTPs0tdzx/U%2bP7c0sSsvufsMu33vNgfl6k9v0zf0f7s0upxZ609moeAPSP2%2bxEFygMrayo9ZiD8eIHr%2bPY81/7QHNf%2blTmu8MWZru2eAZe/veKa9/W43K6Sy2woOvhOADIfKrrcjpJr%2bVSvAFBxbYcGXOF4tPvfnc%2bJ8QGiL7vBj8sighOy2N6XRsWWu94Xxf5kz5el7s9qfa%2bMud5z1oa%2beKLN18X158xejEzee16Q77ywXL/5zFIa2STAgJVkwiMLlQXfFBZ8WQC4fyZ9av18v2u5oVcB2NjumkZbBYDlAsDGIivRmP%2bsADAxqLsvCIJKnT%2bIAHhSaYkdwULihfe9OqZOnh9Ve1mdZp0BwT6vjYV29kHdea2nXViRtJ%2b3OVAv/QjYS6MBHDJHGITN4OaACT9fRMZ2fEtZUDwhYfCFQQXgJgHg2i6X%2bXAVAO0KwI297ITOYADpL1Tq/JHFfbzz2IlzyxMnXkkW3/cXsTfsCXt9hba9ruXyX1cm7Re0vnxxpb5LG8rsg/4Ax/f1c8QAAoSzGibdTyehAK1iGHxtris%2bYADcGQGwWQAYiwG4rsu13NLnWu%2b2%2bD81i4PJAADwqNLfx3ugJZzHwvwC31Dny38TJy6tcuW/r6IzdAp1eL9kdtHq34zefR9fvqhgBUC8vToWwGcYPmcsgBCLMJZ%2bulABkE0snppNnyiEIvK5Pd0us0kAWAEABAWIYHqNCOE1ndSB1rtmKAMekvj//nylvogfBM%2bLU6C%2bUTcsOHb8TTOpq7w17ipvj/NZvqwO%2bzLq0Y/Py9XjAjgeSA/EawaA6QI0geKI7CFrhWBj46BhDAERQe6%2baF16bYGZL72yTQAQFFDBbCBPUIMZYa%2bkxM%2bUXdu9A654ejZFBWEABnDnEc8XjPIXViQ7ieclBaHyzjiNzlm58o/V6jjqUH5HgYGDfH/b%2br1lhvGeFd4uRmzweiGb0S2CiJSIVFh8cDaFD1kN6R0%2bYddjX9PjAGClATCqz%2bzmDpfbWWJIYCAYgdBgdhAUC8c0O0BkoAlAnwzALl1WR/v/vcZV/rWaz/73tFx5dzXL/e%2bv0TLa/rOW7%2byPce9pW%2bWf1v5%2b8k57NwEPIUenRZCR9sBW5vx7ZjDdYc1YO1J788cUAPiWubrI2E8AAAPWJQCAATk5KGAQBrfcrM5DQKAPCA8AAWbggAGBQa7teHge0ac%2bnB8L4ufj3IsjgTIqe21gjPvnpVVJP9RFmQHhBxaCjfgmqS0HNmQtrKn1oK6v9Y5%2bgoB4JwjiC6if/WiHHoBGIwDSq9oUleV2IJJO6EwA9hkAn6todjDHC0eG6DyEBTmWJocN6AbK2Am0MZscHdJ%2bsKNm6O/LGHdsKDE/bsoYUDp8534dw%2b/4MbIe5vqDBoBQH2sHAGAzAdjSUeUrdE9PgoIEUVnnGdBJAEj/m/r0dBgB4HefH8dxWTIGmMCn6AVU1y%2bGYyYG6FR4TloZ8xwaSMrYyXuj%2bkNWljEAQOeeRcfxPQVCDjlHZBw2Bd8ES2WtOPZ6AJqv76ZP8I0MQAjIxjMN1pXTrmFurhoAMOD6KAREDPMyaaD/hLJAd093HnQkCKd1oWSJLZ5j8PTOezBQPjIYAGWuBmi%2bXwwAHAcIsJMKggeA35rQ834IgVsjBuzpoq5lP5JoQMO8nKuvpAWA7kbXMCurtIgAwCAC8Ok%2boolJiS4WOGnUNsp72gcWnJplTlY7QWofGaouH46A8fEcMwHgST8PLM3vvt%2bAo0MBaKwRIZuHCAp7efYHADj%2bggHQO9G9htlZV9fTJACUGl39YCYwIGtpkABAAyR38oYIBhyYkezmkcEkno8bAKe8zaYTwdlJc8jvfmyHEnDC7sfAWWgg8wQGnI704OhQFXvIABx5AYAPAcsCIQQAgGx6XVejANBZDQByJbJAACBmAADwC/Yi6J3HwvwiH5iVOB07OxntrN/dWB8mBj8QKh7EaRlwLBHJAMDdkQgaA6gBOzQEAgNmCgAlAtDg6gcyVWkwGwNwswLgNQAf8PHLBRyPGOBZgEPIFCHzi6PTEKsDU2J9IgEG/0dw98A%2bcQRtQQMguidUc0IWAkg2D8YyBKABN%2bo5IGQBrwECQD0AkM1P1QKAGZlwOAADfAi0AIBbTATllhgY4LOAT2UAAYs6HTFAnMM4sAmpNbu1UxcgAPOE6SnvATmocyN/53aX9DAG4eKptId0R2jxGydjDRhSIT2s7CJTPQOEvc2f6AkimLGDEDJA/VDGYfNTtR0AIC0MyCcaIHcC3Jgw2IcAzwJyGAr09UJ4RHeBWcAUGoDAQSCfXt3GuMN/DjDkXswbs4LOTyggud1d%2bn0I8S415G8wgmeBSHj9eSKIJjXAANhvAOzrqdYACwEAAN8VgAFjAACQXeICrjMAQMP9xgCvAz4N3jcUwoD0P2Fp0C4f%2bDDOGHAaRvSFZaClz9c0nDJl8WAb2SLf53ObAgH2AAjS3kIuHIh8JjFNQZhi98EygBY0YFekAWMxAO0RA%2bKjsD8HSBxhMi7UUiHD4LAKVDjB%2bXCQcriAyMJ564KBCXYL4/%2bPWBRAxjEVlL/WaLqhSOepRdgMM/yBwb/qJNTiU2JIo4fUeX8O8BriNaCKAVUAFA0AnANkkfgQkd9jDLhB0yBPg3ckuxWEa3IwsAELwQc9g%2bAI7xpwXq6eiD1eu7dre3BcaM935GqECbKRAEHb2G5WJGj4NuN%2bMjpZWgiEDCBsJQCydmoAwmqbAWAXP2S%2bBIB%2bA0Doyh0A5XZ3JcdhiSWKoUxMhUU4AOkDCRvAEDqD2N1hIrZDDx90ADu6xcJrZyJyjHP0BwgyHhoUwmZtIVxawgFNxvBvu3DUVg3hKZDiV1H6M/7tIrRTwwjrwLw4/iPsEwDkSNg0kucOZdYXSblwJTYdQCgQBNyybq%2bECxJQRxtVfovGLW2r2XYzOL69M8Q1F7VN67NW78fzH1uhKRYaLmlbbbx9h3/c3KkawvVgc26z9AfqI/YtA3BuhBHYhXvP0jxZj/BP1RbqXV1fk2tc1KxngTVKP3wEH2Q22Gs3Q7scEYj9KjTYOYQNd3izxipSKc3KPobJBm%2bb4mf1uOxW1QDWCfVZv1HfOZe9A0iGpz/3wyz3I3WGO8AWnT%2b9Ri9AjcMt3HT4nqptFQC6m3g5AAv4B8n6QhAjngp32cFIhA2oenRJV6/uNgYMwjvRXl8IZR/bFFrfZ4O1XZ08eU31adPrQDyHCWn4pjjmBZtPiOse0xV/BQZgOACJb/CxcUGzq%2bttcvA9VdNcxxMRzsZoIO0gXIIWP7pJd5b03N4ZqAthA2PY1wSOZQjduAke6la2VpWZbn37eNKX/abMgyfL40l9uMpave/LEIHD11g4IZNsbA%2bpF3OD%2bo0Lm13DHL0H1LTUCQCZWlfbVk9K1M/MuIarcq5xcYsCsdI%2bjgmwa0JHOI5woQmVGkda9LkkKo/Yuxg/uiRqH4nah5P%2bTVPrhqP3qd%2bYrq%2bs2YdvcNqDhjVIe8P8HDcaog/tg%2b%2bpVEONq8nVuVphAWiBRuRI/EfQOL%2bZA4MjwhCcoXGVDCZoom/DnJyWaVauas9Wm6/D09ucqfNE7dPN69cw1xzDBmLNHiCsXd5Duxz54SMuQWB%2bqrFGAKhNuQCCxASUEfQgGOU00wVyJoQS/x1wAm99ZuWo3DelzQxzTe1bX47qp5snmquq39Rv%2bPXI/T6sHeuGCbPZJvVIe2B7cB6%2by0/iQKzOgEjXuppsHeODgMiA2ny9vue1zHpvbWatV3hOZ1ca1/o/%2bl5pLm%2b2PjjI9Vo7ythg%2bEbH62rU55QHYKqhsdZA8VZf80Fr%2bD%2bw6dYFB%2bsiH2pTscNV9l9xyWqoRWtRtwAAAABJRU5ErkJggg==' /%3e%3c/svg%3e"},"content":"<h2 id=\"introduction\"><a href=\"#introduction\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Introduction</h2>\n<p>In this guide we're going to take some interesting night vision shaders from Shadertoy and port them over to Godot to use as screen shaders, so we can have a cool effect for our 3D scene.</p>\n<p>Shaders are not my specialty (yet) so I won't be able to describe every shader in detail but what I can describe is differences between the original and ported versions so that it can maybe help you port over shaders yourself in the future. Each example will begin with the original shader followed by the Godot shader in order to be as concise as possible.</p>\n<p>If you would like to see the final results, you can find the GitHub repo <a href=\"https://github.com/robertcorponoi/godot-night-vision-screen-shaders\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">here</a>.</p>\n<p><strong>Note:</strong> These shaders probably use various licenses, so I recommend asking the author for permission on Shadertoy if the license is unknown or just use them as a baseline to create your own shaders.</p>\n<h2 id=\"table-of-contents\"><a href=\"#table-of-contents\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Table of Contents</h2>\n<p>If you would like to skip to a specific shader, use the navigation menu below:</p>\n<ul>\n<li><a href=\"#creating-a-screen-shader\">Creating a Screen Shader</a></li>\n<li><a href=\"#shader-1---grainy-night-vision\">Shader 1: Grainy Night Vision</a></li>\n<li><a href=\"#shader-2---grainy-night-vision-alt\">Shader 2: Grainy Night Vision Alt</a></li>\n<li><a href=\"#shader-3---blur-night-vision\">Shader 3: Blur Night Vision</a></li>\n<li><a href=\"#shader-4---scanlines-night-vision\">Shader 4: Scanlines Night Vision</a></li>\n<li><a href=\"#shader-5---pixelated-night-vision\">Shader 5: Pixelated Night Vision</a></li>\n</ul>\n<h2 id=\"creating-a-screen-shader\"><a href=\"#creating-a-screen-shader\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Creating a Screen Shader</h2>\n<p>Before we get into the shaders, let's see how we can create a screen shader in 3D. First, we need to start out with a 3D scene so create a new scene and set the root node to be a spatial.</p>\n<p>After this, we want to set up a little scene so we can actually see something through the night vision shader so just add a couple CSG spheres or shapes and add a Camera that's pointed towards them.</p>\n<p>Here is the scene I've set up below:</p>\n<p><img class=\"g-image g-image--lazy g-image--loading\" src=\"data:image/svg+xml,%3csvg fill='none' viewBox='0 0 908 479' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-35a89d92a46a8bf6c56ca56e5286dbe9'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='40'/%3e%3c/filter%3e%3c/defs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-35a89d92a46a8bf6c56ca56e5286dbe9)' width='908' height='479' xlink:href='data:image/png%3bbase64%2ciVBORw0KGgoAAAANSUhEUgAAAEAAAAAiCAYAAADvVd%2bPAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAMcUlEQVRo3q1XWY8kRxGuPwBCyMaDjbBsw8x09/RR1V1933f39DH3zn3P7K4FPwKJBz%2bC4MXiPyAeLIFZ39jGawuvJcQb42NtcUjGD3h3ERgp%2bCKysrq6p2Z2bfHwKbMyI%2bP4MiKy27jx/h3y4rcX4HnGmT9%2b80D4XMbn/nwb4z/H1h4Ez1%2bGS/y%2b4YMXPDBe%2buAuefHiBXhBcEfh/fO48UC4S78%2b%2bxjj5w8of97hc4A/Lwr8/X7pArzswHjto7v0KuPD83jlErx8ET7whzJ6j2588Anmdy6UOwcfG6/cB69eAI51hHsC443b98gPr1%2bEjxR%2b96VxV8aXPvwEhu98hfPj0H68fomvb1yCNx0YNz%2b%2bR1689QD4/f1w%2byL8i167/QkM371ExoP72HnrAXHzEhjv/e0L8sMtwX/%2bL3jXAeu8%2bZe/Y/5vmb/r2Xv3S%2bv94j57/nFNwnj77B/ki/cV3vmKeNv3%2bzN68%2bwM809d/V8V75yxjs9Ga2ee0RefejBaN66dHNLV4xFOjw7GcHK4P4bjg70xHO0Den4wmvt%2bQ/b0%2bjodH47rOGa9oluNkzZPxA%2bFU3yfHkHu5BodATw/1X4fj8ciODmiaz64fnosMDqtJjG6ghZ1222gRfOdNvU6HerPd2lh0HextDCkRWBhOKDF4ZBWlpcwDmioZTDv9%2baph3ODXo8G/R50dQS9bpcWV2EP%2bttNNXZgs9VoCHiN0azXqdmoU6up1hv1Gr7VnMdae0CNdk99syzQYnn3u3buW0Otj2Bsbm7R9s4O7e7u0t7ePh0cHNLB4SEdHx/T0dGRgOeCkxO6evWaQNbxfXp6KnuH%2bH766tN0grUTvY6R906c8ejomK7%2bcFfO7u3vu7I8PxSbJ2J7Z2cXfhwI2Cfl2x7t7h3Qzv4xbe/u09bmJu1gfWtrm65cWceo4uC5%2bt4mjm1lZZVWV1dp7coVWlu7QkvLy7S8vCJrq6trZOzvH8hBNrQNwzxnB/jw7u4ebWDchPL1jU0BG%2bWRnbuyvgFDO5DdhkM7dLRzTFsb%2bN7ehsF1keNxE86wHpbdOVqVOe8p3dsu/NY2Eeg69K9tH9L61p74siX6YHMb%2buAjf287cwbHsQvCmFgm/fDwaAxyyQCTbywsrdBwcZmWVtYEi8urMvaHS9RfWKJub4j5Ig0wZ/BapzeQ9fY8yqC3Rt3OkLrdBaT8MsphFSWwRAs9jP0lajuyjfY85Ic0WOvK%2bQ7WWt0%2bNTs9QRvztt83dNV7K9TsDuVbn%2bn2F0QH%2b8Aj2%2bj21Tg/WBDZLtvGWg/%2bcwy9gYKaL8i%2bwcpa3YEorTY7Co0OlWstqrfmpdYq%2bK41u%2b4o%2b/U21Zuo9fYyNXC2DtQQZA1rnc4i6ndI9UaPyo025csNkS9WmlTtVahUa1Kh0hCUYIfHbLFGuXKdcqU65Us1ymJMV3uUrc7Lfg5rvMfzYrXpruXLdVcPrzPYnvaRRx1THf41hOC%2bxMUxG5liFcaUcZ6z0nShgnlNvsUxdqZQFeTKytkCDFUbXaqVe5TKV%2bRMrgBHSm33TLZQJztbwnddAsqWQES3LPZYV6ZQE1m1V5d1tpkqtShZHVCq2IBMRfaUPzVKQB/bS4rNqgSbzJXVXqbozrVP/M3zDPvPo8RYl3M8GikIsJPxicMCHOKRjTJBbNDOKoUhK03BSJo6uGk%2bl8uDmFxd9FjpAtlpyGUq%2bC7AsTx05DDPUbaRFpl4ukhmKk9RwIR8AuC1eKFFZq5JURvyWLOwFkvmYaMyQr6idADsi/aJydQytsTlxMPBO0TzeiJTcgiqksHB8SIL2ThowqAyUCIThplVhpkqCNjJOTNDGzsb9LOf/5j%2b%2bIfn0F3XaS6WkYDY2WgyR1YSzmUrFEsVKRTuUDA4pNnZAcVASgz7LGfCRgZytl2gUKpCc5kGhRJ5isQzDkEFIYIJ5XHOylAkkXXXY0JSUeZeOdYdd3yWebro6hNiAN7n2I0cHMzCqJ3IUcLGCCQcJTEcCMNgVIKCY1hngp4MWvTsL54h%2bu%2bf6K9nr9NPf/IjCplpdaOQYbk4AosnEVisQI8%2b0qdHH%2b7R1Df7NB2qQS4LmTwtzdr0g%2b9G6OnHI9Say1GQbekAYU8HLMGDlHA86wap19kmyzE0EZoE1sNyHENEoPTwHuvhfYPZjmEjGc9RCgaSuN2klaW0gxSQBeIwYPI%2bDofDSWrNz9OtW7%2bim2/8kp599hmycYOmzbeRp1A8DWc55asUTtZp6qGK4FvfqICACkXQG3KRDF2feoquPfYEXX/sKTp%2b9PtkI4vm7CwyLEXBWBI6MuLkHMpNEaCc5zkHzGXI3xE3wKybKV7yWI7J04GHnfN8UYZmaG4CnF58G0yQpCRISIAcG%2bAxEU1TDvu1JBpahInKYS9PmTgaTaZFdqFDyUqfwtkGfeexGn37kRpNPVyngFmiSK1DhWieth56nDannqCtqSdp4%2bEnKJPAXrFFkUxNEEtXJHgOgDNMbtIJkNf0rYccGSZGZ4t3X2RMpUNnAMfN34ZmTrMSdlItiFsIMZPOtyYmxMrjTAzA%2b5ALQ1EcwedSuNlCF128R4XSEE2pSxZeBivfROnUKZyukd2uUqzapziIqSHoztceos7Xp6iCDIjm6xTFCxAtNsnCExhJlt1M0DfKTgdjKV8CAlgPe7JAr6n4siOiHF0sa0igZtoNXqeaS0xCkcFG55zD4oSTpkxGFKke5ZuD82E8XWGkeBSjiUCiIIBTPgaY5XkyK/MgBHtYN%2b0yWU%2bGyf6eidvGjUM%2blquRhafUziJboD8AWwHYCjgZwGOQXyBPmgshvB9XvkW0zwJ18y4ppiIl6KxJBugUk6fNCY6FZqNJl1XdQDSLzKiZb5OFNDdxW3xzkbwKXICA%2bTuSr%2bG7TRHIRctdhxCFWAkEldsU5rNMCOStQpMS0BuPpCgRSZKNkZFCf7A4uGiKog4C8E%2bRknIxC%2bhMDToXOyJIZ/YoRskA3SV1c9FZwAd45JuYDidoJmJ7FEChjZpF84uiXuPFDiVwuwn8gLEqPQTXwY13KVYbUriMXsBBg4xwXhHDBMWEqBEi%2bLagI4QGOhO18YKoIAOwG4ZNE0FbIMWKqNHGNzdqJigJxLAWgXwM57hn8dkZPu%2bQI1mDmJikAJcHYDALHNh02JYb1x1UZ0VAUn/UTHius2M6HMdow5AtxmbhAK%2bH0CQjGQ4I7z56goVeEEcGxFH7ZqUrQVr4iRvBbQshCD4Mcpg0JlRKyyHZ29w4/WfYXweSARwI/GfbMYcck8nh1yyWFmI0Qbwew1pMMikpWWS4N%2b40GAlMCEnIXDsR9JRE0Kk3fvIiThPidc6UWT6LhjhtlYTU6TlLzqmzcKpaolgWZYEmaCFrFDHIGiYHvwIDjixfiobuQYrc9AhWeqwJzrrkJOWW2U/2JxBRfoUdgvgVi4MInhv6xlXtj7qkPI0YtTMcDI8Bxwl2Su9x8CEYDSLtQngJ5pIVl7SgQ6oEwh05a0KXBWLi4pQiBzWdKsPeqEa9foWlnlPniGGw7IyjZ4wcU5OTcWveSxBn0zTOGDPObSumR4a9LIcccnSXPe8IzlsFmklUYIRZH2WPDkiVD35f5BPOjY4Tw6Wk/dAZIzqcZ8z7WukS5T3uU7qMveAL0y%2bB27s85MiPKn4FXOastC/Lui%2bE/V4LTjUEwoHPxIuKCIYnjbV%2bLg/%2bZgK89c0BcICqtM7b16U17fHHJcd98tITWZNy9fH3GDETsRm6ficZ9Na/d1%2bMy61hH69AkFMe/yVCprot3SC9OkZBoUtnLenwLjms382W9NgtB50nOOjjnw5GgvXY01mjy1T/yHMz2SFGx2R4N7wpqV%2bAmQnm1Q1jPVFG2hfVHiM2%2btGhU0y/u95b5R4w6xAwacNrS9e3m/6eH2H6dr0NctqHIJVBSbdPyNxDNK8bo3RKOZ0957z9Po5xbVt5mrVr6LJZt9ZnPAFO66ZojdjWt8qGuQTkF54niBmf9NYXof0YvSTj2aJ/5gYmbnasUfr2LacE3C7u6ezaiHpeMpLuAal13Hq8NOHw%2bK3pzu9njKF7gH6%2bvE/c5Bn9CvntjZ7IkY5zJaR/xziviN95twR8jeh6j6PGUw3UekE9dxMO%2bwXvvc0RUUkpAXmzPfXqdVynuE7VSRvnssSRn/YhW/9mCZrjvxfEpgPDL5CxeucbT1TdEtBK9b/EkSPng/dzOJZLuLfh9%2bIEHIJZ96gck76kuhkwUSZ%2bzVIT632eGf8DMT22dmLB3xEAAAAASUVORK5CYII=' /%3e%3c/svg%3e\" width=\"908\" alt=\"Scene Setup\" data-srcset=\"/assets/static/scene-setup.82a2fbd.815e52098567e0201973396848e16875.png 480w, /assets/static/scene-setup.a07f463.815e52098567e0201973396848e16875.png 908w\" data-sizes=\"(max-width: 908px) 100vw, 908px\" data-src=\"/assets/static/scene-setup.a07f463.815e52098567e0201973396848e16875.png\"><noscript><img class=\"g-image g-image--lazy g-image--loaded\" src=\"/assets/static/scene-setup.a07f463.815e52098567e0201973396848e16875.png\" width=\"908\" alt=\"Scene Setup\"></noscript></p>\n<p>Now for the screen shader part, let's say that your current scene heirarchy looks like so:</p>\n<p><img class=\"g-image g-image--lazy g-image--loading\" src=\"data:image/svg+xml,%3csvg fill='none' viewBox='0 0 336 413' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-b1e3adba5fe678c3bcbc4787828715af'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='40'/%3e%3c/filter%3e%3c/defs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-b1e3adba5fe678c3bcbc4787828715af)' width='336' height='413' xlink:href='data:image/png%3bbase64%2ciVBORw0KGgoAAAANSUhEUgAAAEAAAABPCAYAAABbP8MLAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAGaUlEQVR42u2bWVMbRxDH%2bRZJJbYDCJDEIQMCXaATHdyHLJAESCAEiEPm8IHLIcb4SBwbH6lKJc5Lyi/5AKnKUx7zyf7p7t0Vi8BUKk%2bLPQ9Ts6udkab/2/2b7qlSQ1vnALi1dgSkd3QNwK5/dlkzxl%2bVxuu1dw2e9u1%2bOLsjaDAb0uT04brdQ71fBjY7vNR8sNF9S7vWbDTGmHMVROA1GutsbPPIdSPZyLY4XCE0GIPY%2bEgghYfZEqL%2bJBzdYQxGp%2bAPjaPHk0CXO4oebwLdnviVe/vycu1eTKSL%2bO74R2QX1uneA%2bfNsOYBw%2bN59AfHcD9TQC6ZxkGmiK6%2bIezde4zt3W9pwgYq2weYX9rG4nIVfYFh8Y4rJQCt9/mLt3j703u8oWbnUO8KooFdweWOoYXiYjg4iqN8GWOhMdhoUnIsh/hIFqmJPKm3hFB8BoHIBG72D0koXJXY555fmI/s2qjeRySRpnDo1zyAH7IIWhhQjNN1M/VOEsRGk9hVmslYVpCNtuljrxIYjXXx%2bq/b3MK11g6dAfzQeTMoZGxjQvJAMvLLlj400gQHC0G9IRL3rOYpFP215/XQsRoEtbgP6uv3mQUI0U1QBrXQvbs3isNcCYWRDAnhRjA2hcHYNNoJjAzD/oERdPZE0EHN1ReTkOBrK8ORITiVWcbRk5fIFzfPQrCdBGADOnvCuEbu8ZCMx19/4p9HT2TyfHFLjF6p3EFpfR/F8i6WV/ewufMQhZXbGJ8pCiRZRKuKwCH87Acdgu9%2bPYWg4QFGksDx7%2b6N4F15C7vpRThpcnBoBonRrIAwkrwFz%2bCogGRkcgGB8IS06dmS5dy/HoIeeolrm3fJnulTCNYLYEz6ghjwFQ3iayPG2W2MawaJwQLmAD%2bzKgzNELxm6xWo10HwrADfkHGyC7BHmDJAUVIXwMgImwwg6kJZDYT1EGSOfRSCTPzrBIvV8Sz%2b2LmHD5Uq/O4IPKEJDKVmZYeIj8wJD9z%2blMzhPEHLFGPSt3VYL/7tuvEzcyt4/PQVFpa35d5xDoKkzg1y5xdLFZRHMzisHiMRn0U6t4qByCQKpdsCQoZgYWWHaLqFlfU7qO4fYnXjHoYn5%2bWLZUu14C7w9Ps3AsHXb3%2bph6CeB3QGxAMWUzNYJ%2bCl9n6D3Z1EKDqJaDKDfGFTgBeOp%2bGl1DmSuCUeECdA8nPeIpkHVuLAKQR9ksKXK/sYIHsuhSAnQi7yCKeLy0YtC2QP4WLIACEbqlWKGgzrkyFrQtCPa829NX59FIIMPgdPYLCZdoHGmvG%2bWlZoNKvvAAJsWn8nbfH84i6EIMdFc3sAYSqH31d2cJwtwkHbRXw0J3soQy5GMOQ8oIOSJr5nr%2bDeykmQAcFMfhVPnr8mht0mEc5BMFyD4KP5Mv5%2bcIiTg5fwDk5idGpByuAlgh9ngjliwfbeIUpr%2b8jk1qhsPhIhrFwhCgTJeIbgiQFBV/B8MdRI7jFEHnCytoe5B7%2bjjSDopzI5nV1FdqEiIOFtMEFeEaT6gA9IuGxmLzJ7gBUh2OtLUgq/A394/OMQZHdhEW7ogGMIMjzYxXmclkQEzlSE/OVWLo%2bNdfBav74YgpoHGAYx/X1U4fUSMFr1FJIbuxEbr/V%2bfSfw1p4bKbH2PQFLZIT1EOSETSDoNEGwXfcAF%2b/jNDifnJGjsc2pPHxU7kYIfDHa5/l8kMvfaEq75jJ4bLqA1Hge3f1xecYFErsae4vVIMhngZwMldZ25cU5TkNAI3iYqr4AVUqZ6IS8%2bRTFfsgbx/BUgWJnF3PEgI3qA4FhsbxDXChjkbLD3btHkhmubx1Qu49l4gdzQcsKrQPB42cnch746vXPIordfCrMbsuHHE3kunPxaSykbokHeMgrfJQGc/k7NDwrhvHhCJeU3Pgz3ho5K%2bQ%2bRCLO5tfho0yRf9RKlSDvVIVSVbLYJrsJgsbgFtN5H8d/l052rRT2itvIGaFeChuZYJPD9Ez/IStlhZeeCV5E7FajDP6fizeXxVbLCJl1BvDPCHDZ1vVfDakfZ8XM0LwlXijAp96UAEoAJYASQAmgBFACKAGUAEoAJYASQAmgBFACKAGUAEoAJYASQAmgBFACKAGUAEoAJYASQAmgBFACKAGUAEoAJYASQAmgBFACKAGUAEoAJYASQAmgBFACfLqtJoDx377PqdUJ4Mfn1wK1P07%2bCwHk%2bhWOlRDOAAAAAElFTkSuQmCC' /%3e%3c/svg%3e\" width=\"336\" alt=\"Initial Scene Tree\" data-srcset=\"/assets/static/initial-scene-tree.9038e17.6ee3bdc4b01be89554fd66f7b39743f5.png 336w\" data-sizes=\"(max-width: 336px) 100vw, 336px\" data-src=\"/assets/static/initial-scene-tree.9038e17.6ee3bdc4b01be89554fd66f7b39743f5.png\"><noscript><img class=\"g-image g-image--lazy g-image--loaded\" src=\"/assets/static/initial-scene-tree.9038e17.6ee3bdc4b01be89554fd66f7b39743f5.png\" width=\"336\" alt=\"Initial Scene Tree\"></noscript></p>\n<p>We want to add a <code>ColorRect</code> node below the below the Camera node and then while the <code>ColorRect</code> node is selected, go to the top toolbar and select <code>Layout -> Full Rect</code> and it'll make the <code>ColorRect</code> take up the whole screen.</p>\n<p>Lastly, while the <code>ColorRect</code> node is selected, go to the inspector and change the material to a new shader material, click into the new shader material, and under <code>Shader</code> you click <code>New Shader</code> and finally click into that to bring up the Shader editor. After you write the shader I highly recommend saving both the shader and the material into their own resources so you don't have to create a new material and shader every time.</p>\n<p><img class=\"g-image g-image--lazy g-image--loading\" src=\"data:image/svg+xml,%3csvg fill='none' viewBox='0 0 1552 968' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-1d2e6e50d44ef636f8fea4a439cb7447'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='40'/%3e%3c/filter%3e%3c/defs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-1d2e6e50d44ef636f8fea4a439cb7447)' width='1552' height='968' xlink:href='data:image/png%3bbase64%2ciVBORw0KGgoAAAANSUhEUgAAAEAAAAAoCAYAAABOzvzpAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAO2ElEQVRo3rVaWY8kx3EeAUtSEne44nJN7uzOzgznnp6%2b76v6vruOvnuO3Zk9yFktSUA2YNqGX/wLDL/4Fxh%2bsWRDlgFJD4IEPQuw/9KniKis7uqe7pklV374kFmRWVmZX0ZERmbWSqnQRblxCq06hlYZIxArY2sviPXPfdjYCeDJtl/ynG7uBkhmP3PeKeN6LJc6lN9U721w%2bZb9rtSRNoK3ICDfjyZL8EXKyNdOUaD%2bhVNtHAU0HIfyVB56i3aWg/tijyWAlXiBB3%2bGcusZKvolspURkvkOCrUxYlkDiZxFnRghRUSFkq3JczDRlHq56hDRDNfrIM11UiahjUyxh0TRQs4cUr5PbZlIlC0E4g34XfDF6vDHZmUBatsbqSChmaibL1BpXyBTHiKS1um7LXqnBl/0%2b8EfrxOZLWqnQWPqYKXYPMdhoEAzX0UoUUck1ZTCNBVyGs/qSBc7NFiTOs/lLcQ1QzoYy/BAuySvSWdZ7ovygGpSL5RuIlExpCxEbUVyLXnvOFxRaVk6w/U5zzIvl0Wr2PfmkCqZaJ29Qt14Du5nsjBAOG0hmu1%2bT3QQ03rSTiLfl0lfyRWb6HYHqDfaqNZaaBsGWrqJrFZAoVhGLl%2baoFCsIF8oT/K5gi1nWbFUnZTze5xK3RyX23Xy%2bbLUmaKMcqWOUrkqeUdeLFWQyRSIsCqq42fQyiMi4Iy0rItgsr0QrHWh5BTBG%2bCPN4kME0UyrZVgJIPLywsMR0MMBkOMTwcYjodEhA7DMmZhKliuVEE3dcGkjrngXXcbCjp/h0i3LBMmwzRhdSw0W214/Br8pBm%2bSBH%2baJm0tIJDku0dpwkZG16CJ43tgyR2PSkp2/dmceC7GZ5gHuFkDSuRWA5GqwWdPsgYn3Yw6vQwNBfAWI4TayC4qc4ErjZHVp/I78No6zB1IoNgESGNOvmHSIHMR0cqbyBNJpjKGdeQpPJspQPzxQVq7VOUGkMyzZY40EC0QsRdhy0vIxivkhNM5NE3TPR0AyYR8M0XT1Gy0ojUA4jrYcRNgsWIIN5xoRtBQiFG5dogIeA8y7h8pr4DbofrmBFEWgFUrBSen41gEQFd6kOXCOixGdab8IXz5GNMBGll8oYLhOJ1hArkQ0oIa%2bR3EjX827//HL/81W/w8//8FX7xX/%2bzEP/xi//Gr3/7O3z9s3%2bwTcAgtWvTh3XqgNVp4kfaPazk7%2bJO/R7u6D/BHetjvNe5j/e6hB5h%2bAneGxD6n9jPlL/Tv487g/tKfn8ilzpuGeGOSe0ZH2OlvopP62uwTPI9um0Oum6bUU0IKCCZ02lGm4J4lhxwZg4iayJTtVDVx/ibb/8J3/z1P%2bL119/ip9/83UJwGdfRO%2bQEQ9Es2Z0hH2YC%2br027lc%2bw48aD3DX/AyrvYdYHa3ho7NH%2bOiU8PQxPjonXDy2888ULtZVqp6fqvy5euZUtbE6pPb6a/ih8QAbxhZ6HfvbhiLAFAIaogH5So9WgTPkyl0ZbEJrL0SqSGZSMGi1oaUuyjHE7WAzuEZAjwj4uPopfth8gA87n%2bHu6CHunq9h9fIxVp8TXii8pAG9WhdI/gs7tbE%2bKZNyrn%2bp8OwR7p6t4e7wIT6wHuBJZwtdIqDtIoCdYrPZFg3Qyh20O0%2bRq1CMkajS8loX5zUPLmNwnuvchmi6QT6gsoSAmiKgRwScUGfPadYuHk0HffUEH325PsVP6fn1E1tOREzw2lXvC0UEk/j0kWjVBx0ioLuYAJ38UiBalIE3SAMqzRHKBDcR7woXAeZiDeg5GvBoMvtCgDNoZ%2bBO6uTduHoyIYI1g9tgDVgdEwG9v1qqAQ4BhWofpfpABs2z5mjAuwzceX%2bhBvQdAlrkA5iA8UN7xl4o1f5yfTrQN4yNSf7eV5T/amM6%2bDcKjsY45sDtMQFdIsDavFkDyPZ5aXOr%2b7uSMEtATJshoNttTU2g65jAmmiAqPWr9elsXykCnIHyoB0CHGJeuzSBCXhu%2b4HVE5uAdSKgY7VnnKCbAPYBtfYJOcDmjA/4i2lAUGkAf7xNa/HFaQ8PGg9tDRiQ%2bp%2bu2TPmEPB6qu73nMFeqYG/URrg1obXcxrg%2bAAi4P3uA2z3dnA27KHV1pdqQE0/QZHMgJfCdx38NR8QnDOBQV%2b3NaClVgHHBC6V579y2bsz%2b/P%2b4M3GrMyZ/Ze2ExQfcOKYAC2DXWOhCfiVBtSNU3GCvAw6nt7t9TnlwbgRctVZBH6Pt/7XCOixCVRcBIwUAbIKKO9%2b5aj/nKq/dvkCh4grFwFqFRCnenL7KhCKl6GV%2bLxihGyJttsUEmdpi51RkHzBRL7aQ9M8l1CY0yqZDMudepKfA7/LhC6PA1rOMvjQttkLlyN0SHAvfe7V4EvXEvhquizKKnBpEyBxQGd5HNBuGxQCl8QE6vopkTCkuJ%2bCnrlgiAchxJQsqcuBE5PllPM7aRow13G/xxFmNNWwQ%2bFryyBrQOMTfGh9Kh0VP3ChlsJLtRw6a70TCL1yrfUvZzGZfUWkmIATB5jXVwGekDqFwsehHAq1Psz%2bc/ED0fRyp%2baYAqu1mIBSdc7zLpF3gPNmwBHjSiJdsj9sLCbgw4GKBRxn6MDRisvpwFguK4bIVZmTqve4HWmvTxpgPsC6sYSARhOeQFZm3%2bxfQu9eEJ4thdG7lIDp0JfEzmEUu0cx2iJH5Pmf/%2bVfaQ/wLZ5sB0gep/KY1NmhOitR2g2axlwcUCICKkRAmwgwSQvYF1CHV4f2vsDBXfXMq4XIxqrsZG36PFR51iRG76HEF6vU5getT/CkdTMBg9MvcfHyGwwp7Y5eEF4uRP/kFcbnV6Q1xcmZ36NNLwLhNP7vf/%2bE3//hj3i8eSxnlwwuZ5JmTMCgTnSsJn6cvIcfpFdxp0C7wfJP8F6Ndm91hSbj/hQNJWvZeJ9lLSUnvE95htSpfTxp6/0K7QbztBssraFDu0HdtRt0CDgiAtqdC/Rl8K/QHb%2by0wXojb%2bAQabiIQL2vazyaUm5jYsXb6idM5rxhMgPfBnsHyex50nMOkGehbOTDvbSW3icXsdGfgMbBUJxExtlG5sVxpYNfmY5yXbq29ipbUvekdt1Z%2btvlGxsFjbxSHuMQPkQJ8OubMcnGsAHIkQA2%2b3w/Gs8v/pbDJ9%2bjQHlOb0GJb%2b4%2bnvkra8QTOkIJltycBvR%2bggVzuFPWSRrijyUNuCP1%2bSEeY4AHU8vhzjr9zDudDHuqvQWjKwOnvYHAs6/zTtO22f9Pk7PxxKE2WZorwKsAXz8lS710e5eokUoNcZyOMsHtqmCdQ18eJvIO%2bgKkoUuUtRGik%2bpHTnJEjlaZtO6TUC3YwkJFpmCSXGAwed7xuy5nQN%2bNp3zOxcMBfMGuNsRmKpNAn/b4rZNNkOTtsMtuQeI8ElurkupRWkH/kQLnmgDxzFaJaIO7OejcJVIy5LXT2L7kJwdOTxOJziaytg8fFGKBD3%2bFJKZIlKZEqUlpHOUz5YE/MxpWivbyFJgkq%2bhUG5%2bZ%2bRLjWk7i5Cd5jNaBYl0UUyAZ7zcHFOwM0CJ0lylT6pdXwg%2b2vdHCvCGNHGgnuASUBnXkWUwSsxmyiPEND7778vZebIwTVnuJXb98ZbAx4jdgiX1nDauo63g1GvDG61j36chruloUHTHp0J52hpzABOhbXGU9gXz4MPQSJry6ZbcZ8Sz7SWwy0IpigT59idbJJvQDLkpSeYtsbEk2Ui21JM8X3LwJUg03ZbG7ZSQUVCyWEaXNJJuCdz1ucyWudGWixi%2bNGHky32K/fvyXa6/780gEOdzAHtwHN/zSS6f%2bB6Qfzjw5wSHBCaLj8k5eGLnxh5/l7z8zjJIeYpMIJingCEMny%2bFaCCDCCEQySEUK%2bA4yGfuMRx4E1McuzAnO6I2ON0/jlManynjgITlhySbIin1eD3eO4rCbA7Q7JxS/M%2bhKt8F5pCiNJXXKdUpnNWhUQzP4a3sCpN1QZiiOq6To41TsUqOT2vSTrIgu8llCBL4zHHlgJjjoGCHoqZdwh5HSK5IivH5fniSLoNdHpm8s0Wyrb1pGV9oct6%2bSJ3DbhBbuyHEaFDRZBm%2bkB228sFltmjK4HmAvImRHWG8eu08kE2D9wJ8f2Dv9uoTguYhZamGfS/AqsS3sds06C3uPKXuAe8cRmxyjlT4yOS40t2jKWFTRO33JnWm7zIRi8BExMiBZSne3/PE5R7gkDSAD0ZZpfnZHymSE8uJ6u54kuLtd47sG6HtwwQ%2bP4hLKuVHyaXg8s8PeJxRRwOC2Kf42EcqyTgmVT4mb3lM5nDAak0rxc7BdLDcwd1D98AXkRBTstl68q5K91Q9NhUmWyNbb9KWNp6jIIiWs31aBewOp6XTNtLiG94NWSGAiRcNYBM4oI74aW0M0IC9/rQQ4GUSQpoQIHbqsTvs3M87s/c2ebdsHo7c689QKJsVwrijBz5N3fXNDsC%2bG/x%2b4PeZyOOgRqZUsjWAO8AEeAnHpAkecloecoBMwq43IbumrbnBuDt%2b26DfFhvq5wX%2bkWLvODVDgAzgnWd%2bCmdXKATwKrCrVJvBXpvTebV2NEDKDiKT8n2q72jGd8FNmuMmwCaB8DazPDGV5eC2bRMIMwFZbJIT9NDa6GHHQh/1q8F/t19PQpPfTzZ2grcgcKOmcBl3lC8/Yxn7LiBK4Pwh9XfZrPLADsmEtw%2biN6xYERk4T6IvnMMKr7W8JnOIyA4wSA2EyAcEVdjoT5cQyJThTxYnjmshPLFpuSe2vJ4qZ4KdfbuDybJIJsCBCu/ttZKFamsslyLTQ9Da0usx%2bzToFqgTowCHwvw3Bf%2bAxP/fRDhV%2bShB5BzBKYSVzK6v3rmGZfLZ8pD8GlOfgP8V4u0r/4dko2kHQrT%2b85UYH4fZJ75VBfcpcHWS3nQSPDkmcx%2bJxXN92iIO5N8ZTvk5lushqnXlPxpO7Tp9qRPVuHxAuzPaoWU63x%2b013D/v8PfSBaGtG0d0hZ4RBi4HOBfzvnNYyVJ%2b%2bNS81T%2b8tIqQ1Ra58hVR7QJsVCsn0jKz1yH/woLZ3uIl58hmDLkjy/%2boysQf3fwn2b8Jxn/jcbfSRE40Jk6uNT/C/4M066rL7HBFlgAAAAASUVORK5CYII=' /%3e%3c/svg%3e\" width=\"1552\" alt=\"Screen Shader Material Setup\" data-srcset=\"/assets/static/screen-shader-setup.82a2fbd.7e9e5e4c629a12086371b6cc92a4bf1b.png 480w, /assets/static/screen-shader-setup.cbab2cf.7e9e5e4c629a12086371b6cc92a4bf1b.png 1024w, /assets/static/screen-shader-setup.c8d54d3.7e9e5e4c629a12086371b6cc92a4bf1b.png 1552w\" data-sizes=\"(max-width: 1552px) 100vw, 1552px\" data-src=\"/assets/static/screen-shader-setup.c8d54d3.7e9e5e4c629a12086371b6cc92a4bf1b.png\"><noscript><img class=\"g-image g-image--lazy g-image--loaded\" src=\"/assets/static/screen-shader-setup.c8d54d3.7e9e5e4c629a12086371b6cc92a4bf1b.png\" width=\"1552\" alt=\"Screen Shader Material Setup\"></noscript></p>\n<p>Now that the shader editor is open you can use any of the shaders below and when you run your scene you'll be able to see your 3D scene but with a night vision filter in front of the camera.</p>\n<h2 id=\"shader-1---grainy-night-vision\"><a href=\"#shader-1---grainy-night-vision\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Shader 1 - Grainy Night Vision</h2>\n<p>This first shader is going to consist of a grainy night vision effect with a bit of tunnelling around the edges. The original code for this shader can be found on <a href=\"https://www.shadertoy.com/view/Xsl3zf\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Shadertoy</a>.</p>\n<p><strong>Shadertoy Shader</strong></p>\n<pre class=\"language-glsl\"><code class=\"language-glsl\"><span class=\"token comment\">// by Nikos Papadopoulos, 4rknova / 2013</span>\n<span class=\"token comment\">// WTFPL</span>\n\n<span class=\"token keyword\">float</span> <span class=\"token function\">hash</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">in</span> <span class=\"token keyword\">float</span> n<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> <span class=\"token keyword\">return</span> <span class=\"token function\">fract</span><span class=\"token punctuation\">(</span><span class=\"token function\">sin</span><span class=\"token punctuation\">(</span>n<span class=\"token punctuation\">)</span><span class=\"token operator\">*</span><span class=\"token number\">43758.5453123</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">void</span> <span class=\"token function\">mainImage</span><span class=\"token punctuation\">(</span> <span class=\"token keyword\">out</span> <span class=\"token keyword\">vec4</span> fragColor<span class=\"token punctuation\">,</span> <span class=\"token keyword\">in</span> <span class=\"token keyword\">vec2</span> fragCoord <span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n\t<span class=\"token keyword\">vec2</span> p <span class=\"token operator\">=</span> fragCoord<span class=\"token punctuation\">.</span>xy <span class=\"token operator\">/</span> iResolution<span class=\"token punctuation\">.</span>xy<span class=\"token punctuation\">;</span>\n\t\n\t<span class=\"token keyword\">vec2</span> u <span class=\"token operator\">=</span> p <span class=\"token operator\">*</span> <span class=\"token number\">2.</span> <span class=\"token operator\">-</span> <span class=\"token number\">1.</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">vec2</span> n <span class=\"token operator\">=</span> u <span class=\"token operator\">*</span> <span class=\"token keyword\">vec2</span><span class=\"token punctuation\">(</span>iResolution<span class=\"token punctuation\">.</span>x <span class=\"token operator\">/</span> iResolution<span class=\"token punctuation\">.</span>y<span class=\"token punctuation\">,</span> <span class=\"token number\">1.0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">vec3</span> c <span class=\"token operator\">=</span> <span class=\"token function\">texture</span><span class=\"token punctuation\">(</span>iChannel0<span class=\"token punctuation\">,</span> p<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>xyz<span class=\"token punctuation\">;</span>\n    \n    \n\t<span class=\"token comment\">// flicker, grain, vignette, fade in</span>\n\tc <span class=\"token operator\">+</span><span class=\"token operator\">=</span> <span class=\"token function\">sin</span><span class=\"token punctuation\">(</span><span class=\"token function\">hash</span><span class=\"token punctuation\">(</span>iTime<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">*</span> <span class=\"token number\">0.01</span><span class=\"token punctuation\">;</span>\n\tc <span class=\"token operator\">+</span><span class=\"token operator\">=</span> <span class=\"token function\">hash</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token function\">hash</span><span class=\"token punctuation\">(</span>n<span class=\"token punctuation\">.</span>x<span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> n<span class=\"token punctuation\">.</span>y<span class=\"token punctuation\">)</span> <span class=\"token operator\">*</span> iTime<span class=\"token punctuation\">)</span> <span class=\"token operator\">*</span> <span class=\"token number\">0.5</span><span class=\"token punctuation\">;</span>\n\tc <span class=\"token operator\">*</span><span class=\"token operator\">=</span> <span class=\"token function\">smoothstep</span><span class=\"token punctuation\">(</span><span class=\"token function\">length</span><span class=\"token punctuation\">(</span>n <span class=\"token operator\">*</span> n <span class=\"token operator\">*</span> n <span class=\"token operator\">*</span> <span class=\"token keyword\">vec2</span><span class=\"token punctuation\">(</span><span class=\"token number\">0.075</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0.4</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1.0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0.4</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    c <span class=\"token operator\">*</span><span class=\"token operator\">=</span> <span class=\"token function\">smoothstep</span><span class=\"token punctuation\">(</span><span class=\"token number\">0.001</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3.5</span><span class=\"token punctuation\">,</span> iTime<span class=\"token punctuation\">)</span> <span class=\"token operator\">*</span> <span class=\"token number\">1.5</span><span class=\"token punctuation\">;</span>\n\t\n\tc <span class=\"token operator\">=</span> <span class=\"token function\">dot</span><span class=\"token punctuation\">(</span>c<span class=\"token punctuation\">,</span> <span class=\"token keyword\">vec3</span><span class=\"token punctuation\">(</span><span class=\"token number\">0.2126</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0.7152</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0.0722</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> \n\t  <span class=\"token operator\">*</span> <span class=\"token keyword\">vec3</span><span class=\"token punctuation\">(</span><span class=\"token number\">0.2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1.5</span> <span class=\"token operator\">-</span> <span class=\"token function\">hash</span><span class=\"token punctuation\">(</span>iTime<span class=\"token punctuation\">)</span> <span class=\"token operator\">*</span> <span class=\"token number\">0.1</span><span class=\"token punctuation\">,</span><span class=\"token number\">0.4</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\n\tfragColor <span class=\"token operator\">=</span> <span class=\"token keyword\">vec4</span><span class=\"token punctuation\">(</span>c<span class=\"token punctuation\">,</span><span class=\"token number\">1.0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre>\n<p><strong>Godot Shader</strong></p>\n<pre class=\"language-glsl\"><code class=\"language-glsl\"><span class=\"token comment\">// For Godot we have to specify the shader type. Since this shader goes on a ColorRect node, it's 2D and all 2D shaders are of type `canvas_item`.</span>\nshader_type canvas_item<span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// I wanted to extend the original shader a bit by offering 2 params that could be customized via in the inspector or code.</span>\n\n<span class=\"token comment\">// The amount of time that it takes to fade in from black to the night vision. A value lower than 1 will result in faster fade in times and a value higher than 1 will result in longer fade in times.</span>\n<span class=\"token keyword\">uniform</span> <span class=\"token keyword\">float</span> fade_in_delay <span class=\"token operator\">=</span> <span class=\"token number\">1.0</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// The amount of grain applied to the night vision.</span>\n<span class=\"token keyword\">uniform</span> <span class=\"token keyword\">float</span> noise_amount <span class=\"token operator\">=</span> <span class=\"token number\">1.0</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// Only difference here is that we don't need to specify `in` in the parameter.</span>\n<span class=\"token keyword\">float</span> <span class=\"token function\">hash</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">float</span> n<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n\t<span class=\"token keyword\">return</span> <span class=\"token function\">fract</span><span class=\"token punctuation\">(</span><span class=\"token function\">sin</span><span class=\"token punctuation\">(</span>n<span class=\"token punctuation\">)</span> <span class=\"token operator\">*</span> <span class=\"token number\">43758.5453123</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">// `mainImage` is always `fragment` in Godot and it takes no arguments.</span>\n<span class=\"token keyword\">void</span> <span class=\"token function\">fragment</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// Shadertoy has an `iResolution` global variable but we don't have access to that in Godot. The Godot docs recommend either using the following definition below or passing it in manually.</span>\n\t<span class=\"token keyword\">vec2</span> i_resolution <span class=\"token operator\">=</span> <span class=\"token number\">1.0</span> <span class=\"token operator\">/</span> SCREEN_PIXEL_SIZE<span class=\"token punctuation\">;</span>\n\t\n    <span class=\"token comment\">// `fragCoord` is `FRAGCOORD` in Godot.</span>\n\t<span class=\"token keyword\">vec2</span> p <span class=\"token operator\">=</span> FRAGCOORD<span class=\"token punctuation\">.</span>xy <span class=\"token operator\">/</span> i_resolution<span class=\"token punctuation\">;</span>\n\t\n\t<span class=\"token keyword\">vec2</span> u <span class=\"token operator\">=</span> p <span class=\"token operator\">*</span> <span class=\"token number\">2.</span> <span class=\"token operator\">-</span> <span class=\"token number\">1.</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">vec2</span> n <span class=\"token operator\">=</span> u <span class=\"token operator\">*</span> <span class=\"token keyword\">vec2</span><span class=\"token punctuation\">(</span>i_resolution<span class=\"token punctuation\">.</span>x <span class=\"token operator\">/</span> i_resolution<span class=\"token punctuation\">.</span>y<span class=\"token punctuation\">,</span> <span class=\"token number\">1.0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token comment\">// Instead of `iChannel0` we have `TEXTURE` and `SCREEN_TEXTURE` available to us and since we want this to be a screen shader we use `SCREEN_TEXTURE`.</span>\n\t<span class=\"token keyword\">vec3</span> c <span class=\"token operator\">=</span> <span class=\"token function\">texture</span><span class=\"token punctuation\">(</span>SCREEN_TEXTURE<span class=\"token punctuation\">,</span> p<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>xyz<span class=\"token punctuation\">;</span>\n\t\n    <span class=\"token comment\">// Instead of `iTime` we use the global `TIME`.</span>\n\tc <span class=\"token operator\">+</span><span class=\"token operator\">=</span> <span class=\"token function\">sin</span><span class=\"token punctuation\">(</span><span class=\"token function\">hash</span><span class=\"token punctuation\">(</span>TIME<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">*</span> <span class=\"token number\">0.01</span><span class=\"token punctuation\">;</span>\n\tc <span class=\"token operator\">+</span><span class=\"token operator\">=</span> <span class=\"token function\">hash</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token function\">hash</span><span class=\"token punctuation\">(</span>n<span class=\"token punctuation\">.</span>x<span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> n<span class=\"token punctuation\">.</span>y<span class=\"token punctuation\">)</span> <span class=\"token operator\">*</span> TIME<span class=\"token punctuation\">)</span> <span class=\"token operator\">*</span> <span class=\"token punctuation\">(</span><span class=\"token number\">0.5</span> <span class=\"token operator\">*</span> noise_amount<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\tc <span class=\"token operator\">*</span><span class=\"token operator\">=</span> <span class=\"token function\">smoothstep</span><span class=\"token punctuation\">(</span><span class=\"token function\">length</span><span class=\"token punctuation\">(</span>n <span class=\"token operator\">*</span> n <span class=\"token operator\">*</span> n <span class=\"token operator\">*</span> <span class=\"token keyword\">vec2</span><span class=\"token punctuation\">(</span><span class=\"token number\">0.075</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0.4</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1.0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0.4</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\tc <span class=\"token operator\">*</span><span class=\"token operator\">=</span> <span class=\"token function\">smoothstep</span><span class=\"token punctuation\">(</span><span class=\"token number\">0.001</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3.5</span> <span class=\"token operator\">*</span> fade_in_delay<span class=\"token punctuation\">,</span> TIME<span class=\"token punctuation\">)</span> <span class=\"token operator\">*</span> <span class=\"token number\">1.5</span><span class=\"token punctuation\">;</span>\n\t\n\tc <span class=\"token operator\">=</span> <span class=\"token function\">dot</span><span class=\"token punctuation\">(</span>c<span class=\"token punctuation\">,</span> <span class=\"token keyword\">vec3</span><span class=\"token punctuation\">(</span><span class=\"token number\">0.2126</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0.7152</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0.0722</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">*</span> <span class=\"token keyword\">vec3</span><span class=\"token punctuation\">(</span><span class=\"token number\">0.2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1.5</span> <span class=\"token operator\">-</span> <span class=\"token function\">hash</span><span class=\"token punctuation\">(</span>TIME<span class=\"token punctuation\">)</span> <span class=\"token operator\">*</span> <span class=\"token number\">0.1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0.4</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\n    <span class=\"token comment\">// `fragColor` is `COLOR` in Godot.</span>\n\tCOLOR <span class=\"token operator\">=</span> <span class=\"token keyword\">vec4</span><span class=\"token punctuation\">(</span>c<span class=\"token punctuation\">,</span> <span class=\"token number\">1.0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre>\n<p>So I've highlighted the differences but I'll go over them again quickly. Every shader in Godot needs to have a <code>shader_type</code> and since this is a screen shader and will be used on a <code>ColorRect</code> node, it's the same type as all 2D shaders, <code>canvas_item</code>.</p>\n<p>Below that I've added a couple uniforms so that the fade-in time and noise amount can be adjusted in the inspector or by code. The rest comes down to constants such as <code>iResolution</code>, <code>fragCoord</code>, <code>time</code>, and <code>fragColor</code>. <code>iResolution</code> is a global in Shadertoy that we have to define and according the Godot docs we can define it as <code>1.0 / SCREEN_PIXEL_SIZE</code> or we can pass it in so we just use the first method. The other globals match up to other globals in Godot such as <code>fragCoord</code> is <code>FRAGCOORD</code>, <code>time</code> is <code>TIME</code>, and <code>fragColor</code> is <code>COLOR</code>.</p>\n<p>An image of the effect can be seen below and a short gif of it can be found on Gyfcat <a href=\"https://gfycat.com/willingwhitebantamrooster\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">here</a>\n<img class=\"g-image g-image--lazy g-image--loading\" src=\"data:image/svg+xml,%3csvg fill='none' viewBox='0 0 925 467' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-510fb6af4a9deb9fccee7563678d6f4a'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='40'/%3e%3c/filter%3e%3c/defs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-510fb6af4a9deb9fccee7563678d6f4a)' width='925' height='467' xlink:href='data:image/png%3bbase64%2ciVBORw0KGgoAAAANSUhEUgAAAEAAAAAgCAYAAACinX6EAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAMeUlEQVRo3s1Y%2bXedVRV9md%2bQvOS9JC/Te2mSTnRM0zZpm07Y2mpbOkHFagUEKqgMLSWmLZW2tDigSxfOA06gIlRQQCpYpEAFa6WAiiz8b65n73Pu/e4L6fJX31pnffe703fPvvvsc%2b9LNS5pcel1BZfd1umaP97t8reWXetd/a5tctAVTsx0xS/Ndu3fmOs6vzffdf5wget8ZIEr/WKR6/rVYtf1%2bLDr%2brU8nxhW%2b81wVbn7zBLX/aTYbxPrwvtTYk%2bPaN3vRpL2M/Z8SsuYR8cMqz0RGb77S7PHFrvSo4tc6ScLuc6O78xzHQ9f5dq/OscVT85ybYcHXeuBGS6/v%2bya9/a47PaSS68vuKaRFpdqWpbnS3a7APDJHpe/rczOhfuGOLj963M5IZwv/WyhfvjxyMEz6kTPs0tdzx/U%2bP7c0sSsvufsMu33vNgfl6k9v0zf0f7s0upxZ609moeAPSP2%2bxEFygMrayo9ZiD8eIHr%2bPY81/7QHNf%2blTmu8MWZru2eAZe/veKa9/W43K6Sy2woOvhOADIfKrrcjpJr%2bVSvAFBxbYcGXOF4tPvfnc%2bJ8QGiL7vBj8sighOy2N6XRsWWu94Xxf5kz5el7s9qfa%2bMud5z1oa%2beKLN18X158xejEzee16Q77ywXL/5zFIa2STAgJVkwiMLlQXfFBZ8WQC4fyZ9av18v2u5oVcB2NjumkZbBYDlAsDGIivRmP%2bsADAxqLsvCIJKnT%2bIAHhSaYkdwULihfe9OqZOnh9Ve1mdZp0BwT6vjYV29kHdea2nXViRtJ%2b3OVAv/QjYS6MBHDJHGITN4OaACT9fRMZ2fEtZUDwhYfCFQQXgJgHg2i6X%2bXAVAO0KwI297ITOYADpL1Tq/JHFfbzz2IlzyxMnXkkW3/cXsTfsCXt9hba9ruXyX1cm7Re0vnxxpb5LG8rsg/4Ax/f1c8QAAoSzGibdTyehAK1iGHxtris%2bYADcGQGwWQAYiwG4rsu13NLnWu%2b2%2bD81i4PJAADwqNLfx3ugJZzHwvwC31Dny38TJy6tcuW/r6IzdAp1eL9kdtHq34zefR9fvqhgBUC8vToWwGcYPmcsgBCLMJZ%2bulABkE0snppNnyiEIvK5Pd0us0kAWAEABAWIYHqNCOE1ndSB1rtmKAMekvj//nylvogfBM%2bLU6C%2bUTcsOHb8TTOpq7w17ipvj/NZvqwO%2bzLq0Y/Py9XjAjgeSA/EawaA6QI0geKI7CFrhWBj46BhDAERQe6%2baF16bYGZL72yTQAQFFDBbCBPUIMZYa%2bkxM%2bUXdu9A654ejZFBWEABnDnEc8XjPIXViQ7ieclBaHyzjiNzlm58o/V6jjqUH5HgYGDfH/b%2br1lhvGeFd4uRmzweiGb0S2CiJSIVFh8cDaFD1kN6R0%2bYddjX9PjAGClATCqz%2bzmDpfbWWJIYCAYgdBgdhAUC8c0O0BkoAlAnwzALl1WR/v/vcZV/rWaz/73tFx5dzXL/e%2bv0TLa/rOW7%2byPce9pW%2bWf1v5%2b8k57NwEPIUenRZCR9sBW5vx7ZjDdYc1YO1J788cUAPiWubrI2E8AAAPWJQCAATk5KGAQBrfcrM5DQKAPCA8AAWbggAGBQa7teHge0ac%2bnB8L4ufj3IsjgTIqe21gjPvnpVVJP9RFmQHhBxaCjfgmqS0HNmQtrKn1oK6v9Y5%2bgoB4JwjiC6if/WiHHoBGIwDSq9oUleV2IJJO6EwA9hkAn6todjDHC0eG6DyEBTmWJocN6AbK2Am0MZscHdJ%2bsKNm6O/LGHdsKDE/bsoYUDp8534dw%2b/4MbIe5vqDBoBQH2sHAGAzAdjSUeUrdE9PgoIEUVnnGdBJAEj/m/r0dBgB4HefH8dxWTIGmMCn6AVU1y%2bGYyYG6FR4TloZ8xwaSMrYyXuj%2bkNWljEAQOeeRcfxPQVCDjlHZBw2Bd8ES2WtOPZ6AJqv76ZP8I0MQAjIxjMN1pXTrmFurhoAMOD6KAREDPMyaaD/hLJAd093HnQkCKd1oWSJLZ5j8PTOezBQPjIYAGWuBmi%2bXwwAHAcIsJMKggeA35rQ834IgVsjBuzpoq5lP5JoQMO8nKuvpAWA7kbXMCurtIgAwCAC8Ok%2boolJiS4WOGnUNsp72gcWnJplTlY7QWofGaouH46A8fEcMwHgST8PLM3vvt%2bAo0MBaKwRIZuHCAp7efYHADj%2bggHQO9G9htlZV9fTJACUGl39YCYwIGtpkABAAyR38oYIBhyYkezmkcEkno8bAKe8zaYTwdlJc8jvfmyHEnDC7sfAWWgg8wQGnI704OhQFXvIABx5AYAPAcsCIQQAgGx6XVejANBZDQByJbJAACBmAADwC/Yi6J3HwvwiH5iVOB07OxntrN/dWB8mBj8QKh7EaRlwLBHJAMDdkQgaA6gBOzQEAgNmCgAlAtDg6gcyVWkwGwNwswLgNQAf8PHLBRyPGOBZgEPIFCHzi6PTEKsDU2J9IgEG/0dw98A%2bcQRtQQMguidUc0IWAkg2D8YyBKABN%2bo5IGQBrwECQD0AkM1P1QKAGZlwOAADfAi0AIBbTATllhgY4LOAT2UAAYs6HTFAnMM4sAmpNbu1UxcgAPOE6SnvATmocyN/53aX9DAG4eKptId0R2jxGydjDRhSIT2s7CJTPQOEvc2f6AkimLGDEDJA/VDGYfNTtR0AIC0MyCcaIHcC3Jgw2IcAzwJyGAr09UJ4RHeBWcAUGoDAQSCfXt3GuMN/DjDkXswbs4LOTyggud1d%2bn0I8S415G8wgmeBSHj9eSKIJjXAANhvAOzrqdYACwEAAN8VgAFjAACQXeICrjMAQMP9xgCvAz4N3jcUwoD0P2Fp0C4f%2bDDOGHAaRvSFZaClz9c0nDJl8WAb2SLf53ObAgH2AAjS3kIuHIh8JjFNQZhi98EygBY0YFekAWMxAO0RA%2bKjsD8HSBxhMi7UUiHD4LAKVDjB%2bXCQcriAyMJ564KBCXYL4/%2bPWBRAxjEVlL/WaLqhSOepRdgMM/yBwb/qJNTiU2JIo4fUeX8O8BriNaCKAVUAFA0AnANkkfgQkd9jDLhB0yBPg3ckuxWEa3IwsAELwQc9g%2bAI7xpwXq6eiD1eu7dre3BcaM935GqECbKRAEHb2G5WJGj4NuN%2bMjpZWgiEDCBsJQCydmoAwmqbAWAXP2S%2bBIB%2bA0Doyh0A5XZ3JcdhiSWKoUxMhUU4AOkDCRvAEDqD2N1hIrZDDx90ADu6xcJrZyJyjHP0BwgyHhoUwmZtIVxawgFNxvBvu3DUVg3hKZDiV1H6M/7tIrRTwwjrwLw4/iPsEwDkSNg0kucOZdYXSblwJTYdQCgQBNyybq%2bECxJQRxtVfovGLW2r2XYzOL69M8Q1F7VN67NW78fzH1uhKRYaLmlbbbx9h3/c3KkawvVgc26z9AfqI/YtA3BuhBHYhXvP0jxZj/BP1RbqXV1fk2tc1KxngTVKP3wEH2Q22Gs3Q7scEYj9KjTYOYQNd3izxipSKc3KPobJBm%2bb4mf1uOxW1QDWCfVZv1HfOZe9A0iGpz/3wyz3I3WGO8AWnT%2b9Ri9AjcMt3HT4nqptFQC6m3g5AAv4B8n6QhAjngp32cFIhA2oenRJV6/uNgYMwjvRXl8IZR/bFFrfZ4O1XZ08eU31adPrQDyHCWn4pjjmBZtPiOse0xV/BQZgOACJb/CxcUGzq%2bttcvA9VdNcxxMRzsZoIO0gXIIWP7pJd5b03N4ZqAthA2PY1wSOZQjduAke6la2VpWZbn37eNKX/abMgyfL40l9uMpave/LEIHD11g4IZNsbA%2bpF3OD%2bo0Lm13DHL0H1LTUCQCZWlfbVk9K1M/MuIarcq5xcYsCsdI%2bjgmwa0JHOI5woQmVGkda9LkkKo/Yuxg/uiRqH4nah5P%2bTVPrhqP3qd%2bYrq%2bs2YdvcNqDhjVIe8P8HDcaog/tg%2b%2bpVEONq8nVuVphAWiBRuRI/EfQOL%2bZA4MjwhCcoXGVDCZoom/DnJyWaVauas9Wm6/D09ucqfNE7dPN69cw1xzDBmLNHiCsXd5Duxz54SMuQWB%2bqrFGAKhNuQCCxASUEfQgGOU00wVyJoQS/x1wAm99ZuWo3DelzQxzTe1bX47qp5snmquq39Rv%2bPXI/T6sHeuGCbPZJvVIe2B7cB6%2by0/iQKzOgEjXuppsHeODgMiA2ny9vue1zHpvbWatV3hOZ1ca1/o/%2bl5pLm%2b2PjjI9Vo7ythg%2bEbH62rU55QHYKqhsdZA8VZf80Fr%2bD%2bw6dYFB%2bsiH2pTscNV9l9xyWqoRWtRtwAAAABJRU5ErkJggg==' /%3e%3c/svg%3e\" width=\"925\" alt=\"Grainy Night Vision\" data-srcset=\"/assets/static/night-vision-grainy.82a2fbd.2cd1dc3af9be86c655682d93eded84c4.png 480w, /assets/static/night-vision-grainy.c0f240a.2cd1dc3af9be86c655682d93eded84c4.png 925w\" data-sizes=\"(max-width: 925px) 100vw, 925px\" data-src=\"/assets/static/night-vision-grainy.c0f240a.2cd1dc3af9be86c655682d93eded84c4.png\"><noscript><img class=\"g-image g-image--lazy g-image--loaded\" src=\"/assets/static/night-vision-grainy.c0f240a.2cd1dc3af9be86c655682d93eded84c4.png\" width=\"925\" alt=\"Grainy Night Vision\"></noscript></p>\n<h2 id=\"shader-2---grainy-night-vision-alt\"><a href=\"#shader-2---grainy-night-vision-alt\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Shader 2 - Grainy Night Vision Alt</h2>\n<p>This next shader is similar to the first one but with a different grain and look. The original code for this shader can be found on <a href=\"https://www.shadertoy.com/view/3lcXzl\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Shadertoy</a>.</p>\n<p><strong>Note:</strong> This shader has a slight amount of screen flickering so if you're sensitive to it you should set it to zero and definitely be cautious about setting the value too high as it can be intense.</p>\n<p><strong>Shadertoy Shader</strong></p>\n<pre class=\"language-glsl\"><code class=\"language-glsl\"><span class=\"token preprocessor builtin\">#define</span> NOISE <span class=\"token number\">0.2</span>\n<span class=\"token preprocessor builtin\">#define</span> FLICKER <span class=\"token number\">0.02</span>\n<span class=\"token preprocessor builtin\">#define</span> LUMINANCE <span class=\"token number\">0.8</span>\n\n<span class=\"token keyword\">void</span> <span class=\"token function\">mainImage</span><span class=\"token punctuation\">(</span> <span class=\"token keyword\">out</span> <span class=\"token keyword\">vec4</span> fragColor<span class=\"token punctuation\">,</span> <span class=\"token keyword\">in</span> <span class=\"token keyword\">vec2</span> fragCoord <span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">//Normalized pixel coordinates (from 0 to 1)</span>\n    <span class=\"token keyword\">vec2</span> uv <span class=\"token operator\">=</span> fragCoord<span class=\"token operator\">/</span>iResolution<span class=\"token punctuation\">.</span>xy<span class=\"token punctuation\">;</span>\n    <span class=\"token comment\">//scene color</span>\n    <span class=\"token keyword\">vec4</span> color <span class=\"token operator\">=</span> <span class=\"token function\">texture</span><span class=\"token punctuation\">(</span>iChannel0<span class=\"token punctuation\">,</span>uv<span class=\"token punctuation\">)</span><span class=\"token operator\">*</span><span class=\"token keyword\">vec4</span><span class=\"token punctuation\">(</span><span class=\"token number\">0.5</span><span class=\"token punctuation\">,</span><span class=\"token number\">0.9</span><span class=\"token punctuation\">,</span><span class=\"token number\">0.52</span><span class=\"token punctuation\">,</span><span class=\"token number\">1.0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token comment\">//vigenette</span>\n    <span class=\"token keyword\">float</span> d <span class=\"token operator\">=</span> <span class=\"token function\">length</span><span class=\"token punctuation\">(</span>uv<span class=\"token operator\">-</span><span class=\"token number\">0.5</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">float</span> c <span class=\"token operator\">=</span> <span class=\"token number\">1.3</span> <span class=\"token operator\">-</span> d<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">float</span> vignette <span class=\"token operator\">=</span> <span class=\"token function\">smoothstep</span><span class=\"token punctuation\">(</span><span class=\"token number\">0.5</span><span class=\"token punctuation\">,</span><span class=\"token number\">1.0</span><span class=\"token punctuation\">,</span>c<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token comment\">//Luminance</span>\n    color <span class=\"token operator\">=</span> LUMINANCE<span class=\"token operator\">*</span>color<span class=\"token punctuation\">;</span>\n    <span class=\"token comment\">//simple noise effect</span>\n\t<span class=\"token keyword\">float</span> noise  <span class=\"token operator\">=</span> NOISE<span class=\"token operator\">*</span><span class=\"token function\">fract</span><span class=\"token punctuation\">(</span><span class=\"token function\">sin</span><span class=\"token punctuation\">(</span><span class=\"token function\">dot</span><span class=\"token punctuation\">(</span>uv<span class=\"token punctuation\">,</span><span class=\"token keyword\">vec2</span><span class=\"token punctuation\">(</span><span class=\"token number\">10.0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">80.0</span><span class=\"token punctuation\">)</span><span class=\"token operator\">+</span><span class=\"token punctuation\">(</span>iTime<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token operator\">*</span><span class=\"token number\">10000.0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token comment\">//apply noise</span>\n    color <span class=\"token operator\">+</span><span class=\"token operator\">=</span> noise<span class=\"token operator\">/</span><span class=\"token punctuation\">(</span>vignette<span class=\"token operator\">*</span><span class=\"token number\">2.2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token comment\">//apply vignette</span>\n    color <span class=\"token operator\">*</span><span class=\"token operator\">=</span> vignette<span class=\"token operator\">*</span><span class=\"token number\">1.5</span><span class=\"token punctuation\">;</span>\n    <span class=\"token comment\">//Screen flicker</span>\n    color <span class=\"token operator\">+</span><span class=\"token operator\">=</span> FLICKER<span class=\"token operator\">*</span><span class=\"token function\">cos</span><span class=\"token punctuation\">(</span><span class=\"token function\">sin</span><span class=\"token punctuation\">(</span>iTime<span class=\"token operator\">*</span><span class=\"token number\">120.0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token comment\">//Final output</span>\n    fragColor <span class=\"token operator\">=</span> <span class=\"token keyword\">vec4</span><span class=\"token punctuation\">(</span>color<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre>\n<p><strong>Godot Shader</strong></p>\n<pre class=\"language-glsl\"><code class=\"language-glsl\"><span class=\"token comment\">// For Godot we have to specify the shader type. Since this shader goes on a ColorRect node, it's 2D and all 2D shaders are of type `canvas_item`.</span>\nshader_type canvas_item<span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// The original shader contains these variables below with `#define` but since we don't have access to that we just declare them as uniforms instead.</span>\n\n<span class=\"token comment\">// The amount of grain to apply to the night vision.</span>\n<span class=\"token keyword\">uniform</span> <span class=\"token keyword\">float</span> noise <span class=\"token operator\">=</span> <span class=\"token number\">0.2</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// The amount that the screen should flicker.</span>\n<span class=\"token keyword\">uniform</span> <span class=\"token keyword\">float</span> flicker <span class=\"token operator\">=</span> <span class=\"token number\">0.02</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// Affects how bright the night vision effect is.</span>\n<span class=\"token keyword\">uniform</span> <span class=\"token keyword\">float</span> luminance <span class=\"token operator\">=</span> <span class=\"token number\">0.5</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// `mainImage` is always `fragment` in Godot and it takes no arguments.</span>\n<span class=\"token keyword\">void</span> <span class=\"token function\">fragment</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// Shadertoy has an `iResolution` global variable but we don't have access to that in Godot. The Godot docs recommend either using the following definition below or passing it in manually.</span>\n\t<span class=\"token keyword\">vec2</span> i_resolution <span class=\"token operator\">=</span> <span class=\"token number\">1.0</span> <span class=\"token operator\">/</span> SCREEN_PIXEL_SIZE<span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">// Normalized pixel coordinates (from 0 to 1)</span>\n    <span class=\"token comment\">// `fragCoord` is `FRAGCOORD` in Godot.</span>\n\t<span class=\"token keyword\">vec2</span> uv <span class=\"token operator\">=</span> FRAGCOORD<span class=\"token punctuation\">.</span>xy <span class=\"token operator\">/</span> i_resolution<span class=\"token punctuation\">.</span>xy<span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">// scene color</span>\n    <span class=\"token comment\">// Instead of `iChannel0` we have `TEXTURE` and `SCREEN_TEXTURE` available to us and since we want this to be a screen shader we use `SCREEN_TEXTURE`.</span>\n\t<span class=\"token keyword\">vec4</span> color <span class=\"token operator\">=</span> <span class=\"token function\">texture</span><span class=\"token punctuation\">(</span>SCREEN_TEXTURE<span class=\"token punctuation\">,</span> uv<span class=\"token punctuation\">)</span> <span class=\"token operator\">*</span> <span class=\"token keyword\">vec4</span><span class=\"token punctuation\">(</span><span class=\"token number\">0.5</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0.9</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0.52</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1.0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">// vigenette</span>\n\t<span class=\"token keyword\">float</span> d <span class=\"token operator\">=</span> <span class=\"token function\">length</span><span class=\"token punctuation\">(</span>uv <span class=\"token operator\">-</span> <span class=\"token number\">0.5</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">float</span> c <span class=\"token operator\">=</span> <span class=\"token number\">1.0</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token comment\">// float c = 1.3 - d;</span>\n\t<span class=\"token keyword\">float</span> vignette <span class=\"token operator\">=</span> <span class=\"token function\">smoothstep</span><span class=\"token punctuation\">(</span><span class=\"token number\">0.5</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1.0</span><span class=\"token punctuation\">,</span> c<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">// Luminance</span>\n\tcolor <span class=\"token operator\">=</span> luminance <span class=\"token operator\">*</span> color<span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">// simple noise effect</span>\n    <span class=\"token comment\">// Instead of `iTime` we use the global `TIME`.</span>\n\t<span class=\"token keyword\">float</span> noise_2 <span class=\"token operator\">=</span> noise <span class=\"token operator\">*</span> <span class=\"token function\">fract</span><span class=\"token punctuation\">(</span><span class=\"token function\">sin</span><span class=\"token punctuation\">(</span><span class=\"token function\">dot</span><span class=\"token punctuation\">(</span>uv<span class=\"token punctuation\">,</span> <span class=\"token keyword\">vec2</span><span class=\"token punctuation\">(</span><span class=\"token number\">10.0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">80.0</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token punctuation\">(</span>TIME<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">*</span> <span class=\"token number\">10000.0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">// apply noise</span>\n\tcolor <span class=\"token operator\">+</span><span class=\"token operator\">=</span> noise_2 <span class=\"token operator\">/</span> <span class=\"token punctuation\">(</span>vignette <span class=\"token operator\">*</span> <span class=\"token number\">2.2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">// apply vignette</span>\n\tcolor <span class=\"token operator\">*</span><span class=\"token operator\">=</span> vignette <span class=\"token operator\">*</span> <span class=\"token number\">1.5</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">// Screen flicker</span>\n\tcolor <span class=\"token operator\">+</span><span class=\"token operator\">=</span> flicker <span class=\"token operator\">*</span> <span class=\"token function\">cos</span><span class=\"token punctuation\">(</span><span class=\"token function\">sin</span><span class=\"token punctuation\">(</span>TIME <span class=\"token operator\">*</span> <span class=\"token number\">120.0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">// Final output</span>\n    <span class=\"token comment\">// `fragColor` is `COLOR` in Godot.</span>\n\tCOLOR <span class=\"token operator\">=</span> <span class=\"token keyword\">vec4</span><span class=\"token punctuation\">(</span>color<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre>\n<p>An image of the effect can be seen below and a short gif of it can be found on Gyfcat <a href=\"https://gfycat.com/tintedfittingimpala\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">here</a>\n<img class=\"g-image g-image--lazy g-image--loading\" src=\"data:image/svg+xml,%3csvg fill='none' viewBox='0 0 941 461' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-f2ea75678e9d73c3a0de0f7bb6223ca9'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='40'/%3e%3c/filter%3e%3c/defs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-f2ea75678e9d73c3a0de0f7bb6223ca9)' width='941' height='461' xlink:href='data:image/png%3bbase64%2ciVBORw0KGgoAAAANSUhEUgAAAEAAAAAfCAYAAABXscv8AAAACXBIWXMAAA7DAAAOwwHHb6hkAAAKUElEQVRYw6VZ%2bW8bxxXmn9FYIkUdpihKtCweuixSvCTFku1EpKjTFilRpLikLtuJDRtpjTiwI8uye6BF0P6Qoih6IU1l%2boiTtkCB/mOv783O7M7MLu0A/eFhZ2Z33rzve9%2bbGUqe6osnUGs9AXpWxRNtR%2brvnPG%2baPO%2bsMqZ2q5o7805x5bvqrxeS1qfj9G3FTTT37Hl0/J95lxXie%2bFhIOvW2up%2bMSYZ/clNl5wa9nmmNRSCZFJUsC%2b0ALQA5QW10mvus07c/evrOMK7sTRlvEJ89SRACJht0XPE7ONz1rLHNcn6MHrJFn9lst7ERD37yCg5VShmk21X9Xj4n6F2Xh4n2Miq%2bM7wu4xsGG8wg6%2brIuPpI/pQ1KHPGY7OnFlVSbq/7F3%2bXBLjhqbDNaOX%2bBkmImABjYar09g7/tnsPf2GTTRGm9O2QcGn8wmcTLMiScWg3XOcl1iWzVpXCLOQaiVsRP1fUv1Ja9Xf2V%2bJ%2bISoES8Iv7G66cMG2HcR2u%2beQoMN5pn77unYJx9CfnHdVj5%2bSGUvr4P1b8%2bhMbLY5x0yibuM3JOGVHmQk%2bY1V/aC5mEcVNIkoMzA2RtB5FPlHlijmVirrSGIa0vEkngWDIFWAS/%2b%2b0jqPzpAVz/7R3EacDGV5/CPuEhBRxQ4%2bwxzOwtQ2rnY0hVF2Fmfxkuf3odrv5sG4qn%2b3Djd3eZAyJq/7tT5vjwn89NYnDBJi382gyInFJbMCwCa0hjApT8Tu5bgF6p8xps3PTffIOqxVgOfnjGzASLJfnNF7D1h89g4ze3GdiFeyWYu7kGGaMA6d08JLeuwdJxA44ofvThOfoes9z6EmaP6KMlyCER2UaRfZyukS0yo7G5m%2btw5X6ZObj%2b1SdQ%2beNPwfjHIzhAFR1iAOSUjEilsYO3T81nG9vnJvfZnLfOd8z/v0z/hxQzElH72%2bdQ/voerP3yCBYf1mD%2bzg2YOViBTB3BVhdZ/BnEwXA1iyyxNLb8dA9uoa9D9Ou5/QMG%2bxIJOFy1CcCPsw1zEvVzvM8c10zH06gW6tOCC3c3ofCoDhu/vgXbv78Pxt%2b/gEbrGIwXx9Aga9lmtOnr47I1MUG1vzyAEipx9fkBfPSgAh/eWkdAKywWUi5LFgdLyWIxN82nZaRyJGbldA8%2b%2bfdzuPkWFXD3P7%2bA29iYO1qFLGdKAGagDfspO1JJMdVCzrP1PGT3VyFQr0BPrQJ9uxU4X9%2bBXmz38r5o22M76rtds03Ws1uFSGMTZppLzD9lNkVJ2C3YSWKxiJiLStxZCUtur8h8rD3fh3v//RXcQRI8R99%2bDs0/fwazJB2jwB0UGRn0tBxZzotSXxqXiJmuF8FX2oRzmyXoLJWggz3L7CmbGBPfKO/QvDj%2bwWYZhiqYbQFGyiiLTcQntzkBDI9hxygIKD7ehZtnD%2bHgmwfgSeYvQbKQwEzm2wPjDNvKKCrfCHWwb3EsZRShq4wgymXwovm2yLZYm8CaVuZ98%2bm1vt1Snp1b23Chep0pINNYclWmleGmnTgHDkFSE/eB0jwkFxF3fgo80WwMYrOjrH5yUu1nDGfG2y4qyU8Q4N%2byCRAmwPqUMZMQNxJIAR3lLQjvbKDfgmPdjKET4qZO1Uill9ZmIZKOQDQXA0946iIMp6Jst5Q3P9WpBrLpspCYqymAwDCAItMlF6A6UZubDHxXmUqkzAggBej1bZP/DuCGk4CJ5RwMTl6AcGIEPMGxMAxOjSgKcJWPlnldWjkXAqiWGSgCum1aJ8%2b6DJ6U0SmRc65SYdaxswM/2d5BAsw9IGPtSwWr7FQy3qMEmoMnx3hxBoKjYRiYGAZPfzwMoUucADoCjSWHU7nWFTY1%2bWf4WLqxbCoAAfsQlG/tOviW18G3sgHeGyVGiF77BL6Tq2VoYR7GUgmIZlLQly/AUO2GpAB7k84YepaL7eufn1h0bI8t5SAQGzIJoEZw4iI7xn6UpBrOupOJYgqoL0FXBYFnr0L3QBJ6yAIJtCnwhxJIxpqpCq3%2bO1D6YxOjsNDjg/k%2bP8z3%2bmCu1w%2bJ%2bTRk2QVtSSlD%2bcjOGPZRndUTKO8deBkaK%2bTgfHQQ%2bkcvgOc8EtA/Psxve/bx4dgE%2bTEjHz2OkjEEAVgCeH5742nwd1wAf0%2bUWVd3BLp8F8GbX4FOlDft8GRExrlqDQYw83NdHTAT7IOZ/l72nA30wCySkV2/jPcLUmhBybYqfVkRRatc5FipBEgBRECACAjEwooC9ItP291UY1fOQAovKb03VsEXSzLAvp4I%2bLqFjYD/yjXwr6%2bAfwWJQuteXQbfxhpER2OQ6fZC%2bnwPZJh1QwYJSHd5ITM7ARkMPms45a2fCFktefI7KoHRfBb6IpICTAIWnZJxk7hyF7C/J6ZpDyE/w5enIJSOQ89gFLy%2bEQba5%2beG/f7xGAzg%2b4FpfKbiEEILpkchPhiABIJN9nZBsocbthNdnZCIDplloNW%2bm8yV00ojZvZg1VKARkBeuTZm3sFiRrsy0%2bZC4KdKVyCUHYP%2bqSgCjEHvcBR8XSh7PzdUQHcwAgNJBI2AGQHciIAwxjLeeQ4m/T5uXpjs9sElbweMhPthZDFtgXZm3KVktfKkJNHvB9oDSAEBmQB2j9fBGs6zVN4DxFWTfmVNrH9oAklGIUhP1o5B/0QcAvEYBMbQJs3xUGaUZV58Z5IQZ2PhUB9Ez30AMSQi3tkBsY4PIIJEDOJJFUhEITw3yX78EOGivtVrcNG6l8hHooiblUABS2AkpBJAx6AOMNcotj1aKOviYhHDmurH4AQIAk5PZmnTgikuexl4Su2zMVIGZjuEChhE6Q/iHjCA4GmcSoXWGUSVkdpy/GTIyJtzuw2aJ0zeAwJ4BfD0RcUpIJdA0SFzt02QSLu4kEDJR8zM8iCJCCuzKZUUU/pa9tn7qEUKlQN7T6SiWoLcp%2byLbGxllqkv%2b57fCHLSqASYAgQBTAHjfA94x46fk6REzCe3P4KhmQnMSMQMTIBOxVVrl%2b2kvQHK3%2bnEyab45%2bUW/TitSL5dwqzLHbsHSKeAfAy6M6c6IcYnNy47pS4FJvf7KbP8uyCvdZ2okPQMCZVIZIm%2bogLugxJwAU8d6yKn7U/6ZkkEkAKse0AfNtgmyC9CysXCEJcb%2b7f%2baDFn794uGbJkbGXTWfPvza5WRo7MoxGxoqRoXxjKjUNi6yqTuHWRc0mmRYB%2bCpgKKDrZs46dAkSupczNrg1oRcY6kPcAD7YjNBlTjkulrKbtfUWsO4E3xpx2bZZ/PzACxCYoCBiYGLGPQf1mh87o7390/AjwjixzoCElaHeQbuZGhMiy7J8AK2tIJSPKhGIcxYuO%2bEMObXwZ6RpPeOKLGYmAqP1bwGbOvmJe2lxg53YwGX1npvR%2bKO2%2bL7jNt2s89uNLpM17WpdijVybhnQ9z/4MJv%2b6ZadAXtoDGAFjw%2bxywViiP3LiXZ6e4ytz1pHDZJbUsjvNJZ6Uaj0Za5/p6bj6nWTinexT9qevJR%2bHsk/RpqOZTin6P4CFix/1rARGBuE8HgD/A/u/ycZQ9P34AAAAAElFTkSuQmCC' /%3e%3c/svg%3e\" width=\"941\" alt=\"Grainy Night Vision Alt\" data-srcset=\"/assets/static/night-vision-grainy-alt.82a2fbd.c24bf864bb567a555e6697a360463023.png 480w, /assets/static/night-vision-grainy-alt.01a6ba0.c24bf864bb567a555e6697a360463023.png 941w\" data-sizes=\"(max-width: 941px) 100vw, 941px\" data-src=\"/assets/static/night-vision-grainy-alt.01a6ba0.c24bf864bb567a555e6697a360463023.png\"><noscript><img class=\"g-image g-image--lazy g-image--loaded\" src=\"/assets/static/night-vision-grainy-alt.01a6ba0.c24bf864bb567a555e6697a360463023.png\" width=\"941\" alt=\"Grainy Night Vision Alt\"></noscript></p>\n<h2 id=\"shader-3---blur-night-vision\"><a href=\"#shader-3---blur-night-vision\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Shader 3 - Blur Night Vision</h2>\n<p>This next shader includes a blurred line that goes down the screen to simulate an effect whose name I can't really pinpoint. The original code for this shader can be found on <a href=\"https://www.shadertoy.com/view/Xsf3RN\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Shadertoy</a>.</p>\n<p>You're going to notice a big chunk missing in the ported code and that's because Godot doesn't yet have support for structs in shaders so we can't use the circles in the effect.</p>\n<p><strong>Shadertoy Shader</strong></p>\n<pre class=\"language-glsl\"><code class=\"language-glsl\"><span class=\"token comment\">//utility</span>\n<span class=\"token keyword\">float</span> <span class=\"token function\">remap</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">float</span> value<span class=\"token punctuation\">,</span> <span class=\"token keyword\">float</span> inputMin<span class=\"token punctuation\">,</span> <span class=\"token keyword\">float</span> inputMax<span class=\"token punctuation\">,</span> <span class=\"token keyword\">float</span> outputMin<span class=\"token punctuation\">,</span> <span class=\"token keyword\">float</span> outputMax<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>value <span class=\"token operator\">-</span> inputMin<span class=\"token punctuation\">)</span> <span class=\"token operator\">*</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>outputMax <span class=\"token operator\">-</span> outputMin<span class=\"token punctuation\">)</span> <span class=\"token operator\">/</span> <span class=\"token punctuation\">(</span>inputMax <span class=\"token operator\">-</span> inputMin<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> outputMin<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">float</span> <span class=\"token function\">rand</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">vec2</span> n<span class=\"token punctuation\">,</span> <span class=\"token keyword\">float</span> time<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token number\">0.5</span> <span class=\"token operator\">+</span> <span class=\"token number\">0.5</span> <span class=\"token operator\">*</span> \n     <span class=\"token function\">fract</span><span class=\"token punctuation\">(</span><span class=\"token function\">sin</span><span class=\"token punctuation\">(</span><span class=\"token function\">dot</span><span class=\"token punctuation\">(</span>n<span class=\"token punctuation\">.</span>xy<span class=\"token punctuation\">,</span> <span class=\"token keyword\">vec2</span><span class=\"token punctuation\">(</span><span class=\"token number\">12.9898</span><span class=\"token punctuation\">,</span> <span class=\"token number\">78.233</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token operator\">*</span> <span class=\"token number\">43758.5453</span> <span class=\"token operator\">+</span> time<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">struct</span> Circle\n<span class=\"token punctuation\">{</span>\n\t<span class=\"token keyword\">vec2</span> center<span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">float</span> radius<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\t\n<span class=\"token keyword\">vec4</span> <span class=\"token function\">circle_mask_color</span><span class=\"token punctuation\">(</span>Circle circle<span class=\"token punctuation\">,</span> <span class=\"token keyword\">vec2</span> position<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n\t<span class=\"token keyword\">float</span> d <span class=\"token operator\">=</span> <span class=\"token function\">distance</span><span class=\"token punctuation\">(</span>circle<span class=\"token punctuation\">.</span>center<span class=\"token punctuation\">,</span> position<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>d <span class=\"token operator\">></span> circle<span class=\"token punctuation\">.</span>radius<span class=\"token punctuation\">)</span>\n\t<span class=\"token punctuation\">{</span>\n\t\t<span class=\"token keyword\">return</span> <span class=\"token keyword\">vec4</span><span class=\"token punctuation\">(</span><span class=\"token number\">0.0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0.0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0.0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1.0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n\t\n\t<span class=\"token keyword\">float</span> distanceFromCircle <span class=\"token operator\">=</span> circle<span class=\"token punctuation\">.</span>radius <span class=\"token operator\">-</span> d<span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">float</span> intencity <span class=\"token operator\">=</span> <span class=\"token function\">smoothstep</span><span class=\"token punctuation\">(</span>\n\t\t\t\t\t\t\t\t    <span class=\"token number\">0.0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1.0</span><span class=\"token punctuation\">,</span> \n\t\t\t\t\t\t\t\t    <span class=\"token function\">clamp</span><span class=\"token punctuation\">(</span>\n\t\t\t\t\t\t\t\t\t    <span class=\"token function\">remap</span><span class=\"token punctuation\">(</span>distanceFromCircle<span class=\"token punctuation\">,</span> <span class=\"token number\">0.0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0.1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0.0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1.0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n\t\t\t\t\t\t\t\t\t    <span class=\"token number\">0.0</span><span class=\"token punctuation\">,</span>\n\t\t\t\t\t\t\t\t\t    <span class=\"token number\">1.0</span>\n\t\t\t\t\t\t\t\t    <span class=\"token punctuation\">)</span>\n\t\t\t\t\t\t\t\t<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">return</span> <span class=\"token keyword\">vec4</span><span class=\"token punctuation\">(</span>intencity<span class=\"token punctuation\">,</span> intencity<span class=\"token punctuation\">,</span> intencity<span class=\"token punctuation\">,</span> <span class=\"token number\">1.0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">vec4</span> <span class=\"token function\">mask_blend</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">vec4</span> a<span class=\"token punctuation\">,</span> <span class=\"token keyword\">vec4</span> b<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n\t<span class=\"token keyword\">vec4</span> one <span class=\"token operator\">=</span> <span class=\"token keyword\">vec4</span><span class=\"token punctuation\">(</span><span class=\"token number\">1.0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1.0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1.0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1.0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">return</span> one <span class=\"token operator\">-</span> <span class=\"token punctuation\">(</span>one <span class=\"token operator\">-</span> a<span class=\"token punctuation\">)</span> <span class=\"token operator\">*</span> <span class=\"token punctuation\">(</span>one <span class=\"token operator\">-</span> b<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">float</span> <span class=\"token function\">f1</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">float</span> x<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n\t<span class=\"token keyword\">return</span> <span class=\"token operator\">-</span><span class=\"token number\">4.0</span> <span class=\"token operator\">*</span> <span class=\"token function\">pow</span><span class=\"token punctuation\">(</span>x <span class=\"token operator\">-</span> <span class=\"token number\">0.5</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2.0</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token number\">1.0</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\t\n<span class=\"token keyword\">void</span> <span class=\"token function\">mainImage</span><span class=\"token punctuation\">(</span> <span class=\"token keyword\">out</span> <span class=\"token keyword\">vec4</span> fragColor<span class=\"token punctuation\">,</span> <span class=\"token keyword\">in</span> <span class=\"token keyword\">vec2</span> fragCoord <span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n\t<span class=\"token keyword\">vec2</span> uv <span class=\"token operator\">=</span> fragCoord<span class=\"token punctuation\">.</span>xy <span class=\"token operator\">/</span> iResolution<span class=\"token punctuation\">.</span>xy<span class=\"token punctuation\">;</span>\n\t\n\t<span class=\"token keyword\">float</span> wide <span class=\"token operator\">=</span> iResolution<span class=\"token punctuation\">.</span>x <span class=\"token operator\">/</span> iResolution<span class=\"token punctuation\">.</span>y<span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">float</span> high <span class=\"token operator\">=</span> <span class=\"token number\">1.0</span><span class=\"token punctuation\">;</span>\n\t\n\t<span class=\"token keyword\">vec2</span> position <span class=\"token operator\">=</span> <span class=\"token keyword\">vec2</span><span class=\"token punctuation\">(</span>uv<span class=\"token punctuation\">.</span>x <span class=\"token operator\">*</span> wide<span class=\"token punctuation\">,</span> uv<span class=\"token punctuation\">.</span>y<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\n\tCircle circle_a <span class=\"token operator\">=</span> <span class=\"token function\">Circle</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">vec2</span><span class=\"token punctuation\">(</span><span class=\"token number\">0.5</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0.5</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0.5</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\tCircle circle_b <span class=\"token operator\">=</span> <span class=\"token function\">Circle</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">vec2</span><span class=\"token punctuation\">(</span>wide <span class=\"token operator\">-</span> <span class=\"token number\">0.5</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0.5</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0.5</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">vec4</span> mask_a <span class=\"token operator\">=</span> <span class=\"token function\">circle_mask_color</span><span class=\"token punctuation\">(</span>circle_a<span class=\"token punctuation\">,</span> position<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">vec4</span> mask_b <span class=\"token operator\">=</span> <span class=\"token function\">circle_mask_color</span><span class=\"token punctuation\">(</span>circle_b<span class=\"token punctuation\">,</span> position<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">vec4</span> mask <span class=\"token operator\">=</span> <span class=\"token function\">mask_blend</span><span class=\"token punctuation\">(</span>mask_a<span class=\"token punctuation\">,</span> mask_b<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\n\t<span class=\"token keyword\">float</span> greenness <span class=\"token operator\">=</span> <span class=\"token number\">0.4</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">vec4</span> coloring <span class=\"token operator\">=</span> <span class=\"token keyword\">vec4</span><span class=\"token punctuation\">(</span><span class=\"token number\">1.0</span> <span class=\"token operator\">-</span> greenness<span class=\"token punctuation\">,</span> <span class=\"token number\">1.0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1.0</span> <span class=\"token operator\">-</span> greenness<span class=\"token punctuation\">,</span> <span class=\"token number\">1.0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\n\t<span class=\"token keyword\">float</span> noise <span class=\"token operator\">=</span> <span class=\"token function\">rand</span><span class=\"token punctuation\">(</span>uv <span class=\"token operator\">*</span> <span class=\"token keyword\">vec2</span><span class=\"token punctuation\">(</span><span class=\"token number\">0.1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1.0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> iTime <span class=\"token operator\">*</span> <span class=\"token number\">5.0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">float</span> noiseColor <span class=\"token operator\">=</span> <span class=\"token number\">1.0</span> <span class=\"token operator\">-</span> <span class=\"token punctuation\">(</span><span class=\"token number\">1.0</span> <span class=\"token operator\">-</span> noise<span class=\"token punctuation\">)</span> <span class=\"token operator\">*</span> <span class=\"token number\">0.3</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">vec4</span> noising <span class=\"token operator\">=</span> <span class=\"token keyword\">vec4</span><span class=\"token punctuation\">(</span>noiseColor<span class=\"token punctuation\">,</span> noiseColor<span class=\"token punctuation\">,</span> noiseColor<span class=\"token punctuation\">,</span> <span class=\"token number\">1.0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\n\t<span class=\"token keyword\">float</span> warpLine <span class=\"token operator\">=</span> <span class=\"token function\">fract</span><span class=\"token punctuation\">(</span><span class=\"token operator\">-</span>iTime <span class=\"token operator\">*</span> <span class=\"token number\">0.5</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\n\t<span class=\"token comment\">/** debug\n\tif(abs(uv.y - warpLine) &lt; 0.003)\n\t{\n\t\tfragColor = vec4(1.0, 1.0, 1.0, 1.0);\n\t\treturn;\n\t}\n    */</span>\n\t\n\t<span class=\"token keyword\">float</span> warpLen <span class=\"token operator\">=</span> <span class=\"token number\">0.1</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">float</span> warpArg01 <span class=\"token operator\">=</span> <span class=\"token function\">remap</span><span class=\"token punctuation\">(</span><span class=\"token function\">clamp</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>position<span class=\"token punctuation\">.</span>y <span class=\"token operator\">-</span> warpLine<span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span> warpLen <span class=\"token operator\">*</span> <span class=\"token number\">0.5</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0.0</span><span class=\"token punctuation\">,</span> warpLen<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0.0</span><span class=\"token punctuation\">,</span> warpLen<span class=\"token punctuation\">,</span> <span class=\"token number\">0.0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1.0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">float</span> offset <span class=\"token operator\">=</span> <span class=\"token function\">sin</span><span class=\"token punctuation\">(</span>warpArg01 <span class=\"token operator\">*</span> <span class=\"token number\">10.0</span><span class=\"token punctuation\">)</span>  <span class=\"token operator\">*</span> <span class=\"token function\">f1</span><span class=\"token punctuation\">(</span>warpArg01<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\n\t\n\t<span class=\"token keyword\">vec4</span> lineNoise <span class=\"token operator\">=</span> <span class=\"token keyword\">vec4</span><span class=\"token punctuation\">(</span><span class=\"token number\">1.0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1.0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1.0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1.0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token function\">abs</span><span class=\"token punctuation\">(</span>uv<span class=\"token punctuation\">.</span>y <span class=\"token operator\">-</span> <span class=\"token function\">fract</span><span class=\"token punctuation\">(</span><span class=\"token operator\">-</span>iTime <span class=\"token operator\">*</span> <span class=\"token number\">19.0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&lt;</span> <span class=\"token number\">0.0005</span><span class=\"token punctuation\">)</span>\n\t<span class=\"token punctuation\">{</span>\n\t\tlineNoise <span class=\"token operator\">=</span> <span class=\"token keyword\">vec4</span><span class=\"token punctuation\">(</span><span class=\"token number\">0.5</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0.5</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0.5</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1.0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n\t\n\t<span class=\"token keyword\">vec4</span> base <span class=\"token operator\">=</span> <span class=\"token function\">texture</span><span class=\"token punctuation\">(</span>iChannel0<span class=\"token punctuation\">,</span> uv <span class=\"token operator\">+</span> <span class=\"token keyword\">vec2</span><span class=\"token punctuation\">(</span>offset <span class=\"token operator\">*</span> <span class=\"token number\">0.02</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0.0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\tfragColor <span class=\"token operator\">=</span> base <span class=\"token operator\">*</span> mask <span class=\"token operator\">*</span> coloring <span class=\"token operator\">*</span> noising <span class=\"token operator\">*</span> lineNoise<span class=\"token punctuation\">;</span>\n\n<span class=\"token punctuation\">}</span></code></pre>\n<p><strong>Godot Shader</strong></p>\n<pre class=\"language-glsl\"><code class=\"language-glsl\"><span class=\"token comment\">// For Godot we have to specify the shader type. Since this shader goes on a ColorRect node, it's 2D and all 2D shaders are of type `canvas_item`.</span>\nshader_type canvas_item<span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">float</span> <span class=\"token function\">remap</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">float</span> value<span class=\"token punctuation\">,</span> <span class=\"token keyword\">float</span> inputMin<span class=\"token punctuation\">,</span> <span class=\"token keyword\">float</span> inputMax<span class=\"token punctuation\">,</span> <span class=\"token keyword\">float</span> outputMin<span class=\"token punctuation\">,</span> <span class=\"token keyword\">float</span> outputMax<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n\t<span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>value <span class=\"token operator\">-</span> inputMin<span class=\"token punctuation\">)</span> <span class=\"token operator\">*</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>outputMax <span class=\"token operator\">-</span> outputMin<span class=\"token punctuation\">)</span> <span class=\"token operator\">/</span> <span class=\"token punctuation\">(</span>inputMax <span class=\"token operator\">-</span> inputMin<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> outputMin<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">float</span> <span class=\"token function\">rand</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">vec2</span> n<span class=\"token punctuation\">,</span> <span class=\"token keyword\">float</span> time<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n\t<span class=\"token keyword\">return</span> <span class=\"token number\">0.5</span> <span class=\"token operator\">+</span> <span class=\"token number\">0.5</span> <span class=\"token operator\">*</span> <span class=\"token function\">fract</span><span class=\"token punctuation\">(</span><span class=\"token function\">sin</span><span class=\"token punctuation\">(</span><span class=\"token function\">dot</span><span class=\"token punctuation\">(</span>n<span class=\"token punctuation\">.</span>xy<span class=\"token punctuation\">,</span> <span class=\"token keyword\">vec2</span><span class=\"token punctuation\">(</span><span class=\"token number\">12.9898</span><span class=\"token punctuation\">,</span> <span class=\"token number\">78.233</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token operator\">*</span> <span class=\"token number\">43758.5453</span> <span class=\"token operator\">+</span> time<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">vec4</span> <span class=\"token function\">mask_blend</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">vec4</span> a<span class=\"token punctuation\">,</span> <span class=\"token keyword\">vec4</span> b<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n\t<span class=\"token keyword\">vec4</span> one <span class=\"token operator\">=</span> <span class=\"token keyword\">vec4</span><span class=\"token punctuation\">(</span><span class=\"token number\">1.0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1.0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1.0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1.0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">return</span> one <span class=\"token operator\">-</span> <span class=\"token punctuation\">(</span>one <span class=\"token operator\">-</span> a<span class=\"token punctuation\">)</span> <span class=\"token operator\">*</span> <span class=\"token punctuation\">(</span>one <span class=\"token operator\">-</span> b<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">float</span> <span class=\"token function\">f1</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">float</span> x<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n\t<span class=\"token keyword\">return</span> <span class=\"token operator\">-</span><span class=\"token number\">4.0</span> <span class=\"token operator\">*</span> <span class=\"token function\">pow</span><span class=\"token punctuation\">(</span>x <span class=\"token operator\">-</span> <span class=\"token number\">0.5</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2.0</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token number\">1.0</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">// `mainImage` is always `fragment` in Godot and it takes no arguments.</span>\n<span class=\"token keyword\">void</span> <span class=\"token function\">fragment</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// Shadertoy has an `iResolution` global variable but we don't have access to that in Godot. The Godot docs recommend either using the following definition below or passing it in manually.</span>\n\t<span class=\"token keyword\">vec2</span> iResolution <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token number\">1.0</span> <span class=\"token operator\">/</span> SCREEN_PIXEL_SIZE<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\n    <span class=\"token comment\">// `fragCoord` is `FRAGCOORD` in Godot.</span>\n\t<span class=\"token keyword\">vec2</span> uv <span class=\"token operator\">=</span> FRAGCOORD<span class=\"token punctuation\">.</span>xy <span class=\"token operator\">/</span> iResolution<span class=\"token punctuation\">.</span>xy<span class=\"token punctuation\">;</span>\n\t\n\t<span class=\"token keyword\">float</span> wide <span class=\"token operator\">=</span> iResolution<span class=\"token punctuation\">.</span>x <span class=\"token operator\">/</span> iResolution<span class=\"token punctuation\">.</span>y<span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">float</span> high <span class=\"token operator\">=</span> <span class=\"token number\">1.0</span><span class=\"token punctuation\">;</span>\n\t\n\t<span class=\"token keyword\">vec2</span> position <span class=\"token operator\">=</span> <span class=\"token keyword\">vec2</span><span class=\"token punctuation\">(</span>uv<span class=\"token punctuation\">.</span>x <span class=\"token operator\">*</span> wide<span class=\"token punctuation\">,</span> uv<span class=\"token punctuation\">.</span>y<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\n\t<span class=\"token keyword\">float</span> greenness <span class=\"token operator\">=</span> <span class=\"token number\">0.4</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">vec4</span> coloring <span class=\"token operator\">=</span> <span class=\"token keyword\">vec4</span><span class=\"token punctuation\">(</span><span class=\"token number\">1.0</span> <span class=\"token operator\">-</span> greenness<span class=\"token punctuation\">,</span> <span class=\"token number\">1.0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1.0</span> <span class=\"token operator\">-</span> greenness<span class=\"token punctuation\">,</span> <span class=\"token number\">1.0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\n    <span class=\"token comment\">// Instead of `iTime` we use the global `TIME`.</span>\n\t<span class=\"token keyword\">float</span> noise <span class=\"token operator\">=</span> <span class=\"token function\">rand</span><span class=\"token punctuation\">(</span>uv <span class=\"token operator\">*</span> <span class=\"token keyword\">vec2</span><span class=\"token punctuation\">(</span><span class=\"token number\">0.1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1.0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> TIME <span class=\"token operator\">*</span> <span class=\"token number\">5.0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">float</span> noiseColor <span class=\"token operator\">=</span> <span class=\"token number\">1.0</span> <span class=\"token operator\">-</span> <span class=\"token punctuation\">(</span><span class=\"token number\">1.0</span> <span class=\"token operator\">-</span> noise<span class=\"token punctuation\">)</span> <span class=\"token operator\">*</span> <span class=\"token number\">0.3</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">vec4</span> noising <span class=\"token operator\">=</span> <span class=\"token keyword\">vec4</span><span class=\"token punctuation\">(</span>noiseColor<span class=\"token punctuation\">,</span> noiseColor<span class=\"token punctuation\">,</span> noiseColor<span class=\"token punctuation\">,</span> <span class=\"token number\">1.0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\n\t<span class=\"token keyword\">float</span> warpLine <span class=\"token operator\">=</span> <span class=\"token function\">fract</span><span class=\"token punctuation\">(</span><span class=\"token operator\">-</span>TIME <span class=\"token operator\">*</span> <span class=\"token number\">0.5</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\n\t<span class=\"token keyword\">float</span> warpLen <span class=\"token operator\">=</span> <span class=\"token number\">0.1</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">float</span> warpArg01 <span class=\"token operator\">=</span> <span class=\"token function\">remap</span><span class=\"token punctuation\">(</span><span class=\"token function\">clamp</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>position<span class=\"token punctuation\">.</span>y <span class=\"token operator\">-</span> warpLine<span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span> warpLen <span class=\"token operator\">*</span> <span class=\"token number\">0.5</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0.0</span><span class=\"token punctuation\">,</span> warpLen<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0.0</span><span class=\"token punctuation\">,</span> warpLen<span class=\"token punctuation\">,</span> <span class=\"token number\">0.0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1.0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">float</span> offset <span class=\"token operator\">=</span> <span class=\"token function\">sin</span><span class=\"token punctuation\">(</span>warpArg01 <span class=\"token operator\">*</span> <span class=\"token number\">10.0</span><span class=\"token punctuation\">)</span>  <span class=\"token operator\">*</span> <span class=\"token function\">f1</span><span class=\"token punctuation\">(</span>warpArg01<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\n\t<span class=\"token keyword\">vec4</span> lineNoise <span class=\"token operator\">=</span> <span class=\"token keyword\">vec4</span><span class=\"token punctuation\">(</span><span class=\"token number\">1.0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1.0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1.0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1.0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token function\">abs</span><span class=\"token punctuation\">(</span>uv<span class=\"token punctuation\">.</span>y <span class=\"token operator\">-</span> <span class=\"token function\">fract</span><span class=\"token punctuation\">(</span><span class=\"token operator\">-</span>TIME <span class=\"token operator\">*</span> <span class=\"token number\">19.0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&lt;</span> <span class=\"token number\">0.0005</span><span class=\"token punctuation\">)</span>\n\t<span class=\"token punctuation\">{</span>\n\t\tlineNoise <span class=\"token operator\">=</span> <span class=\"token keyword\">vec4</span><span class=\"token punctuation\">(</span><span class=\"token number\">0.5</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0.5</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0.5</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1.0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n\t\n    <span class=\"token comment\">// Instead of `iChannel0` we have `TEXTURE` and `SCREEN_TEXTURE` available to us and since we want this to be a screen shader we use `SCREEN_TEXTURE`.</span>\n\t<span class=\"token keyword\">vec4</span> base <span class=\"token operator\">=</span> <span class=\"token function\">texture</span><span class=\"token punctuation\">(</span>SCREEN_TEXTURE<span class=\"token punctuation\">,</span> uv <span class=\"token operator\">+</span> <span class=\"token keyword\">vec2</span><span class=\"token punctuation\">(</span>offset <span class=\"token operator\">*</span> <span class=\"token number\">0.02</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0.0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\tCOLOR <span class=\"token operator\">=</span> base <span class=\"token operator\">*</span> coloring <span class=\"token operator\">*</span> noising <span class=\"token operator\">*</span> lineNoise<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre>\n<p>As mentioned above in this port we had to scrap the two circles like looked like binoculars because structs don't yet exist in Godot. The rest is pretty much the same as the others where its just globals that are named differently.</p>\n<p>An image of the effect can be seen below and a short gif of it can be found on Gyfcat <a href=\"https://gfycat.com/afraidpleasedfanworms\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">here</a>\n<img class=\"g-image g-image--lazy g-image--loading\" src=\"data:image/svg+xml,%3csvg fill='none' viewBox='0 0 988 478' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-1da4896428ff96395b084d0c9f7634e2'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='40'/%3e%3c/filter%3e%3c/defs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-1da4896428ff96395b084d0c9f7634e2)' width='988' height='478' xlink:href='data:image/png%3bbase64%2ciVBORw0KGgoAAAANSUhEUgAAAEAAAAAfCAYAAABXscv8AAAACXBIWXMAAA7DAAAOwwHHb6hkAAAKl0lEQVRYw5VY6VNb1xXXlzYmLAIbC7EakMQOshHwEAITL9gIMMQBBNhmETI7CPA6Tt3JJK3AW9J2mqQznU6nM21n0sVuZvKh05l%2baae1je04tpu0mem0H9s/49dz7tuupCdBP/y499133znn9zvnLsI2/XgLMwRupx/FRDvF7SO1neJWjJmYfBhT8UiHOma808f4e%2bNb1fbMzhbCT7bJZwxh0d8S7Ywehx6D5HNSA49NGs8xMw7h2/Q/JT3rfmV%2bMzvbRt82IzmfSTORBZnWg3qoEXusi6Q%2bJwajBzCl29Wg%2bompPndU8PN0wrwkX7LPh7E4%2b7K/ODsJAjAnk28MNpGFx2oWDDyRJmkiWIkzJYsjOderRvQfJhMzEUsOMk6AWFxfhhjfSf7GSKjUMp84fhpmadw2Kzrqw%2bxTAj9rL3UxhECGkW01Y5ooM5Lj5GC21SAfJWZfyrxs55G1IIZtsTRjhh0zSRpRmSzz0aCTndWJa4gQX9tF%2bsOIkAiiZUiTDIGe6ga3LNXU17G8nsM7ZibixvUKk6tNEkL%2bPrxjQdIYj4nk6OTURCbEzaB5DOao87yotbb5Z9uY08CDC1/cxuKru1h4eQfz1J/7/JYYj%2byQkR3NyI5qaFZv42BWUVgKJK709L4evB70023DTnjHwq70LPuXY5L7HPvCizuCz%2bLLu4LbHPmYe7olME/vbYufb2Ph2RaWX93BxKdXcWJrAoM/XkDoN5uY%2buNNRB5%2bBwvPb2FJGLkjjMzTsy6YAVFJWyp0pY2qMqvLqDKt6gxIY3pFMhHDbkLmjD4TpVjmn1PimCzFuPQ3JnsLs399T3AI3b%2bEwZ8s4kRsHGMPLmOZ3xPnRZpjW35B5J5vY/XLuwj9ah3NkeNoWz6NtpVeKNE%2bdN04i5MkSv9HEYx%2bso4Lv7%2bByF/exdKL20I0NsZYYnFIzHkyPM8KP4kJlWWRVPW3jXH5fVz/WfwckS0d9G6RfbNf9k/gWCJEdvIPb4sYBz6OiERy7Mpa0OBzJHwcI79cw9rf7wnOy/SdbZUEYKzT4PivN9BKkzsuDaB9vZ/QB2U1iNal02hdPCXattVedF4bwrF3Qwj%2bYAbDP1/F%2bc%2buYfZP7wijKxTQ2lf3CHex/tUdsqu20S8TwO9ojvys99VvtO95nPpsc%2bXVbeEj8ud3hM%2bRX6yhj2I4/l4IndeHRGwiVsayGitzYC7%2bzQG0EIcQCbTx9ftY/WIbay%2bpAqIvtsG49I97OPfbDTHJv9Gvfah%2b3L6hQReFVGUHrUunxHxWuOPyGXTfHMbpuxfw1k8XEXpwBYO/extDhMH7N6hPeJAG/P5%2b8vgZwuj9Kxj%2b2RJ6359E97eHEbgyKDLastCjEiVwTGp8/SJ%2bvx5vVOXh3%2byHb74H459EcelrStDzmOBtu/6v7%2bEa4Vv/%2bRBTn12Fj4waH0b7JCESnzUnGni5cFCsvrLYg6q5fnxzcgwZU6PYN0mY0hHSoI%2bH4se4nVaf%2bdtvkA0P2VIWT6JlyVyacUnRExZNhmIIMCAEmPz0Mm7%2b9yNc%2b%2bcHuP7v78M28uEFjPzwPEIfTyIYG6WyCVoaU6zEiCYKowYT2OxD3eoQXp%2bdQHZkHFmzYxrGVUTGzf6s9D4iP4%2bLbzPIRu3KEDo3%2b4wMx/lMJJ1ijJPF3Hq/O4KxH00JzgxbzRseMKo7K9F01gf/pTPxmY6mcbKeXCUKoWM9iLrlQWSEZfJjCUKYz5mJ42Gzvy88gZrlIQTIppIqrnRj63oCg/DTMvUOt6AqUAGdt60y4IGr04MKpRJ1gz7aAM%2bo6ykV4VSiSJUiBFghAWbGNYLjyAyrRAXCY%2bZzOAFiLEQihJAtC7ChVWGqSozuIgBx4n2q/s0WlBNX5szcbSXN5SjxVaCoqQxVwcNiUpwAqcotTl1ziRgC6BXApGYkgjOhePK6OBqytLGMi%2beQeXEC%2b0jEGrJlWQHraZZBwrguQHV/MwobSwVn5m4r9B4Cw1FXAs/pw2YFrPclI7r7mhMCULnVsgC0fjPnCQtEZo7ai%2bNqn4glVYTWz5g7h5zJYRwcDmL/%2bCBeIxvVK28iEO01BYhK1RDdPUH6ycUCeIJH4Kgths7bVtBYhoLGQzhYUwzXKW9yBaRzmqIajAqYHkNOz2nk%2brqR29SJ3MYA7N5OZA0OmCJImWfyJb1H4S914GhhHrqKD6C%2bsRoNc2Rzsy85rmhCXGkqwhCg9zDyq4vhbDqEgoYy2Bz0hzv5iQKk2u132RDVCugVO3fGxDDsB6thz6qE3e6GPdcD%2b2tlyPb5kbl4QV0O2hLgks8f7kPAYUcXIVC0H50kwtG8THRQsEp091JPd1LpAripyvOrisCJdwgB6ktF5wANVhxvVJdANJh%2bh5WMJo/3o/PygHoMTpxFTmEVsvMqkb3fhex8N7IzDyGLBaAlkTU1gqyZUdHumz%2bP8kAz/Hmvo61wP9oLctHuzIPCyMuCMh6AwjdUC59K0nPyHsaxBugGW9XXLLgyZ0e9EKAMB%2btKUXikgu7Kx8QtK23GExwrslP6hm%2bGtcPtKDvpRV5NLbLsRDzXhRwWIM8Fu8MFR0sNnN2NKOhqUHG0AcVtNWhy5KLFnglffo5Ay0E7fPuz0VxZAIUuaP6rg%2bYtVSKq%2b04dZ1B8x/ych8utBXB6y1FxrAENY4GEsgruKkS7djPj3xB8NS3v8cLZSkQb3TjgdgvS2SyEvRI5B1w44HLB6XOjqN2NQoXQ7kGxrxIVtDl5KhxoINJNlPWm/VnwkiBeqoYmSlDdgA9NU93GbVBJQ9iqYvnqXD/qR1lnreBsCKAvg/LuejRSqVkapRKSSz4p82ycvq0aakUZCVnYXoWiAKGjCg6vh9YdocZNjj0kjIeIV6HQXyXmCfir4eyoRomnEJ6sDFRn7kMNtySAm/aC8nIH7drlcJMIaZdgyg2yX/xmaAh1oCxQkywAnwTeyW4EqMz2YlgXhUuLfzGWvlGPghYXClrdcLZ5TGIaURZCIKAijryGIq4E2oxLiHApVUBpdgaKSRBnZ40Ai1R%2bsgkNE53ahtdvbNhKOvLaXE5SYXOltARKU22CKXb/9fjM8y8sLsdK2lmZdBEFKIhZkLOE1TzKDleCk4UkQc13qqjONrcQuoJOLF5uHEPKhMlLmZIUuDpE94DmRAHU44DPRlePeQwqu2Se13vz3Ak18xRs0V5J7yaA/I6ESBwrEqgWPkuP1qE5ckLEki5mfb/Qj8E0AjTF/xZI9cuKflo2Xuiikq4WGRGZlwP370LWn4a0f29CsU/VdxUaz3WJmPTkWB6NnLQrlgKUmgLQ%2brL8LaCXvvY/gJphRTjnsowj//8S8e%2bhCtKJpo1xLNVvKcYRKW/YiiQAH/HxApQlCCAqYCBpTbERVpjXkYsuElx%2bScHvhZw/4Z1/l3ep3lv44Zgqe4%2bIf4OJjTmRg6gASwHS7wH6Ts//KTp0vMFc73staStSViT9exQqhX1ejhxb2bF6%2bOZOqom0%2bDWYfgkk7gFa5r3T3Sjm3bnNYrPzp1nL/j1UxF7ntacRzW%2bKwKcRx%2bqlC5Oo2rQCJC2B%2bArgzPPlxqnwxUU65tKVZbospyLh3%2bO41XuLzVHsCxRv3ViHui9ox6CVAP8DUf1y4c1JGWEAAAAASUVORK5CYII=' /%3e%3c/svg%3e\" width=\"988\" alt=\"Blur Line Night Vision\" data-srcset=\"/assets/static/night-vision-blur-line.82a2fbd.92044a4eb1568034cc8410b8f87d6415.png 480w, /assets/static/night-vision-blur-line.0411d07.92044a4eb1568034cc8410b8f87d6415.png 988w\" data-sizes=\"(max-width: 988px) 100vw, 988px\" data-src=\"/assets/static/night-vision-blur-line.0411d07.92044a4eb1568034cc8410b8f87d6415.png\"><noscript><img class=\"g-image g-image--lazy g-image--loaded\" src=\"/assets/static/night-vision-blur-line.0411d07.92044a4eb1568034cc8410b8f87d6415.png\" width=\"988\" alt=\"Blur Line Night Vision\"></noscript></p>\n<h2 id=\"shader-4---scanlines-night-vision\"><a href=\"#shader-4---scanlines-night-vision\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Shader 4 - Scanlines Night Vision</h2>\n<p>This shader differs from the one before it by offering a crisp night vision effect with horizontal lines going across the screen. The original code for this shader can be found on <a href=\"https://www.shadertoy.com/view/XlsGzs\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Shadertoy</a>.</p>\n<p><strong>Shadertoy Shader</strong></p>\n<pre class=\"language-glsl\"><code class=\"language-glsl\"><span class=\"token keyword\">void</span> <span class=\"token function\">mainImage</span><span class=\"token punctuation\">(</span> <span class=\"token keyword\">out</span> <span class=\"token keyword\">vec4</span> fragColor<span class=\"token punctuation\">,</span> <span class=\"token keyword\">in</span> <span class=\"token keyword\">vec2</span> fragCoord <span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">vec4</span> color<span class=\"token punctuation\">;</span>\n    \n\t<span class=\"token keyword\">vec2</span> uv <span class=\"token operator\">=</span> fragCoord<span class=\"token punctuation\">.</span>xy <span class=\"token operator\">/</span> iResolution<span class=\"token punctuation\">.</span>xy<span class=\"token punctuation\">;</span>\n    \n    <span class=\"token keyword\">float</span> distanceFromCenter <span class=\"token operator\">=</span> <span class=\"token function\">length</span><span class=\"token punctuation\">(</span> uv <span class=\"token operator\">-</span> <span class=\"token keyword\">vec2</span><span class=\"token punctuation\">(</span><span class=\"token number\">0.5</span><span class=\"token punctuation\">,</span><span class=\"token number\">0.5</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    \n    <span class=\"token keyword\">float</span> vignetteAmount<span class=\"token punctuation\">;</span>\n    \n    <span class=\"token keyword\">float</span> lum<span class=\"token punctuation\">;</span>\n    \n    vignetteAmount <span class=\"token operator\">=</span> <span class=\"token number\">1.0</span> <span class=\"token operator\">-</span> distanceFromCenter<span class=\"token punctuation\">;</span>\n    vignetteAmount <span class=\"token operator\">=</span> <span class=\"token function\">smoothstep</span><span class=\"token punctuation\">(</span><span class=\"token number\">0.1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1.0</span><span class=\"token punctuation\">,</span> vignetteAmount<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    \n    color <span class=\"token operator\">=</span> <span class=\"token function\">texture</span><span class=\"token punctuation\">(</span> iChannel0<span class=\"token punctuation\">,</span> uv<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    \n    <span class=\"token comment\">// luminance hack, responses to red channel most</span>\n    lum <span class=\"token operator\">=</span> <span class=\"token function\">dot</span><span class=\"token punctuation\">(</span>color<span class=\"token punctuation\">.</span>rgb<span class=\"token punctuation\">,</span> <span class=\"token keyword\">vec3</span><span class=\"token punctuation\">(</span> <span class=\"token number\">0.85</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0.30</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0.10</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    \n    color<span class=\"token punctuation\">.</span>rgb <span class=\"token operator\">=</span> <span class=\"token keyword\">vec3</span><span class=\"token punctuation\">(</span><span class=\"token number\">0.0</span><span class=\"token punctuation\">,</span> lum<span class=\"token punctuation\">,</span> <span class=\"token number\">0.0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    \n    <span class=\"token comment\">// scanlines</span>\n    color <span class=\"token operator\">+</span><span class=\"token operator\">=</span> <span class=\"token number\">0.1</span><span class=\"token operator\">*</span><span class=\"token function\">sin</span><span class=\"token punctuation\">(</span>uv<span class=\"token punctuation\">.</span>y<span class=\"token operator\">*</span>iResolution<span class=\"token punctuation\">.</span>y<span class=\"token operator\">*</span><span class=\"token number\">2.0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    \n    <span class=\"token comment\">// screen flicker</span>\n    color <span class=\"token operator\">+</span><span class=\"token operator\">=</span> <span class=\"token number\">0.005</span> <span class=\"token operator\">*</span> <span class=\"token function\">sin</span><span class=\"token punctuation\">(</span>iTime<span class=\"token operator\">*</span><span class=\"token number\">16.0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    \n    <span class=\"token comment\">// vignetting</span>\n    color <span class=\"token operator\">*</span><span class=\"token operator\">=</span>  vignetteAmount<span class=\"token operator\">*</span><span class=\"token number\">1.0</span><span class=\"token punctuation\">;</span>\n    \n\tfragColor <span class=\"token operator\">=</span> color<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre>\n<p><strong>Godot Shader</strong></p>\n<pre class=\"language-glsl\"><code class=\"language-glsl\"><span class=\"token comment\">// For Godot we have to specify the shader type. Since this shader goes on a ColorRect node, it's 2D and all 2D shaders are of type `canvas_item`.</span>\nshader_type canvas_item<span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// `mainImage` is always `fragment` in Godot and it takes no arguments.</span>\n<span class=\"token keyword\">void</span> <span class=\"token function\">fragment</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// Shadertoy has an `iResolution` global variable but we don't have access to that in Godot. The Godot docs recommend either using the following definition below or passing it in manually.</span>\n\t<span class=\"token keyword\">vec2</span> i_resolution <span class=\"token operator\">=</span> <span class=\"token number\">1.0</span> <span class=\"token operator\">/</span> SCREEN_PIXEL_SIZE<span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">vec4</span> color<span class=\"token punctuation\">;</span>\n\t\n    <span class=\"token comment\">// `fragCoord` is `FRAGCOORD` in Godot.</span>\n\t<span class=\"token keyword\">vec2</span> uv <span class=\"token operator\">=</span> FRAGCOORD<span class=\"token punctuation\">.</span>xy <span class=\"token operator\">/</span> i_resolution<span class=\"token punctuation\">.</span>xy<span class=\"token punctuation\">;</span>\n\t\n\t<span class=\"token keyword\">float</span> distanceFromCenter <span class=\"token operator\">=</span> <span class=\"token function\">length</span><span class=\"token punctuation\">(</span>uv <span class=\"token operator\">-</span> <span class=\"token keyword\">vec2</span><span class=\"token punctuation\">(</span><span class=\"token number\">0.5</span><span class=\"token punctuation\">,</span><span class=\"token number\">0.5</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\n\t<span class=\"token keyword\">float</span> vignetteAmount<span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">float</span> lum<span class=\"token punctuation\">;</span>\n\t\n\tvignetteAmount <span class=\"token operator\">=</span> <span class=\"token number\">0.6</span><span class=\"token punctuation\">;</span>\n\tvignetteAmount <span class=\"token operator\">=</span> <span class=\"token function\">smoothstep</span><span class=\"token punctuation\">(</span><span class=\"token number\">0.1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1.0</span><span class=\"token punctuation\">,</span> vignetteAmount<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\n    <span class=\"token comment\">// Instead of `iChannel0` we have `TEXTURE` and `SCREEN_TEXTURE` available to us and since we want this to be a screen shader we use `SCREEN_TEXTURE`.</span>\n\tcolor <span class=\"token operator\">=</span> <span class=\"token function\">texture</span><span class=\"token punctuation\">(</span>SCREEN_TEXTURE<span class=\"token punctuation\">,</span> uv<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\n\t<span class=\"token comment\">// luminance hack, responses to red channel most</span>\n\tlum <span class=\"token operator\">=</span> <span class=\"token function\">dot</span><span class=\"token punctuation\">(</span>color<span class=\"token punctuation\">.</span>rgb<span class=\"token punctuation\">,</span> <span class=\"token keyword\">vec3</span><span class=\"token punctuation\">(</span><span class=\"token number\">0.85</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0.30</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0.10</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\n\tcolor<span class=\"token punctuation\">.</span>rgb <span class=\"token operator\">=</span> <span class=\"token keyword\">vec3</span><span class=\"token punctuation\">(</span><span class=\"token number\">0.0</span><span class=\"token punctuation\">,</span> lum<span class=\"token punctuation\">,</span> <span class=\"token number\">0.0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\n\t<span class=\"token comment\">// scanlines</span>\n\tcolor <span class=\"token operator\">+</span><span class=\"token operator\">=</span> <span class=\"token number\">0.1</span> <span class=\"token operator\">*</span> <span class=\"token function\">sin</span><span class=\"token punctuation\">(</span>uv<span class=\"token punctuation\">.</span>y <span class=\"token operator\">*</span> i_resolution<span class=\"token punctuation\">.</span>y <span class=\"token operator\">*</span> <span class=\"token number\">2.0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\n\t<span class=\"token comment\">// screen flicker</span>\n    <span class=\"token comment\">// Instead of `iTime` we use the global `TIME`.</span>\n\tcolor <span class=\"token operator\">+</span><span class=\"token operator\">=</span> <span class=\"token number\">0.005</span> <span class=\"token operator\">*</span> <span class=\"token function\">sin</span><span class=\"token punctuation\">(</span>TIME <span class=\"token operator\">*</span> <span class=\"token number\">16.0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\n\t<span class=\"token comment\">// vignetting</span>\n\tcolor <span class=\"token operator\">*</span><span class=\"token operator\">=</span>  vignetteAmount <span class=\"token operator\">*</span> <span class=\"token number\">1.0</span><span class=\"token punctuation\">;</span>\n\t\n    <span class=\"token comment\">// `fragColor` is `COLOR` in Godot.</span>\n\tCOLOR <span class=\"token operator\">=</span> color<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre>\n<p>This one is pretty simple and nothing new to go over. Just like with the others we have the same shader type since they're all going to be on a 2D node and most of the changes are just different names which are nicely documented in the official Godot documentation.</p>\n<p>An image of the effect can be seen below and a short gif of it can be found on Gyfcat <a href=\"https://gfycat.com/shamefulhauntingjavalina\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">here</a>\n<img class=\"g-image g-image--lazy g-image--loading\" src=\"data:image/svg+xml,%3csvg fill='none' viewBox='0 0 976 422' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-80225f1d54388012695371f5a1953300'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='40'/%3e%3c/filter%3e%3c/defs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-80225f1d54388012695371f5a1953300)' width='976' height='422' xlink:href='data:image/png%3bbase64%2ciVBORw0KGgoAAAANSUhEUgAAAEAAAAAcCAYAAADRJblSAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAHe0lEQVRYw9WY2W8jWRXGLTGT2HGaJHbirewsjuOlvKaz2I4TJ17STtKxs/aWpBPH6WwMAiEkEOIJJITgASEkECPEjEAwLD29TLrTDEgI8Zd9c86tqsTO2m33TMPDT%2bXyrbr3nO9%2b59at0t1%2bugtm7sk1fLqL2at4fJ6ZM9T7fw1XxMAxXpeHlq%2bGbv7ZHuaf76P04hDFowMUP9vH/NM93OaLT9irYa6aT69mVuWi/862zV5y/YVUxVAb324NnAvnVHpxIHIU%2baoUCV3pxT7m/l5B%2bhfLyP9%2bHbN/KVPjLhaODwSllyQKXTP/fO%2bcem/K3Jnfc5e01QXFzDFyPhyzFv88tc1%2bUkb%2bdw8w%2bcsVEmUHpSO67jMF3dKrA8z%2beQuBh6OC0G4Kg9/OYPSHBUz8fBH5Dx9g5k9bKFJHi8eHCq8OsUCDlEjZ4nNV0aenqharVG6EYnV/T6vG4ESP9kUMHAvHxL/nnzwSseZ%2bex/jP1vAyA8KiH1rCqFHKfjXRxCsjGH%2bcQWLLBCJsEBi6ZY/P8Dtv25RYxJyOQF5KyGE4Bv8G8wogjtJxL6ZxvD3p5H6aRHZ39zFzB8fkig7NPgBlv5B/POQjhwIBfZiTyCUbgCtH%2b6T%2b176/FCMtXhMjqSZLPxhA9lf30HqJ/MY/l4e0Q/SIg%2bOWcROOXAuWl6Rg3GKuUJ9UH/HewLd6r%2bo9v9WRnA7KS4SFzN8zpSTVaKowqyNiP8jBxMY%2bm4OYz%2b%2bjcyvVlH4eB3FJzTA8f7lvLyEK%2b4p0qwVPlrDFFk4%2baM53PxOFpH9cREnxyJiWmcHx5UctNi3kyf5BDbjCNM9C892sEqTvvJqHyskhO7%2bfz/A4rPtUwdcQnA7IUTS0DoNbJyKEtiKI7o/hp7NPMx3ZtB1t0DM1ElB9OEu5xDZGxNjacmKcqVzJa5kFZfHztezA5aPH%2bHef76Bu/8%2bFOjuHO%2bg%2bMn6eQe8ASei0P2hchzmuQm8N55B0%2bQUmtKZ%2bqB7v0Z9WEvjCJZrk60nRuGAvRQWH29i9eUOVo62sXpUgc6/4EVgOVBXpxcRriRgWUhDn82hJZ9tiGbqw7E8gVDl7cQmk0MDS374FylnZskLnTQqoXuiVzRqi0W9BNgB23F0FdNomsrCkM2SEPVhyGWpjxzsSxOiz0bi0pzN5epKdUOKS3AmnAKdNWqHI9Fdt/3POyAOSymN5oySBItQQ%2b4ashlBSy6DZhLRwQJU4g3HxaXDAthHXLDG7LANOgQ6k98C600n5M237wAxmzkmp3L9zL%2bfm0YTk5/Ge5lp2BfHRZ%2bBhh2QFAtoV9QBc8AKc9AGs2yDrsNrgWXQ%2bSU4gNYAntH0JFpSEwq0sF3oiqwiEh%2btqQh64v1wJb1oG6cZW5l8aw7gvUFn2AGTzwITicDo2j1d6IxKb3cNWJhEcyKFVtcAWh0etNr6CTdarb0w3ByBPk9uyGRoxjWU2e8d7sFgSI9YpAWDEQPCQSMGbvkgV5KNrwHbigPMQTvaByzgiWdIAAvZwnkqQEOrrCKAZZlW8OEkjO1WtHRKaDE7lCOdGyKD0N%2b6pZZEnhyRQ9M0PfNTNxGR9QhGvo6QRvgGwiEj5HsxEmGscQcIARzoYAF8VhKAHNDWTw6ISGIT06gDhAD8GJwdhSEaRUuHDQZKnmERDHRulGUY0wkYU6MwksVbUyMwTCQhRV0IePXwB1oRCBgV5Fb4PXoECh7IOyllnWrQASaZHECuZxcwogQUBzQ282KDQjsuV86PzphECkuUMM%2b8krwQoN2BNrck2ll0Lj0%2bmml8p78DAx4DBrxGeBmfwkC/Hp4RGwkwpuz0thp3gFICZxxQ71OAd1jaC4gt1Y8OGsAcc6FDdsJooaRNlLxJEaLVQfYLOilhF0wq5ohTHLtoRe5xNaOvVw93n4YB7p4mWH1m2Ce9Yq8vHmf1OKF86oC2ix0Qr6/maWa894ZgGemFKcyz6xIJsgjmCCUZVAkr/9W0a4jzbli8nZDsTXASLolwvA9H3w1yilP0bU244XswLMZ803hfzwFvqCrPvLsUEUlwgCKRqLOWmEr0ekzcj7cLZucNmCUjzO4OmFSHCNeESODBbvQvx8S7fb0OaG/IAVvxkzfD7oIsAuTgOmNnZlWb2Wpi18DXUIKCmOv0GK12jyJW71yo5htGww54nboS9c41SLXoSA%2bgIyRVJej8ilDG4rGljO9kAb42fv520NAaQO1ce777w7DG%2b07r/R3BY3NJ2Mb61c9dyStzCJ7bCFmVjVCNA8pX1fsY%2bpeiogZFvce%2bylm/BFWErqEeeFYH1XUhfq0DXn8NUG9kdXtmg%2bKRxQO/y5m/yAkiLjr2FcPi%2b%2bW5dWHrdR1QrdimurkhYaQpr1rvzjP17nrH1K4L7ExX3q8mnjz/FFircoBXdUDbycvQmZqhWffRDbakW9is9pn9P0ZVTByrfdyjfM2u%2bs6pvQ0qDlAFYAeYPFZYaMMSWBuFvE7v3YT8MAHvyhCsQ73oDNEujTYpXdH/EyhWc8gJ2yhtmu4OQ96gnNYopw1aA%2b4NozMowTRgo/2Gwhdfmg7mIdTRhQAAAABJRU5ErkJggg==' /%3e%3c/svg%3e\" width=\"976\" alt=\"Scanlines Night Vision\" data-srcset=\"/assets/static/night-vision-scanlines.82a2fbd.11a84ab2f67dd70988652409c911a7be.png 480w, /assets/static/night-vision-scanlines.f67bb29.11a84ab2f67dd70988652409c911a7be.png 976w\" data-sizes=\"(max-width: 976px) 100vw, 976px\" data-src=\"/assets/static/night-vision-scanlines.f67bb29.11a84ab2f67dd70988652409c911a7be.png\"><noscript><img class=\"g-image g-image--lazy g-image--loaded\" src=\"/assets/static/night-vision-scanlines.f67bb29.11a84ab2f67dd70988652409c911a7be.png\" width=\"976\" alt=\"Scanlines Night Vision\"></noscript></p>\n<h2 id=\"shader-5---pixelated-night-vision\"><a href=\"#shader-5---pixelated-night-vision\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Shader 5 - Pixelated Night Vision</h2>\n<p>This last shader is going to a slightly different effect and I have to admit it looks better on Shadertoy but I bet someone could use this as a base to create a nice pixelated night vision shader in Godot. The original code for this shader can be found on <a href=\"https://www.shadertoy.com/view/4sGXWh\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Shadertoy</a></p>\n<pre class=\"language-glsl\"><code class=\"language-glsl\"><span class=\"token comment\">// For Godot we have to specify the shader type. Since this shader goes on a ColorRect node, it's 2D and all 2D shaders are of type `canvas_item`.</span>\nshader_type canvas_item<span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// In Shadertoy there's a global for frame number which we don't have access to in Godot so we pass that in from code.</span>\n<span class=\"token keyword\">uniform</span> <span class=\"token keyword\">int</span> frame_number <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">float</span> <span class=\"token function\">get_red</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">sampler2D</span> sampler<span class=\"token punctuation\">,</span> <span class=\"token keyword\">vec2</span> uv<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n\t<span class=\"token keyword\">return</span> <span class=\"token function\">texture</span><span class=\"token punctuation\">(</span>sampler<span class=\"token punctuation\">,</span> uv<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>r<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">float</span> <span class=\"token function\">get_green</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">sampler2D</span> sampler<span class=\"token punctuation\">,</span> <span class=\"token keyword\">vec2</span> uv<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n\t<span class=\"token keyword\">return</span> <span class=\"token function\">texture</span><span class=\"token punctuation\">(</span>sampler<span class=\"token punctuation\">,</span> uv<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>g<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">float</span> <span class=\"token function\">get_blue</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">sampler2D</span> sampler<span class=\"token punctuation\">,</span> <span class=\"token keyword\">vec2</span> uv<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n\t<span class=\"token keyword\">return</span> <span class=\"token function\">texture</span><span class=\"token punctuation\">(</span>sampler<span class=\"token punctuation\">,</span> uv<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>b<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">float</span> <span class=\"token function\">random_f</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n\t<span class=\"token keyword\">float</span> seed <span class=\"token operator\">=</span> <span class=\"token keyword\">float</span><span class=\"token punctuation\">(</span>frame_number<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> <span class=\"token number\">5</span><span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\tseed <span class=\"token operator\">=</span> <span class=\"token function\">mod</span><span class=\"token punctuation\">(</span>seed <span class=\"token operator\">*</span> <span class=\"token number\">16807.0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2147483647.0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token keyword\">return</span> seed <span class=\"token operator\">/</span> <span class=\"token number\">2147483647.0</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">// `mainImage` is always `fragment` in Godot and it takes no arguments.</span>\n<span class=\"token keyword\">void</span> <span class=\"token function\">fragment</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// Shadertoy has an `iResolution` global variable but we don't have access to that in Godot. The Godot docs recommend either using the following definition below or passing it in manually.</span>\n\t<span class=\"token keyword\">vec2</span> i_resolution <span class=\"token operator\">=</span> <span class=\"token number\">1.0</span> <span class=\"token operator\">/</span> SCREEN_PIXEL_SIZE<span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">vec4</span> fc <span class=\"token operator\">=</span> FRAGCOORD<span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">float</span> shift <span class=\"token operator\">=</span> <span class=\"token number\">2.0</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">float</span> size <span class=\"token operator\">=</span> <span class=\"token number\">5.0</span><span class=\"token punctuation\">;</span>\n\t\n\t<span class=\"token comment\">// Filtered</span>\n\t<span class=\"token comment\">// RGB Split and Pixelate</span>\n    <span class=\"token comment\">// Instead of `iChannel0` we have `TEXTURE` and `SCREEN_TEXTURE` available to us and since we want this to be a screen shader we use `SCREEN_TEXTURE`.</span>\n\t<span class=\"token keyword\">vec4</span> output_color <span class=\"token operator\">=</span> <span class=\"token function\">texture</span><span class=\"token punctuation\">(</span>SCREEN_TEXTURE<span class=\"token punctuation\">,</span> fc<span class=\"token punctuation\">.</span>xy<span class=\"token operator\">/</span>i_resolution<span class=\"token punctuation\">.</span>xy<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\n\t<span class=\"token keyword\">bool</span> top <span class=\"token operator\">=</span> fc<span class=\"token punctuation\">.</span>y <span class=\"token operator\">&lt;=</span> shift <span class=\"token operator\">-</span> <span class=\"token number\">1.</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">bool</span> left <span class=\"token operator\">=</span> fc<span class=\"token punctuation\">.</span>x <span class=\"token operator\">&lt;=</span> shift <span class=\"token operator\">-</span> <span class=\"token number\">1.</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">bool</span> right <span class=\"token operator\">=</span> fc<span class=\"token punctuation\">.</span>x <span class=\"token operator\">>=</span> i_resolution<span class=\"token punctuation\">.</span>x <span class=\"token operator\">-</span> shift <span class=\"token operator\">+</span> <span class=\"token number\">1.</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">bool</span> bottom <span class=\"token operator\">=</span> fc<span class=\"token punctuation\">.</span>y <span class=\"token operator\">>=</span> i_resolution<span class=\"token punctuation\">.</span>y <span class=\"token operator\">-</span> shift <span class=\"token operator\">+</span> <span class=\"token number\">1.</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>top<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\toutput_color<span class=\"token punctuation\">.</span>r <span class=\"token operator\">*</span><span class=\"token operator\">=</span> <span class=\"token function\">get_red</span><span class=\"token punctuation\">(</span>SCREEN_TEXTURE<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">vec2</span><span class=\"token punctuation\">(</span>fc<span class=\"token punctuation\">.</span>x<span class=\"token punctuation\">,</span> fc<span class=\"token punctuation\">.</span>y <span class=\"token operator\">+</span> shift<span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span> <span class=\"token keyword\">vec2</span><span class=\"token punctuation\">(</span><span class=\"token function\">mod</span><span class=\"token punctuation\">(</span>fc<span class=\"token punctuation\">.</span>x<span class=\"token punctuation\">,</span> size<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token function\">mod</span><span class=\"token punctuation\">(</span>fc<span class=\"token punctuation\">.</span>y<span class=\"token punctuation\">,</span> size<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">/</span> i_resolution<span class=\"token punctuation\">.</span>xy<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n\t<span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>left<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\toutput_color<span class=\"token punctuation\">.</span>r <span class=\"token operator\">=</span> <span class=\"token function\">get_red</span><span class=\"token punctuation\">(</span>SCREEN_TEXTURE<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">vec2</span><span class=\"token punctuation\">(</span>fc<span class=\"token punctuation\">.</span>x<span class=\"token punctuation\">,</span> fc<span class=\"token punctuation\">.</span>y <span class=\"token operator\">+</span> shift<span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span> <span class=\"token keyword\">vec2</span><span class=\"token punctuation\">(</span><span class=\"token function\">mod</span><span class=\"token punctuation\">(</span>fc<span class=\"token punctuation\">.</span>x<span class=\"token punctuation\">,</span> size<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token function\">mod</span><span class=\"token punctuation\">(</span>fc<span class=\"token punctuation\">.</span>y<span class=\"token punctuation\">,</span> size<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">/</span> i_resolution<span class=\"token punctuation\">.</span>xy<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\toutput_color<span class=\"token punctuation\">.</span>g <span class=\"token operator\">=</span> <span class=\"token function\">get_green</span><span class=\"token punctuation\">(</span>SCREEN_TEXTURE<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">vec2</span><span class=\"token punctuation\">(</span>fc<span class=\"token punctuation\">.</span>x <span class=\"token operator\">+</span> shift<span class=\"token punctuation\">,</span> fc<span class=\"token punctuation\">.</span>y <span class=\"token operator\">-</span> shift<span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span> <span class=\"token keyword\">vec2</span><span class=\"token punctuation\">(</span><span class=\"token function\">mod</span><span class=\"token punctuation\">(</span>fc<span class=\"token punctuation\">.</span>x<span class=\"token punctuation\">,</span> size<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token function\">mod</span><span class=\"token punctuation\">(</span>fc<span class=\"token punctuation\">.</span>y<span class=\"token punctuation\">,</span> size<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">/</span> i_resolution<span class=\"token punctuation\">.</span>xy<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n\t<span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>right<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\toutput_color<span class=\"token punctuation\">.</span>r <span class=\"token operator\">=</span> <span class=\"token function\">get_red</span><span class=\"token punctuation\">(</span>SCREEN_TEXTURE<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">vec2</span><span class=\"token punctuation\">(</span>fc<span class=\"token punctuation\">.</span>x<span class=\"token punctuation\">,</span> fc<span class=\"token punctuation\">.</span>y <span class=\"token operator\">+</span> shift<span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span> <span class=\"token keyword\">vec2</span><span class=\"token punctuation\">(</span><span class=\"token function\">mod</span><span class=\"token punctuation\">(</span>fc<span class=\"token punctuation\">.</span>x<span class=\"token punctuation\">,</span> size<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token function\">mod</span><span class=\"token punctuation\">(</span>fc<span class=\"token punctuation\">.</span>y<span class=\"token punctuation\">,</span> size<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">/</span> i_resolution<span class=\"token punctuation\">.</span>xy<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\toutput_color<span class=\"token punctuation\">.</span>b <span class=\"token operator\">=</span> <span class=\"token function\">get_blue</span><span class=\"token punctuation\">(</span>SCREEN_TEXTURE<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">vec2</span><span class=\"token punctuation\">(</span>fc<span class=\"token punctuation\">.</span>x <span class=\"token operator\">-</span> shift<span class=\"token punctuation\">,</span> fc<span class=\"token punctuation\">.</span>y <span class=\"token operator\">-</span> shift<span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span> <span class=\"token keyword\">vec2</span><span class=\"token punctuation\">(</span><span class=\"token function\">mod</span><span class=\"token punctuation\">(</span>fc<span class=\"token punctuation\">.</span>x<span class=\"token punctuation\">,</span> size<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token function\">mod</span><span class=\"token punctuation\">(</span>fc<span class=\"token punctuation\">.</span>y<span class=\"token punctuation\">,</span> size<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">/</span> i_resolution<span class=\"token punctuation\">.</span>xy<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n\t<span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>bottom<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\toutput_color<span class=\"token punctuation\">.</span>g <span class=\"token operator\">=</span> <span class=\"token function\">get_green</span><span class=\"token punctuation\">(</span>SCREEN_TEXTURE<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">vec2</span><span class=\"token punctuation\">(</span>fc<span class=\"token punctuation\">.</span>x <span class=\"token operator\">+</span> shift<span class=\"token punctuation\">,</span> fc<span class=\"token punctuation\">.</span>y <span class=\"token operator\">-</span> shift<span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span> <span class=\"token keyword\">vec2</span><span class=\"token punctuation\">(</span><span class=\"token function\">mod</span><span class=\"token punctuation\">(</span>fc<span class=\"token punctuation\">.</span>x<span class=\"token punctuation\">,</span> size<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token function\">mod</span><span class=\"token punctuation\">(</span>fc<span class=\"token punctuation\">.</span>y<span class=\"token punctuation\">,</span> size<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">/</span> i_resolution<span class=\"token punctuation\">.</span>xy<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\toutput_color<span class=\"token punctuation\">.</span>b <span class=\"token operator\">=</span> <span class=\"token function\">get_blue</span><span class=\"token punctuation\">(</span>SCREEN_TEXTURE<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">vec2</span><span class=\"token punctuation\">(</span>fc<span class=\"token punctuation\">.</span>x <span class=\"token operator\">-</span> shift<span class=\"token punctuation\">,</span> fc<span class=\"token punctuation\">.</span>y <span class=\"token operator\">-</span> shift<span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span> <span class=\"token keyword\">vec2</span><span class=\"token punctuation\">(</span><span class=\"token function\">mod</span><span class=\"token punctuation\">(</span>fc<span class=\"token punctuation\">.</span>x<span class=\"token punctuation\">,</span> size<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token function\">mod</span><span class=\"token punctuation\">(</span>fc<span class=\"token punctuation\">.</span>y<span class=\"token punctuation\">,</span> size<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">/</span> i_resolution<span class=\"token punctuation\">.</span>xy<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n\t<span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n\t\toutput_color<span class=\"token punctuation\">.</span>r <span class=\"token operator\">=</span> <span class=\"token function\">get_red</span><span class=\"token punctuation\">(</span>SCREEN_TEXTURE<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">vec2</span><span class=\"token punctuation\">(</span>fc<span class=\"token punctuation\">.</span>x<span class=\"token punctuation\">,</span> fc<span class=\"token punctuation\">.</span>y <span class=\"token operator\">+</span> shift<span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span> <span class=\"token keyword\">vec2</span><span class=\"token punctuation\">(</span><span class=\"token function\">mod</span><span class=\"token punctuation\">(</span>fc<span class=\"token punctuation\">.</span>x<span class=\"token punctuation\">,</span> size<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token function\">mod</span><span class=\"token punctuation\">(</span>fc<span class=\"token punctuation\">.</span>y<span class=\"token punctuation\">,</span> size<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">/</span> i_resolution<span class=\"token punctuation\">.</span>xy<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\toutput_color<span class=\"token punctuation\">.</span>g <span class=\"token operator\">=</span> <span class=\"token function\">get_green</span><span class=\"token punctuation\">(</span>SCREEN_TEXTURE<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">vec2</span><span class=\"token punctuation\">(</span>fc<span class=\"token punctuation\">.</span>x <span class=\"token operator\">+</span> shift<span class=\"token punctuation\">,</span> fc<span class=\"token punctuation\">.</span>y <span class=\"token operator\">-</span> shift<span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span> <span class=\"token keyword\">vec2</span><span class=\"token punctuation\">(</span><span class=\"token function\">mod</span><span class=\"token punctuation\">(</span>fc<span class=\"token punctuation\">.</span>x<span class=\"token punctuation\">,</span> size<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token function\">mod</span><span class=\"token punctuation\">(</span>fc<span class=\"token punctuation\">.</span>y<span class=\"token punctuation\">,</span> size<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">/</span> i_resolution<span class=\"token punctuation\">.</span>xy<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\toutput_color<span class=\"token punctuation\">.</span>b <span class=\"token operator\">=</span> <span class=\"token function\">get_blue</span><span class=\"token punctuation\">(</span>SCREEN_TEXTURE<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">vec2</span><span class=\"token punctuation\">(</span>fc<span class=\"token punctuation\">.</span>x <span class=\"token operator\">-</span> shift<span class=\"token punctuation\">,</span> fc<span class=\"token punctuation\">.</span>y <span class=\"token operator\">-</span> shift<span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span> <span class=\"token keyword\">vec2</span><span class=\"token punctuation\">(</span><span class=\"token function\">mod</span><span class=\"token punctuation\">(</span>fc<span class=\"token punctuation\">.</span>x<span class=\"token punctuation\">,</span> size<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token function\">mod</span><span class=\"token punctuation\">(</span>fc<span class=\"token punctuation\">.</span>y<span class=\"token punctuation\">,</span> size<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">/</span> i_resolution<span class=\"token punctuation\">.</span>xy<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n\t\n\t<span class=\"token comment\">// Night Vision</span>\n\toutput_color <span class=\"token operator\">=</span> <span class=\"token keyword\">vec4</span><span class=\"token punctuation\">(</span>output_color<span class=\"token punctuation\">.</span>r <span class=\"token operator\">*</span> <span class=\"token number\">0.1</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span>output_color<span class=\"token punctuation\">.</span>g <span class=\"token operator\">*</span> output_color<span class=\"token punctuation\">.</span>g <span class=\"token operator\">*</span> output_color<span class=\"token punctuation\">.</span>g<span class=\"token punctuation\">)</span> <span class=\"token operator\">*</span> <span class=\"token number\">0.9</span><span class=\"token punctuation\">,</span> output_color<span class=\"token punctuation\">.</span>b <span class=\"token operator\">*</span> <span class=\"token number\">0.1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1.0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\n\t<span class=\"token comment\">// Brightness Correction</span>\n\toutput_color<span class=\"token punctuation\">.</span>g <span class=\"token operator\">=</span> <span class=\"token function\">pow</span><span class=\"token punctuation\">(</span>output_color<span class=\"token punctuation\">.</span>g<span class=\"token punctuation\">,</span> <span class=\"token number\">1.1</span> <span class=\"token operator\">/</span> <span class=\"token number\">3.0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\n\t<span class=\"token comment\">// Scan Lines</span>\n\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token function\">floor</span><span class=\"token punctuation\">(</span><span class=\"token function\">mod</span><span class=\"token punctuation\">(</span>fc<span class=\"token punctuation\">.</span>y<span class=\"token punctuation\">,</span> <span class=\"token number\">5.0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">==</span> <span class=\"token number\">0.0</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\toutput_color <span class=\"token operator\">*</span><span class=\"token operator\">=</span> <span class=\"token number\">0.625</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n\t<span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token function\">floor</span><span class=\"token punctuation\">(</span><span class=\"token function\">mod</span><span class=\"token punctuation\">(</span>fc<span class=\"token punctuation\">.</span>y<span class=\"token punctuation\">,</span> <span class=\"token number\">5.0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">==</span> <span class=\"token number\">2.0</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\toutput_color <span class=\"token operator\">*</span><span class=\"token operator\">=</span> <span class=\"token number\">0.75</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n\t<span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token function\">floor</span><span class=\"token punctuation\">(</span><span class=\"token function\">mod</span><span class=\"token punctuation\">(</span>fc<span class=\"token punctuation\">.</span>y<span class=\"token punctuation\">,</span> <span class=\"token number\">5.0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">==</span> <span class=\"token number\">0.0</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\toutput_color <span class=\"token operator\">*</span><span class=\"token operator\">=</span> <span class=\"token number\">0.875</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n\t\n\t<span class=\"token comment\">// Vignette</span>\n\t<span class=\"token keyword\">vec2</span> center_position <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>fc<span class=\"token punctuation\">.</span>xy <span class=\"token operator\">/</span> i_resolution<span class=\"token punctuation\">.</span>xy<span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span> <span class=\"token keyword\">vec2</span><span class=\"token punctuation\">(</span><span class=\"token number\">0.5</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">float</span> len <span class=\"token operator\">=</span> <span class=\"token function\">length</span><span class=\"token punctuation\">(</span>center_position<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">float</span> vignette <span class=\"token operator\">=</span> <span class=\"token function\">smoothstep</span><span class=\"token punctuation\">(</span><span class=\"token number\">0.8</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0.125</span><span class=\"token punctuation\">,</span> len<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>    \n\toutput_color<span class=\"token punctuation\">.</span>rgb <span class=\"token operator\">=</span> <span class=\"token function\">mix</span><span class=\"token punctuation\">(</span>output_color<span class=\"token punctuation\">.</span>rgb<span class=\"token punctuation\">,</span> output_color<span class=\"token punctuation\">.</span>rgb <span class=\"token operator\">*</span> vignette<span class=\"token punctuation\">,</span> <span class=\"token number\">0.5</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\n\t<span class=\"token comment\">// Finished!</span>\n    <span class=\"token comment\">// `fragColor` is `COLOR` in Godot.</span>\n\tCOLOR <span class=\"token operator\">=</span> output_color<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre>\n<p>This shader is a bit different as it wants to be passed the frame number the game is on to create a seed from it. I'm sure you could bypass this by just passing in <code>TIME</code> instead but I wanted to preserve the original code as much as possible while porting it over to be used as a shader in Godot.</p>\n<p>An image of the effect can be seen below and a short gif of it can be found on Gyfcat <a href=\"https://gfycat.com/goodnaturedconfusedfirebelliedtoad\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">here</a>\n<img class=\"g-image g-image--lazy g-image--loading\" src=\"data:image/svg+xml,%3csvg fill='none' viewBox='0 0 944 432' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-8a4799d11135200e2585bd1efe80293b'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='40'/%3e%3c/filter%3e%3c/defs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-8a4799d11135200e2585bd1efe80293b)' width='944' height='432' xlink:href='data:image/png%3bbase64%2ciVBORw0KGgoAAAANSUhEUgAAAEAAAAAdCAYAAAAaeWr3AAAACXBIWXMAAA7DAAAOwwHHb6hkAAALzUlEQVRYw62Y%2bXMcxRXHN%2bxKM3vMXjOzt7SXVru6ZdkchnAYy/iULFnW6pYl46JSRQpSkFQSqpJU5YekUpWigo0NgoCxwRhsfOIDX2Ag/9fL93X3rEbrM7F/%2bFSvV7Pd7/v6vW/32FN6t59K7w1Q6RA4DD4YoPLKIJU/HqTSJxiPrqPyMfA5OAFOgq/BqSEqfzNEHWfAWXAeXFhPHRfBt4pL4DK4ori6nioPoPHsZcUlNRfPy/PzOufUmli7fHpIxvIVYvoSfKFi5ZgRu9DAWqCpdAT63gcHwb8AtHvaD3ZR%2b/vd1H6km/Ifgo/AJz2UPwqO91DhC/BlLxW%2bAqfAN%2bBsHxXOgQvgIrjUT8XL4Aq4Cr4D18B1xQ3FzQHQ/wAGVp%2b/rua5pua8KtcoYK3Ct2rt8yqWM%2bA0YvsanAQnwOfQcExp%2bbfS9gG0HgaHwHtd5Ckd6kNm%2bpClfip/iqwcBZ%2bhCo5h/BzjCXASWfwanAZnwDlk9zy4uA67Ay6DK%2bAq%2bA47c01xHdxwcfMhcZ6/ruC5eN6rah1e75Jcu3yBY0FMZzF%2bg/EU%2bAp8ibi/AMeh45jUxNrKn2BcQdUf7qMitHtKR3qp9GEftf%2b5Rvm/1FAavVT%2bCMk4Dk7iB6fBWXBOcQFcBN8OIhBwFXwHroHrCOoGuAluKb538cND4v6NM89NNTevcU2teQVCLw2KWERc511xngGn1AZ%2bBi1HUD3/RCW8A51/g84VbPzhXvIUV3qIsfe1UWwkSdbeDCX25Sj9eoFyf%2bjAw1UqojXKJ1Al5/qR%2bQEEgElvgJtqdD7fAt%2bDH8BtBoH9%2bAjcdvGDmvtW07qg47pKCG/MGezucbTDQZT7X6uUe7tMqV/lyZ7LkjmRptiuBKXeysMbeqn4QQ95Kh8PUAUmkXy1QObuDJlIgDkh4WTYUzlKzrZRejlPuTfKlP9jlUrIZMdHfVSFGdZgWLXvN1DtNvhpA1Udbq%2bn6o8bHgPr5Vxq3tqPvNaTVLuFEcbYeQLCuZz/jp7%2bbSdlXy9RajFPiZk2siazZLGWPY6mrNCY/V2ZOo8OUmVlAC3waTcVgX0AFTCWpPhkiuJ1MAVmwKwkNptsEJ9LkbWESnkth2y2U%2b5PJcq/24msdsGhe6kC8%2br8eYA6/9PEz/f4fL/vmJ%2bwSTDAMky4uALT/keFsu8UKfVGOyUOQORiejXGGTCXlHFz/NNSS4x17U1RFBpTv0cFwOBLMEZP9dggMakDRZEdkTWmDqbATJbs2awoIXseLOTIXgRoE2sRf1%2bQ2CCx3Eap1/KUfbNE9ltVst6skfWbRwRzJDFX9tcQfACC0arOmmJdxMCxiJg4tnkZK8dtTSsNdaVpL1dAGq1dphqO9CqqwFM53EOVIz0i%2bNh4UwVMp8mcBXNgHiwAZNvclxEVYC2D/eBVlFcD7MZymlrqbfSLPe30xMSjwXNoMzkxr0SuJ1hWIB5zMSNjm1fxctwzaaFBaJmUcJVn3i5Q5woq9RA8ILklQYy1Gw/AJMy9YBJMYcJpMANmscgcmM/IzPPO7wNLYFmxX2K/ihFos3nyTRWoBfj%2bT5zfBhZgYgdW12isuaTYp2JaUDHOyZhF7KyjrjRBG2u0d6UpNQzdwGN0h8joCVF8e0IaIDOJSVQCLExi3SUBNha1lxQIxnYSoEZtJk/eepF89cIj4Z0sUmA%2bLxPrrLGsWFJxNBKQbSRAxDwjdVh1qUkYIfRFX7TI6IJuaPcEKkEKdAYpus0SJhHbq8plShnIjDQYE8YnymvRaQOwBFDu5n6FagEeNbiwt96OHQT1JqYegOtZnsO/gL4/oObfn5FrLSuWVCyLqkURI5u0NMG01FBX5T8hjTD8vEmBDuiGdo%2b/gA/FIMVfSQiTsCakWTRMcPr%2bRihYAsurWECbxg5OliACVTDVxGRRft%2bM8/10ibzTZfLNYJwqUWCuQIn9rjWWFG7zcxvgrMsEXQZo7ZH6Is9a5M9DN7R7tHY/aXk/RbaYsgImkvLIqLurICWzOg8WwN2qwFUJcdDKFTCNNpjELo4qRsA4mAZTd%2bLj7%2bvwjuEs6RuTpD2XJO/2HOmoAFFZTqXdZfdFXPMp1%2b6vPQK5smN7YPKoAmNjnLQcdEO7R8sFSG8PUGzYXntp2Ct7x10FIrOc4Xnn6Lt7JVgYtRlUwKZ2aiklqTWXoNaMDRLU0p4g39Y2iHXt%2bKTEi4oJDKXINv2UjLdS0myleDJA4RcS8JamnXftvohnTuHsvjj%2b%2bFh3Xe7G8W/oCz9jkpaF7rYAJwCZaPNTdNiCeGRsXJ4GcXZMdk520Gl5pNxxJLLrLspjSByLChO0zmEnByFYD1KLYShC1BIIku/FJPnm2OHxzHRejN7ZArVuhpiYRgmzhWyrVZCI47OpkTVqi9NFrLXPdfQt3Hn0iXinZOysQWjZkxbaWKPxdByb4RdV4NGyKgGbkQAWP5aSD6skmPdKQiMRKgnuRMCRNZzf3j6bfEEIDodWQRJ8zyIB%2bLsPbeHbLUfveJ6CvSZZYR%2bZ2H3LjeEj66mIPAXUWlJ85uHEs5bxtNDGGo2n1iQggASgBV5Ghscy4qZk4uE1rTB5n3ZwWmJeHUnzOYq%2blCD/uii1tofJF8Kuh41GFfC/tUqE/ENR0gfBOjUOxSiMdjRDSECkZZVoi/yuHBC3PnHcqfUaJe82Pfex5yp9cywttLHG8FNogbRftIHHyURkE0xwNwxwNCFuS3wrZNPgo0Mcjc2m6LwnzEmEKeIZ49k46bhX6P0has1jt0PBVQwQD5KGM1gfkM80GDQoWApQJOClKARHseuNMeglI91K4WFTHMfC8ObubngcZ8P0JqTxCS1KG2sMPRmj1rROXP0eLQMzQOZjL9lkjiJTI8ggRovfC5AtSxiH63icbDoip/noyYnnjaE4%2bbsN8veFBXp3mLSygUoAeYO0DkN85%2b%2bXfxdj4zOqojdMRkKjiOaliI5E%2bCFe91EECQh2BMjfE8YRZoqKtGdzq3f9pvu%2biJVjHlcadktN5i6MI1kKb%2bAKgO6MUwHIRORFU/x/QGxXUozx0aSsCFUJcVUJMXWndiqC%2by6KO0QAQjTcrPReF31Nu%2bzQdw/6DVE9/lQrBUJeCvifoEDUS/6y3phT6w5ScH0E8SXk7tddFx2163EYnYh7TGkYlZpiO6W%2b0HpUQAoVkOEKQCa4F6IvwAR3wih2ANyVzREwKvtG9A/7wrjrmGRfwBh93sauY7e7sPM9D6D34dCZapB07LqOduHKcM%2bj19AufUgCv8O4e51jG083%2bl3EPyL1xIW2lNDIlaqlsPFcAcIMkInI85Z4IL49KcedYBcYwY9GAV6WzDF5SvD/rPDkbCZ6NSTFd3N5y7GBE7DC/7/gJKRndT4xv7MWkuAHfK9n0eLkGpMxcqzxURm70MBaXNqMdTgFOAHQ7nFKIfJLmOA2lMhWgAdjO1ZLRrSE0xZ8VOKZIHpWxzuEXgut0iWTIeh%2bAD1NrPl7aBX3nILQ2jU78VIDUxPx8QaNylhF3DuVDtajtLHG0CBaIKkLI/RoKhPR55DJrdjZV9Jy3Aa2gx0K0RYZiuMSE%2byC%2bApKs2qspeYGZdv1mOC53HM3ravDXEMDMTK3pKSR73TFvV1pcWkzBlEBSb9oA4%2bTifDGGEXRU1G8I7OpCbaCbQCvypxFvkKycA1vUlqnRHeoNlEL3Zuue3C/37jnVmtqbspB0R4RtERsh4p7m9LAWoQ2W4zB/ii1JHRhhB6RCa6AZ%2bABw%2bijzSijYbAF2dqiMocxPADxJZntBpW1%2bDubqD4mXHPqnXeu24inHMJrbpiiT9ty11%2bRsbMWoQnaTGg0%2blEBCehOcgWoTIRxP469jCxtQpZ43IxdR7ZieBEJdkdIK3KWQ2vpcFFZC1cK9%2bdjoWnuNet2rMbDCdBKQYGBPhd6hqWWqNLG34X6UAG2LnxAJQAmCEePbYJR4Bob2wReTlJ0oy0yquHdWS9hgWJIjg7lJjqaqDwGOu5C87qltYjNQswhbFzsBVvqYYQ2mGAvTFAkwE//BcAmDfe5vF8yAAAAAElFTkSuQmCC' /%3e%3c/svg%3e\" width=\"944\" alt=\"Pixelated Night Vision\" data-srcset=\"/assets/static/night-vision-pixelated.82a2fbd.5b55d8714e5312ac70a694d521e5b507.png 480w, /assets/static/night-vision-pixelated.015fddb.5b55d8714e5312ac70a694d521e5b507.png 944w\" data-sizes=\"(max-width: 944px) 100vw, 944px\" data-src=\"/assets/static/night-vision-pixelated.015fddb.5b55d8714e5312ac70a694d521e5b507.png\"><noscript><img class=\"g-image g-image--lazy g-image--loaded\" src=\"/assets/static/night-vision-pixelated.015fddb.5b55d8714e5312ac70a694d521e5b507.png\" width=\"944\" alt=\"Pixelated Night Vision\"></noscript></p>\n<h2 id=\"conclusion\"><a href=\"#conclusion\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Conclusion</h2>\n<p>I know that it has been mostly code but I hope that you see that porting over shaders from Shadertoy to Godot really isn't very difficult and even easier with the official documentation on it <a href=\"https://docs.godotengine.org/en/stable/tutorials/shading/migrating_to_godot_shader_language.html\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">here</a>.</p>\n"}},{"node":{"title":"Using Rust With Godot - Introducing Godot Rust Helper","path":"/using-rust-with-godot-introducing-godot-rust-helper/","date":"12. May 2020","timeToRead":7,"description":"Using Rust with Godot can seem intimidating at first but it's easier than you think, especially with the help of Godot Rust Helper","cover_image":{"type":"image","mimeType":"image/png","src":"/assets/static/using-rust-with-godot.07cc2b7.740bb04257e00e8c54e37f95a566e89c.png","size":{"width":860,"height":463},"sizes":"(max-width: 860px) 100vw, 860px","srcset":["/assets/static/using-rust-with-godot.a67b0b2.740bb04257e00e8c54e37f95a566e89c.png 480w","/assets/static/using-rust-with-godot.07cc2b7.740bb04257e00e8c54e37f95a566e89c.png 860w"],"dataUri":"data:image/svg+xml,%3csvg fill='none' viewBox='0 0 860 463' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-79d0f7e6bafdc50094db086b3b230426'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='10'/%3e%3c/filter%3e%3c/defs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-79d0f7e6bafdc50094db086b3b230426)' width='860' height='463' xlink:href='data:image/png%3bbase64%2ciVBORw0KGgoAAAANSUhEUgAAAEAAAAAiCAYAAADvVd%2bPAAAACXBIWXMAAA7EAAAOxAGVKw4bAAADwUlEQVRo3u1Z6UtUURTvLygIs9Ry1xIqCFq/hVJZZpmjpqaluUxuJC7hUmJmppm5mxWlGeTeJ8dxyaAwNMxAQ53REVxA0DFTUFNH/XXvtTeM5accwfeaA4fDu3fe5Z7fnHPu7563xcLEFP%2bzbtEBoANAuwuaG5ts2GY3Yu0NA8DS1EyrygsAuA1Sa7RzFwx26MNQf%2bf6lKxhRKzm2ps6Asz2GGOvhSVeFRfjfVMT6mqlqK%2brg1RSi9oaCXuW1NRAWkueJZKVMamUWfasMUb1XWMjqioqcejAQZgY7d78KUABsLG2xsjICLQls7OzOHHkKPYYGKrTYXMDYGWNXnkv2/z8/DyzjQ0NSE9Nw9DgEJIS7%2bJTczPeVlcjPzcXU1NTyEhPR3VlFSrKy/EwNRVKpVINwOjoKI4dPgJjQyP%2bAKBQKNQOfB8fx8Xzjih%2b%2bRJREZG4FRmFQD9/eHtegZeHJ0ROl3A7Lp6NRZN5f9/rWF5eZkplnIBxnM8AzMzM4JqXN9xd3RARHo7rPj64GRYG36vX4HrJGXExMcz50OBglL0pRXpaGntvYWGB/wCoVCpmBwcGWVGj%2bUyL4I%2bJCQwPD6O7q4vN02Inl8lZOvT2rqTP0tIS/wGgTnCOaIpMJsPzp0/xrLAQjfUNf83T8BcMAJzlQvp1SQnLfVr4crNzECQWIzEh4S/HBQcAlX5FP/bvs4GD/VnciY9nRS%2bPnAQebpdRXlbGfrO4uCisCKDOcLUgJysbyUlJcHJ0hN3Jk3ATubAToqy0FKFBweooECwAKfeSkZ2ZCVdnEU7Z2pLq7wfHcw7IevyYpIWHcAGgYU3lc2sro7QOZ%2bzZ2d/T3Y0AAsL2rdvwJD9fmCnwZ3FLS3kAP8IFKDv80tZGyFEEC//p6ek164YgIkDTISrVVVUQ%2bwcwAkTDn3NekCnAhTVnfxIytNa5Txnj3NycekwQAKh%2bn/30H8/OzCJn/yNER0YiMyODsUB68REHBDCK/CS/ACE3glBcVLSKRfIaAI78FOTlwdPdHUGBYnYviI%2bNRWFBAcKCQ1D04gUbS0m%2bj9N2dgwcwQDAhT7l/ePkVthHeH5rSwu%2bdXbi44ePkPX0sPnOjg58bW9n12i5XL4qBZS8BKCvTw3AWncBTeH%2baU2h73DgKcfG%2bNcPGBwY0FpHaHJyciUC%2bNARok1LuknK7i4TmutC7vuuzv%2bo5F03kYjQ5gusz0jB5U1XmHZ0DfR2sM7wulRvpbPMm66w5ncBKzNzraglUd58GNF9G9QBoANABwCf9BfK%2bASnSZEhFwAAAABJRU5ErkJggg==' /%3e%3c/svg%3e"},"content":"<h2 id=\"welcome\"><a href=\"#welcome\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Welcome</h2>\n<p>to the first step of mastering Rust in Godot. Using Rust in Godot is great for performance critical code and can either be used on its own or to supplement existing gdscript. We're going to go over the process of setting it up manually and then how to do the same thing using <a href=\"https://github.com/robertcorponoi/godot_rust_helper\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">godot_rust_helper</a>.</p>\n<h2 id=\"manual-setup\"><a href=\"#manual-setup\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Manual Setup</h2>\n<p>During this section we'll go through the manual process of setting up a Rust development environment for your Godot project. If you would like to skip to the godot_rust_helper section, click <a href=\"#using-godot_rust_helper\">here</a>.</p>\n<h3 id=\"creating-the-project\"><a href=\"#creating-the-project\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Creating the Project</h3>\n<p>The first step is to use cargo to create a new package. This should be done outside of your Game's directory as there can be performance issues if you do it in the same directory. I like to create mine in a different directory and use the exact same name as the game.</p>\n<p>So let's say your game is at <code>~/Documents/Games/platformer</code>. I would create another directory in <code>Documents</code> to hold the library. In my case I have a <code>Projects</code> directory so I go in there and run <code>cargo new platformer --lib</code>.</p>\n<p>This leaves me with the following directory structure:</p>\n<p><code>~/Documents/Games/platformer</code>\n<code>~/Documents/Projects/platformer</code></p>\n<p>Now open up the newly created project in your favorite text editor and open up the <code>Cargo.toml</code> file created by cargo. You will need to add a couple lines including the gdnative dependency that is necessary to use the gdnative modules. Below is a sample Cargo.toml file that contains the necessary components needed:</p>\n<pre class=\"language-toml\"><code class=\"language-toml\"><span class=\"token punctuation\">[</span><span class=\"token table class-name\">package</span><span class=\"token punctuation\">]</span>\n<span class=\"token key property\">name</span> <span class=\"token punctuation\">=</span> <span class=\"token string\">\"platformer\"</span>\n<span class=\"token key property\">version</span> <span class=\"token punctuation\">=</span> <span class=\"token string\">\"0.1.0\"</span>\n<span class=\"token key property\">authors</span> <span class=\"token punctuation\">=</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"Bob &lt;robertcorponoi@gmail.com>\"</span><span class=\"token punctuation\">]</span>\n<span class=\"token key property\">edition</span> <span class=\"token punctuation\">=</span> <span class=\"token string\">\"2018\"</span>\n\n<span class=\"token punctuation\">[</span><span class=\"token table class-name\">lib</span><span class=\"token punctuation\">]</span>\n<span class=\"token key property\">crate-type</span> <span class=\"token punctuation\">=</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"cdylib\"</span><span class=\"token punctuation\">]</span>\n\n<span class=\"token punctuation\">[</span><span class=\"token table class-name\">dependencies</span><span class=\"token punctuation\">]</span>\n<span class=\"token key property\">gdnative</span> <span class=\"token punctuation\">=</span> <span class=\"token punctuation\">{</span> <span class=\"token key property\">git</span> <span class=\"token punctuation\">=</span> <span class=\"token string\">\"https://github.com/GodotNativeTools/godot-rust\"</span> <span class=\"token punctuation\">}</span></code></pre>\n<p>Look closely at the parts under the package section, they are what are needed to create a basic working project.</p>\n<h3 id=\"create-the-scripts\"><a href=\"#create-the-scripts\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Create the Scripts</h3>\n<p>Before we can create our first script we have to set up the basics that let's Godot know how to handle our script. In your <code>src/lib.rs</code> file place the following boilerplate code:</p>\n<pre class=\"language-rust\"><code class=\"language-rust\"><span class=\"token attribute attr-name\">#[macro_use]</span>\n<span class=\"token keyword\">extern</span> <span class=\"token keyword\">crate</span> gdnative<span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">fn</span> <span class=\"token function\">init</span><span class=\"token punctuation\">(</span>handle<span class=\"token punctuation\">:</span> gdnative<span class=\"token punctuation\">::</span>init<span class=\"token punctuation\">::</span>InitHandle<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token function\">godot_gdnative_init!</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token function\">godot_nativescript_init!</span><span class=\"token punctuation\">(</span>init<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token function\">godot_gdnative_terminate!</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre>\n<p>This will let us create as many scripts as we want for the project and we can easily register as them as you'll see next. Now we're going to create a script called Player that will print \"hello, world.\" to the console. To do this, add a new file under <code>src/</code> and name it <code>player.rs</code>. In the newly created <code>player.rs</code> file, add the following:</p>\n<pre class=\"language-rust\"><code class=\"language-rust\"><span class=\"token attribute attr-name\">#[derive(gdnative::NativeClass)]</span>\n<span class=\"token attribute attr-name\">#[inherit(gdnative::Node)]</span>\n<span class=\"token keyword\">pub</span> <span class=\"token keyword\">struct</span> Player<span class=\"token punctuation\">;</span>\n\n<span class=\"token attribute attr-name\">#[gdnative::methods]</span>\n<span class=\"token keyword\">impl</span> Player <span class=\"token punctuation\">{</span>\n\t<span class=\"token keyword\">fn</span> <span class=\"token function\">_init</span><span class=\"token punctuation\">(</span>_owner<span class=\"token punctuation\">:</span> gdnative<span class=\"token punctuation\">::</span>Node<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">-></span> <span class=\"token keyword\">Self</span> <span class=\"token punctuation\">{</span>\n\t\tPlayer\n\t<span class=\"token punctuation\">}</span>\n\n\t<span class=\"token attribute attr-name\">#[export]</span>\n\t<span class=\"token keyword\">fn</span> <span class=\"token function\">_ready</span><span class=\"token punctuation\">(</span><span class=\"token operator\">&amp;</span><span class=\"token keyword\">self</span><span class=\"token punctuation\">,</span> _owner<span class=\"token punctuation\">:</span> gdnative<span class=\"token punctuation\">::</span>Node<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t<span class=\"token function\">godot_print!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"hello, world.\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre>\n<p>Let's break this down a bit. Everything in this script except the <code>_ready</code> function is required in order for Godot to be able to use this script. The only thing we do in <code>_ready</code> is print the \"hello, world.\" line. This article isn't going to be an in-depth guide on gdnative but great documentation can be found <a href=\"https://docs.rs/gdnative/0.8.0/gdnative/index.html\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">here</a>.</p>\n<p>Now that we have our Player set up, we need to go back to the <code>src/lib.rs</code> file and register it with Godot.</p>\n<pre class=\"language-rust\"><code class=\"language-rust\"><span class=\"token attribute attr-name\">#[macro_use]</span>\n<span class=\"token keyword\">extern</span> <span class=\"token keyword\">crate</span> gdnative<span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// Pulls in the module file.</span>\n<span class=\"token keyword\">mod</span> player<span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">fn</span> <span class=\"token function\">init</span><span class=\"token punctuation\">(</span>handle<span class=\"token punctuation\">:</span> gdnative<span class=\"token punctuation\">::</span>init<span class=\"token punctuation\">::</span>InitHandle<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// Registers it with Godot.</span>\n  handle<span class=\"token punctuation\">.</span>add_class<span class=\"token punctuation\">::</span><span class=\"token operator\">&lt;</span>player<span class=\"token punctuation\">::</span>Player<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token function\">godot_gdnative_init!</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token function\">godot_nativescript_init!</span><span class=\"token punctuation\">(</span>init<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token function\">godot_gdnative_terminate!</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre>\n<p>Any other scripts you create will follow the same procedure, you add the <code>mod script_name</code> line and then you register it with <code>handle.add_class::&#x3C;script_name::struct_name>();</code>. Before we move on make sure you run <code>cargo build</code> so that the dynamic library files get build and you can copy them into the Godot project for the next step.</p>\n<h3 id=\"create-the-resource-file\"><a href=\"#create-the-resource-file\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Create the Resource File</h3>\n<p>Now that we have our script set up, we need to create a resource file for our it. Each script you want to make will need its own resource file.</p>\n<p>Here is an example Player.gdns file:</p>\n<pre class=\"language-text\"><code class=\"language-text\">[gd_resource type=&quot;NativeScript&quot; load_steps=2 format=2]\n\n[ext_resource path=&quot;res://platformer.gdnlib&quot; type=&quot;GDNativeLibrary&quot; id=1]\n\n[resource]\n\nresource_name = &quot;Player&quot;\nclass_name = &quot;Player&quot;\nlibrary = ExtResource( 1 )</code></pre>\n<p>The three things that need to be changed in this example file are the <code>ext_resource_path</code>, <code>resource_name</code>, and <code>class_name</code>. The <code>ext_resource_path</code> needs to point to location of the gdnlib file we created in the step before. The name can be your class name either lowercase or capital but the most important part is the <code>class_name</code> which has to match the struct name in Rust.</p>\n<p><strong>Note:</strong> With this method everytime you change your scripts and run another build you will have to copy the dynamic libraries over the previous ones so that Godot can pick up on the changes.</p>\n<h3 id=\"set-the-build-targets\"><a href=\"#set-the-build-targets\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Set the Build Targets</h3>\n<p>This next part will depend on what platforms you plan on building for but for simplicity sake we'll just say windows. For this part we will need to create a gdnlib file that will let Godot know what dynamic libraries should be loaded for each platform.</p>\n<p>Here is an example platformer.gdnlib file:</p>\n<pre class=\"language-text\"><code class=\"language-text\">[general]\n\nsingleton=false\nload_once=true\nsymbol_prefix=&quot;godot_&quot;\nreloadable=false\n\n[entry]\n\nLinux.64=&quot;res://libgdexample.so&quot;\nWindows.64=&quot;res://libgdexample.dll&quot;\nOSX.64=&quot;res://libgdexample.dylib&quot;\n\n[dependencies]\n\nLinux.64=[]\nWindows.64=[]\nOSX.64=[]</code></pre>\n<p>Now let's break it down. The items under the general section control how the module is loaded and we have no need to change any of these. The entry section tells Godot the location of the dynamic library in the project's filesystem. So basically wherever we decide to place out build files, we need the paths to them to match here in the gdnlib file. For this example we're just assuming the files you built in the last step were placed in the root of the game's directory.</p>\n<p>The dependencies section allows you to name additional dynamic libraries that should be included as well. This is useful if you need a third-party dynamic library to be used with your project but that's outside the scope of this tutorial.</p>\n<h2 id=\"using-godot_rust_helper\"><a href=\"#using-godot_rust_helper\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Using godot_rust_helper</h2>\n<p>All of the steps above were for the previous method which can take up a lot of time especially if you have incremental changes. This long setup and the constant need to keep copying over the new dynamic libraries let me to create <a href=\"https://github.com/robertcorponoi/godot_rust_helper\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">godot_rust_helper</a>. We're going to go through the same project setup as above but this time using the godot_rust_helper CLI.</p>\n<p>First things first, you have to install godot_rust_helper using <code>cargo install godot_rust_helper</code>.</p>\n<h3 id=\"create-the-project\"><a href=\"#create-the-project\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Create the Project</h3>\n<p>To create a new project you have to specify the directory you would like it to reside in and the path to the Godot project that you are creating scripts for, just like in the previous section. We're going to assume the same directory structure as above and use:</p>\n<pre class=\"language-bash\"><code class=\"language-bash\">$ godot_rust_helper new ~/Documents/Projects/platformer ~/Documents/Games/platformer</code></pre>\n<p>This will run <code>cargo new</code> and create the project while also automatically creating the gdnlib file in the Godot project. The <code>new</code> command also comes with several options to customize your usage:</p>\n<ul>\n<li><code>--targets</code> Native components in Godot can target multiple platforms and godot_rust_helper needs to know ahead of time what platforms you plan to target your components for with the available options currently being: windows, linux, and osx. For example if you are targeting Windows and OSX, you need to have have cargo set to build a dll and a dylib file and you would pass <code>--targets=windows,osx</code> as the targets. By default if no targets are passed then just <code>--targets=windows</code> will be set.</li>\n<li><code>--output-path</code> godot_rust_helper has to place a gdnlib file and the build files in the game's directory. By default these files are placed at the root of the game directory but you can specify a directory in the game (existing or not) where these files go instead using this option.</li>\n<li><code>--nativescript-path</code> The path in the Godot project where all of the resource files will be output. By default the resource files are placed at the root of the Godot project.</li>\n</ul>\n<p>So if you wanted the gdnlib and dynamic libraries to be placed in a directory called <code>gdr-output</code> and you wanted the resource files to be placed in <code>gdr-scripts</code> you would do:</p>\n<pre class=\"language-bash\"><code class=\"language-bash\">$ godot_rust_helper new ~/Documents/Projects/platformer ~/Documents/Games/platformer --output-path ~/Documents/Games/platformer/gdr-output --nativescript-path ~/Documents/Games/platformer/gdr-scripts</code></pre>\n<h3 id=\"create-the-scripts-1\"><a href=\"#create-the-scripts-1\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Create the Scripts</h3>\n<p>Creating a new script with godot_rust_helper is as simple as:</p>\n<pre class=\"language-bash\"><code class=\"language-bash\">$ godot_rust_helper create Player</code></pre>\n<p>This creates the <code>player.rs</code> script and adds the entry for it in the <code>lib.rs</code> file. This even sets up the <code>player.rs</code> script with the basic \"hello, world.\" example we showed above to get you started.</p>\n<p>From here you can build the project by using:</p>\n<pre class=\"language-bash\"><code class=\"language-bash\">$ godot_rust_helper build</code></pre>\n<p>or you can run a build that watches for changes with:</p>\n<pre class=\"language-bash\"><code class=\"language-bash\">$ godot_rust_helper build --watch</code></pre>\n<p>The great thing about building this way is that it automatically moves the dynamic library files to the Godot project so you can run the build then go right back in Godot and press play to see the changes.</p>\n<p>There are also a few other commands offered by godot_rust_helper so make sure to check out the full documentation including a detailed step-by-step guide on the GitHub <a href=\"https://github.com/robertcorponoi/godot_rust_helper\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">repo</a>.</p>\n"}}]}}},"context":{}}