<!DOCTYPE html>
<html data-html-server-rendered="true" lang="en" data-vue-tag="%7B%22lang%22:%7B%22ssr%22:%22en%22%7D%7D">

<head>
  <title>Using Rust With Godot - Introducing Godot Rust Helper - Robert Corponoi</title><meta name="gridsome:hash" content="47d7bfa9cc677b08964215c6823fc4fdd52ee50c"><meta data-vue-tag="ssr" charset="utf-8"><meta data-vue-tag="ssr" name="generator" content="Gridsome v0.7.23"><meta data-vue-tag="ssr" data-key="viewport" name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover"><meta data-vue-tag="ssr" data-key="format-detection" name="format-detection" content="telephone=no"><meta data-vue-tag="ssr" data-key="description" name="description" content="My Blog"><meta data-vue-tag="ssr" name="description" content="Using Rust with Godot is easier than you think, especially with the help of Godot Rust Helper"><link data-vue-tag="ssr" rel="icon" href="data:,"><link data-vue-tag="ssr" rel="icon" type="image/png" sizes="16x16" href="/assets/static/favicon.ce0531f.bd9c2d4c76737c8e645df615f326643d.png"><link data-vue-tag="ssr" rel="icon" type="image/png" sizes="32x32" href="/assets/static/favicon.ac8d93a.bd9c2d4c76737c8e645df615f326643d.png"><link data-vue-tag="ssr" rel="icon" type="image/png" sizes="96x96" href="/assets/static/favicon.b9532cc.bd9c2d4c76737c8e645df615f326643d.png"><link data-vue-tag="ssr" rel="apple-touch-icon" type="image/png" sizes="76x76" href="/assets/static/favicon.f22e9f3.bd9c2d4c76737c8e645df615f326643d.png"><link data-vue-tag="ssr" rel="apple-touch-icon" type="image/png" sizes="152x152" href="/assets/static/favicon.62d22cb.bd9c2d4c76737c8e645df615f326643d.png"><link data-vue-tag="ssr" rel="apple-touch-icon" type="image/png" sizes="120x120" href="/assets/static/favicon.1539b60.bd9c2d4c76737c8e645df615f326643d.png"><link data-vue-tag="ssr" rel="apple-touch-icon" type="image/png" sizes="167x167" href="/assets/static/favicon.dc0cdc5.bd9c2d4c76737c8e645df615f326643d.png"><link data-vue-tag="ssr" rel="apple-touch-icon" type="image/png" sizes="180x180" href="/assets/static/favicon.7b22250.bd9c2d4c76737c8e645df615f326643d.png"><link rel="preload" href="/assets/css/0.styles.5f7ee5ed.css" as="style"><link rel="preload" href="/assets/js/app.1b9cc82c.js" as="script"><link rel="preload" href="/assets/js/page--src-templates-post-vue.ed68cdd5.js" as="script"><link rel="prefetch" href="/assets/js/page--node-modules-gridsome-app-pages-404-vue.908abdee.js"><link rel="prefetch" href="/assets/js/page--src-pages-contact-vue.c872c1ab.js"><link rel="prefetch" href="/assets/js/page--src-pages-index-vue.f7a8b6be.js"><link rel="prefetch" href="/assets/js/page--src-templates-tag-vue.23efd461.js"><link rel="stylesheet" href="/assets/css/0.styles.5f7ee5ed.css"><noscript data-vue-tag="ssr"><style>.g-image--loading{display:none;}</style></noscript>
</head>

<body >
  <script>
    /**
     * Add dark/light mode detection that runs before Vue.js loads. Borrowed
     * from overreacted.io
     */
    (() => {
      window.__onThemeChange = () => { };

      /**
       * Changes the theme by changing a data-attribute on the body.
       * 
       * @param {string} newTheme The new theme to change to.
       */
      const setTheme = (newTheme) => {
        window.__theme = newTheme;
        preferredTheme = newTheme;

        document.body.setAttribute('data-theme', newTheme);
        window.__onThemeChange(newTheme);
      };

      // Get the existing theme from the local storage, if there is one.
      const preferredTheme = localStorage.getItem('theme');
      if (!preferredTheme) return;

      /**
       * Calls `setTheme` to change the data attribute on the body to adjust
       * for the new theme and then it sets it to the local storage so that
       * next time the user visits the page the theme is remembered.
       * 
       * @param {string} newTheme The new theme to change to.
       */
      window.__setPreferredTheme = (newTheme) => {
        setTheme(newTheme);
        localStorage.setItem('theme', newTheme);
      };

      // Check to see if we should be in dark mode automatically by the user's
      // preferred color theme.
      const darkQuery = window.matchMedia('(prefers-color-scheme: dark)');
      darkQuery.addListener(e => {
        // Change the theme if the user prefers one or the other automatically.
        window.__setPreferredTheme(e.matches ? 'dark' : 'light')
      });

      setTheme(preferredTheme || (darkQuery.matches ? 'dark' : 'light'));
    })();
  </script>
  <div id="app" data-server-rendered="true"><nav class="navbar"><div class="container"><a href="/" class="navbar__logo">RC</a><span id="navbar-toggle" class="navbar__toggle"><div id="nav-icon" class="nav-icon"><div></div></div></span><ul id="navbar-main" class="navbar__main hide"><li><a href="/tag/game-development" class="navbar__links">Game Development</a></li></ul></div></nav><div class="header"><button role="button" aria-label="Toggle dark/light" class="toggle-theme"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-moon"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path></svg></button></div><main class="main"><div class="post container"><div class="post__header"><h1 class="post__title">Using Rust With Godot - Introducing Godot Rust Helper</h1><div class="post-meta post__meta">
  12. May 2020
  <strong>7 min parse.</strong></div><img alt="Cover image" src="data:image/svg+xml,%3csvg fill='none' viewBox='0 0 860 463' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-79d0f7e6bafdc50094db086b3b230426'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='10'/%3e%3c/filter%3e%3c/defs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-79d0f7e6bafdc50094db086b3b230426)' width='860' height='463' xlink:href='data:image/png%3bbase64%2ciVBORw0KGgoAAAANSUhEUgAAAEAAAAAiCAYAAADvVd%2bPAAAACXBIWXMAAA7EAAAOxAGVKw4bAAADwUlEQVRo3u1Z6UtUURTvLygIs9Ry1xIqCFq/hVJZZpmjpqaluUxuJC7hUmJmppm5mxWlGeTeJ8dxyaAwNMxAQ53REVxA0DFTUFNH/XXvtTeM5accwfeaA4fDu3fe5Z7fnHPu7563xcLEFP%2bzbtEBoANAuwuaG5ts2GY3Yu0NA8DS1EyrygsAuA1Sa7RzFwx26MNQf%2bf6lKxhRKzm2ps6Asz2GGOvhSVeFRfjfVMT6mqlqK%2brg1RSi9oaCXuW1NRAWkueJZKVMamUWfasMUb1XWMjqioqcejAQZgY7d78KUABsLG2xsjICLQls7OzOHHkKPYYGKrTYXMDYGWNXnkv2/z8/DyzjQ0NSE9Nw9DgEJIS7%2bJTczPeVlcjPzcXU1NTyEhPR3VlFSrKy/EwNRVKpVINwOjoKI4dPgJjQyP%2bAKBQKNQOfB8fx8Xzjih%2b%2bRJREZG4FRmFQD9/eHtegZeHJ0ROl3A7Lp6NRZN5f9/rWF5eZkplnIBxnM8AzMzM4JqXN9xd3RARHo7rPj64GRYG36vX4HrJGXExMcz50OBglL0pRXpaGntvYWGB/wCoVCpmBwcGWVGj%2bUyL4I%2bJCQwPD6O7q4vN02Inl8lZOvT2rqTP0tIS/wGgTnCOaIpMJsPzp0/xrLAQjfUNf83T8BcMAJzlQvp1SQnLfVr4crNzECQWIzEh4S/HBQcAlX5FP/bvs4GD/VnciY9nRS%2bPnAQebpdRXlbGfrO4uCisCKDOcLUgJysbyUlJcHJ0hN3Jk3ATubAToqy0FKFBweooECwAKfeSkZ2ZCVdnEU7Z2pLq7wfHcw7IevyYpIWHcAGgYU3lc2sro7QOZ%2bzZ2d/T3Y0AAsL2rdvwJD9fmCnwZ3FLS3kAP8IFKDv80tZGyFEEC//p6ek164YgIkDTISrVVVUQ%2bwcwAkTDn3NekCnAhTVnfxIytNa5Txnj3NycekwQAKh%2bn/30H8/OzCJn/yNER0YiMyODsUB68REHBDCK/CS/ACE3glBcVLSKRfIaAI78FOTlwdPdHUGBYnYviI%2bNRWFBAcKCQ1D04gUbS0m%2bj9N2dgwcwQDAhT7l/ePkVthHeH5rSwu%2bdXbi44ePkPX0sPnOjg58bW9n12i5XL4qBZS8BKCvTw3AWncBTeH%2baU2h73DgKcfG%2bNcPGBwY0FpHaHJyciUC%2bNARok1LuknK7i4TmutC7vuuzv%2bo5F03kYjQ5gusz0jB5U1XmHZ0DfR2sM7wulRvpbPMm66w5ncBKzNzraglUd58GNF9G9QBoANABwCf9BfK%2bASnSZEhFwAAAABJRU5ErkJggg==' /%3e%3c/svg%3e" width="860" data-src="/assets/static/using-rust-with-godot.07cc2b7.740bb04257e00e8c54e37f95a566e89c.png" data-srcset="/assets/static/using-rust-with-godot.a67b0b2.740bb04257e00e8c54e37f95a566e89c.png 480w, /assets/static/using-rust-with-godot.07cc2b7.740bb04257e00e8c54e37f95a566e89c.png 860w" data-sizes="(max-width: 860px) 100vw, 860px" class="post__image g-image g-image--lazy g-image--loading"><noscript><img src="/assets/static/using-rust-with-godot.07cc2b7.740bb04257e00e8c54e37f95a566e89c.png" class="post__image g-image g-image--loaded" width="860" alt="Cover image"></noscript></div><div class="post__content"><h2 id="welcome"><a href="#welcome" aria-hidden="true"><span class="icon icon-link"></span></a>Welcome</h2>
<p>to the first step of mastering Rust in Godot. Using Rust in Godot is great for performance critical code and can either be used on its own or to supplement existing gdscript. We're going to go over the process of setting it up manually and then how to do the same thing using <a href="https://github.com/robertcorponoi/godot_rust_helper" target="_blank" rel="nofollow noopener noreferrer">godot_rust_helper</a>.</p>
<h2 id="manual-setup"><a href="#manual-setup" aria-hidden="true"><span class="icon icon-link"></span></a>Manual Setup</h2>
<p>During this section we'll go through the manual process of setting up a Rust development environment for your Godot project. If you would like to skip to the godot_rust_helper section, click <a href="#using-godot_rust_helper">here</a>.</p>
<h3 id="creating-the-project"><a href="#creating-the-project" aria-hidden="true"><span class="icon icon-link"></span></a>Creating the Project</h3>
<p>The first step is to use cargo to create a new package. This should be done outside of your Game's directory as there can be performance issues if you do it in the same directory. I like to create mine in a different directory and use the exact same name as the game.</p>
<p>So let's say your game is at <code>~/Documents/Games/platformer</code>. I would create another directory in <code>Documents</code> to hold the library. In my case I have a <code>Projects</code> directory so I go in there and run <code>cargo new platformer --lib</code>.</p>
<p>This leaves me with the following directory structure:</p>
<p><code>~/Documents/Games/platformer</code>
<code>~/Documents/Projects/platformer</code></p>
<p>Now open up the newly created project in your favorite text editor and open up the <code>Cargo.toml</code> file created by cargo. You will need to add a couple lines including the gdnative dependency that is necessary to use the gdnative modules. Below is a sample Cargo.toml file that contains the necessary components needed:</p>
<pre class="language-toml"><code class="language-toml"><span class="token punctuation">[</span><span class="token table class-name">package</span><span class="token punctuation">]</span>
<span class="token key property">name</span> <span class="token punctuation">=</span> <span class="token string">"platformer"</span>
<span class="token key property">version</span> <span class="token punctuation">=</span> <span class="token string">"0.1.0"</span>
<span class="token key property">authors</span> <span class="token punctuation">=</span> <span class="token punctuation">[</span><span class="token string">"Bob &lt;robertcorponoi@gmail.com>"</span><span class="token punctuation">]</span>
<span class="token key property">edition</span> <span class="token punctuation">=</span> <span class="token string">"2018"</span>

<span class="token punctuation">[</span><span class="token table class-name">lib</span><span class="token punctuation">]</span>
<span class="token key property">crate-type</span> <span class="token punctuation">=</span> <span class="token punctuation">[</span><span class="token string">"cdylib"</span><span class="token punctuation">]</span>

<span class="token punctuation">[</span><span class="token table class-name">dependencies</span><span class="token punctuation">]</span>
<span class="token key property">gdnative</span> <span class="token punctuation">=</span> <span class="token punctuation">{</span> <span class="token key property">git</span> <span class="token punctuation">=</span> <span class="token string">"https://github.com/GodotNativeTools/godot-rust"</span> <span class="token punctuation">}</span></code></pre>
<p>Look closely at the parts under the package section, they are what are needed to create a basic working project.</p>
<h3 id="create-the-scripts"><a href="#create-the-scripts" aria-hidden="true"><span class="icon icon-link"></span></a>Create the Scripts</h3>
<p>Before we can create our first script we have to set up the basics that let's Godot know how to handle our script. In your <code>src/lib.rs</code> file place the following boilerplate code:</p>
<pre class="language-rust"><code class="language-rust"><span class="token attribute attr-name">#[macro_use]</span>
<span class="token keyword">extern</span> <span class="token keyword">crate</span> gdnative<span class="token punctuation">;</span>

<span class="token keyword">fn</span> <span class="token function">init</span><span class="token punctuation">(</span>handle<span class="token punctuation">:</span> gdnative<span class="token punctuation">::</span>init<span class="token punctuation">::</span>InitHandle<span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token punctuation">}</span>

<span class="token function">godot_gdnative_init!</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">godot_nativescript_init!</span><span class="token punctuation">(</span>init<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">godot_gdnative_terminate!</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p>This will let us create as many scripts as we want for the project and we can easily register as them as you'll see next. Now we're going to create a script called Player that will print "hello, world." to the console. To do this, add a new file under <code>src/</code> and name it <code>player.rs</code>. In the newly created <code>player.rs</code> file, add the following:</p>
<pre class="language-rust"><code class="language-rust"><span class="token attribute attr-name">#[derive(gdnative::NativeClass)]</span>
<span class="token attribute attr-name">#[inherit(gdnative::Node)]</span>
<span class="token keyword">pub</span> <span class="token keyword">struct</span> Player<span class="token punctuation">;</span>

<span class="token attribute attr-name">#[gdnative::methods]</span>
<span class="token keyword">impl</span> Player <span class="token punctuation">{</span>
	<span class="token keyword">fn</span> <span class="token function">_init</span><span class="token punctuation">(</span>_owner<span class="token punctuation">:</span> gdnative<span class="token punctuation">::</span>Node<span class="token punctuation">)</span> <span class="token punctuation">-></span> <span class="token keyword">Self</span> <span class="token punctuation">{</span>
		Player
	<span class="token punctuation">}</span>

	<span class="token attribute attr-name">#[export]</span>
	<span class="token keyword">fn</span> <span class="token function">_ready</span><span class="token punctuation">(</span><span class="token operator">&amp;</span><span class="token keyword">self</span><span class="token punctuation">,</span> _owner<span class="token punctuation">:</span> gdnative<span class="token punctuation">::</span>Node<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token function">godot_print!</span><span class="token punctuation">(</span><span class="token string">"hello, world."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre>
<p>Let's break this down a bit. Everything in this script except the <code>_ready</code> function is required in order for Godot to be able to use this script. The only thing we do in <code>_ready</code> is print the "hello, world." line. This article isn't going to be an in-depth guide on gdnative but great documentation can be found <a href="https://docs.rs/gdnative/0.8.0/gdnative/index.html" target="_blank" rel="nofollow noopener noreferrer">here</a>.</p>
<p>Now that we have our Player set up, we need to go back to the <code>src/lib.rs</code> file and register it with Godot.</p>
<pre class="language-rust"><code class="language-rust"><span class="token attribute attr-name">#[macro_use]</span>
<span class="token keyword">extern</span> <span class="token keyword">crate</span> gdnative<span class="token punctuation">;</span>

<span class="token comment">// Pulls in the module file.</span>
<span class="token keyword">mod</span> player<span class="token punctuation">;</span>

<span class="token keyword">fn</span> <span class="token function">init</span><span class="token punctuation">(</span>handle<span class="token punctuation">:</span> gdnative<span class="token punctuation">::</span>init<span class="token punctuation">::</span>InitHandle<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// Registers it with Godot.</span>
  handle<span class="token punctuation">.</span>add_class<span class="token punctuation">::</span><span class="token operator">&lt;</span>player<span class="token punctuation">::</span>Player<span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token function">godot_gdnative_init!</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">godot_nativescript_init!</span><span class="token punctuation">(</span>init<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">godot_gdnative_terminate!</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p>Any other scripts you create will follow the same procedure, you add the <code>mod script_name</code> line and then you register it with <code>handle.add_class::&#x3C;script_name::struct_name>();</code>. Before we move on make sure you run <code>cargo build</code> so that the dynamic library files get build and you can copy them into the Godot project for the next step.</p>
<h3 id="create-the-resource-file"><a href="#create-the-resource-file" aria-hidden="true"><span class="icon icon-link"></span></a>Create the Resource File</h3>
<p>Now that we have our script set up, we need to create a resource file for our it. Each script you want to make will need its own resource file.</p>
<p>Here is an example Player.gdns file:</p>
<pre class="language-text"><code class="language-text">[gd_resource type=&quot;NativeScript&quot; load_steps=2 format=2]

[ext_resource path=&quot;res://platformer.gdnlib&quot; type=&quot;GDNativeLibrary&quot; id=1]

[resource]

resource_name = &quot;Player&quot;
class_name = &quot;Player&quot;
library = ExtResource( 1 )</code></pre>
<p>The three things that need to be changed in this example file are the <code>ext_resource_path</code>, <code>resource_name</code>, and <code>class_name</code>. The <code>ext_resource_path</code> needs to point to location of the gdnlib file we created in the step before. The name can be your class name either lowercase or capital but the most important part is the <code>class_name</code> which has to match the struct name in Rust.</p>
<p><strong>Note:</strong> With this method everytime you change your scripts and run another build you will have to copy the dynamic libraries over the previous ones so that Godot can pick up on the changes.</p>
<h3 id="set-the-build-targets"><a href="#set-the-build-targets" aria-hidden="true"><span class="icon icon-link"></span></a>Set the Build Targets</h3>
<p>This next part will depend on what platforms you plan on building for but for simplicity sake we'll just say windows. For this part we will need to create a gdnlib file that will let Godot know what dynamic libraries should be loaded for each platform.</p>
<p>Here is an example platformer.gdnlib file:</p>
<pre class="language-text"><code class="language-text">[general]

singleton=false
load_once=true
symbol_prefix=&quot;godot_&quot;
reloadable=false

[entry]

Linux.64=&quot;res://libgdexample.so&quot;
Windows.64=&quot;res://libgdexample.dll&quot;
OSX.64=&quot;res://libgdexample.dylib&quot;

[dependencies]

Linux.64=[]
Windows.64=[]
OSX.64=[]</code></pre>
<p>Now let's break it down. The items under the general section control how the module is loaded and we have no need to change any of these. The entry section tells Godot the location of the dynamic library in the project's filesystem. So basically wherever we decide to place out build files, we need the paths to them to match here in the gdnlib file. For this example we're just assuming the files you built in the last step were placed in the root of the game's directory.</p>
<p>The dependencies section allows you to name additional dynamic libraries that should be included as well. This is useful if you need a third-party dynamic library to be used with your project but that's outside the scope of this tutorial.</p>
<h2 id="using-godot_rust_helper"><a href="#using-godot_rust_helper" aria-hidden="true"><span class="icon icon-link"></span></a>Using godot_rust_helper</h2>
<p>All of the steps above were for the previous method which can take up a lot of time especially if you have incremental changes. This long setup and the constant need to keep copying over the new dynamic libraries let me to create <a href="https://github.com/robertcorponoi/godot_rust_helper" target="_blank" rel="nofollow noopener noreferrer">godot_rust_helper</a>. We're going to go through the same project setup as above but this time using the godot_rust_helper CLI.</p>
<p>First things first, you have to install godot_rust_helper using <code>cargo install godot_rust_helper</code>.</p>
<h3 id="create-the-project"><a href="#create-the-project" aria-hidden="true"><span class="icon icon-link"></span></a>Create the Project</h3>
<p>To create a new project you have to specify the directory you would like it to reside in and the path to the Godot project that you are creating scripts for, just like in the previous section. We're going to assume the same directory structure as above and use:</p>
<pre class="language-bash"><code class="language-bash">$ godot_rust_helper new ~/Documents/Projects/platformer ~/Documents/Games/platformer</code></pre>
<p>This will run <code>cargo new</code> and create the project while also automatically creating the gdnlib file in the Godot project. The <code>new</code> command also comes with several options to customize your usage:</p>
<ul>
<li><code>--targets</code> Native components in Godot can target multiple platforms and godot_rust_helper needs to know ahead of time what platforms you plan to target your components for with the available options currently being: windows, linux, and osx. For example if you are targeting Windows and OSX, you need to have have cargo set to build a dll and a dylib file and you would pass <code>--targets=windows,osx</code> as the targets. By default if no targets are passed then just <code>--targets=windows</code> will be set.</li>
<li><code>--output-path</code> godot_rust_helper has to place a gdnlib file and the build files in the game's directory. By default these files are placed at the root of the game directory but you can specify a directory in the game (existing or not) where these files go instead using this option.</li>
<li><code>--nativescript-path</code> The path in the Godot project where all of the resource files will be output. By default the resource files are placed at the root of the Godot project.</li>
</ul>
<p>So if you wanted the gdnlib and dynamic libraries to be placed in a directory called <code>gdr-output</code> and you wanted the resource files to be placed in <code>gdr-scripts</code> you would do:</p>
<pre class="language-bash"><code class="language-bash">$ godot_rust_helper new ~/Documents/Projects/platformer ~/Documents/Games/platformer --output-path ~/Documents/Games/platformer/gdr-output --nativescript-path ~/Documents/Games/platformer/gdr-scripts</code></pre>
<h3 id="create-the-scripts-1"><a href="#create-the-scripts-1" aria-hidden="true"><span class="icon icon-link"></span></a>Create the Scripts</h3>
<p>Creating a new script with godot_rust_helper is as simple as:</p>
<pre class="language-bash"><code class="language-bash">$ godot_rust_helper create Player</code></pre>
<p>This creates the <code>player.rs</code> script and adds the entry for it in the <code>lib.rs</code> file. This even sets up the <code>player.rs</code> script with the basic "hello, world." example we showed above to get you started.</p>
<p>From here you can build the project by using:</p>
<pre class="language-bash"><code class="language-bash">$ godot_rust_helper build</code></pre>
<p>or you can run a build that watches for changes with:</p>
<pre class="language-bash"><code class="language-bash">$ godot_rust_helper build --watch</code></pre>
<p>The great thing about building this way is that it automatically moves the dynamic library files to the Godot project so you can run the build then go right back in Godot and press play to see the changes.</p>
<p>There are also a few other commands offered by godot_rust_helper so make sure to check out the full documentation including a detailed step-by-step guide on the GitHub <a href="https://github.com/robertcorponoi/godot_rust_helper" target="_blank" rel="nofollow noopener noreferrer">repo</a>.</p>
</div><div class="post__footer"><div class="post-tags"><a href="/tag/godot/" class="post-tags__link">godot</a><a href="/tag/rust/" class="post-tags__link">rust</a><a href="/tag/game-development/" class="post-tags__link">game-development</a></div></div><div class="author post__author"><img alt="Author image" src="data:image/svg+xml,%3csvg fill='none' viewBox='0 0 328 328' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-01a977fbf7b567b5530e68a6b3d8c4c9'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='40'/%3e%3c/filter%3e%3c/defs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-01a977fbf7b567b5530e68a6b3d8c4c9)' width='328' height='328' xlink:href='data:image/jpeg%3bbase64%2c/9j/2wBDAAYEBQYFBAYGBQYHBwYIChAKCgkJChQODwwQFxQYGBcUFhYaHSUfGhsjHBYWICwgIyYnKSopGR8tMC0oMCUoKSj/2wBDAQcHBwoIChMKChMoGhYaKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCj/wAARCABAAEADASIAAhEBAxEB/8QAGwAAAwADAQEAAAAAAAAAAAAABQYHAwQIAgH/xAAzEAACAQMDAQUGBgIDAAAAAAABAgMEBREAEiEGBxMxQVEiMmFxgaEUFSRCkbEWF1Jy0f/EABoBAAIDAQEAAAAAAAAAAAAAAAMFAQIEBgD/xAAjEQACAQUAAQQDAAAAAAAAAAABAgADBBESITEFIkFRMmFx/9oADAMBAAIRAxEAPwA9cIAwPGkLqy4wWOneokY7z7KRr4s3lqkVmApLHAAySfIahN6qpes%2bpJoYsiipmCRJ5nnBPzP9aXW9Mu36mhjiA67rO8zNuScQIPAIcZ%2bemHpbq%2btqahY5XeoIGe728sPnonRdlhkG%2bsnjiQ%2bCp7TaYKXpOisqI1NE25f3n3mPx0wqUBryQjHPYWslTBdDLHEWSeE4kiYjcujUdrJ8zpY63qloLnZurLbFtq639BXQpwjSqAVfHhkrx9M6odslFVRQTlAhkQMVznaSPDOsTe2XIggWfIzgn66%2b/k4/4N99TvtJ6sq7J1PW08QWSAKhy7SewSPABWA%2bOkqp60rZYnkUR4Xg4aUf2%2bpFJmGRIyo4TL5dwWoqhVbYTG2G9OPHUH7LKpafqqoQ4aGYNyT4YOc6vFzy9NMqDLFCACcZONR609IzWW6w1k7hpEqoldR7ojc4LfycfXRbAjYgylT7lETqBJJAtJRPON20SMwRP5Pj8hohf5Vp7GZ49kcznbge0E9Do7VdK22odKqopBM6Y7pS3Ef/AFHloddKFmJpFh3gKGZR5D0z8tOGQBeQaZY9kshsV0vUdXDEa4yzAsnfSAIxXlSFxx8PMaovZkaxelojcEZJjI5w3z5%2b%2bdeaKj7iXEcxPdngZ5A8s%2bh0fpNkMAWMYUkt9SST9zpTeAcI%2bYdeDEjHaDVU3%2bb3iOaquMbxkSNHSsANoRcHnz50p1kVJWIqw1dwnxLt2zcgEcnPPpon2gSP/sLqRkJw0XdHHkCE51p9Po0aTtK6lu9iYKPINlSdeRQqbSrElsS91UmAdJd8v9NbL7RiaLv8KWli2g95EeCpz6n%2btNNZIApycD11z/1Tfqi5XiWo2LGvMUPHOzdwT8dZLVHd9k%2bJZio/KdQ9A9TUd7twMZIaMlCjkFlHln6Y51iu0tZLVyzQRmGFSRvbgEaivYhRXK49UyRvLURU5gbMyN7j/tOPPJBH86rs0vUtCssFVQyVOw47yFS6sP7Guip76jbzMpYA88QAtL%2bGnasErGLJbhs7vXR%2bjlP4aPd4lQT9dA6ikrrjUhpaeSlpoxl93sk/ADStYr/eLVevynqfawbmKryArA%2b6c8DHl8Dpbf0mbGIZGBgnqCwS3bqW/VERQFqsR5J5wEXI%2bXhpPq6Wqs9z7tvGRlRiQTuUEeH8afhfaCmvd4inq4o5Gq2cBmxkbV5z4aEdUV9BXT0MUNRFLL36g7GyQDpalWopII5DMAY09QdU0EcM0MDtNKyMgKDgEgjOTqW9ygKDaGZRjJ50VenwSx5J15WAA5xjnOuys/TKdoCF7n7iSrdmp5lI7DrlR0N0mo6oiMzsGSQ%2bo8vvroOWJChYcEj3h56473tBKslOdrgg8HH1HodPll7VrxQUqU8%2bJ1TgF%2bDola3bbZZFOsCMGV%2b5W8AMijCP5nUI7WJ4vzGno4WDPAmXIPgSeB9tGr72t3a50ppqeCGDjHeDlv8AzU3qQ1RI8tQ5aRiSSTkk6qlsSdmGJdq4AwDNaUQA/qIllBHssfeH11kpKSmlnikgYq0bh9pPjjWvOAxIGePDOsSIy8gkHOdAufTUrA/B%2b4Wjdmn/ACf/2Q==' /%3e%3c/svg%3e" width="328" data-src="/assets/static/author.de4034a.47c56ffa8bb5f81a48029e779b4a2893.jpg" data-srcset="/assets/static/author.de4034a.47c56ffa8bb5f81a48029e779b4a2893.jpg 328w" data-sizes="(max-width: 328px) 100vw, 328px" class="author__image g-image g-image--lazy g-image--loading"><noscript><img src="/assets/static/author.de4034a.47c56ffa8bb5f81a48029e779b4a2893.jpg" class="author__image g-image g-image--loaded" width="328" alt="Author image"></noscript><div class="author__bio"><p class="author__name">Robert Corponoi</p><p class="author__intro">Self proclaimed JavaScript wizard</p></div><a href="https://twitter.com/robertcorponoi" target="_blank" rel="noreferrer" class="btn btn--secondary">Follow</a></div></div></main><footer class="footer"><div class="container"><ul class="soc"><li><a href="https://twitter.com/robertcorponoi" target="_blank" rel="noreferrer" title="Twitter" class="soc__icon soc__icon--twitter"><div class="soc__ir"><svg viewBox="0 0 512 512" preserveAspectRatio="xMidYMid meet"><path d="M419.6 168.6c-11.7 5.2-24.2 8.7-37.4 10.2 13.4-8.1 23.8-20.8 28.6-36 -12.6 7.5-26.5 12.9-41.3 15.8 -11.9-12.6-28.8-20.6-47.5-20.6 -42 0-72.9 39.2-63.4 79.9 -54.1-2.7-102.1-28.6-134.2-68 -17 29.2-8.8 67.5 20.1 86.9 -10.7-0.3-20.7-3.3-29.5-8.1 -0.7 30.2 20.9 58.4 52.2 64.6 -9.2 2.5-19.2 3.1-29.4 1.1 8.3 25.9 32.3 44.7 60.8 45.2 -27.4 21.4-61.8 31-96.4 27 28.8 18.5 63 29.2 99.8 29.2 120.8 0 189.1-102.1 185-193.6C399.9 193.1 410.9 181.7 419.6 168.6z"></path></svg></div></a></li><li><a href="https://github.com/robertcorponoi" target="_blank" rel="noreferrer" title="GitHub" class="soc__icon soc__icon--github"><div class="soc__ir"><svg viewBox="0 0 512 512" preserveAspectRatio="xMidYMid meet"><path d="M256 70.7c-102.6 0-185.9 83.2-185.9 185.9 0 82.1 53.3 151.8 127.1 176.4 9.3 1.7 12.3-4 12.3-8.9V389.4c-51.7 11.3-62.5-21.9-62.5-21.9 -8.4-21.5-20.6-27.2-20.6-27.2 -16.9-11.5 1.3-11.3 1.3-11.3 18.7 1.3 28.5 19.2 28.5 19.2 16.6 28.4 43.5 20.2 54.1 15.4 1.7-12 6.5-20.2 11.8-24.9 -41.3-4.7-84.7-20.6-84.7-91.9 0-20.3 7.3-36.9 19.2-49.9 -1.9-4.7-8.3-23.6 1.8-49.2 0 0 15.6-5 51.1 19.1 14.8-4.1 30.7-6.2 46.5-6.3 15.8 0.1 31.7 2.1 46.6 6.3 35.5-24 51.1-19.1 51.1-19.1 10.1 25.6 3.8 44.5 1.8 49.2 11.9 13 19.1 29.6 19.1 49.9 0 71.4-43.5 87.1-84.9 91.7 6.7 5.8 12.8 17.1 12.8 34.4 0 24.9 0 44.9 0 51 0 4.9 3 10.7 12.4 8.9 73.8-24.6 127-94.3 127-176.4C441.9 153.9 358.6 70.7 256 70.7z"></path></svg></div></a></li><li><a href="https://www.linkedin.com/in/robert-corponoi-1353a1112/" target="_blank" rel="noreferrer" title="LinkedIn" class="soc__icon soc__icon--linkedin"><div class="soc__ir"><svg viewBox="0 0 512 512" preserveAspectRatio="xMidYMid meet"><path d="M186.4 142.4c0 19-15.3 34.5-34.2 34.5 -18.9 0-34.2-15.4-34.2-34.5 0-19 15.3-34.5 34.2-34.5C171.1 107.9 186.4 123.4 186.4 142.4zM181.4 201.3h-57.8V388.1h57.8V201.3zM273.8 201.3h-55.4V388.1h55.4c0 0 0-69.3 0-98 0-26.3 12.1-41.9 35.2-41.9 21.3 0 31.5 15 31.5 41.9 0 26.9 0 98 0 98h57.5c0 0 0-68.2 0-118.3 0-50-28.3-74.2-68-74.2 -39.6 0-56.3 30.9-56.3 30.9v-25.2H273.8z"></path></svg></div></a></li></ul><span class="footer__copyright">Copyright © 2021 Robert Corponoi</span><a href="https://opensource.org/licenses/MIT" target="_blank" rel="noreferrer" class="footer__license">All Code MIT Licensed</a></div></footer></div>
  <script>window.__INITIAL_STATE__={"data":{"post":{"title":"Using Rust With Godot - Introducing Godot Rust Helper","path":"\u002Fusing-rust-with-godot-introducing-godot-rust-helper\u002F","date":"12. May 2020","timeToRead":7,"tags":[{"id":"godot","title":"godot","path":"\u002Ftag\u002Fgodot\u002F"},{"id":"rust","title":"rust","path":"\u002Ftag\u002Frust\u002F"},{"id":"game-development","title":"game-development","path":"\u002Ftag\u002Fgame-development\u002F"}],"description":"Using Rust with Godot is easier than you think, especially with the help of Godot Rust Helper","content":"\u003Ch2 id=\"welcome\"\u003E\u003Ca href=\"#welcome\" aria-hidden=\"true\"\u003E\u003Cspan class=\"icon icon-link\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003EWelcome\u003C\u002Fh2\u003E\n\u003Cp\u003Eto the first step of mastering Rust in Godot. Using Rust in Godot is great for performance critical code and can either be used on its own or to supplement existing gdscript. We're going to go over the process of setting it up manually and then how to do the same thing using \u003Ca href=\"https:\u002F\u002Fgithub.com\u002Frobertcorponoi\u002Fgodot_rust_helper\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003Egodot_rust_helper\u003C\u002Fa\u003E.\u003C\u002Fp\u003E\n\u003Ch2 id=\"manual-setup\"\u003E\u003Ca href=\"#manual-setup\" aria-hidden=\"true\"\u003E\u003Cspan class=\"icon icon-link\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003EManual Setup\u003C\u002Fh2\u003E\n\u003Cp\u003EDuring this section we'll go through the manual process of setting up a Rust development environment for your Godot project. If you would like to skip to the godot_rust_helper section, click \u003Ca href=\"#using-godot_rust_helper\"\u003Ehere\u003C\u002Fa\u003E.\u003C\u002Fp\u003E\n\u003Ch3 id=\"creating-the-project\"\u003E\u003Ca href=\"#creating-the-project\" aria-hidden=\"true\"\u003E\u003Cspan class=\"icon icon-link\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003ECreating the Project\u003C\u002Fh3\u003E\n\u003Cp\u003EThe first step is to use cargo to create a new package. This should be done outside of your Game's directory as there can be performance issues if you do it in the same directory. I like to create mine in a different directory and use the exact same name as the game.\u003C\u002Fp\u003E\n\u003Cp\u003ESo let's say your game is at \u003Ccode\u003E~\u002FDocuments\u002FGames\u002Fplatformer\u003C\u002Fcode\u003E. I would create another directory in \u003Ccode\u003EDocuments\u003C\u002Fcode\u003E to hold the library. In my case I have a \u003Ccode\u003EProjects\u003C\u002Fcode\u003E directory so I go in there and run \u003Ccode\u003Ecargo new platformer --lib\u003C\u002Fcode\u003E.\u003C\u002Fp\u003E\n\u003Cp\u003EThis leaves me with the following directory structure:\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Ccode\u003E~\u002FDocuments\u002FGames\u002Fplatformer\u003C\u002Fcode\u003E\n\u003Ccode\u003E~\u002FDocuments\u002FProjects\u002Fplatformer\u003C\u002Fcode\u003E\u003C\u002Fp\u003E\n\u003Cp\u003ENow open up the newly created project in your favorite text editor and open up the \u003Ccode\u003ECargo.toml\u003C\u002Fcode\u003E file created by cargo. You will need to add a couple lines including the gdnative dependency that is necessary to use the gdnative modules. Below is a sample Cargo.toml file that contains the necessary components needed:\u003C\u002Fp\u003E\n\u003Cpre class=\"language-toml\"\u003E\u003Ccode class=\"language-toml\"\u003E\u003Cspan class=\"token punctuation\"\u003E[\u003C\u002Fspan\u003E\u003Cspan class=\"token table class-name\"\u003Epackage\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E]\u003C\u002Fspan\u003E\n\u003Cspan class=\"token key property\"\u003Ename\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"token string\"\u003E\"platformer\"\u003C\u002Fspan\u003E\n\u003Cspan class=\"token key property\"\u003Eversion\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"token string\"\u003E\"0.1.0\"\u003C\u002Fspan\u003E\n\u003Cspan class=\"token key property\"\u003Eauthors\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E[\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E\"Bob &lt;robertcorponoi@gmail.com\u003E\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E]\u003C\u002Fspan\u003E\n\u003Cspan class=\"token key property\"\u003Eedition\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"token string\"\u003E\"2018\"\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"token punctuation\"\u003E[\u003C\u002Fspan\u003E\u003Cspan class=\"token table class-name\"\u003Elib\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E]\u003C\u002Fspan\u003E\n\u003Cspan class=\"token key property\"\u003Ecrate-type\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E[\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E\"cdylib\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E]\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"token punctuation\"\u003E[\u003C\u002Fspan\u003E\u003Cspan class=\"token table class-name\"\u003Edependencies\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E]\u003C\u002Fspan\u003E\n\u003Cspan class=\"token key property\"\u003Egdnative\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003E \u003Cspan class=\"token key property\"\u003Egit\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"token string\"\u003E\"https:\u002F\u002Fgithub.com\u002FGodotNativeTools\u002Fgodot-rust\"\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003ELook closely at the parts under the package section, they are what are needed to create a basic working project.\u003C\u002Fp\u003E\n\u003Ch3 id=\"create-the-scripts\"\u003E\u003Ca href=\"#create-the-scripts\" aria-hidden=\"true\"\u003E\u003Cspan class=\"icon icon-link\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003ECreate the Scripts\u003C\u002Fh3\u003E\n\u003Cp\u003EBefore we can create our first script we have to set up the basics that let's Godot know how to handle our script. In your \u003Ccode\u003Esrc\u002Flib.rs\u003C\u002Fcode\u003E file place the following boilerplate code:\u003C\u002Fp\u003E\n\u003Cpre class=\"language-rust\"\u003E\u003Ccode class=\"language-rust\"\u003E\u003Cspan class=\"token attribute attr-name\"\u003E#[macro_use]\u003C\u002Fspan\u003E\n\u003Cspan class=\"token keyword\"\u003Eextern\u003C\u002Fspan\u003E \u003Cspan class=\"token keyword\"\u003Ecrate\u003C\u002Fspan\u003E gdnative\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"token keyword\"\u003Efn\u003C\u002Fspan\u003E \u003Cspan class=\"token function\"\u003Einit\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Ehandle\u003Cspan class=\"token punctuation\"\u003E:\u003C\u002Fspan\u003E gdnative\u003Cspan class=\"token punctuation\"\u003E::\u003C\u002Fspan\u003Einit\u003Cspan class=\"token punctuation\"\u003E::\u003C\u002Fspan\u003EInitHandle\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"token function\"\u003Egodot_gdnative_init!\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"token function\"\u003Egodot_nativescript_init!\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Einit\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"token function\"\u003Egodot_gdnative_terminate!\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003EThis will let us create as many scripts as we want for the project and we can easily register as them as you'll see next. Now we're going to create a script called Player that will print \"hello, world.\" to the console. To do this, add a new file under \u003Ccode\u003Esrc\u002F\u003C\u002Fcode\u003E and name it \u003Ccode\u003Eplayer.rs\u003C\u002Fcode\u003E. In the newly created \u003Ccode\u003Eplayer.rs\u003C\u002Fcode\u003E file, add the following:\u003C\u002Fp\u003E\n\u003Cpre class=\"language-rust\"\u003E\u003Ccode class=\"language-rust\"\u003E\u003Cspan class=\"token attribute attr-name\"\u003E#[derive(gdnative::NativeClass)]\u003C\u002Fspan\u003E\n\u003Cspan class=\"token attribute attr-name\"\u003E#[inherit(gdnative::Node)]\u003C\u002Fspan\u003E\n\u003Cspan class=\"token keyword\"\u003Epub\u003C\u002Fspan\u003E \u003Cspan class=\"token keyword\"\u003Estruct\u003C\u002Fspan\u003E Player\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"token attribute attr-name\"\u003E#[gdnative::methods]\u003C\u002Fspan\u003E\n\u003Cspan class=\"token keyword\"\u003Eimpl\u003C\u002Fspan\u003E Player \u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003E\n\t\u003Cspan class=\"token keyword\"\u003Efn\u003C\u002Fspan\u003E \u003Cspan class=\"token function\"\u003E_init\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E_owner\u003Cspan class=\"token punctuation\"\u003E:\u003C\u002Fspan\u003E gdnative\u003Cspan class=\"token punctuation\"\u003E::\u003C\u002Fspan\u003ENode\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E-\u003E\u003C\u002Fspan\u003E \u003Cspan class=\"token keyword\"\u003ESelf\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003E\n\t\tPlayer\n\t\u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E\n\n\t\u003Cspan class=\"token attribute attr-name\"\u003E#[export]\u003C\u002Fspan\u003E\n\t\u003Cspan class=\"token keyword\"\u003Efn\u003C\u002Fspan\u003E \u003Cspan class=\"token function\"\u003E_ready\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E&amp;\u003C\u002Fspan\u003E\u003Cspan class=\"token keyword\"\u003Eself\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E _owner\u003Cspan class=\"token punctuation\"\u003E:\u003C\u002Fspan\u003E gdnative\u003Cspan class=\"token punctuation\"\u003E::\u003C\u002Fspan\u003ENode\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003E\n\t\t\u003Cspan class=\"token function\"\u003Egodot_print!\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E\"hello, world.\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\t\u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003ELet's break this down a bit. Everything in this script except the \u003Ccode\u003E_ready\u003C\u002Fcode\u003E function is required in order for Godot to be able to use this script. The only thing we do in \u003Ccode\u003E_ready\u003C\u002Fcode\u003E is print the \"hello, world.\" line. This article isn't going to be an in-depth guide on gdnative but great documentation can be found \u003Ca href=\"https:\u002F\u002Fdocs.rs\u002Fgdnative\u002F0.8.0\u002Fgdnative\u002Findex.html\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003Ehere\u003C\u002Fa\u003E.\u003C\u002Fp\u003E\n\u003Cp\u003ENow that we have our Player set up, we need to go back to the \u003Ccode\u003Esrc\u002Flib.rs\u003C\u002Fcode\u003E file and register it with Godot.\u003C\u002Fp\u003E\n\u003Cpre class=\"language-rust\"\u003E\u003Ccode class=\"language-rust\"\u003E\u003Cspan class=\"token attribute attr-name\"\u003E#[macro_use]\u003C\u002Fspan\u003E\n\u003Cspan class=\"token keyword\"\u003Eextern\u003C\u002Fspan\u003E \u003Cspan class=\"token keyword\"\u003Ecrate\u003C\u002Fspan\u003E gdnative\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"token comment\"\u003E\u002F\u002F Pulls in the module file.\u003C\u002Fspan\u003E\n\u003Cspan class=\"token keyword\"\u003Emod\u003C\u002Fspan\u003E player\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"token keyword\"\u003Efn\u003C\u002Fspan\u003E \u003Cspan class=\"token function\"\u003Einit\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Ehandle\u003Cspan class=\"token punctuation\"\u003E:\u003C\u002Fspan\u003E gdnative\u003Cspan class=\"token punctuation\"\u003E::\u003C\u002Fspan\u003Einit\u003Cspan class=\"token punctuation\"\u003E::\u003C\u002Fspan\u003EInitHandle\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token comment\"\u003E\u002F\u002F Registers it with Godot.\u003C\u002Fspan\u003E\n  handle\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003Eadd_class\u003Cspan class=\"token punctuation\"\u003E::\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E&lt;\u003C\u002Fspan\u003Eplayer\u003Cspan class=\"token punctuation\"\u003E::\u003C\u002Fspan\u003EPlayer\u003Cspan class=\"token operator\"\u003E\u003E\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"token function\"\u003Egodot_gdnative_init!\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"token function\"\u003Egodot_nativescript_init!\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Einit\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"token function\"\u003Egodot_gdnative_terminate!\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003EAny other scripts you create will follow the same procedure, you add the \u003Ccode\u003Emod script_name\u003C\u002Fcode\u003E line and then you register it with \u003Ccode\u003Ehandle.add_class::&#x3C;script_name::struct_name\u003E();\u003C\u002Fcode\u003E. Before we move on make sure you run \u003Ccode\u003Ecargo build\u003C\u002Fcode\u003E so that the dynamic library files get build and you can copy them into the Godot project for the next step.\u003C\u002Fp\u003E\n\u003Ch3 id=\"create-the-resource-file\"\u003E\u003Ca href=\"#create-the-resource-file\" aria-hidden=\"true\"\u003E\u003Cspan class=\"icon icon-link\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003ECreate the Resource File\u003C\u002Fh3\u003E\n\u003Cp\u003ENow that we have our script set up, we need to create a resource file for our it. Each script you want to make will need its own resource file.\u003C\u002Fp\u003E\n\u003Cp\u003EHere is an example Player.gdns file:\u003C\u002Fp\u003E\n\u003Cpre class=\"language-text\"\u003E\u003Ccode class=\"language-text\"\u003E[gd_resource type=&quot;NativeScript&quot; load_steps=2 format=2]\n\n[ext_resource path=&quot;res:\u002F\u002Fplatformer.gdnlib&quot; type=&quot;GDNativeLibrary&quot; id=1]\n\n[resource]\n\nresource_name = &quot;Player&quot;\nclass_name = &quot;Player&quot;\nlibrary = ExtResource( 1 )\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003EThe three things that need to be changed in this example file are the \u003Ccode\u003Eext_resource_path\u003C\u002Fcode\u003E, \u003Ccode\u003Eresource_name\u003C\u002Fcode\u003E, and \u003Ccode\u003Eclass_name\u003C\u002Fcode\u003E. The \u003Ccode\u003Eext_resource_path\u003C\u002Fcode\u003E needs to point to location of the gdnlib file we created in the step before. The name can be your class name either lowercase or capital but the most important part is the \u003Ccode\u003Eclass_name\u003C\u002Fcode\u003E which has to match the struct name in Rust.\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Cstrong\u003ENote:\u003C\u002Fstrong\u003E With this method everytime you change your scripts and run another build you will have to copy the dynamic libraries over the previous ones so that Godot can pick up on the changes.\u003C\u002Fp\u003E\n\u003Ch3 id=\"set-the-build-targets\"\u003E\u003Ca href=\"#set-the-build-targets\" aria-hidden=\"true\"\u003E\u003Cspan class=\"icon icon-link\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003ESet the Build Targets\u003C\u002Fh3\u003E\n\u003Cp\u003EThis next part will depend on what platforms you plan on building for but for simplicity sake we'll just say windows. For this part we will need to create a gdnlib file that will let Godot know what dynamic libraries should be loaded for each platform.\u003C\u002Fp\u003E\n\u003Cp\u003EHere is an example platformer.gdnlib file:\u003C\u002Fp\u003E\n\u003Cpre class=\"language-text\"\u003E\u003Ccode class=\"language-text\"\u003E[general]\n\nsingleton=false\nload_once=true\nsymbol_prefix=&quot;godot_&quot;\nreloadable=false\n\n[entry]\n\nLinux.64=&quot;res:\u002F\u002Flibgdexample.so&quot;\nWindows.64=&quot;res:\u002F\u002Flibgdexample.dll&quot;\nOSX.64=&quot;res:\u002F\u002Flibgdexample.dylib&quot;\n\n[dependencies]\n\nLinux.64=[]\nWindows.64=[]\nOSX.64=[]\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003ENow let's break it down. The items under the general section control how the module is loaded and we have no need to change any of these. The entry section tells Godot the location of the dynamic library in the project's filesystem. So basically wherever we decide to place out build files, we need the paths to them to match here in the gdnlib file. For this example we're just assuming the files you built in the last step were placed in the root of the game's directory.\u003C\u002Fp\u003E\n\u003Cp\u003EThe dependencies section allows you to name additional dynamic libraries that should be included as well. This is useful if you need a third-party dynamic library to be used with your project but that's outside the scope of this tutorial.\u003C\u002Fp\u003E\n\u003Ch2 id=\"using-godot_rust_helper\"\u003E\u003Ca href=\"#using-godot_rust_helper\" aria-hidden=\"true\"\u003E\u003Cspan class=\"icon icon-link\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003EUsing godot_rust_helper\u003C\u002Fh2\u003E\n\u003Cp\u003EAll of the steps above were for the previous method which can take up a lot of time especially if you have incremental changes. This long setup and the constant need to keep copying over the new dynamic libraries let me to create \u003Ca href=\"https:\u002F\u002Fgithub.com\u002Frobertcorponoi\u002Fgodot_rust_helper\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003Egodot_rust_helper\u003C\u002Fa\u003E. We're going to go through the same project setup as above but this time using the godot_rust_helper CLI.\u003C\u002Fp\u003E\n\u003Cp\u003EFirst things first, you have to install godot_rust_helper using \u003Ccode\u003Ecargo install godot_rust_helper\u003C\u002Fcode\u003E.\u003C\u002Fp\u003E\n\u003Ch3 id=\"create-the-project\"\u003E\u003Ca href=\"#create-the-project\" aria-hidden=\"true\"\u003E\u003Cspan class=\"icon icon-link\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003ECreate the Project\u003C\u002Fh3\u003E\n\u003Cp\u003ETo create a new project you have to specify the directory you would like it to reside in and the path to the Godot project that you are creating scripts for, just like in the previous section. We're going to assume the same directory structure as above and use:\u003C\u002Fp\u003E\n\u003Cpre class=\"language-bash\"\u003E\u003Ccode class=\"language-bash\"\u003E$ godot_rust_helper new ~\u002FDocuments\u002FProjects\u002Fplatformer ~\u002FDocuments\u002FGames\u002Fplatformer\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003EThis will run \u003Ccode\u003Ecargo new\u003C\u002Fcode\u003E and create the project while also automatically creating the gdnlib file in the Godot project. The \u003Ccode\u003Enew\u003C\u002Fcode\u003E command also comes with several options to customize your usage:\u003C\u002Fp\u003E\n\u003Cul\u003E\n\u003Cli\u003E\u003Ccode\u003E--targets\u003C\u002Fcode\u003E Native components in Godot can target multiple platforms and godot_rust_helper needs to know ahead of time what platforms you plan to target your components for with the available options currently being: windows, linux, and osx. For example if you are targeting Windows and OSX, you need to have have cargo set to build a dll and a dylib file and you would pass \u003Ccode\u003E--targets=windows,osx\u003C\u002Fcode\u003E as the targets. By default if no targets are passed then just \u003Ccode\u003E--targets=windows\u003C\u002Fcode\u003E will be set.\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ccode\u003E--output-path\u003C\u002Fcode\u003E godot_rust_helper has to place a gdnlib file and the build files in the game's directory. By default these files are placed at the root of the game directory but you can specify a directory in the game (existing or not) where these files go instead using this option.\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ccode\u003E--nativescript-path\u003C\u002Fcode\u003E The path in the Godot project where all of the resource files will be output. By default the resource files are placed at the root of the Godot project.\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003Cp\u003ESo if you wanted the gdnlib and dynamic libraries to be placed in a directory called \u003Ccode\u003Egdr-output\u003C\u002Fcode\u003E and you wanted the resource files to be placed in \u003Ccode\u003Egdr-scripts\u003C\u002Fcode\u003E you would do:\u003C\u002Fp\u003E\n\u003Cpre class=\"language-bash\"\u003E\u003Ccode class=\"language-bash\"\u003E$ godot_rust_helper new ~\u002FDocuments\u002FProjects\u002Fplatformer ~\u002FDocuments\u002FGames\u002Fplatformer --output-path ~\u002FDocuments\u002FGames\u002Fplatformer\u002Fgdr-output --nativescript-path ~\u002FDocuments\u002FGames\u002Fplatformer\u002Fgdr-scripts\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Ch3 id=\"create-the-scripts-1\"\u003E\u003Ca href=\"#create-the-scripts-1\" aria-hidden=\"true\"\u003E\u003Cspan class=\"icon icon-link\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003ECreate the Scripts\u003C\u002Fh3\u003E\n\u003Cp\u003ECreating a new script with godot_rust_helper is as simple as:\u003C\u002Fp\u003E\n\u003Cpre class=\"language-bash\"\u003E\u003Ccode class=\"language-bash\"\u003E$ godot_rust_helper create Player\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003EThis creates the \u003Ccode\u003Eplayer.rs\u003C\u002Fcode\u003E script and adds the entry for it in the \u003Ccode\u003Elib.rs\u003C\u002Fcode\u003E file. This even sets up the \u003Ccode\u003Eplayer.rs\u003C\u002Fcode\u003E script with the basic \"hello, world.\" example we showed above to get you started.\u003C\u002Fp\u003E\n\u003Cp\u003EFrom here you can build the project by using:\u003C\u002Fp\u003E\n\u003Cpre class=\"language-bash\"\u003E\u003Ccode class=\"language-bash\"\u003E$ godot_rust_helper build\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003Eor you can run a build that watches for changes with:\u003C\u002Fp\u003E\n\u003Cpre class=\"language-bash\"\u003E\u003Ccode class=\"language-bash\"\u003E$ godot_rust_helper build --watch\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003EThe great thing about building this way is that it automatically moves the dynamic library files to the Godot project so you can run the build then go right back in Godot and press play to see the changes.\u003C\u002Fp\u003E\n\u003Cp\u003EThere are also a few other commands offered by godot_rust_helper so make sure to check out the full documentation including a detailed step-by-step guide on the GitHub \u003Ca href=\"https:\u002F\u002Fgithub.com\u002Frobertcorponoi\u002Fgodot_rust_helper\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003Erepo\u003C\u002Fa\u003E.\u003C\u002Fp\u003E\n","cover_image":{"type":"image","mimeType":"image\u002Fpng","src":"\u002Fassets\u002Fstatic\u002Fusing-rust-with-godot.07cc2b7.740bb04257e00e8c54e37f95a566e89c.png","size":{"width":860,"height":463},"sizes":"(max-width: 860px) 100vw, 860px","srcset":["\u002Fassets\u002Fstatic\u002Fusing-rust-with-godot.a67b0b2.740bb04257e00e8c54e37f95a566e89c.png 480w","\u002Fassets\u002Fstatic\u002Fusing-rust-with-godot.07cc2b7.740bb04257e00e8c54e37f95a566e89c.png 860w"],"dataUri":"data:image\u002Fsvg+xml,%3csvg fill='none' viewBox='0 0 860 463' xmlns='http:\u002F\u002Fwww.w3.org\u002F2000\u002Fsvg' xmlns:xlink='http:\u002F\u002Fwww.w3.org\u002F1999\u002Fxlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-79d0f7e6bafdc50094db086b3b230426'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='10'\u002F%3e%3c\u002Ffilter%3e%3c\u002Fdefs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-79d0f7e6bafdc50094db086b3b230426)' width='860' height='463' xlink:href='data:image\u002Fpng%3bbase64%2ciVBORw0KGgoAAAANSUhEUgAAAEAAAAAiCAYAAADvVd%2bPAAAACXBIWXMAAA7EAAAOxAGVKw4bAAADwUlEQVRo3u1Z6UtUURTvLygIs9Ry1xIqCFq\u002FhVJZZpmjpqaluUxuJC7hUmJmppm5mxWlGeTeJ8dxyaAwNMxAQ53REVxA0DFTUFNH\u002FXXvtTeM5accwfeaA4fDu3fe5Z7fnHPu7563xcLEFP%2bzbtEBoANAuwuaG5ts2GY3Yu0NA8DS1EyrygsAuA1Sa7RzFwx26MNQf%2bf6lKxhRKzm2ps6Asz2GGOvhSVeFRfjfVMT6mqlqK%2brg1RSi9oaCXuW1NRAWkueJZKVMamUWfasMUb1XWMjqioqcejAQZgY7d78KUABsLG2xsjICLQls7OzOHHkKPYYGKrTYXMDYGWNXnkv2\u002Fz8\u002FDyzjQ0NSE9Nw9DgEJIS7%2bJTczPeVlcjPzcXU1NTyEhPR3VlFSrKy\u002FEwNRVKpVINwOjoKI4dPgJjQyP%2bAKBQKNQOfB8fx8Xzjih%2b%2bRJREZG4FRmFQD9\u002FeHtegZeHJ0ROl3A7Lp6NRZN5f9\u002FrWF5eZkplnIBxnM8AzMzM4JqXN9xd3RARHo7rPj64GRYG36vX4HrJGXExMcz50OBglL0pRXpaGntvYWGB\u002FwCoVCpmBwcGWVGj%2bUyL4I%2bJCQwPD6O7q4vN02Inl8lZOvT2rqTP0tIS\u002FwGgTnCOaIpMJsPzp0\u002FxrLAQjfUNf83T8BcMAJzlQvp1SQnLfVr4crNzECQWIzEh4S\u002FHBQcAlX5FP\u002Fbvs4GD\u002FVnciY9nRS%2bPnAQebpdRXlbGfrO4uCisCKDOcLUgJysbyUlJcHJ0hN3Jk3ATubAToqy0FKFBweooECwAKfeSkZ2ZCVdnEU7Z2pLq7wfHcw7IevyYpIWHcAGgYU3lc2sro7QOZ%2bzZ2d\u002FT3Y0AAsL2rdvwJD9fmCnwZ3FLS3kAP8IFKDv80tZGyFEEC\u002F\u002Fp6ek164YgIkDTISrVVVUQ%2bwcwAkTDn3NekCnAhTVnfxIytNa5Txnj3NycekwQAKh%2bn\u002F30H8\u002FOzCJn\u002FyNER0YiMyODsUB68REHBDCK\u002FCS\u002FACE3glBcVLSKRfIaAI78FOTlwdPdHUGBYnYviI%2bNRWFBAcKCQ1D04gUbS0m%2bj9N2dgwcwQDAhT7l\u002FePkVthHeH5rSwu%2bdXbi44ePkPX0sPnOjg58bW9n12i5XL4qBZS8BKCvTw3AWncBTeH%2baU2h73DgKcfG%2bNcPGBwY0FpHaHJyciUC%2bNARok1LuknK7i4TmutC7vuuzv%2bo5F03kYjQ5gusz0jB5U1XmHZ0DfR2sM7wulRvpbPMm66w5ncBKzNzraglUd58GNF9G9QBoANABwCf9BfK%2bASnSZEhFwAAAABJRU5ErkJggg==' \u002F%3e%3c\u002Fsvg%3e"}}},"context":{}};(function(){var s;(s=document.currentScript||document.scripts[document.scripts.length-1]).parentNode.removeChild(s);}());</script><script src="/assets/js/app.1b9cc82c.js" defer></script><script src="/assets/js/page--src-templates-post-vue.ed68cdd5.js" defer></script>
</body>

</html>